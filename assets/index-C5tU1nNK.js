(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))p(m);new MutationObserver(m=>{for(const g of m)if(g.type==="childList")for(const E of g.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&p(E)}).observe(document,{childList:!0,subtree:!0});function f(m){const g={};return m.integrity&&(g.integrity=m.integrity),m.referrerPolicy&&(g.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?g.credentials="include":m.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function p(m){if(m.ep)return;m.ep=!0;const g=f(m);fetch(m.href,g)}})();var li=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var If={exports:{}},Ul={};var Gh;function kx(){if(Gh)return Ul;Gh=1;var u=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function f(p,m,g){var E=null;if(g!==void 0&&(E=""+g),m.key!==void 0&&(E=""+m.key),"key"in m){g={};for(var C in m)C!=="key"&&(g[C]=m[C])}else g=m;return m=g.ref,{$$typeof:u,type:p,key:E,ref:m!==void 0?m:null,props:g}}return Ul.Fragment=d,Ul.jsx=f,Ul.jsxs=f,Ul}var Vh;function Lx(){return Vh||(Vh=1,If.exports=kx()),If.exports}var A=Lx(),Df={exports:{}},Nt={};var Xh;function jx(){if(Xh)return Nt;Xh=1;var u=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),R=Symbol.iterator;function T(q){return q===null||typeof q!="object"?null:(q=R&&q[R]||q["@@iterator"],typeof q=="function"?q:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,z={};function j(q,ne,Oe){this.props=q,this.context=ne,this.refs=z,this.updater=Oe||k}j.prototype.isReactComponent={},j.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},j.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function P(){}P.prototype=j.prototype;function H(q,ne,Oe){this.props=q,this.context=ne,this.refs=z,this.updater=Oe||k}var K=H.prototype=new P;K.constructor=H,I(K,j.prototype),K.isPureReactComponent=!0;var Z=Array.isArray;function V(){}var L={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function G(q,ne,Oe){var Te=Oe.ref;return{$$typeof:u,type:q,key:ne,ref:Te!==void 0?Te:null,props:Oe}}function xe(q,ne){return G(q.type,ne,q.props)}function ce(q){return typeof q=="object"&&q!==null&&q.$$typeof===u}function X(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Oe){return ne[Oe]})}var ie=/\/+/g;function M(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?X(""+q.key):ne.toString(36)}function ae(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(V,V):(q.status="pending",q.then(function(ne){q.status==="pending"&&(q.status="fulfilled",q.value=ne)},function(ne){q.status==="pending"&&(q.status="rejected",q.reason=ne)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function me(q,ne,Oe,Te,je){var ze=typeof q;(ze==="undefined"||ze==="boolean")&&(q=null);var ct=!1;if(q===null)ct=!0;else switch(ze){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(q.$$typeof){case u:case d:ct=!0;break;case N:return ct=q._init,me(ct(q._payload),ne,Oe,Te,je)}}if(ct)return je=je(q),ct=Te===""?"."+M(q,0):Te,Z(je)?(Oe="",ct!=null&&(Oe=ct.replace(ie,"$&/")+"/"),me(je,ne,Oe,"",function(ut){return ut})):je!=null&&(ce(je)&&(je=xe(je,Oe+(je.key==null||q&&q.key===je.key?"":(""+je.key).replace(ie,"$&/")+"/")+ct)),ne.push(je)),1;ct=0;var nt=Te===""?".":Te+":";if(Z(q))for(var st=0;st<q.length;st++)Te=q[st],ze=nt+M(Te,st),ct+=me(Te,ne,Oe,ze,je);else if(st=T(q),typeof st=="function")for(q=st.call(q),st=0;!(Te=q.next()).done;)Te=Te.value,ze=nt+M(Te,st++),ct+=me(Te,ne,Oe,ze,je);else if(ze==="object"){if(typeof q.then=="function")return me(ae(q),ne,Oe,Te,je);throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ct}function re(q,ne,Oe){if(q==null)return q;var Te=[],je=0;return me(q,Te,"","",function(ze){return ne.call(Oe,ze,je++)}),Te}function Ye(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(Oe){(q._status===0||q._status===-1)&&(q._status=1,q._result=Oe)},function(Oe){(q._status===0||q._status===-1)&&(q._status=2,q._result=Oe)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var ke=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Je={map:re,forEach:function(q,ne,Oe){re(q,function(){ne.apply(this,arguments)},Oe)},count:function(q){var ne=0;return re(q,function(){ne++}),ne},toArray:function(q){return re(q,function(ne){return ne})||[]},only:function(q){if(!ce(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Nt.Activity=_,Nt.Children=Je,Nt.Component=j,Nt.Fragment=f,Nt.Profiler=m,Nt.PureComponent=H,Nt.StrictMode=p,Nt.Suspense=v,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return L.H.useMemoCache(q)}},Nt.cache=function(q){return function(){return q.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(q,ne,Oe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Te=I({},q.props),je=q.key;if(ne!=null)for(ze in ne.key!==void 0&&(je=""+ne.key),ne)!Q.call(ne,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&ne.ref===void 0||(Te[ze]=ne[ze]);var ze=arguments.length-2;if(ze===1)Te.children=Oe;else if(1<ze){for(var ct=Array(ze),nt=0;nt<ze;nt++)ct[nt]=arguments[nt+2];Te.children=ct}return G(q.type,je,Te)},Nt.createContext=function(q){return q={$$typeof:E,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:g,_context:q},q},Nt.createElement=function(q,ne,Oe){var Te,je={},ze=null;if(ne!=null)for(Te in ne.key!==void 0&&(ze=""+ne.key),ne)Q.call(ne,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(je[Te]=ne[Te]);var ct=arguments.length-2;if(ct===1)je.children=Oe;else if(1<ct){for(var nt=Array(ct),st=0;st<ct;st++)nt[st]=arguments[st+2];je.children=nt}if(q&&q.defaultProps)for(Te in ct=q.defaultProps,ct)je[Te]===void 0&&(je[Te]=ct[Te]);return G(q,ze,je)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(q){return{$$typeof:C,render:q}},Nt.isValidElement=ce,Nt.lazy=function(q){return{$$typeof:N,_payload:{_status:-1,_result:q},_init:Ye}},Nt.memo=function(q,ne){return{$$typeof:y,type:q,compare:ne===void 0?null:ne}},Nt.startTransition=function(q){var ne=L.T,Oe={};L.T=Oe;try{var Te=q(),je=L.S;je!==null&&je(Oe,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(V,ke)}catch(ze){ke(ze)}finally{ne!==null&&Oe.types!==null&&(ne.types=Oe.types),L.T=ne}},Nt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Nt.use=function(q){return L.H.use(q)},Nt.useActionState=function(q,ne,Oe){return L.H.useActionState(q,ne,Oe)},Nt.useCallback=function(q,ne){return L.H.useCallback(q,ne)},Nt.useContext=function(q){return L.H.useContext(q)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(q,ne){return L.H.useDeferredValue(q,ne)},Nt.useEffect=function(q,ne){return L.H.useEffect(q,ne)},Nt.useEffectEvent=function(q){return L.H.useEffectEvent(q)},Nt.useId=function(){return L.H.useId()},Nt.useImperativeHandle=function(q,ne,Oe){return L.H.useImperativeHandle(q,ne,Oe)},Nt.useInsertionEffect=function(q,ne){return L.H.useInsertionEffect(q,ne)},Nt.useLayoutEffect=function(q,ne){return L.H.useLayoutEffect(q,ne)},Nt.useMemo=function(q,ne){return L.H.useMemo(q,ne)},Nt.useOptimistic=function(q,ne){return L.H.useOptimistic(q,ne)},Nt.useReducer=function(q,ne,Oe){return L.H.useReducer(q,ne,Oe)},Nt.useRef=function(q){return L.H.useRef(q)},Nt.useState=function(q){return L.H.useState(q)},Nt.useSyncExternalStore=function(q,ne,Oe){return L.H.useSyncExternalStore(q,ne,Oe)},Nt.useTransition=function(){return L.H.useTransition()},Nt.version="19.2.4",Nt}var Yh;function Td(){return Yh||(Yh=1,Df.exports=jx()),Df.exports}var oe=Td();const jr=Kl(oe);var Of={exports:{}},Fl={},Mf={exports:{}},Bf={};var Zh;function zx(){return Zh||(Zh=1,(function(u){function d(me,re){var Ye=me.length;me.push(re);e:for(;0<Ye;){var ke=Ye-1>>>1,Je=me[ke];if(0<m(Je,re))me[ke]=re,me[Ye]=Je,Ye=ke;else break e}}function f(me){return me.length===0?null:me[0]}function p(me){if(me.length===0)return null;var re=me[0],Ye=me.pop();if(Ye!==re){me[0]=Ye;e:for(var ke=0,Je=me.length,q=Je>>>1;ke<q;){var ne=2*(ke+1)-1,Oe=me[ne],Te=ne+1,je=me[Te];if(0>m(Oe,Ye))Te<Je&&0>m(je,Oe)?(me[ke]=je,me[Te]=Ye,ke=Te):(me[ke]=Oe,me[ne]=Ye,ke=ne);else if(Te<Je&&0>m(je,Ye))me[ke]=je,me[Te]=Ye,ke=Te;else break e}}return re}function m(me,re){var Ye=me.sortIndex-re.sortIndex;return Ye!==0?Ye:me.id-re.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;u.unstable_now=function(){return g.now()}}else{var E=Date,C=E.now();u.unstable_now=function(){return E.now()-C}}var v=[],y=[],N=1,_=null,R=3,T=!1,k=!1,I=!1,z=!1,j=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function K(me){for(var re=f(y);re!==null;){if(re.callback===null)p(y);else if(re.startTime<=me)p(y),re.sortIndex=re.expirationTime,d(v,re);else break;re=f(y)}}function Z(me){if(I=!1,K(me),!k)if(f(v)!==null)k=!0,V||(V=!0,X());else{var re=f(y);re!==null&&ae(Z,re.startTime-me)}}var V=!1,L=-1,Q=5,G=-1;function xe(){return z?!0:!(u.unstable_now()-G<Q)}function ce(){if(z=!1,V){var me=u.unstable_now();G=me;var re=!0;try{e:{k=!1,I&&(I=!1,P(L),L=-1),T=!0;var Ye=R;try{t:{for(K(me),_=f(v);_!==null&&!(_.expirationTime>me&&xe());){var ke=_.callback;if(typeof ke=="function"){_.callback=null,R=_.priorityLevel;var Je=ke(_.expirationTime<=me);if(me=u.unstable_now(),typeof Je=="function"){_.callback=Je,K(me),re=!0;break t}_===f(v)&&p(v),K(me)}else p(v);_=f(v)}if(_!==null)re=!0;else{var q=f(y);q!==null&&ae(Z,q.startTime-me),re=!1}}break e}finally{_=null,R=Ye,T=!1}re=void 0}}finally{re?X():V=!1}}}var X;if(typeof H=="function")X=function(){H(ce)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,M=ie.port2;ie.port1.onmessage=ce,X=function(){M.postMessage(null)}}else X=function(){j(ce,0)};function ae(me,re){L=j(function(){me(u.unstable_now())},re)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(me){me.callback=null},u.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<me?Math.floor(1e3/me):5},u.unstable_getCurrentPriorityLevel=function(){return R},u.unstable_next=function(me){switch(R){case 1:case 2:case 3:var re=3;break;default:re=R}var Ye=R;R=re;try{return me()}finally{R=Ye}},u.unstable_requestPaint=function(){z=!0},u.unstable_runWithPriority=function(me,re){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ye=R;R=me;try{return re()}finally{R=Ye}},u.unstable_scheduleCallback=function(me,re,Ye){var ke=u.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?ke+Ye:ke):Ye=ke,me){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=Ye+Je,me={id:N++,callback:re,priorityLevel:me,startTime:Ye,expirationTime:Je,sortIndex:-1},Ye>ke?(me.sortIndex=Ye,d(y,me),f(v)===null&&me===f(y)&&(I?(P(L),L=-1):I=!0,ae(Z,Ye-ke))):(me.sortIndex=Je,d(v,me),k||T||(k=!0,V||(V=!0,X()))),me},u.unstable_shouldYield=xe,u.unstable_wrapCallback=function(me){var re=R;return function(){var Ye=R;R=re;try{return me.apply(this,arguments)}finally{R=Ye}}}})(Bf)),Bf}var qh;function Ux(){return qh||(qh=1,Mf.exports=zx()),Mf.exports}var kf={exports:{}},wr={};var Wh;function Fx(){if(Wh)return wr;Wh=1;var u=Td();function d(v){var y="https://react.dev/errors/"+v;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)y+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+v+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var p={d:{f,r:function(){throw Error(d(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},m=Symbol.for("react.portal");function g(v,y,N){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:_==null?null:""+_,children:v,containerInfo:y,implementation:N}}var E=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function C(v,y){if(v==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return wr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,wr.createPortal=function(v,y){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(d(299));return g(v,y,null,N)},wr.flushSync=function(v){var y=E.T,N=p.p;try{if(E.T=null,p.p=2,v)return v()}finally{E.T=y,p.p=N,p.d.f()}},wr.preconnect=function(v,y){typeof v=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,p.d.C(v,y))},wr.prefetchDNS=function(v){typeof v=="string"&&p.d.D(v)},wr.preinit=function(v,y){if(typeof v=="string"&&y&&typeof y.as=="string"){var N=y.as,_=C(N,y.crossOrigin),R=typeof y.integrity=="string"?y.integrity:void 0,T=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;N==="style"?p.d.S(v,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:R,fetchPriority:T}):N==="script"&&p.d.X(v,{crossOrigin:_,integrity:R,fetchPriority:T,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},wr.preinitModule=function(v,y){if(typeof v=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var N=C(y.as,y.crossOrigin);p.d.M(v,{crossOrigin:N,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&p.d.M(v)},wr.preload=function(v,y){if(typeof v=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var N=y.as,_=C(N,y.crossOrigin);p.d.L(v,N,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},wr.preloadModule=function(v,y){if(typeof v=="string")if(y){var N=C(y.as,y.crossOrigin);p.d.m(v,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:N,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else p.d.m(v)},wr.requestFormReset=function(v){p.d.r(v)},wr.unstable_batchedUpdates=function(v,y){return v(y)},wr.useFormState=function(v,y,N){return E.H.useFormState(v,y,N)},wr.useFormStatus=function(){return E.H.useHostTransitionStatus()},wr.version="19.2.4",wr}var Kh;function g2(){if(Kh)return kf.exports;Kh=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(d){console.error(d)}}return u(),kf.exports=Fx(),kf.exports}var Qh;function Px(){if(Qh)return Fl;Qh=1;var u=Ux(),d=Td(),f=g2();function p(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function g(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function E(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function C(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function v(e){if(g(e)!==e)throw Error(p(188))}function y(e){var n=e.alternate;if(!n){if(n=g(e),n===null)throw Error(p(188));return n!==e?null:e}for(var a=e,o=n;;){var x=a.return;if(x===null)break;var w=x.alternate;if(w===null){if(o=x.return,o!==null){a=o;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===a)return v(x),e;if(w===o)return v(x),n;w=w.sibling}throw Error(p(188))}if(a.return!==o.return)a=x,o=w;else{for(var B=!1,W=x.child;W;){if(W===a){B=!0,a=x,o=w;break}if(W===o){B=!0,o=x,a=w;break}W=W.sibling}if(!B){for(W=w.child;W;){if(W===a){B=!0,a=w,o=x;break}if(W===o){B=!0,o=w,a=x;break}W=W.sibling}if(!B)throw Error(p(189))}}if(a.alternate!==o)throw Error(p(190))}if(a.tag!==3)throw Error(p(188));return a.stateNode.current===a?e:n}function N(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=N(e),n!==null)return n;e=e.sibling}return null}var _=Object.assign,R=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),H=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=ce&&e[ce]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Symbol.for("react.client.reference");function M(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ie?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case Z:return"Suspense";case V:return"SuspenseList";case G:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case H:return e.displayName||"Context";case P:return(e._context.displayName||"Context")+".Consumer";case K:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return n=e.displayName||null,n!==null?n:M(e.type)||"Memo";case Q:n=e._payload,e=e._init;try{return M(e(n))}catch{}}return null}var ae=Array.isArray,me=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye={pending:!1,data:null,method:null,action:null},ke=[],Je=-1;function q(e){return{current:e}}function ne(e){0>Je||(e.current=ke[Je],ke[Je]=null,Je--)}function Oe(e,n){Je++,ke[Je]=e.current,e.current=n}var Te=q(null),je=q(null),ze=q(null),ct=q(null);function nt(e,n){switch(Oe(ze,n),Oe(je,e),Oe(Te,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?dh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=dh(n),e=hh(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(Te),Oe(Te,e)}function st(){ne(Te),ne(je),ne(ze)}function ut(e){e.memoizedState!==null&&Oe(ct,e);var n=Te.current,a=hh(n,e.type);n!==a&&(Oe(je,e),Oe(Te,a))}function Ct(e){je.current===e&&(ne(Te),ne(je)),ct.current===e&&(ne(ct),kl._currentValue=Ye)}var Qt,xt;function D(e){if(Qt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Qt=n&&n[1]||"",xt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qt+e+xt}var Ne=!1;function _e(e,n){if(!e||Ne)return"";Ne=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Le){var De=Le}Reflect.construct(e,[],Xe)}else{try{Xe.call()}catch(Le){De=Le}e.call(Xe.prototype)}}else{try{throw Error()}catch(Le){De=Le}(Xe=e())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Le){if(Le&&De&&typeof Le.stack=="string")return[Le.stack,De.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=o.DetermineComponentFrameRoot(),B=w[0],W=w[1];if(B&&W){var fe=B.split(`
`),Ie=W.split(`
`);for(x=o=0;o<fe.length&&!fe[o].includes("DetermineComponentFrameRoot");)o++;for(;x<Ie.length&&!Ie[x].includes("DetermineComponentFrameRoot");)x++;if(o===fe.length||x===Ie.length)for(o=fe.length-1,x=Ie.length-1;1<=o&&0<=x&&fe[o]!==Ie[x];)x--;for(;1<=o&&0<=x;o--,x--)if(fe[o]!==Ie[x]){if(o!==1||x!==1)do if(o--,x--,0>x||fe[o]!==Ie[x]){var He=`
`+fe[o].replace(" at new "," at ");return e.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",e.displayName)),He}while(1<=o&&0<=x);break}}}finally{Ne=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?D(a):""}function le(e,n){switch(e.tag){case 26:case 27:case 5:return D(e.type);case 16:return D("Lazy");case 13:return e.child!==n&&n!==null?D("Suspense Fallback"):D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return _e(e.type,!1);case 11:return _e(e.type.render,!1);case 1:return _e(e.type,!0);case 31:return D("Activity");default:return""}}function te(e){try{var n="",a=null;do n+=le(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var he=Object.prototype.hasOwnProperty,Pe=u.unstable_scheduleCallback,Ee=u.unstable_cancelCallback,Se=u.unstable_shouldYield,et=u.unstable_requestPaint,tt=u.unstable_now,it=u.unstable_getCurrentPriorityLevel,ot=u.unstable_ImmediatePriority,It=u.unstable_UserBlockingPriority,pt=u.unstable_NormalPriority,kt=u.unstable_LowPriority,dr=u.unstable_IdlePriority,dn=u.log,Cr=u.unstable_setDisableYieldValue,bt=null,qe=null;function jt(e){if(typeof dn=="function"&&Cr(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(bt,e)}catch{}}var mt=Math.clz32?Math.clz32:oi,Jt=Math.log,Er=Math.LN2;function oi(e){return e>>>=0,e===0?32:31-(Jt(e)/Er|0)|0}var qn=256,Rt=262144,Ut=4194304;function en(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Mn(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var x=0,w=e.suspendedLanes,B=e.pingedLanes;e=e.warmLanes;var W=o&134217727;return W!==0?(o=W&~w,o!==0?x=en(o):(B&=W,B!==0?x=en(B):a||(a=W&~e,a!==0&&(x=en(a))))):(W=o&~w,W!==0?x=en(W):B!==0?x=en(B):a||(a=o&~e,a!==0&&(x=en(a)))),x===0?0:n!==0&&n!==x&&(n&w)===0&&(w=x&-x,a=n&-n,w>=a||w===32&&(a&4194048)!==0)?n:x}function xn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Wn(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yt(){var e=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),e}function Bn(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function tr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tn(e,n,a,o,x,w){var B=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var W=e.entanglements,fe=e.expirationTimes,Ie=e.hiddenUpdates;for(a=B&~a;0<a;){var He=31-mt(a),Xe=1<<He;W[He]=0,fe[He]=-1;var De=Ie[He];if(De!==null)for(Ie[He]=null,He=0;He<De.length;He++){var Le=De[He];Le!==null&&(Le.lane&=-536870913)}a&=~Xe}o!==0&&Ar(e,o,0),w!==0&&x===0&&e.tag!==0&&(e.suspendedLanes|=w&~(B&~n))}function Ar(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-mt(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function kn(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-mt(a),x=1<<o;x&n|e[o]&n&&(e[o]|=n),a&=~x}}function or(e,n){var a=n&-n;return a=(a&42)!==0?1:vn(a),(a&(e.suspendedLanes|n))!==0?0:a}function vn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function nr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function An(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:Lh(e.type))}function lt(e,n){var a=re.p;try{return re.p=e,n()}finally{re.p=a}}var Hn=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Hn,an="__reactProps$"+Hn,Sr="__reactContainer$"+Hn,mi="__reactEvents$"+Hn,ta="__reactListeners$"+Hn,Rr="__reactHandles$"+Hn,ss="__reactResources$"+Hn,Di="__reactMarker$"+Hn;function br(e){delete e[Ln],delete e[an],delete e[mi],delete e[ta],delete e[Rr]}function In(e){var n=e[Ln];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Sr]||a[Ln]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=vh(e);e!==null;){if(a=e[Ln])return a;e=vh(e)}return n}e=a,a=e.parentNode}return null}function $t(e){if(e=e[Ln]||e[Sr]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ci(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(p(33))}function Gn(e){var n=e[ss];return n||(n=e[ss]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function _n(e){e[Di]=!0}var Ve=new Set,ls={};function Zt(e,n){hr(e,n),hr(e+"Capture",n)}function hr(e,n){for(ls[e]=n,e=0;e<n.length;e++)Ve.add(n[e])}var Qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qt={},zt={};function Lt(e){return he.call(zt,e)?!0:he.call(qt,e)?!1:Qs.test(e)?zt[e]=!0:(qt[e]=!0,!1)}function yi(e,n,a){if(Lt(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function J(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function ue(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function ee(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ve(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ce(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var x=o.get,w=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return x.call(this)},set:function(B){a=""+B,w.call(this,B)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(B){a=""+B},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function pe(e){if(!e._valueTracker){var n=ve(e)?"checked":"value";e._valueTracker=Ce(e,n,""+e[n])}}function Fe(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=ve(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function We(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qe=/[\n"\\]/g;function Ue(e){return e.replace(Qe,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ke(e,n,a,o,x,w,B,W){e.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.type=B:e.removeAttribute("type"),n!=null?B==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ee(n)):e.value!==""+ee(n)&&(e.value=""+ee(n)):B!=="submit"&&B!=="reset"||e.removeAttribute("value"),n!=null?$(e,B,ee(n)):a!=null?$(e,B,ee(a)):o!=null&&e.removeAttribute("value"),x==null&&w!=null&&(e.defaultChecked=!!w),x!=null&&(e.checked=x&&typeof x!="function"&&typeof x!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?e.name=""+ee(W):e.removeAttribute("name")}function de(e,n,a,o,x,w,B,W){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||a!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){pe(e);return}a=a!=null?""+ee(a):"",n=n!=null?""+ee(n):a,W||n===e.value||(e.value=n),e.defaultValue=n}o=o??x,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=W?e.checked:!!o,e.defaultChecked=!!o,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(e.name=B),pe(e)}function $(e,n,a){n==="number"&&We(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function at(e,n,a,o){if(e=e.options,n){n={};for(var x=0;x<a.length;x++)n["$"+a[x]]=!0;for(a=0;a<e.length;a++)x=n.hasOwnProperty("$"+e[a].value),e[a].selected!==x&&(e[a].selected=x),x&&o&&(e[a].defaultSelected=!0)}else{for(a=""+ee(a),n=null,x=0;x<e.length;x++){if(e[x].value===a){e[x].selected=!0,o&&(e[x].defaultSelected=!0);return}n!==null||e[x].disabled||(n=e[x])}n!==null&&(n.selected=!0)}}function Et(e,n,a){if(n!=null&&(n=""+ee(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ee(a):""}function Ht(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(p(92));if(ae(o)){if(1<o.length)throw Error(p(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=ee(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),pe(e)}function on(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var cr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vn(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||cr.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function gt(e,n,a){if(n!=null&&typeof n!="object")throw Error(p(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var x in n)o=n[x],n.hasOwnProperty(x)&&a[x]!==o&&Vn(e,x,o)}else for(var w in n)n.hasOwnProperty(w)&&Vn(e,w,n[w])}function hn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var na=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),to=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bi(e){return to.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function vr(){}var vi=null;function Js(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tn=null,Wr=null;function ui(e){var n=$t(e);if(n&&(e=n.stateNode)){var a=e[an]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ke(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ue(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var x=o[an]||null;if(!x)throw Error(p(90));Ke(o,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Fe(o)}break e;case"textarea":Et(e,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&at(e,!!a.multiple,n,!1)}}}var vt=!1;function no(e,n,a){if(vt)return e(n,a);vt=!0;try{var o=e(n);return o}finally{if(vt=!1,(Tn!==null||Wr!==null)&&(qo(),Tn&&(n=Tn,e=Wr,Wr=Tn=null,ui(n),e)))for(n=0;n<e.length;n++)ui(e[n])}}function _t(e,n){var a=e.stateNode;if(a===null)return null;var o=a[an]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(p(231,n,typeof a));return a}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$s=!1;if(wn)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){$s=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{$s=!1}var fi=null,di=null,os=null;function ra(){if(os)return os;var e,n=di,a=n.length,o,x="value"in fi?fi.value:fi.textContent,w=x.length;for(e=0;e<a&&n[e]===x[e];e++);var B=a-e;for(o=1;o<=B&&n[a-o]===x[w-o];o++);return os=x.slice(e,1<o?1-o:void 0)}function wi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ci(){return!0}function el(){return!1}function Kn(e){function n(a,o,x,w,B){this._reactName=a,this._targetInst=x,this.type=o,this.nativeEvent=w,this.target=B,this.currentTarget=null;for(var W in e)e.hasOwnProperty(W)&&(a=e[W],this[W]=a?a(w):w[W]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ci:el,this.isPropagationStopped=el,this}return _(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ci)},persist:function(){},isPersistent:Ci}),n}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rr=Kn(Ur),ia=_({},Ur,{view:0,detail:0}),ro=Kn(ia),cs,tl,La,us=_({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ja,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==La&&(La&&e.type==="mousemove"?(cs=e.screenX-La.screenX,tl=e.screenY-La.screenY):tl=cs=0,La=e),cs)},movementY:function(e){return"movementY"in e?e.movementY:tl}}),sn=Kn(us),io=_({},us,{dataTransfer:0}),fs=Kn(io),Ei=_({},ia,{relatedTarget:0}),nl=Kn(Ei),Be=_({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Ot=Kn(Be),ir=_({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ds=Kn(ir),ao=_({},Ur,{data:0}),so=Kn(ao),zc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=rl[e])?!!n[e]:!1}function ja(){return Xn}var Dn=_({},ia,{key:function(e){if(e.key){var n=zc[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ja,charCode:function(e){return e.type==="keypress"?wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hs=Kn(Dn),Mi=_({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cn=Kn(Mi),wt=_({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ja}),Fc=Kn(wt),Cn=_({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bi=Kn(Cn),aa=_({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pc=Kn(aa),Kr=_({},Ur,{newState:0,oldState:0}),il=Kn(Kr),lo=[9,13,27,32],za=wn&&"CompositionEvent"in window,sa=null;wn&&"documentMode"in document&&(sa=document.documentMode);var oo=wn&&"TextEvent"in window&&!sa,co=wn&&(!za||sa&&8<sa&&11>=sa),ki=" ",gs=!1;function uo(e,n){switch(e){case"keyup":return lo.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function la(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var oa=!1;function Ai(e,n){switch(e){case"compositionend":return la(n);case"keypress":return n.which!==32?null:(gs=!0,ki);case"textInput":return e=n.data,e===ki&&gs?null:e;default:return null}}function ps(e,n){if(oa)return e==="compositionend"||!za&&uo(e,n)?(e=ra(),os=di=fi=null,oa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return co&&n.locale!=="ko"?null:n.data;default:return null}}var Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function al(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Ir[e.type]:n==="textarea"}function Fr(e,n,a,o){Tn?Wr?Wr.push(o):Wr=[o]:Tn=o,n=tc(n,"onChange"),0<n.length&&(a=new rr("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Ua=null,Li=null;function Hc(e){sh(e,0)}function Fa(e){var n=ci(e);if(Fe(n))return e}function Pr(e,n){if(e==="change")return n}var fo=!1;if(wn){var Pa;if(wn){var ji="oninput"in document;if(!ji){var Gt=document.createElement("div");Gt.setAttribute("oninput","return;"),ji=typeof Gt.oninput=="function"}Pa=ji}else Pa=!1;fo=Pa&&(!document.documentMode||9<document.documentMode)}function Ha(){Ua&&(Ua.detachEvent("onpropertychange",U),Li=Ua=null)}function U(e){if(e.propertyName==="value"&&Fa(Li)){var n=[];Fr(n,Li,e,Js(e)),no(Hc,n)}}function t(e,n,a){e==="focusin"?(Ha(),Ua=n,Li=a,Ua.attachEvent("onpropertychange",U)):e==="focusout"&&Ha()}function r(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fa(Li)}function i(e,n){if(e==="click")return Fa(n)}function s(e,n){if(e==="input"||e==="change")return Fa(n)}function l(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var c=typeof Object.is=="function"?Object.is:l;function h(e,n){if(c(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var x=a[o];if(!he.call(n,x)||!c(e[x],n[x]))return!1}return!0}function b(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function S(e,n){var a=b(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=b(a)}}function O(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?O(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function F(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=We(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=We(e.document)}return n}function Y(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var se=wn&&"documentMode"in document&&11>=document.documentMode,ge=null,ye=null,Ae=null,Me=!1;function rt(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Me||ge==null||ge!==We(o)||(o=ge,"selectionStart"in o&&Y(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ae&&h(Ae,o)||(Ae=o,o=tc(ye,"onSelect"),0<o.length&&(n=new rr("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=ge)))}function $e(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ze={animationend:$e("Animation","AnimationEnd"),animationiteration:$e("Animation","AnimationIteration"),animationstart:$e("Animation","AnimationStart"),transitionrun:$e("Transition","TransitionRun"),transitionstart:$e("Transition","TransitionStart"),transitioncancel:$e("Transition","TransitionCancel"),transitionend:$e("Transition","TransitionEnd")},Bt={},Tt={};wn&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Ze.animationend.animation,delete Ze.animationiteration.animation,delete Ze.animationstart.animation),"TransitionEvent"in window||delete Ze.transitionend.transition);function zn(e){if(Bt[e])return Bt[e];if(!Ze[e])return e;var n=Ze[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Tt)return Bt[e]=n[a];return e}var Dr=zn("animationend"),gr=zn("animationiteration"),un=zn("animationstart"),ar=zn("transitionrun"),_r=zn("transitionstart"),ca=zn("transitioncancel"),zi=zn("transitionend"),ho=new Map,sl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sl.push("scrollEnd");function hi(e,n){ho.set(e,n),Zt(n,[e])}var go=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Qr=[],xs=0,Gc=0;function po(){for(var e=xs,n=Gc=xs=0;n<e;){var a=Qr[n];Qr[n++]=null;var o=Qr[n];Qr[n++]=null;var x=Qr[n];Qr[n++]=null;var w=Qr[n];if(Qr[n++]=null,o!==null&&x!==null){var B=o.pending;B===null?x.next=x:(x.next=B.next,B.next=x),o.pending=x}w!==0&&Pd(a,x,w)}}function xo(e,n,a,o){Qr[xs++]=e,Qr[xs++]=n,Qr[xs++]=a,Qr[xs++]=o,Gc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Vc(e,n,a,o){return xo(e,n,a,o),mo(e)}function Ga(e,n){return xo(e,null,null,n),mo(e)}function Pd(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var x=!1,w=e.return;w!==null;)w.childLanes|=a,o=w.alternate,o!==null&&(o.childLanes|=a),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(x=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,x&&n!==null&&(x=31-mt(a),e=w.hiddenUpdates,o=e[x],o===null?e[x]=[n]:o.push(n),n.lane=a|536870912),w):null}function mo(e){if(50<Nl)throw Nl=0,$u=null,Error(p(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ms={};function yp(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(e,n,a,o){return new yp(e,n,a,o)}function Xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ui(e,n){var a=e.alternate;return a===null?(a=Hr(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Hd(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function yo(e,n,a,o,x,w){var B=0;if(o=e,typeof e=="function")Xc(e)&&(B=1);else if(typeof e=="string")B=Ex(e,a,Te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case G:return e=Hr(31,a,n,x),e.elementType=G,e.lanes=w,e;case I:return Va(a.children,x,w,n);case z:B=8,x|=24;break;case j:return e=Hr(12,a,n,x|2),e.elementType=j,e.lanes=w,e;case Z:return e=Hr(13,a,n,x),e.elementType=Z,e.lanes=w,e;case V:return e=Hr(19,a,n,x),e.elementType=V,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:B=10;break e;case P:B=9;break e;case K:B=11;break e;case L:B=14;break e;case Q:B=16,o=null;break e}B=29,a=Error(p(130,e===null?"null":typeof e,"")),o=null}return n=Hr(B,a,n,x),n.elementType=e,n.type=o,n.lanes=w,n}function Va(e,n,a,o){return e=Hr(7,e,o,n),e.lanes=a,e}function Yc(e,n,a){return e=Hr(6,e,null,n),e.lanes=a,e}function Gd(e){var n=Hr(18,null,null,0);return n.stateNode=e,n}function Zc(e,n,a){return n=Hr(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Vd=new WeakMap;function Jr(e,n){if(typeof e=="object"&&e!==null){var a=Vd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:te(n)},Vd.set(e,n),n)}return{value:e,source:n,stack:te(n)}}var ys=[],bs=0,bo=null,ll=0,$r=[],ei=0,ua=null,Si=1,_i="";function Fi(e,n){ys[bs++]=ll,ys[bs++]=bo,bo=e,ll=n}function Xd(e,n,a){$r[ei++]=Si,$r[ei++]=_i,$r[ei++]=ua,ua=e;var o=Si;e=_i;var x=32-mt(o)-1;o&=~(1<<x),a+=1;var w=32-mt(n)+x;if(30<w){var B=x-x%5;w=(o&(1<<B)-1).toString(32),o>>=B,x-=B,Si=1<<32-mt(n)+x|a<<x|o,_i=w+e}else Si=1<<w|a<<x|o,_i=e}function qc(e){e.return!==null&&(Fi(e,1),Xd(e,1,0))}function Wc(e){for(;e===bo;)bo=ys[--bs],ys[bs]=null,ll=ys[--bs],ys[bs]=null;for(;e===ua;)ua=$r[--ei],$r[ei]=null,_i=$r[--ei],$r[ei]=null,Si=$r[--ei],$r[ei]=null}function Yd(e,n){$r[ei++]=Si,$r[ei++]=_i,$r[ei++]=ua,Si=n.id,_i=n.overflow,ua=e}var pr=null,Nn=null,Wt=!1,fa=null,ti=!1,Kc=Error(p(519));function da(e){var n=Error(p(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(Jr(n,e)),Kc}function Zd(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Ln]=e,n[an]=o,a){case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":case"embed":Pt("load",n);break;case"video":case"audio":for(a=0;a<Il.length;a++)Pt(Il[a],n);break;case"source":Pt("error",n);break;case"img":case"image":case"link":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"input":Pt("invalid",n),de(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Pt("invalid",n);break;case"textarea":Pt("invalid",n),Ht(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||uh(n.textContent,a)?(o.popover!=null&&(Pt("beforetoggle",n),Pt("toggle",n)),o.onScroll!=null&&Pt("scroll",n),o.onScrollEnd!=null&&Pt("scrollend",n),o.onClick!=null&&(n.onclick=vr),n=!0):n=!1,n||da(e,!0)}function qd(e){for(pr=e.return;pr;)switch(pr.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:pr=pr.return}}function vs(e){if(e!==pr)return!1;if(!Wt)return qd(e),Wt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||pf(e.type,e.memoizedProps)),a=!a),a&&Nn&&da(e),qd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));Nn=bh(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));Nn=bh(e)}else n===27?(n=Nn,_a(e.type)?(e=vf,vf=null,Nn=e):Nn=n):Nn=pr?ri(e.stateNode.nextSibling):null;return!0}function Xa(){Nn=pr=null,Wt=!1}function Qc(){var e=fa;return e!==null&&(kr===null?kr=e:kr.push.apply(kr,e),fa=null),e}function ol(e){fa===null?fa=[e]:fa.push(e)}var Jc=q(null),Ya=null,Pi=null;function ha(e,n,a){Oe(Jc,n._currentValue),n._currentValue=a}function Hi(e){e._currentValue=Jc.current,ne(Jc)}function $c(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function eu(e,n,a,o){var x=e.child;for(x!==null&&(x.return=e);x!==null;){var w=x.dependencies;if(w!==null){var B=x.child;w=w.firstContext;e:for(;w!==null;){var W=w;w=x;for(var fe=0;fe<n.length;fe++)if(W.context===n[fe]){w.lanes|=a,W=w.alternate,W!==null&&(W.lanes|=a),$c(w.return,a,e),o||(B=null);break e}w=W.next}}else if(x.tag===18){if(B=x.return,B===null)throw Error(p(341));B.lanes|=a,w=B.alternate,w!==null&&(w.lanes|=a),$c(B,a,e),B=null}else B=x.child;if(B!==null)B.return=x;else for(B=x;B!==null;){if(B===e){B=null;break}if(x=B.sibling,x!==null){x.return=B.return,B=x;break}B=B.return}x=B}}function ws(e,n,a,o){e=null;for(var x=n,w=!1;x!==null;){if(!w){if((x.flags&524288)!==0)w=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var B=x.alternate;if(B===null)throw Error(p(387));if(B=B.memoizedProps,B!==null){var W=x.type;c(x.pendingProps.value,B.value)||(e!==null?e.push(W):e=[W])}}else if(x===ct.current){if(B=x.alternate,B===null)throw Error(p(387));B.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(e!==null?e.push(kl):e=[kl])}x=x.return}e!==null&&eu(n,e,a,o),n.flags|=262144}function vo(e){for(e=e.firstContext;e!==null;){if(!c(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Za(e){Ya=e,Pi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function xr(e){return Wd(Ya,e)}function wo(e,n){return Ya===null&&Za(e),Wd(e,n)}function Wd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Pi===null){if(e===null)throw Error(p(308));Pi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Pi=Pi.next=n;return a}var bp=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},vp=u.unstable_scheduleCallback,wp=u.unstable_NormalPriority,Qn={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tu(){return{controller:new bp,data:new Map,refCount:0}}function cl(e){e.refCount--,e.refCount===0&&vp(wp,function(){e.controller.abort()})}var ul=null,nu=0,Cs=0,Es=null;function Cp(e,n){if(ul===null){var a=ul=[];nu=0,Cs=sf(),Es={status:"pending",value:void 0,then:function(o){a.push(o)}}}return nu++,n.then(Kd,Kd),n}function Kd(){if(--nu===0&&ul!==null){Es!==null&&(Es.status="fulfilled");var e=ul;ul=null,Cs=0,Es=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Ep(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(x){a.push(x)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var x=0;x<a.length;x++)(0,a[x])(n)},function(x){for(o.status="rejected",o.reason=x,x=0;x<a.length;x++)(0,a[x])(void 0)}),o}var Qd=me.S;me.S=function(e,n){B0=tt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Cp(e,n),Qd!==null&&Qd(e,n)};var qa=q(null);function ru(){var e=qa.current;return e!==null?e:En.pooledCache}function Co(e,n){n===null?Oe(qa,qa.current):Oe(qa,n.pool)}function Jd(){var e=ru();return e===null?null:{parent:Qn._currentValue,pool:e}}var As=Error(p(460)),iu=Error(p(474)),Eo=Error(p(542)),Ao={then:function(){}};function $d(e){return e=e.status,e==="fulfilled"||e==="rejected"}function e1(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(vr,vr),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,n1(e),e;default:if(typeof n.status=="string")n.then(vr,vr);else{if(e=En,e!==null&&100<e.shellSuspendCounter)throw Error(p(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var x=n;x.status="fulfilled",x.value=o}},function(o){if(n.status==="pending"){var x=n;x.status="rejected",x.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,n1(e),e}throw Ka=n,As}}function Wa(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ka=a,As):a}}var Ka=null;function t1(){if(Ka===null)throw Error(p(459));var e=Ka;return Ka=null,e}function n1(e){if(e===As||e===Eo)throw Error(p(483))}var Ss=null,fl=0;function So(e){var n=fl;return fl+=1,Ss===null&&(Ss=[]),e1(Ss,e,n)}function dl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function _o(e,n){throw n.$$typeof===R?Error(p(525)):(e=Object.prototype.toString.call(n),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function r1(e){function n(we,be){if(e){var Re=we.deletions;Re===null?(we.deletions=[be],we.flags|=16):Re.push(be)}}function a(we,be){if(!e)return null;for(;be!==null;)n(we,be),be=be.sibling;return null}function o(we){for(var be=new Map;we!==null;)we.key!==null?be.set(we.key,we):be.set(we.index,we),we=we.sibling;return be}function x(we,be){return we=Ui(we,be),we.index=0,we.sibling=null,we}function w(we,be,Re){return we.index=Re,e?(Re=we.alternate,Re!==null?(Re=Re.index,Re<be?(we.flags|=67108866,be):Re):(we.flags|=67108866,be)):(we.flags|=1048576,be)}function B(we){return e&&we.alternate===null&&(we.flags|=67108866),we}function W(we,be,Re,Ge){return be===null||be.tag!==6?(be=Yc(Re,we.mode,Ge),be.return=we,be):(be=x(be,Re),be.return=we,be)}function fe(we,be,Re,Ge){var yt=Re.type;return yt===I?He(we,be,Re.props.children,Ge,Re.key):be!==null&&(be.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Q&&Wa(yt)===be.type)?(be=x(be,Re.props),dl(be,Re),be.return=we,be):(be=yo(Re.type,Re.key,Re.props,null,we.mode,Ge),dl(be,Re),be.return=we,be)}function Ie(we,be,Re,Ge){return be===null||be.tag!==4||be.stateNode.containerInfo!==Re.containerInfo||be.stateNode.implementation!==Re.implementation?(be=Zc(Re,we.mode,Ge),be.return=we,be):(be=x(be,Re.children||[]),be.return=we,be)}function He(we,be,Re,Ge,yt){return be===null||be.tag!==7?(be=Va(Re,we.mode,Ge,yt),be.return=we,be):(be=x(be,Re),be.return=we,be)}function Xe(we,be,Re){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return be=Yc(""+be,we.mode,Re),be.return=we,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case T:return Re=yo(be.type,be.key,be.props,null,we.mode,Re),dl(Re,be),Re.return=we,Re;case k:return be=Zc(be,we.mode,Re),be.return=we,be;case Q:return be=Wa(be),Xe(we,be,Re)}if(ae(be)||X(be))return be=Va(be,we.mode,Re,null),be.return=we,be;if(typeof be.then=="function")return Xe(we,So(be),Re);if(be.$$typeof===H)return Xe(we,wo(we,be),Re);_o(we,be)}return null}function De(we,be,Re,Ge){var yt=be!==null?be.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return yt!==null?null:W(we,be,""+Re,Ge);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case T:return Re.key===yt?fe(we,be,Re,Ge):null;case k:return Re.key===yt?Ie(we,be,Re,Ge):null;case Q:return Re=Wa(Re),De(we,be,Re,Ge)}if(ae(Re)||X(Re))return yt!==null?null:He(we,be,Re,Ge,null);if(typeof Re.then=="function")return De(we,be,So(Re),Ge);if(Re.$$typeof===H)return De(we,be,wo(we,Re),Ge);_o(we,Re)}return null}function Le(we,be,Re,Ge,yt){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return we=we.get(Re)||null,W(be,we,""+Ge,yt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case T:return we=we.get(Ge.key===null?Re:Ge.key)||null,fe(be,we,Ge,yt);case k:return we=we.get(Ge.key===null?Re:Ge.key)||null,Ie(be,we,Ge,yt);case Q:return Ge=Wa(Ge),Le(we,be,Re,Ge,yt)}if(ae(Ge)||X(Ge))return we=we.get(Re)||null,He(be,we,Ge,yt,null);if(typeof Ge.then=="function")return Le(we,be,Re,So(Ge),yt);if(Ge.$$typeof===H)return Le(we,be,Re,wo(be,Ge),yt);_o(be,Ge)}return null}function dt(we,be,Re,Ge){for(var yt=null,nn=null,ht=be,Mt=be=0,Xt=null;ht!==null&&Mt<Re.length;Mt++){ht.index>Mt?(Xt=ht,ht=null):Xt=ht.sibling;var rn=De(we,ht,Re[Mt],Ge);if(rn===null){ht===null&&(ht=Xt);break}e&&ht&&rn.alternate===null&&n(we,ht),be=w(rn,be,Mt),nn===null?yt=rn:nn.sibling=rn,nn=rn,ht=Xt}if(Mt===Re.length)return a(we,ht),Wt&&Fi(we,Mt),yt;if(ht===null){for(;Mt<Re.length;Mt++)ht=Xe(we,Re[Mt],Ge),ht!==null&&(be=w(ht,be,Mt),nn===null?yt=ht:nn.sibling=ht,nn=ht);return Wt&&Fi(we,Mt),yt}for(ht=o(ht);Mt<Re.length;Mt++)Xt=Le(ht,we,Mt,Re[Mt],Ge),Xt!==null&&(e&&Xt.alternate!==null&&ht.delete(Xt.key===null?Mt:Xt.key),be=w(Xt,be,Mt),nn===null?yt=Xt:nn.sibling=Xt,nn=Xt);return e&&ht.forEach(function(Da){return n(we,Da)}),Wt&&Fi(we,Mt),yt}function At(we,be,Re,Ge){if(Re==null)throw Error(p(151));for(var yt=null,nn=null,ht=be,Mt=be=0,Xt=null,rn=Re.next();ht!==null&&!rn.done;Mt++,rn=Re.next()){ht.index>Mt?(Xt=ht,ht=null):Xt=ht.sibling;var Da=De(we,ht,rn.value,Ge);if(Da===null){ht===null&&(ht=Xt);break}e&&ht&&Da.alternate===null&&n(we,ht),be=w(Da,be,Mt),nn===null?yt=Da:nn.sibling=Da,nn=Da,ht=Xt}if(rn.done)return a(we,ht),Wt&&Fi(we,Mt),yt;if(ht===null){for(;!rn.done;Mt++,rn=Re.next())rn=Xe(we,rn.value,Ge),rn!==null&&(be=w(rn,be,Mt),nn===null?yt=rn:nn.sibling=rn,nn=rn);return Wt&&Fi(we,Mt),yt}for(ht=o(ht);!rn.done;Mt++,rn=Re.next())rn=Le(ht,we,Mt,rn.value,Ge),rn!==null&&(e&&rn.alternate!==null&&ht.delete(rn.key===null?Mt:rn.key),be=w(rn,be,Mt),nn===null?yt=rn:nn.sibling=rn,nn=rn);return e&&ht.forEach(function(Bx){return n(we,Bx)}),Wt&&Fi(we,Mt),yt}function bn(we,be,Re,Ge){if(typeof Re=="object"&&Re!==null&&Re.type===I&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case T:e:{for(var yt=Re.key;be!==null;){if(be.key===yt){if(yt=Re.type,yt===I){if(be.tag===7){a(we,be.sibling),Ge=x(be,Re.props.children),Ge.return=we,we=Ge;break e}}else if(be.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Q&&Wa(yt)===be.type){a(we,be.sibling),Ge=x(be,Re.props),dl(Ge,Re),Ge.return=we,we=Ge;break e}a(we,be);break}else n(we,be);be=be.sibling}Re.type===I?(Ge=Va(Re.props.children,we.mode,Ge,Re.key),Ge.return=we,we=Ge):(Ge=yo(Re.type,Re.key,Re.props,null,we.mode,Ge),dl(Ge,Re),Ge.return=we,we=Ge)}return B(we);case k:e:{for(yt=Re.key;be!==null;){if(be.key===yt)if(be.tag===4&&be.stateNode.containerInfo===Re.containerInfo&&be.stateNode.implementation===Re.implementation){a(we,be.sibling),Ge=x(be,Re.children||[]),Ge.return=we,we=Ge;break e}else{a(we,be);break}else n(we,be);be=be.sibling}Ge=Zc(Re,we.mode,Ge),Ge.return=we,we=Ge}return B(we);case Q:return Re=Wa(Re),bn(we,be,Re,Ge)}if(ae(Re))return dt(we,be,Re,Ge);if(X(Re)){if(yt=X(Re),typeof yt!="function")throw Error(p(150));return Re=yt.call(Re),At(we,be,Re,Ge)}if(typeof Re.then=="function")return bn(we,be,So(Re),Ge);if(Re.$$typeof===H)return bn(we,be,wo(we,Re),Ge);_o(we,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,be!==null&&be.tag===6?(a(we,be.sibling),Ge=x(be,Re),Ge.return=we,we=Ge):(a(we,be),Ge=Yc(Re,we.mode,Ge),Ge.return=we,we=Ge),B(we)):a(we,be)}return function(we,be,Re,Ge){try{fl=0;var yt=bn(we,be,Re,Ge);return Ss=null,yt}catch(ht){if(ht===As||ht===Eo)throw ht;var nn=Hr(29,ht,null,we.mode);return nn.lanes=Ge,nn.return=we,nn}}}var Qa=r1(!0),i1=r1(!1),ga=!1;function au(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function su(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function pa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xa(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(ln&2)!==0){var x=o.pending;return x===null?n.next=n:(n.next=x.next,x.next=n),o.pending=n,n=mo(e),Pd(e,null,a),n}return xo(e,o,n,a),mo(e)}function hl(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,kn(e,a)}}function lu(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var x=null,w=null;if(a=a.firstBaseUpdate,a!==null){do{var B={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};w===null?x=w=B:w=w.next=B,a=a.next}while(a!==null);w===null?x=w=n:w=w.next=n}else x=w=n;a={baseState:o.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var ou=!1;function gl(){if(ou){var e=Es;if(e!==null)throw e}}function pl(e,n,a,o){ou=!1;var x=e.updateQueue;ga=!1;var w=x.firstBaseUpdate,B=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var fe=W,Ie=fe.next;fe.next=null,B===null?w=Ie:B.next=Ie,B=fe;var He=e.alternate;He!==null&&(He=He.updateQueue,W=He.lastBaseUpdate,W!==B&&(W===null?He.firstBaseUpdate=Ie:W.next=Ie,He.lastBaseUpdate=fe))}if(w!==null){var Xe=x.baseState;B=0,He=Ie=fe=null,W=w;do{var De=W.lane&-536870913,Le=De!==W.lane;if(Le?(Vt&De)===De:(o&De)===De){De!==0&&De===Cs&&(ou=!0),He!==null&&(He=He.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var dt=e,At=W;De=n;var bn=a;switch(At.tag){case 1:if(dt=At.payload,typeof dt=="function"){Xe=dt.call(bn,Xe,De);break e}Xe=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=At.payload,De=typeof dt=="function"?dt.call(bn,Xe,De):dt,De==null)break e;Xe=_({},Xe,De);break e;case 2:ga=!0}}De=W.callback,De!==null&&(e.flags|=64,Le&&(e.flags|=8192),Le=x.callbacks,Le===null?x.callbacks=[De]:Le.push(De))}else Le={lane:De,tag:W.tag,payload:W.payload,callback:W.callback,next:null},He===null?(Ie=He=Le,fe=Xe):He=He.next=Le,B|=De;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;Le=W,W=Le.next,Le.next=null,x.lastBaseUpdate=Le,x.shared.pending=null}}while(!0);He===null&&(fe=Xe),x.baseState=fe,x.firstBaseUpdate=Ie,x.lastBaseUpdate=He,w===null&&(x.shared.lanes=0),wa|=B,e.lanes=B,e.memoizedState=Xe}}function a1(e,n){if(typeof e!="function")throw Error(p(191,e));e.call(n)}function s1(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)a1(a[e],n)}var _s=q(null),To=q(0);function l1(e,n){e=Qi,Oe(To,e),Oe(_s,n),Qi=e|n.baseLanes}function cu(){Oe(To,Qi),Oe(_s,_s.current)}function uu(){Qi=To.current,ne(_s),ne(To)}var Gr=q(null),ni=null;function ma(e){var n=e.alternate;Oe(Yn,Yn.current&1),Oe(Gr,e),ni===null&&(n===null||_s.current!==null||n.memoizedState!==null)&&(ni=e)}function fu(e){Oe(Yn,Yn.current),Oe(Gr,e),ni===null&&(ni=e)}function o1(e){e.tag===22?(Oe(Yn,Yn.current),Oe(Gr,e),ni===null&&(ni=e)):ya()}function ya(){Oe(Yn,Yn.current),Oe(Gr,Gr.current)}function Vr(e){ne(Gr),ni===e&&(ni=null),ne(Yn)}var Yn=q(0);function No(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||yf(a)||bf(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Gi=0,Dt=null,mn=null,Jn=null,Ro=!1,Ts=!1,Ja=!1,Io=0,xl=0,Ns=null,Ap=0;function Un(){throw Error(p(321))}function du(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!c(e[a],n[a]))return!1;return!0}function hu(e,n,a,o,x,w){return Gi=w,Dt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,me.H=e===null||e.memoizedState===null?X1:Nu,Ja=!1,w=a(o,x),Ja=!1,Ts&&(w=u1(n,a,o,x)),c1(e),w}function c1(e){me.H=bl;var n=mn!==null&&mn.next!==null;if(Gi=0,Jn=mn=Dt=null,Ro=!1,xl=0,Ns=null,n)throw Error(p(300));e===null||$n||(e=e.dependencies,e!==null&&vo(e)&&($n=!0))}function u1(e,n,a,o){Dt=e;var x=0;do{if(Ts&&(Ns=null),xl=0,Ts=!1,25<=x)throw Error(p(301));if(x+=1,Jn=mn=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}me.H=Y1,w=n(a,o)}while(Ts);return w}function Sp(){var e=me.H,n=e.useState()[0];return n=typeof n.then=="function"?ml(n):n,e=e.useState()[0],(mn!==null?mn.memoizedState:null)!==e&&(Dt.flags|=1024),n}function gu(){var e=Io!==0;return Io=0,e}function pu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function xu(e){if(Ro){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Ro=!1}Gi=0,Jn=mn=Dt=null,Ts=!1,xl=Io=0,Ns=null}function Tr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?Dt.memoizedState=Jn=e:Jn=Jn.next=e,Jn}function Zn(){if(mn===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=mn.next;var n=Jn===null?Dt.memoizedState:Jn.next;if(n!==null)Jn=n,mn=e;else{if(e===null)throw Dt.alternate===null?Error(p(467)):Error(p(310));mn=e,e={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},Jn===null?Dt.memoizedState=Jn=e:Jn=Jn.next=e}return Jn}function Do(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(e){var n=xl;return xl+=1,Ns===null&&(Ns=[]),e=e1(Ns,e,n),n=Dt,(Jn===null?n.memoizedState:Jn.next)===null&&(n=n.alternate,me.H=n===null||n.memoizedState===null?X1:Nu),e}function Oo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ml(e);if(e.$$typeof===H)return xr(e)}throw Error(p(438,String(e)))}function mu(e){var n=null,a=Dt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Dt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(x){return x.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Do(),Dt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=xe;return n.index++,a}function Vi(e,n){return typeof n=="function"?n(e):n}function Mo(e){var n=Zn();return yu(n,mn,e)}function yu(e,n,a){var o=e.queue;if(o===null)throw Error(p(311));o.lastRenderedReducer=a;var x=e.baseQueue,w=o.pending;if(w!==null){if(x!==null){var B=x.next;x.next=w.next,w.next=B}n.baseQueue=x=w,o.pending=null}if(w=e.baseState,x===null)e.memoizedState=w;else{n=x.next;var W=B=null,fe=null,Ie=n,He=!1;do{var Xe=Ie.lane&-536870913;if(Xe!==Ie.lane?(Vt&Xe)===Xe:(Gi&Xe)===Xe){var De=Ie.revertLane;if(De===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),Xe===Cs&&(He=!0);else if((Gi&De)===De){Ie=Ie.next,De===Cs&&(He=!0);continue}else Xe={lane:0,revertLane:Ie.revertLane,gesture:null,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},fe===null?(W=fe=Xe,B=w):fe=fe.next=Xe,Dt.lanes|=De,wa|=De;Xe=Ie.action,Ja&&a(w,Xe),w=Ie.hasEagerState?Ie.eagerState:a(w,Xe)}else De={lane:Xe,revertLane:Ie.revertLane,gesture:Ie.gesture,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null},fe===null?(W=fe=De,B=w):fe=fe.next=De,Dt.lanes|=Xe,wa|=Xe;Ie=Ie.next}while(Ie!==null&&Ie!==n);if(fe===null?B=w:fe.next=W,!c(w,e.memoizedState)&&($n=!0,He&&(a=Es,a!==null)))throw a;e.memoizedState=w,e.baseState=B,e.baseQueue=fe,o.lastRenderedState=w}return x===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function bu(e){var n=Zn(),a=n.queue;if(a===null)throw Error(p(311));a.lastRenderedReducer=e;var o=a.dispatch,x=a.pending,w=n.memoizedState;if(x!==null){a.pending=null;var B=x=x.next;do w=e(w,B.action),B=B.next;while(B!==x);c(w,n.memoizedState)||($n=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),a.lastRenderedState=w}return[w,o]}function f1(e,n,a){var o=Dt,x=Zn(),w=Wt;if(w){if(a===void 0)throw Error(p(407));a=a()}else a=n();var B=!c((mn||x).memoizedState,a);if(B&&(x.memoizedState=a,$n=!0),x=x.queue,Cu(g1.bind(null,o,x,e),[e]),x.getSnapshot!==n||B||Jn!==null&&Jn.memoizedState.tag&1){if(o.flags|=2048,Rs(9,{destroy:void 0},h1.bind(null,o,x,a,n),null),En===null)throw Error(p(349));w||(Gi&127)!==0||d1(o,n,a)}return a}function d1(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Dt.updateQueue,n===null?(n=Do(),Dt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function h1(e,n,a,o){n.value=a,n.getSnapshot=o,p1(n)&&x1(e)}function g1(e,n,a){return a(function(){p1(n)&&x1(e)})}function p1(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!c(e,a)}catch{return!0}}function x1(e){var n=Ga(e,2);n!==null&&Lr(n,e,2)}function vu(e){var n=Tr();if(typeof e=="function"){var a=e;if(e=a(),Ja){jt(!0);try{a()}finally{jt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},n}function m1(e,n,a,o){return e.baseState=a,yu(e,mn,typeof o=="function"?o:Vi)}function _p(e,n,a,o,x){if(Lo(e))throw Error(p(485));if(e=n.action,e!==null){var w={payload:x,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){w.listeners.push(B)}};me.T!==null?a(!0):w.isTransition=!1,o(w),a=n.pending,a===null?(w.next=n.pending=w,y1(n,w)):(w.next=a.next,n.pending=a.next=w)}}function y1(e,n){var a=n.action,o=n.payload,x=e.state;if(n.isTransition){var w=me.T,B={};me.T=B;try{var W=a(x,o),fe=me.S;fe!==null&&fe(B,W),b1(e,n,W)}catch(Ie){wu(e,n,Ie)}finally{w!==null&&B.types!==null&&(w.types=B.types),me.T=w}}else try{w=a(x,o),b1(e,n,w)}catch(Ie){wu(e,n,Ie)}}function b1(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){v1(e,n,o)},function(o){return wu(e,n,o)}):v1(e,n,a)}function v1(e,n,a){n.status="fulfilled",n.value=a,w1(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,y1(e,a)))}function wu(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,w1(n),n=n.next;while(n!==o)}e.action=null}function w1(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function C1(e,n){return n}function E1(e,n){if(Wt){var a=En.formState;if(a!==null){e:{var o=Dt;if(Wt){if(Nn){t:{for(var x=Nn,w=ti;x.nodeType!==8;){if(!w){x=null;break t}if(x=ri(x.nextSibling),x===null){x=null;break t}}w=x.data,x=w==="F!"||w==="F"?x:null}if(x){Nn=ri(x.nextSibling),o=x.data==="F!";break e}}da(o)}o=!1}o&&(n=a[0])}}return a=Tr(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C1,lastRenderedState:n},a.queue=o,a=H1.bind(null,Dt,o),o.dispatch=a,o=vu(!1),w=Tu.bind(null,Dt,!1,o.queue),o=Tr(),x={state:n,dispatch:null,action:e,pending:null},o.queue=x,a=_p.bind(null,Dt,x,w,a),x.dispatch=a,o.memoizedState=e,[n,a,!1]}function A1(e){var n=Zn();return S1(n,mn,e)}function S1(e,n,a){if(n=yu(e,n,C1)[0],e=Mo(Vi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=ml(n)}catch(B){throw B===As?Eo:B}else o=n;n=Zn();var x=n.queue,w=x.dispatch;return a!==n.memoizedState&&(Dt.flags|=2048,Rs(9,{destroy:void 0},Tp.bind(null,x,a),null)),[o,w,e]}function Tp(e,n){e.action=n}function _1(e){var n=Zn(),a=mn;if(a!==null)return S1(n,a,e);Zn(),n=n.memoizedState,a=Zn();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Rs(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Dt.updateQueue,n===null&&(n=Do(),Dt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function T1(){return Zn().memoizedState}function Bo(e,n,a,o){var x=Tr();Dt.flags|=e,x.memoizedState=Rs(1|n,{destroy:void 0},a,o===void 0?null:o)}function ko(e,n,a,o){var x=Zn();o=o===void 0?null:o;var w=x.memoizedState.inst;mn!==null&&o!==null&&du(o,mn.memoizedState.deps)?x.memoizedState=Rs(n,w,a,o):(Dt.flags|=e,x.memoizedState=Rs(1|n,w,a,o))}function N1(e,n){Bo(8390656,8,e,n)}function Cu(e,n){ko(2048,8,e,n)}function Np(e){Dt.flags|=4;var n=Dt.updateQueue;if(n===null)n=Do(),Dt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function R1(e){var n=Zn().memoizedState;return Np({ref:n,nextImpl:e}),function(){if((ln&2)!==0)throw Error(p(440));return n.impl.apply(void 0,arguments)}}function I1(e,n){return ko(4,2,e,n)}function D1(e,n){return ko(4,4,e,n)}function O1(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function M1(e,n,a){a=a!=null?a.concat([e]):null,ko(4,4,O1.bind(null,n,e),a)}function Eu(){}function B1(e,n){var a=Zn();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&du(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function k1(e,n){var a=Zn();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&du(n,o[1]))return o[0];if(o=e(),Ja){jt(!0);try{e()}finally{jt(!1)}}return a.memoizedState=[o,n],o}function Au(e,n,a){return a===void 0||(Gi&1073741824)!==0&&(Vt&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=L0(),Dt.lanes|=e,wa|=e,a)}function L1(e,n,a,o){return c(a,n)?a:_s.current!==null?(e=Au(e,a,o),c(e,n)||($n=!0),e):(Gi&42)===0||(Gi&1073741824)!==0&&(Vt&261930)===0?($n=!0,e.memoizedState=a):(e=L0(),Dt.lanes|=e,wa|=e,n)}function j1(e,n,a,o,x){var w=re.p;re.p=w!==0&&8>w?w:8;var B=me.T,W={};me.T=W,Tu(e,!1,n,a);try{var fe=x(),Ie=me.S;if(Ie!==null&&Ie(W,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var He=Ep(fe,o);yl(e,n,He,Zr(e))}else yl(e,n,o,Zr(e))}catch(Xe){yl(e,n,{then:function(){},status:"rejected",reason:Xe},Zr())}finally{re.p=w,B!==null&&W.types!==null&&(B.types=W.types),me.T=B}}function Rp(){}function Su(e,n,a,o){if(e.tag!==5)throw Error(p(476));var x=z1(e).queue;j1(e,x,n,Ye,a===null?Rp:function(){return U1(e),a(o)})}function z1(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Ye,baseState:Ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:Ye},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function U1(e){var n=z1(e);n.next===null&&(n=e.alternate.memoizedState),yl(e,n.next.queue,{},Zr())}function _u(){return xr(kl)}function F1(){return Zn().memoizedState}function P1(){return Zn().memoizedState}function Ip(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Zr();e=pa(a);var o=xa(n,e,a);o!==null&&(Lr(o,n,a),hl(o,n,a)),n={cache:tu()},e.payload=n;return}n=n.return}}function Dp(e,n,a){var o=Zr();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Lo(e)?G1(n,a):(a=Vc(e,n,a,o),a!==null&&(Lr(a,e,o),V1(a,n,o)))}function H1(e,n,a){var o=Zr();yl(e,n,a,o)}function yl(e,n,a,o){var x={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lo(e))G1(n,x);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var B=n.lastRenderedState,W=w(B,a);if(x.hasEagerState=!0,x.eagerState=W,c(W,B))return xo(e,n,x,0),En===null&&po(),!1}catch{}if(a=Vc(e,n,x,o),a!==null)return Lr(a,e,o),V1(a,n,o),!0}return!1}function Tu(e,n,a,o){if(o={lane:2,revertLane:sf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Lo(e)){if(n)throw Error(p(479))}else n=Vc(e,a,o,2),n!==null&&Lr(n,e,2)}function Lo(e){var n=e.alternate;return e===Dt||n!==null&&n===Dt}function G1(e,n){Ts=Ro=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function V1(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,kn(e,a)}}var bl={readContext:xr,use:Oo,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useLayoutEffect:Un,useInsertionEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useSyncExternalStore:Un,useId:Un,useHostTransitionStatus:Un,useFormState:Un,useActionState:Un,useOptimistic:Un,useMemoCache:Un,useCacheRefresh:Un};bl.useEffectEvent=Un;var X1={readContext:xr,use:Oo,useCallback:function(e,n){return Tr().memoizedState=[e,n===void 0?null:n],e},useContext:xr,useEffect:N1,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Bo(4194308,4,O1.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Bo(4194308,4,e,n)},useInsertionEffect:function(e,n){Bo(4,2,e,n)},useMemo:function(e,n){var a=Tr();n=n===void 0?null:n;var o=e();if(Ja){jt(!0);try{e()}finally{jt(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=Tr();if(a!==void 0){var x=a(n);if(Ja){jt(!0);try{a(n)}finally{jt(!1)}}}else x=n;return o.memoizedState=o.baseState=x,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:x},o.queue=e,e=e.dispatch=Dp.bind(null,Dt,e),[o.memoizedState,e]},useRef:function(e){var n=Tr();return e={current:e},n.memoizedState=e},useState:function(e){e=vu(e);var n=e.queue,a=H1.bind(null,Dt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Eu,useDeferredValue:function(e,n){var a=Tr();return Au(a,e,n)},useTransition:function(){var e=vu(!1);return e=j1.bind(null,Dt,e.queue,!0,!1),Tr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Dt,x=Tr();if(Wt){if(a===void 0)throw Error(p(407));a=a()}else{if(a=n(),En===null)throw Error(p(349));(Vt&127)!==0||d1(o,n,a)}x.memoizedState=a;var w={value:a,getSnapshot:n};return x.queue=w,N1(g1.bind(null,o,w,e),[e]),o.flags|=2048,Rs(9,{destroy:void 0},h1.bind(null,o,w,a,n),null),a},useId:function(){var e=Tr(),n=En.identifierPrefix;if(Wt){var a=_i,o=Si;a=(o&~(1<<32-mt(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=Io++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Ap++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:_u,useFormState:E1,useActionState:E1,useOptimistic:function(e){var n=Tr();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Tu.bind(null,Dt,!0,a),a.dispatch=n,[e,n]},useMemoCache:mu,useCacheRefresh:function(){return Tr().memoizedState=Ip.bind(null,Dt)},useEffectEvent:function(e){var n=Tr(),a={impl:e};return n.memoizedState=a,function(){if((ln&2)!==0)throw Error(p(440));return a.impl.apply(void 0,arguments)}}},Nu={readContext:xr,use:Oo,useCallback:B1,useContext:xr,useEffect:Cu,useImperativeHandle:M1,useInsertionEffect:I1,useLayoutEffect:D1,useMemo:k1,useReducer:Mo,useRef:T1,useState:function(){return Mo(Vi)},useDebugValue:Eu,useDeferredValue:function(e,n){var a=Zn();return L1(a,mn.memoizedState,e,n)},useTransition:function(){var e=Mo(Vi)[0],n=Zn().memoizedState;return[typeof e=="boolean"?e:ml(e),n]},useSyncExternalStore:f1,useId:F1,useHostTransitionStatus:_u,useFormState:A1,useActionState:A1,useOptimistic:function(e,n){var a=Zn();return m1(a,mn,e,n)},useMemoCache:mu,useCacheRefresh:P1};Nu.useEffectEvent=R1;var Y1={readContext:xr,use:Oo,useCallback:B1,useContext:xr,useEffect:Cu,useImperativeHandle:M1,useInsertionEffect:I1,useLayoutEffect:D1,useMemo:k1,useReducer:bu,useRef:T1,useState:function(){return bu(Vi)},useDebugValue:Eu,useDeferredValue:function(e,n){var a=Zn();return mn===null?Au(a,e,n):L1(a,mn.memoizedState,e,n)},useTransition:function(){var e=bu(Vi)[0],n=Zn().memoizedState;return[typeof e=="boolean"?e:ml(e),n]},useSyncExternalStore:f1,useId:F1,useHostTransitionStatus:_u,useFormState:_1,useActionState:_1,useOptimistic:function(e,n){var a=Zn();return mn!==null?m1(a,mn,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:mu,useCacheRefresh:P1};Y1.useEffectEvent=R1;function Ru(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:_({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Iu={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Zr(),x=pa(o);x.payload=n,a!=null&&(x.callback=a),n=xa(e,x,o),n!==null&&(Lr(n,e,o),hl(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Zr(),x=pa(o);x.tag=1,x.payload=n,a!=null&&(x.callback=a),n=xa(e,x,o),n!==null&&(Lr(n,e,o),hl(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Zr(),o=pa(a);o.tag=2,n!=null&&(o.callback=n),n=xa(e,o,a),n!==null&&(Lr(n,e,a),hl(n,e,a))}};function Z1(e,n,a,o,x,w,B){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,w,B):n.prototype&&n.prototype.isPureReactComponent?!h(a,o)||!h(x,w):!0}function q1(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Iu.enqueueReplaceState(n,n.state,null)}function $a(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=_({},a));for(var x in e)a[x]===void 0&&(a[x]=e[x])}return a}function W1(e){go(e)}function K1(e){console.error(e)}function Q1(e){go(e)}function jo(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function J1(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Du(e,n,a){return a=pa(a),a.tag=3,a.payload={element:null},a.callback=function(){jo(e,n)},a}function $1(e){return e=pa(e),e.tag=3,e}function e0(e,n,a,o){var x=a.type.getDerivedStateFromError;if(typeof x=="function"){var w=o.value;e.payload=function(){return x(w)},e.callback=function(){J1(n,a,o)}}var B=a.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(e.callback=function(){J1(n,a,o),typeof x!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var W=o.stack;this.componentDidCatch(o.value,{componentStack:W!==null?W:""})})}function Op(e,n,a,o,x){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&ws(n,a,x,!0),a=Gr.current,a!==null){switch(a.tag){case 31:case 13:return ni===null?Wo():a.alternate===null&&Fn===0&&(Fn=3),a.flags&=-257,a.flags|=65536,a.lanes=x,o===Ao?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),nf(e,o,x)),!1;case 22:return a.flags|=65536,o===Ao?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),nf(e,o,x)),!1}throw Error(p(435,a.tag))}return nf(e,o,x),Wo(),!1}if(Wt)return n=Gr.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=x,o!==Kc&&(e=Error(p(422),{cause:o}),ol(Jr(e,a)))):(o!==Kc&&(n=Error(p(423),{cause:o}),ol(Jr(n,a))),e=e.current.alternate,e.flags|=65536,x&=-x,e.lanes|=x,o=Jr(o,a),x=Du(e.stateNode,o,x),lu(e,x),Fn!==4&&(Fn=2)),!1;var w=Error(p(520),{cause:o});if(w=Jr(w,a),Tl===null?Tl=[w]:Tl.push(w),Fn!==4&&(Fn=2),n===null)return!0;o=Jr(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=x&-x,a.lanes|=e,e=Du(a.stateNode,o,e),lu(a,e),!1;case 1:if(n=a.type,w=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ca===null||!Ca.has(w))))return a.flags|=65536,x&=-x,a.lanes|=x,x=$1(x),e0(x,e,a,o),lu(a,x),!1}a=a.return}while(a!==null);return!1}var Ou=Error(p(461)),$n=!1;function mr(e,n,a,o){n.child=e===null?i1(n,null,a,o):Qa(n,e.child,a,o)}function t0(e,n,a,o,x){a=a.render;var w=n.ref;if("ref"in o){var B={};for(var W in o)W!=="ref"&&(B[W]=o[W])}else B=o;return Za(n),o=hu(e,n,a,B,w,x),W=gu(),e!==null&&!$n?(pu(e,n,x),Xi(e,n,x)):(Wt&&W&&qc(n),n.flags|=1,mr(e,n,o,x),n.child)}function n0(e,n,a,o,x){if(e===null){var w=a.type;return typeof w=="function"&&!Xc(w)&&w.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=w,r0(e,n,w,o,x)):(e=yo(a.type,null,o,n,n.mode,x),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!Fu(e,x)){var B=w.memoizedProps;if(a=a.compare,a=a!==null?a:h,a(B,o)&&e.ref===n.ref)return Xi(e,n,x)}return n.flags|=1,e=Ui(w,o),e.ref=n.ref,e.return=n,n.child=e}function r0(e,n,a,o,x){if(e!==null){var w=e.memoizedProps;if(h(w,o)&&e.ref===n.ref)if($n=!1,n.pendingProps=o=w,Fu(e,x))(e.flags&131072)!==0&&($n=!0);else return n.lanes=e.lanes,Xi(e,n,x)}return Mu(e,n,a,o,x)}function i0(e,n,a,o){var x=o.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|a:a,e!==null){for(o=n.child=e.child,x=0;o!==null;)x=x|o.lanes|o.childLanes,o=o.sibling;o=x&~w}else o=0,n.child=null;return a0(e,n,w,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Co(n,w!==null?w.cachePool:null),w!==null?l1(n,w):cu(),o1(n);else return o=n.lanes=536870912,a0(e,n,w!==null?w.baseLanes|a:a,a,o)}else w!==null?(Co(n,w.cachePool),l1(n,w),ya(),n.memoizedState=null):(e!==null&&Co(n,null),cu(),ya());return mr(e,n,x,a),n.child}function vl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function a0(e,n,a,o,x){var w=ru();return w=w===null?null:{parent:Qn._currentValue,pool:w},n.memoizedState={baseLanes:a,cachePool:w},e!==null&&Co(n,null),cu(),o1(n),e!==null&&ws(e,n,o,!0),n.childLanes=x,null}function zo(e,n){return n=Fo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function s0(e,n,a){return Qa(n,e.child,null,a),e=zo(n,n.pendingProps),e.flags|=2,Vr(n),n.memoizedState=null,e}function Mp(e,n,a){var o=n.pendingProps,x=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Wt){if(o.mode==="hidden")return e=zo(n,o),n.lanes=536870912,vl(null,e);if(fu(n),(e=Nn)?(e=yh(e,ti),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ua!==null?{id:Si,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},a=Gd(e),a.return=n,n.child=a,pr=n,Nn=null)):e=null,e===null)throw da(n);return n.lanes=536870912,null}return zo(n,o)}var w=e.memoizedState;if(w!==null){var B=w.dehydrated;if(fu(n),x)if(n.flags&256)n.flags&=-257,n=s0(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(p(558));else if($n||ws(e,n,a,!1),x=(a&e.childLanes)!==0,$n||x){if(o=En,o!==null&&(B=or(o,a),B!==0&&B!==w.retryLane))throw w.retryLane=B,Ga(e,B),Lr(o,e,B),Ou;Wo(),n=s0(e,n,a)}else e=w.treeContext,Nn=ri(B.nextSibling),pr=n,Wt=!0,fa=null,ti=!1,e!==null&&Yd(n,e),n=zo(n,o),n.flags|=4096;return n}return e=Ui(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Uo(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(p(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Mu(e,n,a,o,x){return Za(n),a=hu(e,n,a,o,void 0,x),o=gu(),e!==null&&!$n?(pu(e,n,x),Xi(e,n,x)):(Wt&&o&&qc(n),n.flags|=1,mr(e,n,a,x),n.child)}function l0(e,n,a,o,x,w){return Za(n),n.updateQueue=null,a=u1(n,o,a,x),c1(e),o=gu(),e!==null&&!$n?(pu(e,n,w),Xi(e,n,w)):(Wt&&o&&qc(n),n.flags|=1,mr(e,n,a,w),n.child)}function o0(e,n,a,o,x){if(Za(n),n.stateNode===null){var w=ms,B=a.contextType;typeof B=="object"&&B!==null&&(w=xr(B)),w=new a(o,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Iu,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=o,w.state=n.memoizedState,w.refs={},au(n),B=a.contextType,w.context=typeof B=="object"&&B!==null?xr(B):ms,w.state=n.memoizedState,B=a.getDerivedStateFromProps,typeof B=="function"&&(Ru(n,a,B,o),w.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(B=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),B!==w.state&&Iu.enqueueReplaceState(w,w.state,null),pl(n,o,w,x),gl(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){w=n.stateNode;var W=n.memoizedProps,fe=$a(a,W);w.props=fe;var Ie=w.context,He=a.contextType;B=ms,typeof He=="object"&&He!==null&&(B=xr(He));var Xe=a.getDerivedStateFromProps;He=typeof Xe=="function"||typeof w.getSnapshotBeforeUpdate=="function",W=n.pendingProps!==W,He||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(W||Ie!==B)&&q1(n,w,o,B),ga=!1;var De=n.memoizedState;w.state=De,pl(n,o,w,x),gl(),Ie=n.memoizedState,W||De!==Ie||ga?(typeof Xe=="function"&&(Ru(n,a,Xe,o),Ie=n.memoizedState),(fe=ga||Z1(n,a,fe,o,De,Ie,B))?(He||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=Ie),w.props=o,w.state=Ie,w.context=B,o=fe):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{w=n.stateNode,su(e,n),B=n.memoizedProps,He=$a(a,B),w.props=He,Xe=n.pendingProps,De=w.context,Ie=a.contextType,fe=ms,typeof Ie=="object"&&Ie!==null&&(fe=xr(Ie)),W=a.getDerivedStateFromProps,(Ie=typeof W=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(B!==Xe||De!==fe)&&q1(n,w,o,fe),ga=!1,De=n.memoizedState,w.state=De,pl(n,o,w,x),gl();var Le=n.memoizedState;B!==Xe||De!==Le||ga||e!==null&&e.dependencies!==null&&vo(e.dependencies)?(typeof W=="function"&&(Ru(n,a,W,o),Le=n.memoizedState),(He=ga||Z1(n,a,He,o,De,Le,fe)||e!==null&&e.dependencies!==null&&vo(e.dependencies))?(Ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(o,Le,fe),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(o,Le,fe)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||B===e.memoizedProps&&De===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&De===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=Le),w.props=o,w.state=Le,w.context=fe,o=He):(typeof w.componentDidUpdate!="function"||B===e.memoizedProps&&De===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||B===e.memoizedProps&&De===e.memoizedState||(n.flags|=1024),o=!1)}return w=o,Uo(e,n),o=(n.flags&128)!==0,w||o?(w=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&o?(n.child=Qa(n,e.child,null,x),n.child=Qa(n,null,a,x)):mr(e,n,a,x),n.memoizedState=w.state,e=n.child):e=Xi(e,n,x),e}function c0(e,n,a,o){return Xa(),n.flags|=256,mr(e,n,a,o),n.child}var Bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ku(e){return{baseLanes:e,cachePool:Jd()}}function Lu(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Yr),e}function u0(e,n,a){var o=n.pendingProps,x=!1,w=(n.flags&128)!==0,B;if((B=w)||(B=e!==null&&e.memoizedState===null?!1:(Yn.current&2)!==0),B&&(x=!0,n.flags&=-129),B=(n.flags&32)!==0,n.flags&=-33,e===null){if(Wt){if(x?ma(n):ya(),(e=Nn)?(e=yh(e,ti),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ua!==null?{id:Si,overflow:_i}:null,retryLane:536870912,hydrationErrors:null},a=Gd(e),a.return=n,n.child=a,pr=n,Nn=null)):e=null,e===null)throw da(n);return bf(e)?n.lanes=32:n.lanes=536870912,null}var W=o.children;return o=o.fallback,x?(ya(),x=n.mode,W=Fo({mode:"hidden",children:W},x),o=Va(o,x,a,null),W.return=n,o.return=n,W.sibling=o,n.child=W,o=n.child,o.memoizedState=ku(a),o.childLanes=Lu(e,B,a),n.memoizedState=Bu,vl(null,o)):(ma(n),ju(n,W))}var fe=e.memoizedState;if(fe!==null&&(W=fe.dehydrated,W!==null)){if(w)n.flags&256?(ma(n),n.flags&=-257,n=zu(e,n,a)):n.memoizedState!==null?(ya(),n.child=e.child,n.flags|=128,n=null):(ya(),W=o.fallback,x=n.mode,o=Fo({mode:"visible",children:o.children},x),W=Va(W,x,a,null),W.flags|=2,o.return=n,W.return=n,o.sibling=W,n.child=o,Qa(n,e.child,null,a),o=n.child,o.memoizedState=ku(a),o.childLanes=Lu(e,B,a),n.memoizedState=Bu,n=vl(null,o));else if(ma(n),bf(W)){if(B=W.nextSibling&&W.nextSibling.dataset,B)var Ie=B.dgst;B=Ie,o=Error(p(419)),o.stack="",o.digest=B,ol({value:o,source:null,stack:null}),n=zu(e,n,a)}else if($n||ws(e,n,a,!1),B=(a&e.childLanes)!==0,$n||B){if(B=En,B!==null&&(o=or(B,a),o!==0&&o!==fe.retryLane))throw fe.retryLane=o,Ga(e,o),Lr(B,e,o),Ou;yf(W)||Wo(),n=zu(e,n,a)}else yf(W)?(n.flags|=192,n.child=e.child,n=null):(e=fe.treeContext,Nn=ri(W.nextSibling),pr=n,Wt=!0,fa=null,ti=!1,e!==null&&Yd(n,e),n=ju(n,o.children),n.flags|=4096);return n}return x?(ya(),W=o.fallback,x=n.mode,fe=e.child,Ie=fe.sibling,o=Ui(fe,{mode:"hidden",children:o.children}),o.subtreeFlags=fe.subtreeFlags&65011712,Ie!==null?W=Ui(Ie,W):(W=Va(W,x,a,null),W.flags|=2),W.return=n,o.return=n,o.sibling=W,n.child=o,vl(null,o),o=n.child,W=e.child.memoizedState,W===null?W=ku(a):(x=W.cachePool,x!==null?(fe=Qn._currentValue,x=x.parent!==fe?{parent:fe,pool:fe}:x):x=Jd(),W={baseLanes:W.baseLanes|a,cachePool:x}),o.memoizedState=W,o.childLanes=Lu(e,B,a),n.memoizedState=Bu,vl(e.child,o)):(ma(n),a=e.child,e=a.sibling,a=Ui(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(B=n.deletions,B===null?(n.deletions=[e],n.flags|=16):B.push(e)),n.child=a,n.memoizedState=null,a)}function ju(e,n){return n=Fo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Fo(e,n){return e=Hr(22,e,null,n),e.lanes=0,e}function zu(e,n,a){return Qa(n,e.child,null,a),e=ju(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function f0(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),$c(e.return,n,a)}function Uu(e,n,a,o,x,w){var B=e.memoizedState;B===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:x,treeForkCount:w}:(B.isBackwards=n,B.rendering=null,B.renderingStartTime=0,B.last=o,B.tail=a,B.tailMode=x,B.treeForkCount=w)}function d0(e,n,a){var o=n.pendingProps,x=o.revealOrder,w=o.tail;o=o.children;var B=Yn.current,W=(B&2)!==0;if(W?(B=B&1|2,n.flags|=128):B&=1,Oe(Yn,B),mr(e,n,o,a),o=Wt?ll:0,!W&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&f0(e,a,n);else if(e.tag===19)f0(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(x){case"forwards":for(a=n.child,x=null;a!==null;)e=a.alternate,e!==null&&No(e)===null&&(x=a),a=a.sibling;a=x,a===null?(x=n.child,n.child=null):(x=a.sibling,a.sibling=null),Uu(n,!1,x,a,w,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,x=n.child,n.child=null;x!==null;){if(e=x.alternate,e!==null&&No(e)===null){n.child=x;break}e=x.sibling,x.sibling=a,a=x,x=e}Uu(n,!0,a,null,w,o);break;case"together":Uu(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Xi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),wa|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(ws(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(p(153));if(n.child!==null){for(e=n.child,a=Ui(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=Ui(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Fu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&vo(e)))}function Bp(e,n,a){switch(n.tag){case 3:nt(n,n.stateNode.containerInfo),ha(n,Qn,e.memoizedState.cache),Xa();break;case 27:case 5:ut(n);break;case 4:nt(n,n.stateNode.containerInfo);break;case 10:ha(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,fu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(ma(n),n.flags|=128,null):(a&n.child.childLanes)!==0?u0(e,n,a):(ma(n),e=Xi(e,n,a),e!==null?e.sibling:null);ma(n);break;case 19:var x=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(ws(e,n,a,!1),o=(a&n.childLanes)!==0),x){if(o)return d0(e,n,a);n.flags|=128}if(x=n.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Oe(Yn,Yn.current),o)break;return null;case 22:return n.lanes=0,i0(e,n,a,n.pendingProps);case 24:ha(n,Qn,e.memoizedState.cache)}return Xi(e,n,a)}function h0(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)$n=!0;else{if(!Fu(e,a)&&(n.flags&128)===0)return $n=!1,Bp(e,n,a);$n=(e.flags&131072)!==0}else $n=!1,Wt&&(n.flags&1048576)!==0&&Xd(n,ll,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=Wa(n.elementType),n.type=e,typeof e=="function")Xc(e)?(o=$a(e,o),n.tag=1,n=o0(null,n,e,o,a)):(n.tag=0,n=Mu(null,n,e,o,a));else{if(e!=null){var x=e.$$typeof;if(x===K){n.tag=11,n=t0(null,n,e,o,a);break e}else if(x===L){n.tag=14,n=n0(null,n,e,o,a);break e}}throw n=M(e)||e,Error(p(306,n,""))}}return n;case 0:return Mu(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,x=$a(o,n.pendingProps),o0(e,n,o,x,a);case 3:e:{if(nt(n,n.stateNode.containerInfo),e===null)throw Error(p(387));o=n.pendingProps;var w=n.memoizedState;x=w.element,su(e,n),pl(n,o,null,a);var B=n.memoizedState;if(o=B.cache,ha(n,Qn,o),o!==w.cache&&eu(n,[Qn],a,!0),gl(),o=B.element,w.isDehydrated)if(w={element:o,isDehydrated:!1,cache:B.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=c0(e,n,o,a);break e}else if(o!==x){x=Jr(Error(p(424)),n),ol(x),n=c0(e,n,o,a);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Nn=ri(e.firstChild),pr=n,Wt=!0,fa=null,ti=!0,a=i1(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xa(),o===x){n=Xi(e,n,a);break e}mr(e,n,o,a)}n=n.child}return n;case 26:return Uo(e,n),e===null?(a=Ah(n.type,null,n.pendingProps,null))?n.memoizedState=a:Wt||(a=n.type,e=n.pendingProps,o=nc(ze.current).createElement(a),o[Ln]=n,o[an]=e,yr(o,a,e),_n(o),n.stateNode=o):n.memoizedState=Ah(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ut(n),e===null&&Wt&&(o=n.stateNode=wh(n.type,n.pendingProps,ze.current),pr=n,ti=!0,x=Nn,_a(n.type)?(vf=x,Nn=ri(o.firstChild)):Nn=x),mr(e,n,n.pendingProps.children,a),Uo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Wt&&((x=o=Nn)&&(o=ux(o,n.type,n.pendingProps,ti),o!==null?(n.stateNode=o,pr=n,Nn=ri(o.firstChild),ti=!1,x=!0):x=!1),x||da(n)),ut(n),x=n.type,w=n.pendingProps,B=e!==null?e.memoizedProps:null,o=w.children,pf(x,w)?o=null:B!==null&&pf(x,B)&&(n.flags|=32),n.memoizedState!==null&&(x=hu(e,n,Sp,null,null,a),kl._currentValue=x),Uo(e,n),mr(e,n,o,a),n.child;case 6:return e===null&&Wt&&((e=a=Nn)&&(a=fx(a,n.pendingProps,ti),a!==null?(n.stateNode=a,pr=n,Nn=null,e=!0):e=!1),e||da(n)),null;case 13:return u0(e,n,a);case 4:return nt(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Qa(n,null,o,a):mr(e,n,o,a),n.child;case 11:return t0(e,n,n.type,n.pendingProps,a);case 7:return mr(e,n,n.pendingProps,a),n.child;case 8:return mr(e,n,n.pendingProps.children,a),n.child;case 12:return mr(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,ha(n,n.type,o.value),mr(e,n,o.children,a),n.child;case 9:return x=n.type._context,o=n.pendingProps.children,Za(n),x=xr(x),o=o(x),n.flags|=1,mr(e,n,o,a),n.child;case 14:return n0(e,n,n.type,n.pendingProps,a);case 15:return r0(e,n,n.type,n.pendingProps,a);case 19:return d0(e,n,a);case 31:return Mp(e,n,a);case 22:return i0(e,n,a,n.pendingProps);case 24:return Za(n),o=xr(Qn),e===null?(x=ru(),x===null&&(x=En,w=tu(),x.pooledCache=w,w.refCount++,w!==null&&(x.pooledCacheLanes|=a),x=w),n.memoizedState={parent:o,cache:x},au(n),ha(n,Qn,x)):((e.lanes&a)!==0&&(su(e,n),pl(n,null,null,a),gl()),x=e.memoizedState,w=n.memoizedState,x.parent!==o?(x={parent:o,cache:o},n.memoizedState=x,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=x),ha(n,Qn,o)):(o=w.cache,ha(n,Qn,o),o!==x.cache&&eu(n,[Qn],a,!0))),mr(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(p(156,n.tag))}function Yi(e){e.flags|=4}function Pu(e,n,a,o,x){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(x&335544128)===x)if(e.stateNode.complete)e.flags|=8192;else if(F0())e.flags|=8192;else throw Ka=Ao,iu}else e.flags&=-16777217}function g0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Rh(n))if(F0())e.flags|=8192;else throw Ka=Ao,iu}function Po(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Yt():536870912,e.lanes|=n,Ms|=n)}function wl(e,n){if(!Wt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Rn(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var x=e.child;x!==null;)a|=x.lanes|x.childLanes,o|=x.subtreeFlags&65011712,o|=x.flags&65011712,x.return=e,x=x.sibling;else for(x=e.child;x!==null;)a|=x.lanes|x.childLanes,o|=x.subtreeFlags,o|=x.flags,x.return=e,x=x.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function kp(e,n,a){var o=n.pendingProps;switch(Wc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(n),null;case 1:return Rn(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Hi(Qn),st(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(vs(n)?Yi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Qc())),Rn(n),null;case 26:var x=n.type,w=n.memoizedState;return e===null?(Yi(n),w!==null?(Rn(n),g0(n,w)):(Rn(n),Pu(n,x,null,o,a))):w?w!==e.memoizedState?(Yi(n),Rn(n),g0(n,w)):(Rn(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Yi(n),Rn(n),Pu(n,x,e,o,a)),null;case 27:if(Ct(n),a=ze.current,x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Yi(n);else{if(!o){if(n.stateNode===null)throw Error(p(166));return Rn(n),null}e=Te.current,vs(n)?Zd(n):(e=wh(x,o,a),n.stateNode=e,Yi(n))}return Rn(n),null;case 5:if(Ct(n),x=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Yi(n);else{if(!o){if(n.stateNode===null)throw Error(p(166));return Rn(n),null}if(w=Te.current,vs(n))Zd(n);else{var B=nc(ze.current);switch(w){case 1:w=B.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:w=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":w=B.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":w=B.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":w=B.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof o.is=="string"?B.createElement("select",{is:o.is}):B.createElement("select"),o.multiple?w.multiple=!0:o.size&&(w.size=o.size);break;default:w=typeof o.is=="string"?B.createElement(x,{is:o.is}):B.createElement(x)}}w[Ln]=n,w[an]=o;e:for(B=n.child;B!==null;){if(B.tag===5||B.tag===6)w.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===n)break e;for(;B.sibling===null;){if(B.return===null||B.return===n)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}n.stateNode=w;e:switch(yr(w,x,o),x){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Yi(n)}}return Rn(n),Pu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Yi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(p(166));if(e=ze.current,vs(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,x=pr,x!==null)switch(x.tag){case 27:case 5:o=x.memoizedProps}e[Ln]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||uh(e.nodeValue,a)),e||da(n,!0)}else e=nc(e).createTextNode(o),e[Ln]=n,n.stateNode=e}return Rn(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=vs(n),a!==null){if(e===null){if(!o)throw Error(p(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(557));e[Ln]=n}else Xa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Rn(n),e=!1}else a=Qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Vr(n),n):(Vr(n),null);if((n.flags&128)!==0)throw Error(p(558))}return Rn(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(x=vs(n),o!==null&&o.dehydrated!==null){if(e===null){if(!x)throw Error(p(318));if(x=n.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(p(317));x[Ln]=n}else Xa(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Rn(n),x=!1}else x=Qc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=x),x=!0;if(!x)return n.flags&256?(Vr(n),n):(Vr(n),null)}return Vr(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,x=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(x=o.alternate.memoizedState.cachePool.pool),w=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(w=o.memoizedState.cachePool.pool),w!==x&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),Po(n,n.updateQueue),Rn(n),null);case 4:return st(),e===null&&uf(n.stateNode.containerInfo),Rn(n),null;case 10:return Hi(n.type),Rn(n),null;case 19:if(ne(Yn),o=n.memoizedState,o===null)return Rn(n),null;if(x=(n.flags&128)!==0,w=o.rendering,w===null)if(x)wl(o,!1);else{if(Fn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=No(e),w!==null){for(n.flags|=128,wl(o,!1),e=w.updateQueue,n.updateQueue=e,Po(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Hd(a,e),a=a.sibling;return Oe(Yn,Yn.current&1|2),Wt&&Fi(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&tt()>Yo&&(n.flags|=128,x=!0,wl(o,!1),n.lanes=4194304)}else{if(!x)if(e=No(w),e!==null){if(n.flags|=128,x=!0,e=e.updateQueue,n.updateQueue=e,Po(n,e),wl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!w.alternate&&!Wt)return Rn(n),null}else 2*tt()-o.renderingStartTime>Yo&&a!==536870912&&(n.flags|=128,x=!0,wl(o,!1),n.lanes=4194304);o.isBackwards?(w.sibling=n.child,n.child=w):(e=o.last,e!==null?e.sibling=w:n.child=w,o.last=w)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=tt(),e.sibling=null,a=Yn.current,Oe(Yn,x?a&1|2:a&1),Wt&&Fi(n,o.treeForkCount),e):(Rn(n),null);case 22:case 23:return Vr(n),uu(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(Rn(n),n.subtreeFlags&6&&(n.flags|=8192)):Rn(n),a=n.updateQueue,a!==null&&Po(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&ne(qa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Hi(Qn),Rn(n),null;case 25:return null;case 30:return null}throw Error(p(156,n.tag))}function Lp(e,n){switch(Wc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Hi(Qn),st(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ct(n),null;case 31:if(n.memoizedState!==null){if(Vr(n),n.alternate===null)throw Error(p(340));Xa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Vr(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(p(340));Xa()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ne(Yn),null;case 4:return st(),null;case 10:return Hi(n.type),null;case 22:case 23:return Vr(n),uu(),e!==null&&ne(qa),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Hi(Qn),null;case 25:return null;default:return null}}function p0(e,n){switch(Wc(n),n.tag){case 3:Hi(Qn),st();break;case 26:case 27:case 5:Ct(n);break;case 4:st();break;case 31:n.memoizedState!==null&&Vr(n);break;case 13:Vr(n);break;case 19:ne(Yn);break;case 10:Hi(n.type);break;case 22:case 23:Vr(n),uu(),e!==null&&ne(qa);break;case 24:Hi(Qn)}}function Cl(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var x=o.next;a=x;do{if((a.tag&e)===e){o=void 0;var w=a.create,B=a.inst;o=w(),B.destroy=o}a=a.next}while(a!==x)}}catch(W){pn(n,n.return,W)}}function ba(e,n,a){try{var o=n.updateQueue,x=o!==null?o.lastEffect:null;if(x!==null){var w=x.next;o=w;do{if((o.tag&e)===e){var B=o.inst,W=B.destroy;if(W!==void 0){B.destroy=void 0,x=n;var fe=a,Ie=W;try{Ie()}catch(He){pn(x,fe,He)}}}o=o.next}while(o!==w)}}catch(He){pn(n,n.return,He)}}function x0(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{s1(n,a)}catch(o){pn(e,e.return,o)}}}function m0(e,n,a){a.props=$a(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){pn(e,n,o)}}function El(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(x){pn(e,n,x)}}function Ti(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(x){pn(e,n,x)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(x){pn(e,n,x)}else a.current=null}function y0(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(x){pn(e,e.return,x)}}function Hu(e,n,a){try{var o=e.stateNode;ix(o,e.type,a,n),o[an]=n}catch(x){pn(e,e.return,x)}}function b0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_a(e.type)||e.tag===4}function Gu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||b0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_a(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=vr));else if(o!==4&&(o===27&&_a(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Vu(e,n,a),e=e.sibling;e!==null;)Vu(e,n,a),e=e.sibling}function Ho(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&_a(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ho(e,n,a),e=e.sibling;e!==null;)Ho(e,n,a),e=e.sibling}function v0(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,x=n.attributes;x.length;)n.removeAttributeNode(x[0]);yr(n,o,a),n[Ln]=e,n[an]=a}catch(w){pn(e,e.return,w)}}var Zi=!1,er=!1,Xu=!1,w0=typeof WeakSet=="function"?WeakSet:Set,ur=null;function jp(e,n){if(e=e.containerInfo,hf=cc,e=F(e),Y(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var x=o.anchorOffset,w=o.focusNode;o=o.focusOffset;try{a.nodeType,w.nodeType}catch{a=null;break e}var B=0,W=-1,fe=-1,Ie=0,He=0,Xe=e,De=null;t:for(;;){for(var Le;Xe!==a||x!==0&&Xe.nodeType!==3||(W=B+x),Xe!==w||o!==0&&Xe.nodeType!==3||(fe=B+o),Xe.nodeType===3&&(B+=Xe.nodeValue.length),(Le=Xe.firstChild)!==null;)De=Xe,Xe=Le;for(;;){if(Xe===e)break t;if(De===a&&++Ie===x&&(W=B),De===w&&++He===o&&(fe=B),(Le=Xe.nextSibling)!==null)break;Xe=De,De=Xe.parentNode}Xe=Le}a=W===-1||fe===-1?null:{start:W,end:fe}}else a=null}a=a||{start:0,end:0}}else a=null;for(gf={focusedElem:e,selectionRange:a},cc=!1,ur=n;ur!==null;)if(n=ur,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ur=e;else for(;ur!==null;){switch(n=ur,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)x=e[a],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,a=n,x=w.memoizedProps,w=w.memoizedState,o=a.stateNode;try{var dt=$a(a.type,x);e=o.getSnapshotBeforeUpdate(dt,w),o.__reactInternalSnapshotBeforeUpdate=e}catch(At){pn(a,a.return,At)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)mf(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(p(163))}if(e=n.sibling,e!==null){e.return=n.return,ur=e;break}ur=n.return}}function C0(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Wi(e,a),o&4&&Cl(5,a);break;case 1:if(Wi(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(B){pn(a,a.return,B)}else{var x=$a(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(x,n,e.__reactInternalSnapshotBeforeUpdate)}catch(B){pn(a,a.return,B)}}o&64&&x0(a),o&512&&El(a,a.return);break;case 3:if(Wi(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{s1(e,n)}catch(B){pn(a,a.return,B)}}break;case 27:n===null&&o&4&&v0(a);case 26:case 5:Wi(e,a),n===null&&o&4&&y0(a),o&512&&El(a,a.return);break;case 12:Wi(e,a);break;case 31:Wi(e,a),o&4&&S0(e,a);break;case 13:Wi(e,a),o&4&&_0(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Yp.bind(null,a),dx(e,a))));break;case 22:if(o=a.memoizedState!==null||Zi,!o){n=n!==null&&n.memoizedState!==null||er,x=Zi;var w=er;Zi=o,(er=n)&&!w?Ki(e,a,(a.subtreeFlags&8772)!==0):Wi(e,a),Zi=x,er=w}break;case 30:break;default:Wi(e,a)}}function E0(e){var n=e.alternate;n!==null&&(e.alternate=null,E0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&br(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var On=null,Or=!1;function qi(e,n,a){for(a=a.child;a!==null;)A0(e,n,a),a=a.sibling}function A0(e,n,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(bt,a)}catch{}switch(a.tag){case 26:er||Ti(a,n),qi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:er||Ti(a,n);var o=On,x=Or;_a(a.type)&&(On=a.stateNode,Or=!1),qi(e,n,a),Ol(a.stateNode),On=o,Or=x;break;case 5:er||Ti(a,n);case 6:if(o=On,x=Or,On=null,qi(e,n,a),On=o,Or=x,On!==null)if(Or)try{(On.nodeType===9?On.body:On.nodeName==="HTML"?On.ownerDocument.body:On).removeChild(a.stateNode)}catch(w){pn(a,n,w)}else try{On.removeChild(a.stateNode)}catch(w){pn(a,n,w)}break;case 18:On!==null&&(Or?(e=On,xh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ps(e)):xh(On,a.stateNode));break;case 4:o=On,x=Or,On=a.stateNode.containerInfo,Or=!0,qi(e,n,a),On=o,Or=x;break;case 0:case 11:case 14:case 15:ba(2,a,n),er||ba(4,a,n),qi(e,n,a);break;case 1:er||(Ti(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&m0(a,n,o)),qi(e,n,a);break;case 21:qi(e,n,a);break;case 22:er=(o=er)||a.memoizedState!==null,qi(e,n,a),er=o;break;default:qi(e,n,a)}}function S0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ps(e)}catch(a){pn(n,n.return,a)}}}function _0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ps(e)}catch(a){pn(n,n.return,a)}}function zp(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new w0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new w0),n;default:throw Error(p(435,e.tag))}}function Go(e,n){var a=zp(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var x=Zp.bind(null,e,o);o.then(x,x)}})}function Mr(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var x=a[o],w=e,B=n,W=B;e:for(;W!==null;){switch(W.tag){case 27:if(_a(W.type)){On=W.stateNode,Or=!1;break e}break;case 5:On=W.stateNode,Or=!1;break e;case 3:case 4:On=W.stateNode.containerInfo,Or=!0;break e}W=W.return}if(On===null)throw Error(p(160));A0(w,B,x),On=null,Or=!1,w=x.alternate,w!==null&&(w.return=null),x.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)T0(n,e),n=n.sibling}var gi=null;function T0(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Mr(n,e),Br(e),o&4&&(ba(3,e,e.return),Cl(3,e),ba(5,e,e.return));break;case 1:Mr(n,e),Br(e),o&512&&(er||a===null||Ti(a,a.return)),o&64&&Zi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var x=gi;if(Mr(n,e),Br(e),o&512&&(er||a===null||Ti(a,a.return)),o&4){var w=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,x=x.ownerDocument||x;t:switch(o){case"title":w=x.getElementsByTagName("title")[0],(!w||w[Di]||w[Ln]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=x.createElement(o),x.head.insertBefore(w,x.querySelector("head > title"))),yr(w,o,a),w[Ln]=e,_n(w),o=w;break e;case"link":var B=Th("link","href",x).get(o+(a.href||""));if(B){for(var W=0;W<B.length;W++)if(w=B[W],w.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&w.getAttribute("rel")===(a.rel==null?null:a.rel)&&w.getAttribute("title")===(a.title==null?null:a.title)&&w.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){B.splice(W,1);break t}}w=x.createElement(o),yr(w,o,a),x.head.appendChild(w);break;case"meta":if(B=Th("meta","content",x).get(o+(a.content||""))){for(W=0;W<B.length;W++)if(w=B[W],w.getAttribute("content")===(a.content==null?null:""+a.content)&&w.getAttribute("name")===(a.name==null?null:a.name)&&w.getAttribute("property")===(a.property==null?null:a.property)&&w.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&w.getAttribute("charset")===(a.charSet==null?null:a.charSet)){B.splice(W,1);break t}}w=x.createElement(o),yr(w,o,a),x.head.appendChild(w);break;default:throw Error(p(468,o))}w[Ln]=e,_n(w),o=w}e.stateNode=o}else Nh(x,e.type,e.stateNode);else e.stateNode=_h(x,o,e.memoizedProps);else w!==o?(w===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):w.count--,o===null?Nh(x,e.type,e.stateNode):_h(x,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Hu(e,e.memoizedProps,a.memoizedProps)}break;case 27:Mr(n,e),Br(e),o&512&&(er||a===null||Ti(a,a.return)),a!==null&&o&4&&Hu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Mr(n,e),Br(e),o&512&&(er||a===null||Ti(a,a.return)),e.flags&32){x=e.stateNode;try{on(x,"")}catch(dt){pn(e,e.return,dt)}}o&4&&e.stateNode!=null&&(x=e.memoizedProps,Hu(e,x,a!==null?a.memoizedProps:x)),o&1024&&(Xu=!0);break;case 6:if(Mr(n,e),Br(e),o&4){if(e.stateNode===null)throw Error(p(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(dt){pn(e,e.return,dt)}}break;case 3:if(ac=null,x=gi,gi=rc(n.containerInfo),Mr(n,e),gi=x,Br(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ps(n.containerInfo)}catch(dt){pn(e,e.return,dt)}Xu&&(Xu=!1,N0(e));break;case 4:o=gi,gi=rc(e.stateNode.containerInfo),Mr(n,e),Br(e),gi=o;break;case 12:Mr(n,e),Br(e);break;case 31:Mr(n,e),Br(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Go(e,o)));break;case 13:Mr(n,e),Br(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xo=tt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Go(e,o)));break;case 22:x=e.memoizedState!==null;var fe=a!==null&&a.memoizedState!==null,Ie=Zi,He=er;if(Zi=Ie||x,er=He||fe,Mr(n,e),er=He,Zi=Ie,Br(e),o&8192)e:for(n=e.stateNode,n._visibility=x?n._visibility&-2:n._visibility|1,x&&(a===null||fe||Zi||er||es(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){fe=a=n;try{if(w=fe.stateNode,x)B=w.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{W=fe.stateNode;var Xe=fe.memoizedProps.style,De=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;W.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(dt){pn(fe,fe.return,dt)}}}else if(n.tag===6){if(a===null){fe=n;try{fe.stateNode.nodeValue=x?"":fe.memoizedProps}catch(dt){pn(fe,fe.return,dt)}}}else if(n.tag===18){if(a===null){fe=n;try{var Le=fe.stateNode;x?mh(Le,!0):mh(fe.stateNode,!1)}catch(dt){pn(fe,fe.return,dt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Go(e,a))));break;case 19:Mr(n,e),Br(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Go(e,o)));break;case 30:break;case 21:break;default:Mr(n,e),Br(e)}}function Br(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(b0(o)){a=o;break}o=o.return}if(a==null)throw Error(p(160));switch(a.tag){case 27:var x=a.stateNode,w=Gu(e);Ho(e,w,x);break;case 5:var B=a.stateNode;a.flags&32&&(on(B,""),a.flags&=-33);var W=Gu(e);Ho(e,W,B);break;case 3:case 4:var fe=a.stateNode.containerInfo,Ie=Gu(e);Vu(e,Ie,fe);break;default:throw Error(p(161))}}catch(He){pn(e,e.return,He)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function N0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;N0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Wi(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)C0(e,n.alternate,n),n=n.sibling}function es(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ba(4,n,n.return),es(n);break;case 1:Ti(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&m0(n,n.return,a),es(n);break;case 27:Ol(n.stateNode);case 26:case 5:Ti(n,n.return),es(n);break;case 22:n.memoizedState===null&&es(n);break;case 30:es(n);break;default:es(n)}e=e.sibling}}function Ki(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,x=e,w=n,B=w.flags;switch(w.tag){case 0:case 11:case 15:Ki(x,w,a),Cl(4,w);break;case 1:if(Ki(x,w,a),o=w,x=o.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ie){pn(o,o.return,Ie)}if(o=w,x=o.updateQueue,x!==null){var W=o.stateNode;try{var fe=x.shared.hiddenCallbacks;if(fe!==null)for(x.shared.hiddenCallbacks=null,x=0;x<fe.length;x++)a1(fe[x],W)}catch(Ie){pn(o,o.return,Ie)}}a&&B&64&&x0(w),El(w,w.return);break;case 27:v0(w);case 26:case 5:Ki(x,w,a),a&&o===null&&B&4&&y0(w),El(w,w.return);break;case 12:Ki(x,w,a);break;case 31:Ki(x,w,a),a&&B&4&&S0(x,w);break;case 13:Ki(x,w,a),a&&B&4&&_0(x,w);break;case 22:w.memoizedState===null&&Ki(x,w,a),El(w,w.return);break;case 30:break;default:Ki(x,w,a)}n=n.sibling}}function Yu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&cl(a))}function Zu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&cl(e))}function pi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)R0(e,n,a,o),n=n.sibling}function R0(e,n,a,o){var x=n.flags;switch(n.tag){case 0:case 11:case 15:pi(e,n,a,o),x&2048&&Cl(9,n);break;case 1:pi(e,n,a,o);break;case 3:pi(e,n,a,o),x&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&cl(e)));break;case 12:if(x&2048){pi(e,n,a,o),e=n.stateNode;try{var w=n.memoizedProps,B=w.id,W=w.onPostCommit;typeof W=="function"&&W(B,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(fe){pn(n,n.return,fe)}}else pi(e,n,a,o);break;case 31:pi(e,n,a,o);break;case 13:pi(e,n,a,o);break;case 23:break;case 22:w=n.stateNode,B=n.alternate,n.memoizedState!==null?w._visibility&2?pi(e,n,a,o):Al(e,n):w._visibility&2?pi(e,n,a,o):(w._visibility|=2,Is(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),x&2048&&Yu(B,n);break;case 24:pi(e,n,a,o),x&2048&&Zu(n.alternate,n);break;default:pi(e,n,a,o)}}function Is(e,n,a,o,x){for(x=x&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,B=n,W=a,fe=o,Ie=B.flags;switch(B.tag){case 0:case 11:case 15:Is(w,B,W,fe,x),Cl(8,B);break;case 23:break;case 22:var He=B.stateNode;B.memoizedState!==null?He._visibility&2?Is(w,B,W,fe,x):Al(w,B):(He._visibility|=2,Is(w,B,W,fe,x)),x&&Ie&2048&&Yu(B.alternate,B);break;case 24:Is(w,B,W,fe,x),x&&Ie&2048&&Zu(B.alternate,B);break;default:Is(w,B,W,fe,x)}n=n.sibling}}function Al(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,x=o.flags;switch(o.tag){case 22:Al(a,o),x&2048&&Yu(o.alternate,o);break;case 24:Al(a,o),x&2048&&Zu(o.alternate,o);break;default:Al(a,o)}n=n.sibling}}var Sl=8192;function Ds(e,n,a){if(e.subtreeFlags&Sl)for(e=e.child;e!==null;)I0(e,n,a),e=e.sibling}function I0(e,n,a){switch(e.tag){case 26:Ds(e,n,a),e.flags&Sl&&e.memoizedState!==null&&Ax(a,gi,e.memoizedState,e.memoizedProps);break;case 5:Ds(e,n,a);break;case 3:case 4:var o=gi;gi=rc(e.stateNode.containerInfo),Ds(e,n,a),gi=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Sl,Sl=16777216,Ds(e,n,a),Sl=o):Ds(e,n,a));break;default:Ds(e,n,a)}}function D0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function _l(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ur=o,M0(o,e)}D0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)O0(e),e=e.sibling}function O0(e){switch(e.tag){case 0:case 11:case 15:_l(e),e.flags&2048&&ba(9,e,e.return);break;case 3:_l(e);break;case 12:_l(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Vo(e)):_l(e);break;default:_l(e)}}function Vo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];ur=o,M0(o,e)}D0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ba(8,n,n.return),Vo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Vo(n));break;default:Vo(n)}e=e.sibling}}function M0(e,n){for(;ur!==null;){var a=ur;switch(a.tag){case 0:case 11:case 15:ba(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:cl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,ur=o;else e:for(a=e;ur!==null;){o=ur;var x=o.sibling,w=o.return;if(E0(o),o===a){ur=null;break e}if(x!==null){x.return=w,ur=x;break e}ur=w}}}var Up={getCacheForType:function(e){var n=xr(Qn),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return xr(Qn).controller.signal}},Fp=typeof WeakMap=="function"?WeakMap:Map,ln=0,En=null,Ft=null,Vt=0,gn=0,Xr=null,va=!1,Os=!1,qu=!1,Qi=0,Fn=0,wa=0,ts=0,Wu=0,Yr=0,Ms=0,Tl=null,kr=null,Ku=!1,Xo=0,B0=0,Yo=1/0,Zo=null,Ca=null,sr=0,Ea=null,Bs=null,Ji=0,Qu=0,Ju=null,k0=null,Nl=0,$u=null;function Zr(){return(ln&2)!==0&&Vt!==0?Vt&-Vt:me.T!==null?sf():An()}function L0(){if(Yr===0)if((Vt&536870912)===0||Wt){var e=Rt;Rt<<=1,(Rt&3932160)===0&&(Rt=262144),Yr=e}else Yr=536870912;return e=Gr.current,e!==null&&(e.flags|=32),Yr}function Lr(e,n,a){(e===En&&(gn===2||gn===9)||e.cancelPendingCommit!==null)&&(ks(e,0),Aa(e,Vt,Yr,!1)),tr(e,a),((ln&2)===0||e!==En)&&(e===En&&((ln&2)===0&&(ts|=a),Fn===4&&Aa(e,Vt,Yr,!1)),Ni(e))}function j0(e,n,a){if((ln&6)!==0)throw Error(p(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||xn(e,n),x=o?Gp(e,n):tf(e,n,!0),w=o;do{if(x===0){Os&&!o&&Aa(e,n,0,!1);break}else{if(a=e.current.alternate,w&&!Pp(a)){x=tf(e,n,!1),w=!1;continue}if(x===2){if(w=n,e.errorRecoveryDisabledLanes&w)var B=0;else B=e.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){n=B;e:{var W=e;x=Tl;var fe=W.current.memoizedState.isDehydrated;if(fe&&(ks(W,B).flags|=256),B=tf(W,B,!1),B!==2){if(qu&&!fe){W.errorRecoveryDisabledLanes|=w,ts|=w,x=4;break e}w=kr,kr=x,w!==null&&(kr===null?kr=w:kr.push.apply(kr,w))}x=B}if(w=!1,x!==2)continue}}if(x===1){ks(e,0),Aa(e,n,0,!0);break}e:{switch(o=e,w=x,w){case 0:case 1:throw Error(p(345));case 4:if((n&4194048)!==n)break;case 6:Aa(o,n,Yr,!va);break e;case 2:kr=null;break;case 3:case 5:break;default:throw Error(p(329))}if((n&62914560)===n&&(x=Xo+300-tt(),10<x)){if(Aa(o,n,Yr,!va),Mn(o,0,!0)!==0)break e;Ji=n,o.timeoutHandle=gh(z0.bind(null,o,a,kr,Zo,Ku,n,Yr,ts,Ms,va,w,"Throttled",-0,0),x);break e}z0(o,a,kr,Zo,Ku,n,Yr,ts,Ms,va,w,null,-0,0)}}break}while(!0);Ni(e)}function z0(e,n,a,o,x,w,B,W,fe,Ie,He,Xe,De,Le){if(e.timeoutHandle=-1,Xe=n.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vr},I0(n,w,Xe);var dt=(w&62914560)===w?Xo-tt():(w&4194048)===w?B0-tt():0;if(dt=Sx(Xe,dt),dt!==null){Ji=w,e.cancelPendingCommit=dt(Y0.bind(null,e,n,w,a,o,x,B,W,fe,He,Xe,null,De,Le)),Aa(e,w,B,!Ie);return}}Y0(e,n,w,a,o,x,B,W,fe)}function Pp(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var x=a[o],w=x.getSnapshot;x=x.value;try{if(!c(w(),x))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Aa(e,n,a,o){n&=~Wu,n&=~ts,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var x=n;0<x;){var w=31-mt(x),B=1<<w;o[w]=-1,x&=~B}a!==0&&Ar(e,a,n)}function qo(){return(ln&6)===0?(Rl(0),!1):!0}function ef(){if(Ft!==null){if(gn===0)var e=Ft.return;else e=Ft,Pi=Ya=null,xu(e),Ss=null,fl=0,e=Ft;for(;e!==null;)p0(e.alternate,e),e=e.return;Ft=null}}function ks(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,lx(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ji=0,ef(),En=e,Ft=a=Ui(e.current,null),Vt=n,gn=0,Xr=null,va=!1,Os=xn(e,n),qu=!1,Ms=Yr=Wu=ts=wa=Fn=0,kr=Tl=null,Ku=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var x=31-mt(o),w=1<<x;n|=e[x],o&=~w}return Qi=n,po(),a}function U0(e,n){Dt=null,me.H=bl,n===As||n===Eo?(n=t1(),gn=3):n===iu?(n=t1(),gn=4):gn=n===Ou?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Xr=n,Ft===null&&(Fn=1,jo(e,Jr(n,e.current)))}function F0(){var e=Gr.current;return e===null?!0:(Vt&4194048)===Vt?ni===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?e===ni:!1}function P0(){var e=me.H;return me.H=bl,e===null?bl:e}function H0(){var e=me.A;return me.A=Up,e}function Wo(){Fn=4,va||(Vt&4194048)!==Vt&&Gr.current!==null||(Os=!0),(wa&134217727)===0&&(ts&134217727)===0||En===null||Aa(En,Vt,Yr,!1)}function tf(e,n,a){var o=ln;ln|=2;var x=P0(),w=H0();(En!==e||Vt!==n)&&(Zo=null,ks(e,n)),n=!1;var B=Fn;e:do try{if(gn!==0&&Ft!==null){var W=Ft,fe=Xr;switch(gn){case 8:ef(),B=6;break e;case 3:case 2:case 9:case 6:Gr.current===null&&(n=!0);var Ie=gn;if(gn=0,Xr=null,Ls(e,W,fe,Ie),a&&Os){B=0;break e}break;default:Ie=gn,gn=0,Xr=null,Ls(e,W,fe,Ie)}}Hp(),B=Fn;break}catch(He){U0(e,He)}while(!0);return n&&e.shellSuspendCounter++,Pi=Ya=null,ln=o,me.H=x,me.A=w,Ft===null&&(En=null,Vt=0,po()),B}function Hp(){for(;Ft!==null;)G0(Ft)}function Gp(e,n){var a=ln;ln|=2;var o=P0(),x=H0();En!==e||Vt!==n?(Zo=null,Yo=tt()+500,ks(e,n)):Os=xn(e,n);e:do try{if(gn!==0&&Ft!==null){n=Ft;var w=Xr;t:switch(gn){case 1:gn=0,Xr=null,Ls(e,n,w,1);break;case 2:case 9:if($d(w)){gn=0,Xr=null,V0(n);break}n=function(){gn!==2&&gn!==9||En!==e||(gn=7),Ni(e)},w.then(n,n);break e;case 3:gn=7;break e;case 4:gn=5;break e;case 7:$d(w)?(gn=0,Xr=null,V0(n)):(gn=0,Xr=null,Ls(e,n,w,7));break;case 5:var B=null;switch(Ft.tag){case 26:B=Ft.memoizedState;case 5:case 27:var W=Ft;if(B?Rh(B):W.stateNode.complete){gn=0,Xr=null;var fe=W.sibling;if(fe!==null)Ft=fe;else{var Ie=W.return;Ie!==null?(Ft=Ie,Ko(Ie)):Ft=null}break t}}gn=0,Xr=null,Ls(e,n,w,5);break;case 6:gn=0,Xr=null,Ls(e,n,w,6);break;case 8:ef(),Fn=6;break e;default:throw Error(p(462))}}Vp();break}catch(He){U0(e,He)}while(!0);return Pi=Ya=null,me.H=o,me.A=x,ln=a,Ft!==null?0:(En=null,Vt=0,po(),Fn)}function Vp(){for(;Ft!==null&&!Se();)G0(Ft)}function G0(e){var n=h0(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,n===null?Ko(e):Ft=n}function V0(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=l0(a,n,n.pendingProps,n.type,void 0,Vt);break;case 11:n=l0(a,n,n.pendingProps,n.type.render,n.ref,Vt);break;case 5:xu(n);default:p0(a,n),n=Ft=Hd(n,Qi),n=h0(a,n,Qi)}e.memoizedProps=e.pendingProps,n===null?Ko(e):Ft=n}function Ls(e,n,a,o){Pi=Ya=null,xu(n),Ss=null,fl=0;var x=n.return;try{if(Op(e,x,n,a,Vt)){Fn=1,jo(e,Jr(a,e.current)),Ft=null;return}}catch(w){if(x!==null)throw Ft=x,w;Fn=1,jo(e,Jr(a,e.current)),Ft=null;return}n.flags&32768?(Wt||o===1?e=!0:Os||(Vt&536870912)!==0?e=!1:(va=e=!0,(o===2||o===9||o===3||o===6)&&(o=Gr.current,o!==null&&o.tag===13&&(o.flags|=16384))),X0(n,e)):Ko(n)}function Ko(e){var n=e;do{if((n.flags&32768)!==0){X0(n,va);return}e=n.return;var a=kp(n.alternate,n,Qi);if(a!==null){Ft=a;return}if(n=n.sibling,n!==null){Ft=n;return}Ft=n=e}while(n!==null);Fn===0&&(Fn=5)}function X0(e,n){do{var a=Lp(e.alternate,e);if(a!==null){a.flags&=32767,Ft=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Ft=e;return}Ft=e=a}while(e!==null);Fn=6,Ft=null}function Y0(e,n,a,o,x,w,B,W,fe){e.cancelPendingCommit=null;do Qo();while(sr!==0);if((ln&6)!==0)throw Error(p(327));if(n!==null){if(n===e.current)throw Error(p(177));if(w=n.lanes|n.childLanes,w|=Gc,tn(e,a,w,B,W,fe),e===En&&(Ft=En=null,Vt=0),Bs=n,Ea=e,Ji=a,Qu=w,Ju=x,k0=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,qp(pt,function(){return Q0(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=me.T,me.T=null,x=re.p,re.p=2,B=ln,ln|=4;try{jp(e,n,a)}finally{ln=B,re.p=x,me.T=o}}sr=1,Z0(),q0(),W0()}}function Z0(){if(sr===1){sr=0;var e=Ea,n=Bs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=me.T,me.T=null;var o=re.p;re.p=2;var x=ln;ln|=4;try{T0(n,e);var w=gf,B=F(e.containerInfo),W=w.focusedElem,fe=w.selectionRange;if(B!==W&&W&&W.ownerDocument&&O(W.ownerDocument.documentElement,W)){if(fe!==null&&Y(W)){var Ie=fe.start,He=fe.end;if(He===void 0&&(He=Ie),"selectionStart"in W)W.selectionStart=Ie,W.selectionEnd=Math.min(He,W.value.length);else{var Xe=W.ownerDocument||document,De=Xe&&Xe.defaultView||window;if(De.getSelection){var Le=De.getSelection(),dt=W.textContent.length,At=Math.min(fe.start,dt),bn=fe.end===void 0?At:Math.min(fe.end,dt);!Le.extend&&At>bn&&(B=bn,bn=At,At=B);var we=S(W,At),be=S(W,bn);if(we&&be&&(Le.rangeCount!==1||Le.anchorNode!==we.node||Le.anchorOffset!==we.offset||Le.focusNode!==be.node||Le.focusOffset!==be.offset)){var Re=Xe.createRange();Re.setStart(we.node,we.offset),Le.removeAllRanges(),At>bn?(Le.addRange(Re),Le.extend(be.node,be.offset)):(Re.setEnd(be.node,be.offset),Le.addRange(Re))}}}}for(Xe=[],Le=W;Le=Le.parentNode;)Le.nodeType===1&&Xe.push({element:Le,left:Le.scrollLeft,top:Le.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Xe.length;W++){var Ge=Xe[W];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}cc=!!hf,gf=hf=null}finally{ln=x,re.p=o,me.T=a}}e.current=n,sr=2}}function q0(){if(sr===2){sr=0;var e=Ea,n=Bs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=me.T,me.T=null;var o=re.p;re.p=2;var x=ln;ln|=4;try{C0(e,n.alternate,n)}finally{ln=x,re.p=o,me.T=a}}sr=3}}function W0(){if(sr===4||sr===3){sr=0,et();var e=Ea,n=Bs,a=Ji,o=k0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?sr=5:(sr=0,Bs=Ea=null,K0(e,e.pendingLanes));var x=e.pendingLanes;if(x===0&&(Ca=null),nr(a),n=n.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(bt,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=me.T,x=re.p,re.p=2,me.T=null;try{for(var w=e.onRecoverableError,B=0;B<o.length;B++){var W=o[B];w(W.value,{componentStack:W.stack})}}finally{me.T=n,re.p=x}}(Ji&3)!==0&&Qo(),Ni(e),x=e.pendingLanes,(a&261930)!==0&&(x&42)!==0?e===$u?Nl++:(Nl=0,$u=e):Nl=0,Rl(0)}}function K0(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,cl(n)))}function Qo(){return Z0(),q0(),W0(),Q0()}function Q0(){if(sr!==5)return!1;var e=Ea,n=Qu;Qu=0;var a=nr(Ji),o=me.T,x=re.p;try{re.p=32>a?32:a,me.T=null,a=Ju,Ju=null;var w=Ea,B=Ji;if(sr=0,Bs=Ea=null,Ji=0,(ln&6)!==0)throw Error(p(331));var W=ln;if(ln|=4,O0(w.current),R0(w,w.current,B,a),ln=W,Rl(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(bt,w)}catch{}return!0}finally{re.p=x,me.T=o,K0(e,n)}}function J0(e,n,a){n=Jr(a,n),n=Du(e.stateNode,n,2),e=xa(e,n,2),e!==null&&(tr(e,2),Ni(e))}function pn(e,n,a){if(e.tag===3)J0(e,e,a);else for(;n!==null;){if(n.tag===3){J0(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ca===null||!Ca.has(o))){e=Jr(a,e),a=$1(2),o=xa(n,a,2),o!==null&&(e0(a,o,n,e),tr(o,2),Ni(o));break}}n=n.return}}function nf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Fp;var x=new Set;o.set(n,x)}else x=o.get(n),x===void 0&&(x=new Set,o.set(n,x));x.has(a)||(qu=!0,x.add(a),e=Xp.bind(null,e,n,a),n.then(e,e))}function Xp(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,En===e&&(Vt&a)===a&&(Fn===4||Fn===3&&(Vt&62914560)===Vt&&300>tt()-Xo?(ln&2)===0&&ks(e,0):Wu|=a,Ms===Vt&&(Ms=0)),Ni(e)}function $0(e,n){n===0&&(n=Yt()),e=Ga(e,n),e!==null&&(tr(e,n),Ni(e))}function Yp(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),$0(e,a)}function Zp(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,x=e.memoizedState;x!==null&&(a=x.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(p(314))}o!==null&&o.delete(n),$0(e,a)}function qp(e,n){return Pe(e,n)}var Jo=null,js=null,rf=!1,$o=!1,af=!1,Sa=0;function Ni(e){e!==js&&e.next===null&&(js===null?Jo=js=e:js=js.next=e),$o=!0,rf||(rf=!0,Kp())}function Rl(e,n){if(!af&&$o){af=!0;do for(var a=!1,o=Jo;o!==null;){if(e!==0){var x=o.pendingLanes;if(x===0)var w=0;else{var B=o.suspendedLanes,W=o.pingedLanes;w=(1<<31-mt(42|e)+1)-1,w&=x&~(B&~W),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(a=!0,rh(o,w))}else w=Vt,w=Mn(o,o===En?w:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(w&3)===0||xn(o,w)||(a=!0,rh(o,w));o=o.next}while(a);af=!1}}function Wp(){eh()}function eh(){$o=rf=!1;var e=0;Sa!==0&&sx()&&(e=Sa);for(var n=tt(),a=null,o=Jo;o!==null;){var x=o.next,w=th(o,n);w===0?(o.next=null,a===null?Jo=x:a.next=x,x===null&&(js=a)):(a=o,(e!==0||(w&3)!==0)&&($o=!0)),o=x}sr!==0&&sr!==5||Rl(e),Sa!==0&&(Sa=0)}function th(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,x=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var B=31-mt(w),W=1<<B,fe=x[B];fe===-1?((W&a)===0||(W&o)!==0)&&(x[B]=Wn(W,n)):fe<=n&&(e.expiredLanes|=W),w&=~W}if(n=En,a=Vt,a=Mn(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(gn===2||gn===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Ee(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||xn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&Ee(o),nr(a)){case 2:case 8:a=It;break;case 32:a=pt;break;case 268435456:a=dr;break;default:a=pt}return o=nh.bind(null,e),a=Pe(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&Ee(o),e.callbackPriority=2,e.callbackNode=null,2}function nh(e,n){if(sr!==0&&sr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Qo()&&e.callbackNode!==a)return null;var o=Vt;return o=Mn(e,e===En?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(j0(e,o,n),th(e,tt()),e.callbackNode!=null&&e.callbackNode===a?nh.bind(null,e):null)}function rh(e,n){if(Qo())return null;j0(e,n,!0)}function Kp(){ox(function(){(ln&6)!==0?Pe(ot,Wp):eh()})}function sf(){if(Sa===0){var e=Cs;e===0&&(e=qn,qn<<=1,(qn&261888)===0&&(qn=256)),Sa=e}return Sa}function ih(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:bi(""+e)}function ah(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Qp(e,n,a,o,x){if(n==="submit"&&a&&a.stateNode===x){var w=ih((x[an]||null).action),B=o.submitter;B&&(n=(n=B[an]||null)?ih(n.formAction):B.getAttribute("formAction"),n!==null&&(w=n,B=null));var W=new rr("action","action",null,o,x);e.push({event:W,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Sa!==0){var fe=B?ah(x,B):new FormData(x);Su(a,{pending:!0,data:fe,method:x.method,action:w},null,fe)}}else typeof w=="function"&&(W.preventDefault(),fe=B?ah(x,B):new FormData(x),Su(a,{pending:!0,data:fe,method:x.method,action:w},w,fe))},currentTarget:x}]})}}for(var lf=0;lf<sl.length;lf++){var of=sl[lf],Jp=of.toLowerCase(),$p=of[0].toUpperCase()+of.slice(1);hi(Jp,"on"+$p)}hi(Dr,"onAnimationEnd"),hi(gr,"onAnimationIteration"),hi(un,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(ar,"onTransitionRun"),hi(_r,"onTransitionStart"),hi(ca,"onTransitionCancel"),hi(zi,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),Zt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ex=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function sh(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],x=o.event;o=o.listeners;e:{var w=void 0;if(n)for(var B=o.length-1;0<=B;B--){var W=o[B],fe=W.instance,Ie=W.currentTarget;if(W=W.listener,fe!==w&&x.isPropagationStopped())break e;w=W,x.currentTarget=Ie;try{w(x)}catch(He){go(He)}x.currentTarget=null,w=fe}else for(B=0;B<o.length;B++){if(W=o[B],fe=W.instance,Ie=W.currentTarget,W=W.listener,fe!==w&&x.isPropagationStopped())break e;w=W,x.currentTarget=Ie;try{w(x)}catch(He){go(He)}x.currentTarget=null,w=fe}}}}function Pt(e,n){var a=n[mi];a===void 0&&(a=n[mi]=new Set);var o=e+"__bubble";a.has(o)||(lh(n,e,2,!1),a.add(o))}function cf(e,n,a){var o=0;n&&(o|=4),lh(a,e,o,n)}var ec="_reactListening"+Math.random().toString(36).slice(2);function uf(e){if(!e[ec]){e[ec]=!0,Ve.forEach(function(a){a!=="selectionchange"&&(ex.has(a)||cf(a,!1,e),cf(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ec]||(n[ec]=!0,cf("selectionchange",!1,n))}}function lh(e,n,a,o){switch(Lh(n)){case 2:var x=Nx;break;case 8:x=Rx;break;default:x=Sf}a=x.bind(null,n,a,e),x=void 0,!$s||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(x=!0),o?x!==void 0?e.addEventListener(n,a,{capture:!0,passive:x}):e.addEventListener(n,a,!0):x!==void 0?e.addEventListener(n,a,{passive:x}):e.addEventListener(n,a,!1)}function ff(e,n,a,o,x){var w=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var B=o.tag;if(B===3||B===4){var W=o.stateNode.containerInfo;if(W===x)break;if(B===4)for(B=o.return;B!==null;){var fe=B.tag;if((fe===3||fe===4)&&B.stateNode.containerInfo===x)return;B=B.return}for(;W!==null;){if(B=In(W),B===null)return;if(fe=B.tag,fe===5||fe===6||fe===26||fe===27){o=w=B;continue e}W=W.parentNode}}o=o.return}no(function(){var Ie=w,He=Js(a),Xe=[];e:{var De=ho.get(e);if(De!==void 0){var Le=rr,dt=e;switch(e){case"keypress":if(wi(a)===0)break e;case"keydown":case"keyup":Le=hs;break;case"focusin":dt="focus",Le=nl;break;case"focusout":dt="blur",Le=nl;break;case"beforeblur":case"afterblur":Le=nl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=fs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Fc;break;case Dr:case gr:case un:Le=Ot;break;case zi:Le=Bi;break;case"scroll":case"scrollend":Le=ro;break;case"wheel":Le=Pc;break;case"copy":case"cut":case"paste":Le=ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=cn;break;case"toggle":case"beforetoggle":Le=il}var At=(n&4)!==0,bn=!At&&(e==="scroll"||e==="scrollend"),we=At?De!==null?De+"Capture":null:De;At=[];for(var be=Ie,Re;be!==null;){var Ge=be;if(Re=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||Re===null||we===null||(Ge=_t(be,we),Ge!=null&&At.push(Dl(be,Ge,Re))),bn)break;be=be.return}0<At.length&&(De=new Le(De,dt,null,a,He),Xe.push({event:De,listeners:At}))}}if((n&7)===0){e:{if(De=e==="mouseover"||e==="pointerover",Le=e==="mouseout"||e==="pointerout",De&&a!==vi&&(dt=a.relatedTarget||a.fromElement)&&(In(dt)||dt[Sr]))break e;if((Le||De)&&(De=He.window===He?He:(De=He.ownerDocument)?De.defaultView||De.parentWindow:window,Le?(dt=a.relatedTarget||a.toElement,Le=Ie,dt=dt?In(dt):null,dt!==null&&(bn=g(dt),At=dt.tag,dt!==bn||At!==5&&At!==27&&At!==6)&&(dt=null)):(Le=null,dt=Ie),Le!==dt)){if(At=sn,Ge="onMouseLeave",we="onMouseEnter",be="mouse",(e==="pointerout"||e==="pointerover")&&(At=cn,Ge="onPointerLeave",we="onPointerEnter",be="pointer"),bn=Le==null?De:ci(Le),Re=dt==null?De:ci(dt),De=new At(Ge,be+"leave",Le,a,He),De.target=bn,De.relatedTarget=Re,Ge=null,In(He)===Ie&&(At=new At(we,be+"enter",dt,a,He),At.target=Re,At.relatedTarget=bn,Ge=At),bn=Ge,Le&&dt)t:{for(At=tx,we=Le,be=dt,Re=0,Ge=we;Ge;Ge=At(Ge))Re++;Ge=0;for(var yt=be;yt;yt=At(yt))Ge++;for(;0<Re-Ge;)we=At(we),Re--;for(;0<Ge-Re;)be=At(be),Ge--;for(;Re--;){if(we===be||be!==null&&we===be.alternate){At=we;break t}we=At(we),be=At(be)}At=null}else At=null;Le!==null&&oh(Xe,De,Le,At,!1),dt!==null&&bn!==null&&oh(Xe,bn,dt,At,!0)}}e:{if(De=Ie?ci(Ie):window,Le=De.nodeName&&De.nodeName.toLowerCase(),Le==="select"||Le==="input"&&De.type==="file")var nn=Pr;else if(al(De))if(fo)nn=s;else{nn=r;var ht=t}else Le=De.nodeName,!Le||Le.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?Ie&&hn(Ie.elementType)&&(nn=Pr):nn=i;if(nn&&(nn=nn(e,Ie))){Fr(Xe,nn,a,He);break e}ht&&ht(e,De,Ie),e==="focusout"&&Ie&&De.type==="number"&&Ie.memoizedProps.value!=null&&$(De,"number",De.value)}switch(ht=Ie?ci(Ie):window,e){case"focusin":(al(ht)||ht.contentEditable==="true")&&(ge=ht,ye=Ie,Ae=null);break;case"focusout":Ae=ye=ge=null;break;case"mousedown":Me=!0;break;case"contextmenu":case"mouseup":case"dragend":Me=!1,rt(Xe,a,He);break;case"selectionchange":if(se)break;case"keydown":case"keyup":rt(Xe,a,He)}var Mt;if(za)e:{switch(e){case"compositionstart":var Xt="onCompositionStart";break e;case"compositionend":Xt="onCompositionEnd";break e;case"compositionupdate":Xt="onCompositionUpdate";break e}Xt=void 0}else oa?uo(e,a)&&(Xt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Xt="onCompositionStart");Xt&&(co&&a.locale!=="ko"&&(oa||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&oa&&(Mt=ra()):(fi=He,di="value"in fi?fi.value:fi.textContent,oa=!0)),ht=tc(Ie,Xt),0<ht.length&&(Xt=new so(Xt,e,null,a,He),Xe.push({event:Xt,listeners:ht}),Mt?Xt.data=Mt:(Mt=la(a),Mt!==null&&(Xt.data=Mt)))),(Mt=oo?Ai(e,a):ps(e,a))&&(Xt=tc(Ie,"onBeforeInput"),0<Xt.length&&(ht=new so("onBeforeInput","beforeinput",null,a,He),Xe.push({event:ht,listeners:Xt}),ht.data=Mt)),Qp(Xe,e,Ie,a,He)}sh(Xe,n)})}function Dl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function tc(e,n){for(var a=n+"Capture",o=[];e!==null;){var x=e,w=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||w===null||(x=_t(e,a),x!=null&&o.unshift(Dl(e,x,w)),x=_t(e,n),x!=null&&o.push(Dl(e,x,w))),e.tag===3)return o;e=e.return}return[]}function tx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function oh(e,n,a,o,x){for(var w=n._reactName,B=[];a!==null&&a!==o;){var W=a,fe=W.alternate,Ie=W.stateNode;if(W=W.tag,fe!==null&&fe===o)break;W!==5&&W!==26&&W!==27||Ie===null||(fe=Ie,x?(Ie=_t(a,w),Ie!=null&&B.unshift(Dl(a,Ie,fe))):x||(Ie=_t(a,w),Ie!=null&&B.push(Dl(a,Ie,fe)))),a=a.return}B.length!==0&&e.push({event:n,listeners:B})}var nx=/\r\n?/g,rx=/\u0000|\uFFFD/g;function ch(e){return(typeof e=="string"?e:""+e).replace(nx,`
`).replace(rx,"")}function uh(e,n){return n=ch(n),ch(e)===n}function yn(e,n,a,o,x,w){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||on(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&on(e,""+o);break;case"className":J(e,"class",o);break;case"tabIndex":J(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":J(e,a,o);break;case"style":gt(e,o,w);break;case"data":if(n!=="object"){J(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bi(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(a==="formAction"?(n!=="input"&&yn(e,n,"name",x.name,x,null),yn(e,n,"formEncType",x.formEncType,x,null),yn(e,n,"formMethod",x.formMethod,x,null),yn(e,n,"formTarget",x.formTarget,x,null)):(yn(e,n,"encType",x.encType,x,null),yn(e,n,"method",x.method,x,null),yn(e,n,"target",x.target,x,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=bi(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=vr);break;case"onScroll":o!=null&&Pt("scroll",e);break;case"onScrollEnd":o!=null&&Pt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(p(61));if(a=o.__html,a!=null){if(x.children!=null)throw Error(p(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=bi(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Pt("beforetoggle",e),Pt("toggle",e),yi(e,"popover",o);break;case"xlinkActuate":ue(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ue(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ue(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ue(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ue(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ue(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ue(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ue(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ue(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":yi(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=na.get(a)||a,yi(e,a,o))}}function df(e,n,a,o,x,w){switch(a){case"style":gt(e,o,w);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(p(61));if(a=o.__html,a!=null){if(x.children!=null)throw Error(p(60));e.innerHTML=a}}break;case"children":typeof o=="string"?on(e,o):(typeof o=="number"||typeof o=="bigint")&&on(e,""+o);break;case"onScroll":o!=null&&Pt("scroll",e);break;case"onScrollEnd":o!=null&&Pt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ls.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(x=a.endsWith("Capture"),n=a.slice(2,x?a.length-7:void 0),w=e[an]||null,w=w!=null?w[a]:null,typeof w=="function"&&e.removeEventListener(n,w,x),typeof o=="function")){typeof w!="function"&&w!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,x);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):yi(e,a,o)}}}function yr(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",e),Pt("load",e);var o=!1,x=!1,w;for(w in a)if(a.hasOwnProperty(w)){var B=a[w];if(B!=null)switch(w){case"src":o=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,n));default:yn(e,n,w,B,a,null)}}x&&yn(e,n,"srcSet",a.srcSet,a,null),o&&yn(e,n,"src",a.src,a,null);return;case"input":Pt("invalid",e);var W=w=B=x=null,fe=null,Ie=null;for(o in a)if(a.hasOwnProperty(o)){var He=a[o];if(He!=null)switch(o){case"name":x=He;break;case"type":B=He;break;case"checked":fe=He;break;case"defaultChecked":Ie=He;break;case"value":w=He;break;case"defaultValue":W=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(p(137,n));break;default:yn(e,n,o,He,a,null)}}de(e,w,W,fe,Ie,B,x,!1);return;case"select":Pt("invalid",e),o=B=w=null;for(x in a)if(a.hasOwnProperty(x)&&(W=a[x],W!=null))switch(x){case"value":w=W;break;case"defaultValue":B=W;break;case"multiple":o=W;default:yn(e,n,x,W,a,null)}n=w,a=B,e.multiple=!!o,n!=null?at(e,!!o,n,!1):a!=null&&at(e,!!o,a,!0);return;case"textarea":Pt("invalid",e),w=x=o=null;for(B in a)if(a.hasOwnProperty(B)&&(W=a[B],W!=null))switch(B){case"value":o=W;break;case"defaultValue":x=W;break;case"children":w=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(p(91));break;default:yn(e,n,B,W,a,null)}Ht(e,o,x,w);return;case"option":for(fe in a)a.hasOwnProperty(fe)&&(o=a[fe],o!=null)&&(fe==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":yn(e,n,fe,o,a,null));return;case"dialog":Pt("beforetoggle",e),Pt("toggle",e),Pt("cancel",e),Pt("close",e);break;case"iframe":case"object":Pt("load",e);break;case"video":case"audio":for(o=0;o<Il.length;o++)Pt(Il[o],e);break;case"image":Pt("error",e),Pt("load",e);break;case"details":Pt("toggle",e);break;case"embed":case"source":case"link":Pt("error",e),Pt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ie in a)if(a.hasOwnProperty(Ie)&&(o=a[Ie],o!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,n));default:yn(e,n,Ie,o,a,null)}return;default:if(hn(n)){for(He in a)a.hasOwnProperty(He)&&(o=a[He],o!==void 0&&df(e,n,He,o,a,void 0));return}}for(W in a)a.hasOwnProperty(W)&&(o=a[W],o!=null&&yn(e,n,W,o,a,null))}function ix(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,w=null,B=null,W=null,fe=null,Ie=null,He=null;for(Le in a){var Xe=a[Le];if(a.hasOwnProperty(Le)&&Xe!=null)switch(Le){case"checked":break;case"value":break;case"defaultValue":fe=Xe;default:o.hasOwnProperty(Le)||yn(e,n,Le,null,o,Xe)}}for(var De in o){var Le=o[De];if(Xe=a[De],o.hasOwnProperty(De)&&(Le!=null||Xe!=null))switch(De){case"type":w=Le;break;case"name":x=Le;break;case"checked":Ie=Le;break;case"defaultChecked":He=Le;break;case"value":B=Le;break;case"defaultValue":W=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(p(137,n));break;default:Le!==Xe&&yn(e,n,De,Le,o,Xe)}}Ke(e,B,W,fe,Ie,He,w,x);return;case"select":Le=B=W=De=null;for(w in a)if(fe=a[w],a.hasOwnProperty(w)&&fe!=null)switch(w){case"value":break;case"multiple":Le=fe;default:o.hasOwnProperty(w)||yn(e,n,w,null,o,fe)}for(x in o)if(w=o[x],fe=a[x],o.hasOwnProperty(x)&&(w!=null||fe!=null))switch(x){case"value":De=w;break;case"defaultValue":W=w;break;case"multiple":B=w;default:w!==fe&&yn(e,n,x,w,o,fe)}n=W,a=B,o=Le,De!=null?at(e,!!a,De,!1):!!o!=!!a&&(n!=null?at(e,!!a,n,!0):at(e,!!a,a?[]:"",!1));return;case"textarea":Le=De=null;for(W in a)if(x=a[W],a.hasOwnProperty(W)&&x!=null&&!o.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:yn(e,n,W,null,o,x)}for(B in o)if(x=o[B],w=a[B],o.hasOwnProperty(B)&&(x!=null||w!=null))switch(B){case"value":De=x;break;case"defaultValue":Le=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(p(91));break;default:x!==w&&yn(e,n,B,x,o,w)}Et(e,De,Le);return;case"option":for(var dt in a)De=a[dt],a.hasOwnProperty(dt)&&De!=null&&!o.hasOwnProperty(dt)&&(dt==="selected"?e.selected=!1:yn(e,n,dt,null,o,De));for(fe in o)De=o[fe],Le=a[fe],o.hasOwnProperty(fe)&&De!==Le&&(De!=null||Le!=null)&&(fe==="selected"?e.selected=De&&typeof De!="function"&&typeof De!="symbol":yn(e,n,fe,De,o,Le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in a)De=a[At],a.hasOwnProperty(At)&&De!=null&&!o.hasOwnProperty(At)&&yn(e,n,At,null,o,De);for(Ie in o)if(De=o[Ie],Le=a[Ie],o.hasOwnProperty(Ie)&&De!==Le&&(De!=null||Le!=null))switch(Ie){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(p(137,n));break;default:yn(e,n,Ie,De,o,Le)}return;default:if(hn(n)){for(var bn in a)De=a[bn],a.hasOwnProperty(bn)&&De!==void 0&&!o.hasOwnProperty(bn)&&df(e,n,bn,void 0,o,De);for(He in o)De=o[He],Le=a[He],!o.hasOwnProperty(He)||De===Le||De===void 0&&Le===void 0||df(e,n,He,De,o,Le);return}}for(var we in a)De=a[we],a.hasOwnProperty(we)&&De!=null&&!o.hasOwnProperty(we)&&yn(e,n,we,null,o,De);for(Xe in o)De=o[Xe],Le=a[Xe],!o.hasOwnProperty(Xe)||De===Le||De==null&&Le==null||yn(e,n,Xe,De,o,Le)}function fh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ax(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var x=a[o],w=x.transferSize,B=x.initiatorType,W=x.duration;if(w&&W&&fh(B)){for(B=0,W=x.responseEnd,o+=1;o<a.length;o++){var fe=a[o],Ie=fe.startTime;if(Ie>W)break;var He=fe.transferSize,Xe=fe.initiatorType;He&&fh(Xe)&&(fe=fe.responseEnd,B+=He*(fe<W?1:(W-Ie)/(fe-Ie)))}if(--o,n+=8*(w+B)/(x.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var hf=null,gf=null;function nc(e){return e.nodeType===9?e:e.ownerDocument}function dh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hh(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function pf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var xf=null;function sx(){var e=window.event;return e&&e.type==="popstate"?e===xf?!1:(xf=e,!0):(xf=null,!1)}var gh=typeof setTimeout=="function"?setTimeout:void 0,lx=typeof clearTimeout=="function"?clearTimeout:void 0,ph=typeof Promise=="function"?Promise:void 0,ox=typeof queueMicrotask=="function"?queueMicrotask:typeof ph<"u"?function(e){return ph.resolve(null).then(e).catch(cx)}:gh;function cx(e){setTimeout(function(){throw e})}function _a(e){return e==="head"}function xh(e,n){var a=n,o=0;do{var x=a.nextSibling;if(e.removeChild(a),x&&x.nodeType===8)if(a=x.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(x),Ps(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Ol(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ol(a);for(var w=a.firstChild;w;){var B=w.nextSibling,W=w.nodeName;w[Di]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&w.rel.toLowerCase()==="stylesheet"||a.removeChild(w),w=B}}else a==="body"&&Ol(e.ownerDocument.body);a=x}while(a);Ps(n)}function mh(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function mf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":mf(a),br(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function ux(e,n,a,o){for(;e.nodeType===1;){var x=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Di])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==x.rel||e.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||e.getAttribute("title")!==(x.title==null?null:x.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(x.src==null?null:x.src)||e.getAttribute("type")!==(x.type==null?null:x.type)||e.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=x.name==null?null:""+x.name;if(x.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=ri(e.nextSibling),e===null)break}return null}function fx(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ri(e.nextSibling),e===null))return null;return e}function yh(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=ri(e.nextSibling),e===null))return null;return e}function yf(e){return e.data==="$?"||e.data==="$~"}function bf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function dx(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function ri(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var vf=null;function bh(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return ri(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function vh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function wh(e,n,a){switch(n=nc(a),e){case"html":if(e=n.documentElement,!e)throw Error(p(452));return e;case"head":if(e=n.head,!e)throw Error(p(453));return e;case"body":if(e=n.body,!e)throw Error(p(454));return e;default:throw Error(p(451))}}function Ol(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);br(e)}var ii=new Map,Ch=new Set;function rc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $i=re.d;re.d={f:hx,r:gx,D:px,C:xx,L:mx,m:yx,X:vx,S:bx,M:wx};function hx(){var e=$i.f(),n=qo();return e||n}function gx(e){var n=$t(e);n!==null&&n.tag===5&&n.type==="form"?U1(n):$i.r(e)}var zs=typeof document>"u"?null:document;function Eh(e,n,a){var o=zs;if(o&&typeof n=="string"&&n){var x=Ue(n);x='link[rel="'+e+'"][href="'+x+'"]',typeof a=="string"&&(x+='[crossorigin="'+a+'"]'),Ch.has(x)||(Ch.add(x),e={rel:e,crossOrigin:a,href:n},o.querySelector(x)===null&&(n=o.createElement("link"),yr(n,"link",e),_n(n),o.head.appendChild(n)))}}function px(e){$i.D(e),Eh("dns-prefetch",e,null)}function xx(e,n){$i.C(e,n),Eh("preconnect",e,n)}function mx(e,n,a){$i.L(e,n,a);var o=zs;if(o&&e&&n){var x='link[rel="preload"][as="'+Ue(n)+'"]';n==="image"&&a&&a.imageSrcSet?(x+='[imagesrcset="'+Ue(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(x+='[imagesizes="'+Ue(a.imageSizes)+'"]')):x+='[href="'+Ue(e)+'"]';var w=x;switch(n){case"style":w=Us(e);break;case"script":w=Fs(e)}ii.has(w)||(e=_({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),ii.set(w,e),o.querySelector(x)!==null||n==="style"&&o.querySelector(Ml(w))||n==="script"&&o.querySelector(Bl(w))||(n=o.createElement("link"),yr(n,"link",e),_n(n),o.head.appendChild(n)))}}function yx(e,n){$i.m(e,n);var a=zs;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",x='link[rel="modulepreload"][as="'+Ue(o)+'"][href="'+Ue(e)+'"]',w=x;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Fs(e)}if(!ii.has(w)&&(e=_({rel:"modulepreload",href:e},n),ii.set(w,e),a.querySelector(x)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Bl(w)))return}o=a.createElement("link"),yr(o,"link",e),_n(o),a.head.appendChild(o)}}}function bx(e,n,a){$i.S(e,n,a);var o=zs;if(o&&e){var x=Gn(o).hoistableStyles,w=Us(e);n=n||"default";var B=x.get(w);if(!B){var W={loading:0,preload:null};if(B=o.querySelector(Ml(w)))W.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":n},a),(a=ii.get(w))&&wf(e,a);var fe=B=o.createElement("link");_n(fe),yr(fe,"link",e),fe._p=new Promise(function(Ie,He){fe.onload=Ie,fe.onerror=He}),fe.addEventListener("load",function(){W.loading|=1}),fe.addEventListener("error",function(){W.loading|=2}),W.loading|=4,ic(B,n,o)}B={type:"stylesheet",instance:B,count:1,state:W},x.set(w,B)}}}function vx(e,n){$i.X(e,n);var a=zs;if(a&&e){var o=Gn(a).hoistableScripts,x=Fs(e),w=o.get(x);w||(w=a.querySelector(Bl(x)),w||(e=_({src:e,async:!0},n),(n=ii.get(x))&&Cf(e,n),w=a.createElement("script"),_n(w),yr(w,"link",e),a.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},o.set(x,w))}}function wx(e,n){$i.M(e,n);var a=zs;if(a&&e){var o=Gn(a).hoistableScripts,x=Fs(e),w=o.get(x);w||(w=a.querySelector(Bl(x)),w||(e=_({src:e,async:!0,type:"module"},n),(n=ii.get(x))&&Cf(e,n),w=a.createElement("script"),_n(w),yr(w,"link",e),a.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},o.set(x,w))}}function Ah(e,n,a,o){var x=(x=ze.current)?rc(x):null;if(!x)throw Error(p(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Us(a.href),a=Gn(x).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Us(a.href);var w=Gn(x).hoistableStyles,B=w.get(e);if(B||(x=x.ownerDocument||x,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,B),(w=x.querySelector(Ml(e)))&&!w._p&&(B.instance=w,B.state.loading=5),ii.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ii.set(e,a),w||Cx(x,e,a,B.state))),n&&o===null)throw Error(p(528,""));return B}if(n&&o!==null)throw Error(p(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Fs(a),a=Gn(x).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,e))}}function Us(e){return'href="'+Ue(e)+'"'}function Ml(e){return'link[rel="stylesheet"]['+e+"]"}function Sh(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function Cx(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),yr(n,"link",a),_n(n),e.head.appendChild(n))}function Fs(e){return'[src="'+Ue(e)+'"]'}function Bl(e){return"script[async]"+e}function _h(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Ue(a.href)+'"]');if(o)return n.instance=o,_n(o),o;var x=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),_n(o),yr(o,"style",x),ic(o,a.precedence,e),n.instance=o;case"stylesheet":x=Us(a.href);var w=e.querySelector(Ml(x));if(w)return n.state.loading|=4,n.instance=w,_n(w),w;o=Sh(a),(x=ii.get(x))&&wf(o,x),w=(e.ownerDocument||e).createElement("link"),_n(w);var B=w;return B._p=new Promise(function(W,fe){B.onload=W,B.onerror=fe}),yr(w,"link",o),n.state.loading|=4,ic(w,a.precedence,e),n.instance=w;case"script":return w=Fs(a.src),(x=e.querySelector(Bl(w)))?(n.instance=x,_n(x),x):(o=a,(x=ii.get(w))&&(o=_({},a),Cf(o,x)),e=e.ownerDocument||e,x=e.createElement("script"),_n(x),yr(x,"link",o),e.head.appendChild(x),n.instance=x);case"void":return null;default:throw Error(p(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,ic(o,a.precedence,e));return n.instance}function ic(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=o.length?o[o.length-1]:null,w=x,B=0;B<o.length;B++){var W=o[B];if(W.dataset.precedence===n)w=W;else if(w!==x)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function wf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Cf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ac=null;function Th(e,n,a){if(ac===null){var o=new Map,x=ac=new Map;x.set(a,o)}else x=ac,o=x.get(a),o||(o=new Map,x.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),x=0;x<a.length;x++){var w=a[x];if(!(w[Di]||w[Ln]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var B=w.getAttribute(n)||"";B=e+B;var W=o.get(B);W?W.push(w):o.set(B,[w])}}return o}function Nh(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Ex(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Rh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ax(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var x=Us(o.href),w=n.querySelector(Ml(x));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=sc.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=w,_n(w);return}w=n.ownerDocument||n,o=Sh(o),(x=ii.get(x))&&wf(o,x),w=w.createElement("link"),_n(w);var B=w;B._p=new Promise(function(W,fe){B.onload=W,B.onerror=fe}),yr(w,"link",o),a.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=sc.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Ef=0;function Sx(e,n){return e.stylesheets&&e.count===0&&oc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&oc(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&Ef===0&&(Ef=62500*ax());var x=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&oc(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>Ef?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(x)}}:null}function sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lc=null;function oc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lc=new Map,n.forEach(_x,e),lc=null,sc.call(e))}function _x(e,n){if(!(n.state.loading&4)){var a=lc.get(e);if(a)var o=a.get(null);else{a=new Map,lc.set(e,a);for(var x=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<x.length;w++){var B=x[w];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(a.set(B.dataset.precedence,B),o=B)}o&&a.set(null,o)}x=n.instance,B=x.getAttribute("data-precedence"),w=a.get(B)||o,w===o&&a.set(null,x),a.set(B,x),this.count++,o=sc.bind(this),x.addEventListener("load",o),x.addEventListener("error",o),w?w.parentNode.insertBefore(x,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(x,e.firstChild)),n.state.loading|=4}}var kl={$$typeof:H,Provider:null,Consumer:null,_currentValue:Ye,_currentValue2:Ye,_threadCount:0};function Tx(e,n,a,o,x,w,B,W,fe){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bn(0),this.hiddenUpdates=Bn(null),this.identifierPrefix=o,this.onUncaughtError=x,this.onCaughtError=w,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function Ih(e,n,a,o,x,w,B,W,fe,Ie,He,Xe){return e=new Tx(e,n,a,B,fe,Ie,He,Xe,W),n=1,w===!0&&(n|=24),w=Hr(3,null,null,n),e.current=w,w.stateNode=e,n=tu(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:o,isDehydrated:a,cache:n},au(w),e}function Dh(e){return e?(e=ms,e):ms}function Oh(e,n,a,o,x,w){x=Dh(x),o.context===null?o.context=x:o.pendingContext=x,o=pa(n),o.payload={element:a},w=w===void 0?null:w,w!==null&&(o.callback=w),a=xa(e,o,n),a!==null&&(Lr(a,e,n),hl(a,e,n))}function Mh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Af(e,n){Mh(e,n),(e=e.alternate)&&Mh(e,n)}function Bh(e){if(e.tag===13||e.tag===31){var n=Ga(e,67108864);n!==null&&Lr(n,e,67108864),Af(e,67108864)}}function kh(e){if(e.tag===13||e.tag===31){var n=Zr();n=vn(n);var a=Ga(e,n);a!==null&&Lr(a,e,n),Af(e,n)}}var cc=!0;function Nx(e,n,a,o){var x=me.T;me.T=null;var w=re.p;try{re.p=2,Sf(e,n,a,o)}finally{re.p=w,me.T=x}}function Rx(e,n,a,o){var x=me.T;me.T=null;var w=re.p;try{re.p=8,Sf(e,n,a,o)}finally{re.p=w,me.T=x}}function Sf(e,n,a,o){if(cc){var x=_f(o);if(x===null)ff(e,n,o,uc,a),jh(e,o);else if(Dx(x,e,n,a,o))o.stopPropagation();else if(jh(e,o),n&4&&-1<Ix.indexOf(e)){for(;x!==null;){var w=$t(x);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var B=en(w.pendingLanes);if(B!==0){var W=w;for(W.pendingLanes|=2,W.entangledLanes|=2;B;){var fe=1<<31-mt(B);W.entanglements[1]|=fe,B&=~fe}Ni(w),(ln&6)===0&&(Yo=tt()+500,Rl(0))}}break;case 31:case 13:W=Ga(w,2),W!==null&&Lr(W,w,2),qo(),Af(w,2)}if(w=_f(o),w===null&&ff(e,n,o,uc,a),w===x)break;x=w}x!==null&&o.stopPropagation()}else ff(e,n,o,null,a)}}function _f(e){return e=Js(e),Tf(e)}var uc=null;function Tf(e){if(uc=null,e=In(e),e!==null){var n=g(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=E(n),e!==null)return e;e=null}else if(a===31){if(e=C(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return uc=e,null}function Lh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case ot:return 2;case It:return 8;case pt:case kt:return 32;case dr:return 268435456;default:return 32}default:return 32}}var Nf=!1,Ta=null,Na=null,Ra=null,Ll=new Map,jl=new Map,Ia=[],Ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jh(e,n){switch(e){case"focusin":case"focusout":Ta=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Ra=null;break;case"pointerover":case"pointerout":Ll.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(n.pointerId)}}function zl(e,n,a,o,x,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:w,targetContainers:[x]},n!==null&&(n=$t(n),n!==null&&Bh(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,x!==null&&n.indexOf(x)===-1&&n.push(x),e)}function Dx(e,n,a,o,x){switch(n){case"focusin":return Ta=zl(Ta,e,n,a,o,x),!0;case"dragenter":return Na=zl(Na,e,n,a,o,x),!0;case"mouseover":return Ra=zl(Ra,e,n,a,o,x),!0;case"pointerover":var w=x.pointerId;return Ll.set(w,zl(Ll.get(w)||null,e,n,a,o,x)),!0;case"gotpointercapture":return w=x.pointerId,jl.set(w,zl(jl.get(w)||null,e,n,a,o,x)),!0}return!1}function zh(e){var n=In(e.target);if(n!==null){var a=g(n);if(a!==null){if(n=a.tag,n===13){if(n=E(a),n!==null){e.blockedOn=n,lt(e.priority,function(){kh(a)});return}}else if(n===31){if(n=C(a),n!==null){e.blockedOn=n,lt(e.priority,function(){kh(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=_f(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);vi=o,a.target.dispatchEvent(o),vi=null}else return n=$t(a),n!==null&&Bh(n),e.blockedOn=a,!1;n.shift()}return!0}function Uh(e,n,a){fc(e)&&a.delete(n)}function Ox(){Nf=!1,Ta!==null&&fc(Ta)&&(Ta=null),Na!==null&&fc(Na)&&(Na=null),Ra!==null&&fc(Ra)&&(Ra=null),Ll.forEach(Uh),jl.forEach(Uh)}function dc(e,n){e.blockedOn===n&&(e.blockedOn=null,Nf||(Nf=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Ox)))}var hc=null;function Fh(e){hc!==e&&(hc=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){hc===e&&(hc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],x=e[n+2];if(typeof o!="function"){if(Tf(o||a)===null)continue;break}var w=$t(a);w!==null&&(e.splice(n,3),n-=3,Su(w,{pending:!0,data:x,method:a.method,action:o},o,x))}}))}function Ps(e){function n(fe){return dc(fe,e)}Ta!==null&&dc(Ta,e),Na!==null&&dc(Na,e),Ra!==null&&dc(Ra,e),Ll.forEach(n),jl.forEach(n);for(var a=0;a<Ia.length;a++){var o=Ia[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ia.length&&(a=Ia[0],a.blockedOn===null);)zh(a),a.blockedOn===null&&Ia.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var x=a[o],w=a[o+1],B=x[an]||null;if(typeof w=="function")B||Fh(a);else if(B){var W=null;if(w&&w.hasAttribute("formAction")){if(x=w,B=w[an]||null)W=B.formAction;else if(Tf(x)!==null)continue}else W=B.action;typeof W=="function"?a[o+1]=W:(a.splice(o,3),o-=3),Fh(a)}}}function Ph(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(B){return x=B})},focusReset:"manual",scroll:"manual"})}function n(){x!==null&&(x(),x=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,x=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),x!==null&&(x(),x=null)}}}function Rf(e){this._internalRoot=e}gc.prototype.render=Rf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(p(409));var a=n.current,o=Zr();Oh(a,o,e,n,null,null)},gc.prototype.unmount=Rf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Oh(e.current,2,null,e,null,null),qo(),n[Sr]=null}};function gc(e){this._internalRoot=e}gc.prototype.unstable_scheduleHydration=function(e){if(e){var n=An();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Ia.length&&n!==0&&n<Ia[a].priority;a++);Ia.splice(a,0,e),a===0&&zh(e)}};var Hh=d.version;if(Hh!=="19.2.4")throw Error(p(527,Hh,"19.2.4"));re.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=y(n),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var Mx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:me,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{bt=pc.inject(Mx),qe=pc}catch{}}return Fl.createRoot=function(e,n){if(!m(e))throw Error(p(299));var a=!1,o="",x=W1,w=K1,B=Q1;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(B=n.onRecoverableError)),n=Ih(e,1,!1,null,null,a,o,null,x,w,B,Ph),e[Sr]=n.current,uf(e),new Rf(n)},Fl.hydrateRoot=function(e,n,a){if(!m(e))throw Error(p(299));var o=!1,x="",w=W1,B=K1,W=Q1,fe=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onUncaughtError!==void 0&&(w=a.onUncaughtError),a.onCaughtError!==void 0&&(B=a.onCaughtError),a.onRecoverableError!==void 0&&(W=a.onRecoverableError),a.formState!==void 0&&(fe=a.formState)),n=Ih(e,1,!0,n,a??null,o,x,fe,w,B,W,Ph),n.context=Dh(null),a=n.current,o=Zr(),o=vn(o),x=pa(o),x.callback=null,xa(a,x,o),a=o,n.current.lanes=a,tr(n,a),Ni(n),e[Sr]=n.current,uf(e),new gc(n)},Fl.version="19.2.4",Fl}var Jh;function Hx(){if(Jh)return Of.exports;Jh=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(d){console.error(d)}}return u(),Of.exports=Px(),Of.exports}var Gx=Hx();const Vx="modulepreload",Xx=function(u){return"/hokkaido-app/"+u},$h={},Nd=function(d,f,p){let m=Promise.resolve();if(f&&f.length>0){let y=function(N){return Promise.all(N.map(_=>Promise.resolve(_).then(R=>({status:"fulfilled",value:R}),R=>({status:"rejected",reason:R}))))};var E=y;document.getElementsByTagName("link");const C=document.querySelector("meta[property=csp-nonce]"),v=C?.nonce||C?.getAttribute("nonce");m=y(f.map(N=>{if(N=Xx(N),N in $h)return;$h[N]=!0;const _=N.endsWith(".css"),R=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${N}"]${R}`))return;const T=document.createElement("link");if(T.rel=_?"stylesheet":Vx,_||(T.as="script"),T.crossOrigin="",T.href=N,v&&T.setAttribute("nonce",v),document.head.appendChild(T),_)return new Promise((k,I)=>{T.addEventListener("load",k),T.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${N}`)))})}))}function g(C){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=C,window.dispatchEvent(v),!v.defaultPrevented)throw C}return m.then(C=>{for(const v of C||[])v.status==="rejected"&&g(v.reason);return d().catch(g)})};function Ba(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lf={exports:{}};var eg;function Yx(){return eg||(eg=1,(function(u,d){(function(f){u.exports=f()})(function(){return(function f(p,m,g){function E(y,N){if(!m[y]){if(!p[y]){var _=typeof Ba=="function"&&Ba;if(!N&&_)return _(y,!0);if(C)return C(y,!0);var R=new Error("Cannot find module '"+y+"'");throw R.code="MODULE_NOT_FOUND",R}var T=m[y]={exports:{}};p[y][0].call(T.exports,function(k){var I=p[y][1][k];return E(I||k)},T,T.exports,f,p,m,g)}return m[y].exports}for(var C=typeof Ba=="function"&&Ba,v=0;v<g.length;v++)E(g[v]);return E})({1:[function(f,p,m){(function(g){var E=g.MutationObserver||g.WebKitMutationObserver,C;if(E){var v=0,y=new E(k),N=g.document.createTextNode("");y.observe(N,{characterData:!0}),C=function(){N.data=v=++v%2}}else if(!g.setImmediate&&typeof g.MessageChannel<"u"){var _=new g.MessageChannel;_.port1.onmessage=k,C=function(){_.port2.postMessage(0)}}else"document"in g&&"onreadystatechange"in g.document.createElement("script")?C=function(){var z=g.document.createElement("script");z.onreadystatechange=function(){k(),z.onreadystatechange=null,z.parentNode.removeChild(z),z=null},g.document.documentElement.appendChild(z)}:C=function(){setTimeout(k,0)};var R,T=[];function k(){R=!0;for(var z,j,P=T.length;P;){for(j=T,T=[],z=-1;++z<P;)j[z]();P=T.length}R=!1}p.exports=I;function I(z){T.push(z)===1&&!R&&C()}}).call(this,typeof li<"u"?li:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(f,p,m){var g=f(1);function E(){}var C={},v=["REJECTED"],y=["FULFILLED"],N=["PENDING"];p.exports=_;function _(Z){if(typeof Z!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,Z!==E&&I(this,Z)}_.prototype.catch=function(Z){return this.then(null,Z)},_.prototype.then=function(Z,V){if(typeof Z!="function"&&this.state===y||typeof V!="function"&&this.state===v)return this;var L=new this.constructor(E);if(this.state!==N){var Q=this.state===y?Z:V;T(L,Q,this.outcome)}else this.queue.push(new R(L,Z,V));return L};function R(Z,V,L){this.promise=Z,typeof V=="function"&&(this.onFulfilled=V,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}R.prototype.callFulfilled=function(Z){C.resolve(this.promise,Z)},R.prototype.otherCallFulfilled=function(Z){T(this.promise,this.onFulfilled,Z)},R.prototype.callRejected=function(Z){C.reject(this.promise,Z)},R.prototype.otherCallRejected=function(Z){T(this.promise,this.onRejected,Z)};function T(Z,V,L){g(function(){var Q;try{Q=V(L)}catch(G){return C.reject(Z,G)}Q===Z?C.reject(Z,new TypeError("Cannot resolve promise with itself")):C.resolve(Z,Q)})}C.resolve=function(Z,V){var L=z(k,V);if(L.status==="error")return C.reject(Z,L.value);var Q=L.value;if(Q)I(Z,Q);else{Z.state=y,Z.outcome=V;for(var G=-1,xe=Z.queue.length;++G<xe;)Z.queue[G].callFulfilled(V)}return Z},C.reject=function(Z,V){Z.state=v,Z.outcome=V;for(var L=-1,Q=Z.queue.length;++L<Q;)Z.queue[L].callRejected(V);return Z};function k(Z){var V=Z&&Z.then;if(Z&&(typeof Z=="object"||typeof Z=="function")&&typeof V=="function")return function(){V.apply(Z,arguments)}}function I(Z,V){var L=!1;function Q(X){L||(L=!0,C.reject(Z,X))}function G(X){L||(L=!0,C.resolve(Z,X))}function xe(){V(G,Q)}var ce=z(xe);ce.status==="error"&&Q(ce.value)}function z(Z,V){var L={};try{L.value=Z(V),L.status="success"}catch(Q){L.status="error",L.value=Q}return L}_.resolve=j;function j(Z){return Z instanceof this?Z:C.resolve(new this(E),Z)}_.reject=P;function P(Z){var V=new this(E);return C.reject(V,Z)}_.all=H;function H(Z){var V=this;if(Object.prototype.toString.call(Z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=Z.length,Q=!1;if(!L)return this.resolve([]);for(var G=new Array(L),xe=0,ce=-1,X=new this(E);++ce<L;)ie(Z[ce],ce);return X;function ie(M,ae){V.resolve(M).then(me,function(re){Q||(Q=!0,C.reject(X,re))});function me(re){G[ae]=re,++xe===L&&!Q&&(Q=!0,C.resolve(X,G))}}}_.race=K;function K(Z){var V=this;if(Object.prototype.toString.call(Z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=Z.length,Q=!1;if(!L)return this.resolve([]);for(var G=-1,xe=new this(E);++G<L;)ce(Z[G]);return xe;function ce(X){V.resolve(X).then(function(ie){Q||(Q=!0,C.resolve(xe,ie))},function(ie){Q||(Q=!0,C.reject(xe,ie))})}}},{1:1}],3:[function(f,p,m){(function(g){typeof g.Promise!="function"&&(g.Promise=f(2))}).call(this,typeof li<"u"?li:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(f,p,m){var g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J};function E(J,ue){if(!(J instanceof ue))throw new TypeError("Cannot call a class as a function")}function C(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var v=C();function y(){try{if(!v||!v.open)return!1;var J=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ue=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!J||ue)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function N(J,ue){J=J||[],ue=ue||{};try{return new Blob(J,ue)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ve=new ee,Ce=0;Ce<J.length;Ce+=1)ve.append(J[Ce]);return ve.getBlob(ue.type)}}typeof Promise>"u"&&f(3);var _=Promise;function R(J,ue){ue&&J.then(function(ee){ue(null,ee)},function(ee){ue(ee)})}function T(J,ue,ee){typeof ue=="function"&&J.then(ue),typeof ee=="function"&&J.catch(ee)}function k(J){return typeof J!="string"&&(console.warn(J+" used as a key, but it is not a string."),J=String(J)),J}function I(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var z="local-forage-detect-blob-support",j=void 0,P={},H=Object.prototype.toString,K="readonly",Z="readwrite";function V(J){for(var ue=J.length,ee=new ArrayBuffer(ue),ve=new Uint8Array(ee),Ce=0;Ce<ue;Ce++)ve[Ce]=J.charCodeAt(Ce);return ee}function L(J){return new _(function(ue){var ee=J.transaction(z,Z),ve=N([""]);ee.objectStore(z).put(ve,"key"),ee.onabort=function(Ce){Ce.preventDefault(),Ce.stopPropagation(),ue(!1)},ee.oncomplete=function(){var Ce=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);ue(pe||!Ce||parseInt(Ce[1],10)>=43)}}).catch(function(){return!1})}function Q(J){return typeof j=="boolean"?_.resolve(j):L(J).then(function(ue){return j=ue,j})}function G(J){var ue=P[J.name],ee={};ee.promise=new _(function(ve,Ce){ee.resolve=ve,ee.reject=Ce}),ue.deferredOperations.push(ee),ue.dbReady?ue.dbReady=ue.dbReady.then(function(){return ee.promise}):ue.dbReady=ee.promise}function xe(J){var ue=P[J.name],ee=ue.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function ce(J,ue){var ee=P[J.name],ve=ee.deferredOperations.pop();if(ve)return ve.reject(ue),ve.promise}function X(J,ue){return new _(function(ee,ve){if(P[J.name]=P[J.name]||ne(),J.db)if(ue)G(J),J.db.close();else return ee(J.db);var Ce=[J.name];ue&&Ce.push(J.version);var pe=v.open.apply(v,Ce);ue&&(pe.onupgradeneeded=function(Fe){var We=pe.result;try{We.createObjectStore(J.storeName),Fe.oldVersion<=1&&We.createObjectStore(z)}catch(Qe){if(Qe.name==="ConstraintError")console.warn('The database "'+J.name+'" has been upgraded from version '+Fe.oldVersion+" to version "+Fe.newVersion+', but the storage "'+J.storeName+'" already exists.');else throw Qe}}),pe.onerror=function(Fe){Fe.preventDefault(),ve(pe.error)},pe.onsuccess=function(){var Fe=pe.result;Fe.onversionchange=function(We){We.target.close()},ee(Fe),xe(J)}})}function ie(J){return X(J,!1)}function M(J){return X(J,!0)}function ae(J,ue){if(!J.db)return!0;var ee=!J.db.objectStoreNames.contains(J.storeName),ve=J.version<J.db.version,Ce=J.version>J.db.version;if(ve&&(J.version!==ue&&console.warn('The database "'+J.name+`" can't be downgraded from version `+J.db.version+" to version "+J.version+"."),J.version=J.db.version),Ce||ee){if(ee){var pe=J.db.version+1;pe>J.version&&(J.version=pe)}return!0}return!1}function me(J){return new _(function(ue,ee){var ve=new FileReader;ve.onerror=ee,ve.onloadend=function(Ce){var pe=btoa(Ce.target.result||"");ue({__local_forage_encoded_blob:!0,data:pe,type:J.type})},ve.readAsBinaryString(J)})}function re(J){var ue=V(atob(J.data));return N([ue],{type:J.type})}function Ye(J){return J&&J.__local_forage_encoded_blob}function ke(J){var ue=this,ee=ue._initReady().then(function(){var ve=P[ue._dbInfo.name];if(ve&&ve.dbReady)return ve.dbReady});return T(ee,J,J),ee}function Je(J){G(J);for(var ue=P[J.name],ee=ue.forages,ve=0;ve<ee.length;ve++){var Ce=ee[ve];Ce._dbInfo.db&&(Ce._dbInfo.db.close(),Ce._dbInfo.db=null)}return J.db=null,ie(J).then(function(pe){return J.db=pe,ae(J)?M(J):pe}).then(function(pe){J.db=ue.db=pe;for(var Fe=0;Fe<ee.length;Fe++)ee[Fe]._dbInfo.db=pe}).catch(function(pe){throw ce(J,pe),pe})}function q(J,ue,ee,ve){ve===void 0&&(ve=1);try{var Ce=J.db.transaction(J.storeName,ue);ee(null,Ce)}catch(pe){if(ve>0&&(!J.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return _.resolve().then(function(){if(!J.db||pe.name==="NotFoundError"&&!J.db.objectStoreNames.contains(J.storeName)&&J.version<=J.db.version)return J.db&&(J.version=J.db.version+1),M(J)}).then(function(){return Je(J).then(function(){q(J,ue,ee,ve-1)})}).catch(ee);ee(pe)}}function ne(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Oe(J){var ue=this,ee={db:null};if(J)for(var ve in J)ee[ve]=J[ve];var Ce=P[ee.name];Ce||(Ce=ne(),P[ee.name]=Ce),Ce.forages.push(ue),ue._initReady||(ue._initReady=ue.ready,ue.ready=ke);var pe=[];function Fe(){return _.resolve()}for(var We=0;We<Ce.forages.length;We++){var Qe=Ce.forages[We];Qe!==ue&&pe.push(Qe._initReady().catch(Fe))}var Ue=Ce.forages.slice(0);return _.all(pe).then(function(){return ee.db=Ce.db,ie(ee)}).then(function(Ke){return ee.db=Ke,ae(ee,ue._defaultConfig.version)?M(ee):Ke}).then(function(Ke){ee.db=Ce.db=Ke,ue._dbInfo=ee;for(var de=0;de<Ue.length;de++){var $=Ue[de];$!==ue&&($._dbInfo.db=ee.db,$._dbInfo.version=ee.version)}})}function Te(J,ue){var ee=this;J=k(J);var ve=new _(function(Ce,pe){ee.ready().then(function(){q(ee._dbInfo,K,function(Fe,We){if(Fe)return pe(Fe);try{var Qe=We.objectStore(ee._dbInfo.storeName),Ue=Qe.get(J);Ue.onsuccess=function(){var Ke=Ue.result;Ke===void 0&&(Ke=null),Ye(Ke)&&(Ke=re(Ke)),Ce(Ke)},Ue.onerror=function(){pe(Ue.error)}}catch(Ke){pe(Ke)}})}).catch(pe)});return R(ve,ue),ve}function je(J,ue){var ee=this,ve=new _(function(Ce,pe){ee.ready().then(function(){q(ee._dbInfo,K,function(Fe,We){if(Fe)return pe(Fe);try{var Qe=We.objectStore(ee._dbInfo.storeName),Ue=Qe.openCursor(),Ke=1;Ue.onsuccess=function(){var de=Ue.result;if(de){var $=de.value;Ye($)&&($=re($));var at=J($,de.key,Ke++);at!==void 0?Ce(at):de.continue()}else Ce()},Ue.onerror=function(){pe(Ue.error)}}catch(de){pe(de)}})}).catch(pe)});return R(ve,ue),ve}function ze(J,ue,ee){var ve=this;J=k(J);var Ce=new _(function(pe,Fe){var We;ve.ready().then(function(){return We=ve._dbInfo,H.call(ue)==="[object Blob]"?Q(We.db).then(function(Qe){return Qe?ue:me(ue)}):ue}).then(function(Qe){q(ve._dbInfo,Z,function(Ue,Ke){if(Ue)return Fe(Ue);try{var de=Ke.objectStore(ve._dbInfo.storeName);Qe===null&&(Qe=void 0);var $=de.put(Qe,J);Ke.oncomplete=function(){Qe===void 0&&(Qe=null),pe(Qe)},Ke.onabort=Ke.onerror=function(){var at=$.error?$.error:$.transaction.error;Fe(at)}}catch(at){Fe(at)}})}).catch(Fe)});return R(Ce,ee),Ce}function ct(J,ue){var ee=this;J=k(J);var ve=new _(function(Ce,pe){ee.ready().then(function(){q(ee._dbInfo,Z,function(Fe,We){if(Fe)return pe(Fe);try{var Qe=We.objectStore(ee._dbInfo.storeName),Ue=Qe.delete(J);We.oncomplete=function(){Ce()},We.onerror=function(){pe(Ue.error)},We.onabort=function(){var Ke=Ue.error?Ue.error:Ue.transaction.error;pe(Ke)}}catch(Ke){pe(Ke)}})}).catch(pe)});return R(ve,ue),ve}function nt(J){var ue=this,ee=new _(function(ve,Ce){ue.ready().then(function(){q(ue._dbInfo,Z,function(pe,Fe){if(pe)return Ce(pe);try{var We=Fe.objectStore(ue._dbInfo.storeName),Qe=We.clear();Fe.oncomplete=function(){ve()},Fe.onabort=Fe.onerror=function(){var Ue=Qe.error?Qe.error:Qe.transaction.error;Ce(Ue)}}catch(Ue){Ce(Ue)}})}).catch(Ce)});return R(ee,J),ee}function st(J){var ue=this,ee=new _(function(ve,Ce){ue.ready().then(function(){q(ue._dbInfo,K,function(pe,Fe){if(pe)return Ce(pe);try{var We=Fe.objectStore(ue._dbInfo.storeName),Qe=We.count();Qe.onsuccess=function(){ve(Qe.result)},Qe.onerror=function(){Ce(Qe.error)}}catch(Ue){Ce(Ue)}})}).catch(Ce)});return R(ee,J),ee}function ut(J,ue){var ee=this,ve=new _(function(Ce,pe){if(J<0){Ce(null);return}ee.ready().then(function(){q(ee._dbInfo,K,function(Fe,We){if(Fe)return pe(Fe);try{var Qe=We.objectStore(ee._dbInfo.storeName),Ue=!1,Ke=Qe.openKeyCursor();Ke.onsuccess=function(){var de=Ke.result;if(!de){Ce(null);return}J===0||Ue?Ce(de.key):(Ue=!0,de.advance(J))},Ke.onerror=function(){pe(Ke.error)}}catch(de){pe(de)}})}).catch(pe)});return R(ve,ue),ve}function Ct(J){var ue=this,ee=new _(function(ve,Ce){ue.ready().then(function(){q(ue._dbInfo,K,function(pe,Fe){if(pe)return Ce(pe);try{var We=Fe.objectStore(ue._dbInfo.storeName),Qe=We.openKeyCursor(),Ue=[];Qe.onsuccess=function(){var Ke=Qe.result;if(!Ke){ve(Ue);return}Ue.push(Ke.key),Ke.continue()},Qe.onerror=function(){Ce(Qe.error)}}catch(Ke){Ce(Ke)}})}).catch(Ce)});return R(ee,J),ee}function Qt(J,ue){ue=I.apply(this,arguments);var ee=this.config();J=typeof J!="function"&&J||{},J.name||(J.name=J.name||ee.name,J.storeName=J.storeName||ee.storeName);var ve=this,Ce;if(!J.name)Ce=_.reject("Invalid arguments");else{var pe=J.name===ee.name&&ve._dbInfo.db,Fe=pe?_.resolve(ve._dbInfo.db):ie(J).then(function(We){var Qe=P[J.name],Ue=Qe.forages;Qe.db=We;for(var Ke=0;Ke<Ue.length;Ke++)Ue[Ke]._dbInfo.db=We;return We});J.storeName?Ce=Fe.then(function(We){if(We.objectStoreNames.contains(J.storeName)){var Qe=We.version+1;G(J);var Ue=P[J.name],Ke=Ue.forages;We.close();for(var de=0;de<Ke.length;de++){var $=Ke[de];$._dbInfo.db=null,$._dbInfo.version=Qe}var at=new _(function(Et,Ht){var on=v.open(J.name,Qe);on.onerror=function(cr){var Vn=on.result;Vn.close(),Ht(cr)},on.onupgradeneeded=function(){var cr=on.result;cr.deleteObjectStore(J.storeName)},on.onsuccess=function(){var cr=on.result;cr.close(),Et(cr)}});return at.then(function(Et){Ue.db=Et;for(var Ht=0;Ht<Ke.length;Ht++){var on=Ke[Ht];on._dbInfo.db=Et,xe(on._dbInfo)}}).catch(function(Et){throw(ce(J,Et)||_.resolve()).catch(function(){}),Et})}}):Ce=Fe.then(function(We){G(J);var Qe=P[J.name],Ue=Qe.forages;We.close();for(var Ke=0;Ke<Ue.length;Ke++){var de=Ue[Ke];de._dbInfo.db=null}var $=new _(function(at,Et){var Ht=v.deleteDatabase(J.name);Ht.onerror=function(){var on=Ht.result;on&&on.close(),Et(Ht.error)},Ht.onblocked=function(){console.warn('dropInstance blocked for database "'+J.name+'" until all open connections are closed')},Ht.onsuccess=function(){var on=Ht.result;on&&on.close(),at(on)}});return $.then(function(at){Qe.db=at;for(var Et=0;Et<Ue.length;Et++){var Ht=Ue[Et];xe(Ht._dbInfo)}}).catch(function(at){throw(ce(J,at)||_.resolve()).catch(function(){}),at})})}return R(Ce,ue),Ce}var xt={_driver:"asyncStorage",_initStorage:Oe,_support:y(),iterate:je,getItem:Te,setItem:ze,removeItem:ct,clear:nt,length:st,key:ut,keys:Ct,dropInstance:Qt};function D(){return typeof openDatabase=="function"}var Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_e="~~local_forage_type~",le=/^~~local_forage_type~([^~]+)~/,te="__lfsc__:",he=te.length,Pe="arbf",Ee="blob",Se="si08",et="ui08",tt="uic8",it="si16",ot="si32",It="ur16",pt="ui32",kt="fl32",dr="fl64",dn=he+Pe.length,Cr=Object.prototype.toString;function bt(J){var ue=J.length*.75,ee=J.length,ve,Ce=0,pe,Fe,We,Qe;J[J.length-1]==="="&&(ue--,J[J.length-2]==="="&&ue--);var Ue=new ArrayBuffer(ue),Ke=new Uint8Array(Ue);for(ve=0;ve<ee;ve+=4)pe=Ne.indexOf(J[ve]),Fe=Ne.indexOf(J[ve+1]),We=Ne.indexOf(J[ve+2]),Qe=Ne.indexOf(J[ve+3]),Ke[Ce++]=pe<<2|Fe>>4,Ke[Ce++]=(Fe&15)<<4|We>>2,Ke[Ce++]=(We&3)<<6|Qe&63;return Ue}function qe(J){var ue=new Uint8Array(J),ee="",ve;for(ve=0;ve<ue.length;ve+=3)ee+=Ne[ue[ve]>>2],ee+=Ne[(ue[ve]&3)<<4|ue[ve+1]>>4],ee+=Ne[(ue[ve+1]&15)<<2|ue[ve+2]>>6],ee+=Ne[ue[ve+2]&63];return ue.length%3===2?ee=ee.substring(0,ee.length-1)+"=":ue.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function jt(J,ue){var ee="";if(J&&(ee=Cr.call(J)),J&&(ee==="[object ArrayBuffer]"||J.buffer&&Cr.call(J.buffer)==="[object ArrayBuffer]")){var ve,Ce=te;J instanceof ArrayBuffer?(ve=J,Ce+=Pe):(ve=J.buffer,ee==="[object Int8Array]"?Ce+=Se:ee==="[object Uint8Array]"?Ce+=et:ee==="[object Uint8ClampedArray]"?Ce+=tt:ee==="[object Int16Array]"?Ce+=it:ee==="[object Uint16Array]"?Ce+=It:ee==="[object Int32Array]"?Ce+=ot:ee==="[object Uint32Array]"?Ce+=pt:ee==="[object Float32Array]"?Ce+=kt:ee==="[object Float64Array]"?Ce+=dr:ue(new Error("Failed to get type for BinaryArray"))),ue(Ce+qe(ve))}else if(ee==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Fe=_e+J.type+"~"+qe(this.result);ue(te+Ee+Fe)},pe.readAsArrayBuffer(J)}else try{ue(JSON.stringify(J))}catch(Fe){console.error("Couldn't convert value into a JSON string: ",J),ue(null,Fe)}}function mt(J){if(J.substring(0,he)!==te)return JSON.parse(J);var ue=J.substring(dn),ee=J.substring(he,dn),ve;if(ee===Ee&&le.test(ue)){var Ce=ue.match(le);ve=Ce[1],ue=ue.substring(Ce[0].length)}var pe=bt(ue);switch(ee){case Pe:return pe;case Ee:return N([pe],{type:ve});case Se:return new Int8Array(pe);case et:return new Uint8Array(pe);case tt:return new Uint8ClampedArray(pe);case it:return new Int16Array(pe);case It:return new Uint16Array(pe);case ot:return new Int32Array(pe);case pt:return new Uint32Array(pe);case kt:return new Float32Array(pe);case dr:return new Float64Array(pe);default:throw new Error("Unkown type: "+ee)}}var Jt={serialize:jt,deserialize:mt,stringToBuffer:bt,bufferToString:qe};function Er(J,ue,ee,ve){J.executeSql("CREATE TABLE IF NOT EXISTS "+ue.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,ve)}function oi(J){var ue=this,ee={db:null};if(J)for(var ve in J)ee[ve]=typeof J[ve]!="string"?J[ve].toString():J[ve];var Ce=new _(function(pe,Fe){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(We){return Fe(We)}ee.db.transaction(function(We){Er(We,ee,function(){ue._dbInfo=ee,pe()},function(Qe,Ue){Fe(Ue)})},Fe)});return ee.serializer=Jt,Ce}function qn(J,ue,ee,ve,Ce,pe){J.executeSql(ee,ve,Ce,function(Fe,We){We.code===We.SYNTAX_ERR?Fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ue.storeName],function(Qe,Ue){Ue.rows.length?pe(Qe,We):Er(Qe,ue,function(){Qe.executeSql(ee,ve,Ce,pe)},pe)},pe):pe(Fe,We)},pe)}function Rt(J,ue){var ee=this;J=k(J);var ve=new _(function(Ce,pe){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(We){qn(We,Fe,"SELECT * FROM "+Fe.storeName+" WHERE key = ? LIMIT 1",[J],function(Qe,Ue){var Ke=Ue.rows.length?Ue.rows.item(0).value:null;Ke&&(Ke=Fe.serializer.deserialize(Ke)),Ce(Ke)},function(Qe,Ue){pe(Ue)})})}).catch(pe)});return R(ve,ue),ve}function Ut(J,ue){var ee=this,ve=new _(function(Ce,pe){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(We){qn(We,Fe,"SELECT * FROM "+Fe.storeName,[],function(Qe,Ue){for(var Ke=Ue.rows,de=Ke.length,$=0;$<de;$++){var at=Ke.item($),Et=at.value;if(Et&&(Et=Fe.serializer.deserialize(Et)),Et=J(Et,at.key,$+1),Et!==void 0){Ce(Et);return}}Ce()},function(Qe,Ue){pe(Ue)})})}).catch(pe)});return R(ve,ue),ve}function en(J,ue,ee,ve){var Ce=this;J=k(J);var pe=new _(function(Fe,We){Ce.ready().then(function(){ue===void 0&&(ue=null);var Qe=ue,Ue=Ce._dbInfo;Ue.serializer.serialize(ue,function(Ke,de){de?We(de):Ue.db.transaction(function($){qn($,Ue,"INSERT OR REPLACE INTO "+Ue.storeName+" (key, value) VALUES (?, ?)",[J,Ke],function(){Fe(Qe)},function(at,Et){We(Et)})},function($){if($.code===$.QUOTA_ERR){if(ve>0){Fe(en.apply(Ce,[J,Qe,ee,ve-1]));return}We($)}})})}).catch(We)});return R(pe,ee),pe}function Mn(J,ue,ee){return en.apply(this,[J,ue,ee,1])}function xn(J,ue){var ee=this;J=k(J);var ve=new _(function(Ce,pe){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(We){qn(We,Fe,"DELETE FROM "+Fe.storeName+" WHERE key = ?",[J],function(){Ce()},function(Qe,Ue){pe(Ue)})})}).catch(pe)});return R(ve,ue),ve}function Wn(J){var ue=this,ee=new _(function(ve,Ce){ue.ready().then(function(){var pe=ue._dbInfo;pe.db.transaction(function(Fe){qn(Fe,pe,"DELETE FROM "+pe.storeName,[],function(){ve()},function(We,Qe){Ce(Qe)})})}).catch(Ce)});return R(ee,J),ee}function Yt(J){var ue=this,ee=new _(function(ve,Ce){ue.ready().then(function(){var pe=ue._dbInfo;pe.db.transaction(function(Fe){qn(Fe,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(We,Qe){var Ue=Qe.rows.item(0).c;ve(Ue)},function(We,Qe){Ce(Qe)})})}).catch(Ce)});return R(ee,J),ee}function Bn(J,ue){var ee=this,ve=new _(function(Ce,pe){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(We){qn(We,Fe,"SELECT key FROM "+Fe.storeName+" WHERE id = ? LIMIT 1",[J+1],function(Qe,Ue){var Ke=Ue.rows.length?Ue.rows.item(0).key:null;Ce(Ke)},function(Qe,Ue){pe(Ue)})})}).catch(pe)});return R(ve,ue),ve}function tr(J){var ue=this,ee=new _(function(ve,Ce){ue.ready().then(function(){var pe=ue._dbInfo;pe.db.transaction(function(Fe){qn(Fe,pe,"SELECT key FROM "+pe.storeName,[],function(We,Qe){for(var Ue=[],Ke=0;Ke<Qe.rows.length;Ke++)Ue.push(Qe.rows.item(Ke).key);ve(Ue)},function(We,Qe){Ce(Qe)})})}).catch(Ce)});return R(ee,J),ee}function tn(J){return new _(function(ue,ee){J.transaction(function(ve){ve.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ce,pe){for(var Fe=[],We=0;We<pe.rows.length;We++)Fe.push(pe.rows.item(We).name);ue({db:J,storeNames:Fe})},function(Ce,pe){ee(pe)})},function(ve){ee(ve)})})}function Ar(J,ue){ue=I.apply(this,arguments);var ee=this.config();J=typeof J!="function"&&J||{},J.name||(J.name=J.name||ee.name,J.storeName=J.storeName||ee.storeName);var ve=this,Ce;return J.name?Ce=new _(function(pe){var Fe;J.name===ee.name?Fe=ve._dbInfo.db:Fe=openDatabase(J.name,"","",0),J.storeName?pe({db:Fe,storeNames:[J.storeName]}):pe(tn(Fe))}).then(function(pe){return new _(function(Fe,We){pe.db.transaction(function(Qe){function Ue(at){return new _(function(Et,Ht){Qe.executeSql("DROP TABLE IF EXISTS "+at,[],function(){Et()},function(on,cr){Ht(cr)})})}for(var Ke=[],de=0,$=pe.storeNames.length;de<$;de++)Ke.push(Ue(pe.storeNames[de]));_.all(Ke).then(function(){Fe()}).catch(function(at){We(at)})},function(Qe){We(Qe)})})}):Ce=_.reject("Invalid arguments"),R(Ce,ue),Ce}var kn={_driver:"webSQLStorage",_initStorage:oi,_support:D(),iterate:Ut,getItem:Rt,setItem:Mn,removeItem:xn,clear:Wn,length:Yt,key:Bn,keys:tr,dropInstance:Ar};function or(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function vn(J,ue){var ee=J.name+"/";return J.storeName!==ue.storeName&&(ee+=J.storeName+"/"),ee}function nr(){var J="_localforage_support_test";try{return localStorage.setItem(J,!0),localStorage.removeItem(J),!1}catch{return!0}}function An(){return!nr()||localStorage.length>0}function lt(J){var ue=this,ee={};if(J)for(var ve in J)ee[ve]=J[ve];return ee.keyPrefix=vn(J,ue._defaultConfig),An()?(ue._dbInfo=ee,ee.serializer=Jt,_.resolve()):_.reject()}function Hn(J){var ue=this,ee=ue.ready().then(function(){for(var ve=ue._dbInfo.keyPrefix,Ce=localStorage.length-1;Ce>=0;Ce--){var pe=localStorage.key(Ce);pe.indexOf(ve)===0&&localStorage.removeItem(pe)}});return R(ee,J),ee}function Ln(J,ue){var ee=this;J=k(J);var ve=ee.ready().then(function(){var Ce=ee._dbInfo,pe=localStorage.getItem(Ce.keyPrefix+J);return pe&&(pe=Ce.serializer.deserialize(pe)),pe});return R(ve,ue),ve}function an(J,ue){var ee=this,ve=ee.ready().then(function(){for(var Ce=ee._dbInfo,pe=Ce.keyPrefix,Fe=pe.length,We=localStorage.length,Qe=1,Ue=0;Ue<We;Ue++){var Ke=localStorage.key(Ue);if(Ke.indexOf(pe)===0){var de=localStorage.getItem(Ke);if(de&&(de=Ce.serializer.deserialize(de)),de=J(de,Ke.substring(Fe),Qe++),de!==void 0)return de}}});return R(ve,ue),ve}function Sr(J,ue){var ee=this,ve=ee.ready().then(function(){var Ce=ee._dbInfo,pe;try{pe=localStorage.key(J)}catch{pe=null}return pe&&(pe=pe.substring(Ce.keyPrefix.length)),pe});return R(ve,ue),ve}function mi(J){var ue=this,ee=ue.ready().then(function(){for(var ve=ue._dbInfo,Ce=localStorage.length,pe=[],Fe=0;Fe<Ce;Fe++){var We=localStorage.key(Fe);We.indexOf(ve.keyPrefix)===0&&pe.push(We.substring(ve.keyPrefix.length))}return pe});return R(ee,J),ee}function ta(J){var ue=this,ee=ue.keys().then(function(ve){return ve.length});return R(ee,J),ee}function Rr(J,ue){var ee=this;J=k(J);var ve=ee.ready().then(function(){var Ce=ee._dbInfo;localStorage.removeItem(Ce.keyPrefix+J)});return R(ve,ue),ve}function ss(J,ue,ee){var ve=this;J=k(J);var Ce=ve.ready().then(function(){ue===void 0&&(ue=null);var pe=ue;return new _(function(Fe,We){var Qe=ve._dbInfo;Qe.serializer.serialize(ue,function(Ue,Ke){if(Ke)We(Ke);else try{localStorage.setItem(Qe.keyPrefix+J,Ue),Fe(pe)}catch(de){(de.name==="QuotaExceededError"||de.name==="NS_ERROR_DOM_QUOTA_REACHED")&&We(de),We(de)}})})});return R(Ce,ee),Ce}function Di(J,ue){if(ue=I.apply(this,arguments),J=typeof J!="function"&&J||{},!J.name){var ee=this.config();J.name=J.name||ee.name,J.storeName=J.storeName||ee.storeName}var ve=this,Ce;return J.name?Ce=new _(function(pe){J.storeName?pe(vn(J,ve._defaultConfig)):pe(J.name+"/")}).then(function(pe){for(var Fe=localStorage.length-1;Fe>=0;Fe--){var We=localStorage.key(Fe);We.indexOf(pe)===0&&localStorage.removeItem(We)}}):Ce=_.reject("Invalid arguments"),R(Ce,ue),Ce}var br={_driver:"localStorageWrapper",_initStorage:lt,_support:or(),iterate:an,getItem:Ln,setItem:ss,removeItem:Rr,clear:Hn,length:ta,key:Sr,keys:mi,dropInstance:Di},In=function(ue,ee){return ue===ee||typeof ue=="number"&&typeof ee=="number"&&isNaN(ue)&&isNaN(ee)},$t=function(ue,ee){for(var ve=ue.length,Ce=0;Ce<ve;){if(In(ue[Ce],ee))return!0;Ce++}return!1},ci=Array.isArray||function(J){return Object.prototype.toString.call(J)==="[object Array]"},Gn={},_n={},Ve={INDEXEDDB:xt,WEBSQL:kn,LOCALSTORAGE:br},ls=[Ve.INDEXEDDB._driver,Ve.WEBSQL._driver,Ve.LOCALSTORAGE._driver],Zt=["dropInstance"],hr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Zt),Qs={description:"",driver:ls.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qt(J,ue){J[ue]=function(){var ee=arguments;return J.ready().then(function(){return J[ue].apply(J,ee)})}}function zt(){for(var J=1;J<arguments.length;J++){var ue=arguments[J];if(ue)for(var ee in ue)ue.hasOwnProperty(ee)&&(ci(ue[ee])?arguments[0][ee]=ue[ee].slice():arguments[0][ee]=ue[ee])}return arguments[0]}var Lt=(function(){function J(ue){E(this,J);for(var ee in Ve)if(Ve.hasOwnProperty(ee)){var ve=Ve[ee],Ce=ve._driver;this[ee]=Ce,Gn[Ce]||this.defineDriver(ve)}this._defaultConfig=zt({},Qs),this._config=zt({},this._defaultConfig,ue),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return J.prototype.config=function(ee){if((typeof ee>"u"?"undefined":g(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ve in ee){if(ve==="storeName"&&(ee[ve]=ee[ve].replace(/\W/g,"_")),ve==="version"&&typeof ee[ve]!="number")return new Error("Database version must be a number.");this._config[ve]=ee[ve]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},J.prototype.defineDriver=function(ee,ve,Ce){var pe=new _(function(Fe,We){try{var Qe=ee._driver,Ue=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){We(Ue);return}for(var Ke=hr.concat("_initStorage"),de=0,$=Ke.length;de<$;de++){var at=Ke[de],Et=!$t(Zt,at);if((Et||ee[at])&&typeof ee[at]!="function"){We(Ue);return}}var Ht=function(){for(var Vn=function(bi){return function(){var vr=new Error("Method "+bi+" is not implemented by the current driver"),vi=_.reject(vr);return R(vi,arguments[arguments.length-1]),vi}},gt=0,hn=Zt.length;gt<hn;gt++){var na=Zt[gt];ee[na]||(ee[na]=Vn(na))}};Ht();var on=function(Vn){Gn[Qe]&&console.info("Redefining LocalForage driver: "+Qe),Gn[Qe]=ee,_n[Qe]=Vn,Fe()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(on,We):on(!!ee._support):on(!0)}catch(cr){We(cr)}});return T(pe,ve,Ce),pe},J.prototype.driver=function(){return this._driver||null},J.prototype.getDriver=function(ee,ve,Ce){var pe=Gn[ee]?_.resolve(Gn[ee]):_.reject(new Error("Driver not found."));return T(pe,ve,Ce),pe},J.prototype.getSerializer=function(ee){var ve=_.resolve(Jt);return T(ve,ee),ve},J.prototype.ready=function(ee){var ve=this,Ce=ve._driverSet.then(function(){return ve._ready===null&&(ve._ready=ve._initDriver()),ve._ready});return T(Ce,ee,ee),Ce},J.prototype.setDriver=function(ee,ve,Ce){var pe=this;ci(ee)||(ee=[ee]);var Fe=this._getSupportedDrivers(ee);function We(){pe._config.driver=pe.driver()}function Qe(de){return pe._extend(de),We(),pe._ready=pe._initStorage(pe._config),pe._ready}function Ue(de){return function(){var $=0;function at(){for(;$<de.length;){var Et=de[$];return $++,pe._dbInfo=null,pe._ready=null,pe.getDriver(Et).then(Qe).catch(at)}We();var Ht=new Error("No available storage method found.");return pe._driverSet=_.reject(Ht),pe._driverSet}return at()}}var Ke=this._driverSet!==null?this._driverSet.catch(function(){return _.resolve()}):_.resolve();return this._driverSet=Ke.then(function(){var de=Fe[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(de).then(function($){pe._driver=$._driver,We(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=Ue(Fe)})}).catch(function(){We();var de=new Error("No available storage method found.");return pe._driverSet=_.reject(de),pe._driverSet}),T(this._driverSet,ve,Ce),this._driverSet},J.prototype.supports=function(ee){return!!_n[ee]},J.prototype._extend=function(ee){zt(this,ee)},J.prototype._getSupportedDrivers=function(ee){for(var ve=[],Ce=0,pe=ee.length;Ce<pe;Ce++){var Fe=ee[Ce];this.supports(Fe)&&ve.push(Fe)}return ve},J.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,ve=hr.length;ee<ve;ee++)qt(this,hr[ee])},J.prototype.createInstance=function(ee){return new J(ee)},J})(),yi=new Lt;p.exports=yi},{3:3}]},{},[4])(4)})})(Lf)),Lf.exports}var Zx=Yx();const Ys=Kl(Zx),tg=[{id:"day1",dayLabel:"Day 1",date:"2/10",locationLabel:"  ",advice:{clothing:"",snowCondition:""},attractions:[{id:"1-1",name:"",category:"",description:"",tags:[],mapQuery:""},{id:"1-2",name:" ",category:"",description:"",tags:[""],mapQuery:" ",hasPhotoUpload:!0}]},{id:"day2",dayLabel:"Day 2",date:"2/11",locationLabel:"    ",advice:{clothing:"",snowCondition:""},attractions:[{id:"2-1",name:"",category:"",description:"",tags:[""],mapQuery:"",parkingInfo:" 500/",hasPhotoUpload:!0},{id:"2-2",name:" ",category:"",description:"",tags:["",""],mapQuery:"",photoTip:"",hasPhotoUpload:!0},{id:"2-3",name:"",category:"",description:"",tags:[""],mapQuery:""}]},{id:"day3",dayLabel:"Day 3",date:"2/12",locationLabel:"  /",advice:{clothing:"",snowCondition:""},attractions:[{id:"3-1",name:" ()",category:"",description:"",tags:[""],mapQuery:"",parkingInfo:"",gasInfo:"18:00",hasPhotoUpload:!0}]}],fn=Ys.createInstance({name:"hokkaido_app",storeName:"config"}),Sn=Ys.createInstance({name:"hokkaido_app",storeName:"itinerary"}),Nr=Ys.createInstance({name:"hokkaido_app",storeName:"tickets"}),xc=Ys.createInstance({name:"hokkaido_app",storeName:"expenses"}),ns=Ys.createInstance({name:"hokkaido_app",storeName:"checklists"}),jf=Ys.createInstance({name:"hokkaido_app",storeName:"albums"});async function qx(){if(await Sn.length()===0){for(const d of tg)await Sn.setItem(d.id,d);await Sn.setItem("dayOrder",tg.map(d=>d.id))}}const ng={tripName:"",location:"Tokyo, Japan",startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+864e5*3).toISOString().split("T")[0],accommodationAddress:"",accommodations:[],travelers:1,baseCurrency:"TWD",tripCurrency:"JPY",defaultRegion:""};function ka(u){const[d,f]=oe.useState(ng),[p,m]=oe.useState(!0),g=async()=>{if(u)try{const C=await fn.getItem(`${u}_app_config`);C?(!C.accommodations&&C.accommodationAddress?C.accommodations=[{id:crypto.randomUUID(),name:"",address:C.accommodationAddress,url:""}]:C.accommodations||(C.accommodations=[]),f(C)):f(ng)}catch(C){console.error("Failed to load config",C)}finally{m(!1)}};return oe.useEffect(()=>{g()},[u]),{config:d,loading:p,updateConfig:async C=>{if(!u)return;const v={...d,...C};await fn.setItem(`${u}_app_config`,v),f(v)}}}const p2=(...u)=>u.filter((d,f,p)=>!!d&&d.trim()!==""&&p.indexOf(d)===f).join(" ").trim();const Wx=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Kx=u=>u.replace(/^([A-Z])|[\s-_]+(\w)/g,(d,f,p)=>p?p.toUpperCase():f.toLowerCase());const rg=u=>{const d=Kx(u);return d.charAt(0).toUpperCase()+d.slice(1)};var Qx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Jx=u=>{for(const d in u)if(d.startsWith("aria-")||d==="role"||d==="title")return!0;return!1};const $x=oe.forwardRef(({color:u="currentColor",size:d=24,strokeWidth:f=2,absoluteStrokeWidth:p,className:m="",children:g,iconNode:E,...C},v)=>oe.createElement("svg",{ref:v,...Qx,width:d,height:d,stroke:u,strokeWidth:p?Number(f)*24/Number(d):f,className:p2("lucide",m),...!g&&!Jx(C)&&{"aria-hidden":"true"},...C},[...E.map(([y,N])=>oe.createElement(y,N)),...Array.isArray(g)?g:[g]]));const St=(u,d)=>{const f=oe.forwardRef(({className:p,...m},g)=>oe.createElement($x,{ref:g,iconNode:d,className:p2(`lucide-${Wx(rg(u))}`,`lucide-${u}`,p),...m}));return f.displayName=rg(u),f};const em=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],tm=St("arrow-right-left",em);const nm=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],rm=St("badge-dollar-sign",nm);const im=[["path",{d:"M22 18H6a2 2 0 0 1-2-2V7a2 2 0 0 0-2-2",key:"4irg2o"}],["path",{d:"M17 14V4a2 2 0 0 0-2-2h-1a2 2 0 0 0-2 2v10",key:"14fcyx"}],["rect",{width:"13",height:"8",x:"8",y:"6",rx:"1",key:"o6oiis"}],["circle",{cx:"18",cy:"20",r:"2",key:"t9985n"}],["circle",{cx:"9",cy:"20",r:"2",key:"e5v82j"}]],am=St("baggage-claim",im);const sm=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],x2=St("calculator",sm);const lm=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],m2=St("calendar-days",lm);const om=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ac=St("camera",om);const cm=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],um=St("car",cm);const fm=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dm=St("chevron-left",fm);const hm=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gm=St("circle-check",hm);const pm=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xm=St("circle",pm);const mm=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]],y2=St("clock",mm);const ym=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],ig=St("cloud-rain",ym);const bm=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ag=St("cloud",bm);const vm=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],wm=St("coffee",vm);const Cm=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pd=St("download",Cm);const Em=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],b2=St("external-link",Em);const Am=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],v2=St("file-up",Am);const Sm=[["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 4 0v-6.998a2 2 0 0 0-.59-1.42L18 5",key:"1wtuz0"}],["path",{d:"M14 21V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v16",key:"e09ifn"}],["path",{d:"M2 21h13",key:"1x0fut"}],["path",{d:"M3 9h11",key:"1p7c0w"}]],_m=St("fuel",Sm);const Tm=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Nm=St("globe",Tm);const Rm=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Im=St("grip-vertical",Rm);const Dm=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],w2=St("image",Dm);const Om=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sg=St("info",Om);const Mm=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],xd=St("languages",Mm);const Bm=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],md=St("link",Bm);const km=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],Lm=St("list-checks",km);const jm=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Mc=St("map-pin",jm);const zm=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Sc=St("map",zm);const Um=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Fm=St("maximize-2",Um);const Pm=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Hm=St("navigation",Pm);const Gm=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],C2=St("pen-line",Gm);const Vm=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],E2=St("pen",Vm);const Xm=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],Ym=St("plane",Xm);const Zm=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ql=St("plus",Zm);const qm=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],A2=St("qr-code",qm);const Wm=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],lg=St("receipt",Wm);const Km=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qm=St("refresh-cw",Km);const Jm=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$m=St("save",Jm);const ey=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],og=St("search",ey);const ty=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S2=St("settings",ty);const ny=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ry=St("share-2",ny);const iy=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ay=St("shopping-cart",iy);const sy=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],ly=St("snowflake",sy);const oy=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],cy=St("sun",oy);const uy=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],yd=St("ticket",uy);const fy=[["path",{d:"M8 3.1V7a4 4 0 0 0 8 0V3.1",key:"1v71zp"}],["path",{d:"m9 15-1-1",key:"1yrq24"}],["path",{d:"m15 15 1-1",key:"1t0d6s"}],["path",{d:"M9 19c-2.8 0-5-2.2-5-5v-4a8 8 0 0 1 16 0v4c0 2.8-2.2 5-5 5Z",key:"1p0hjs"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m16 19 2 3",key:"xo31yx"}]],_2=St("train-front",fy);const dy=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rs=St("trash-2",dy);const hy=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cg=St("triangle-alert",hy);const gy=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],py=St("upload",gy);const xy=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ug=St("users",xy);const my=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],T2=St("wallet",my);const yy=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zs=St("x",yy);function by({tripId:u,onBack:d}){const{config:f}=ka(u),p=m=>{if(!m)return"";const g=new Date(m);return`${g.getMonth()+1}/${g.getDate()}`};return A.jsxs("header",{className:"app-header",style:{position:"relative"},children:[A.jsx("button",{onClick:d,style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"white",padding:"8px",cursor:"pointer",zIndex:10},children:A.jsx(dm,{size:28})}),A.jsxs("div",{className:"header-content",style:{paddingLeft:"40px"},children:[A.jsx("h1",{className:"header-title",style:{fontSize:"1.2rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:f.tripName||""}),A.jsxs("p",{className:"header-date",style:{fontSize:"0.8rem"},children:[f.location,"  ",p(f.startDate)," - ",p(f.endDate)]})]})]})}function N2(u){var d,f,p="";if(typeof u=="string"||typeof u=="number")p+=u;else if(typeof u=="object")if(Array.isArray(u)){var m=u.length;for(d=0;d<m;d++)u[d]&&(f=N2(u[d]))&&(p&&(p+=" "),p+=f)}else for(f in u)u[f]&&(p&&(p+=" "),p+=f);return p}function ai(){for(var u,d,f=0,p="",m=arguments.length;f<m;f++)(u=arguments[f])&&(d=N2(u))&&(p&&(p+=" "),p+=d);return p}function vy({activeTab:u,onTabChange:d}){return A.jsxs("nav",{className:"bottom-nav",style:{display:"flex",padding:"8px 4px",justifyContent:"space-between",alignItems:"center"},children:[A.jsxs("button",{className:ai("nav-item",u==="itinerary"&&"active"),onClick:()=>d("itinerary"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(Sc,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]}),A.jsxs("button",{className:ai("nav-item",u==="exchange"&&"active"),onClick:()=>d("exchange"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(x2,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]}),A.jsxs("button",{className:ai("nav-item",u==="expense"&&"active"),onClick:()=>d("expense"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(T2,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]}),A.jsxs("button",{className:ai("nav-item",u==="ticket"&&"active"),onClick:()=>d("ticket"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(yd,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]}),A.jsxs("button",{className:ai("nav-item",u==="checklist"&&"active"),onClick:()=>d("checklist"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(Lm,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]}),A.jsxs("button",{className:ai("nav-item",u==="translation"&&"active"),onClick:()=>d("translation"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(xd,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]}),A.jsxs("button",{className:ai("nav-item",u==="album"&&"active"),onClick:()=>d("album"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(w2,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]}),A.jsxs("button",{className:ai("nav-item",u==="settings"&&"active"),onClick:()=>d("settings"),style:{flex:1,padding:"4px 2px"},children:[A.jsx(S2,{className:"nav-icon",size:22}),A.jsx("span",{style:{fontSize:"0.7rem",display:"block",marginTop:"4px"},children:""})]})]})}function wy({days:u,selectedDayId:d,onSelectDay:f}){return A.jsx("div",{className:"day-selector no-scrollbar",children:u.map(p=>A.jsxs("button",{className:ai("day-pill",p.id===d&&"active"),onClick:()=>f(p.id),children:[A.jsx("div",{className:"day-label",children:p.dayLabel}),A.jsx("div",{className:"day-date",children:p.date})]},p.id))})}var Gs=g2();const mc={};function R2(u){const[d,f]=oe.useState(null);return oe.useEffect(()=>{if(!u)return;if(mc[u]){f(mc[u]);return}let p=!0;return(async()=>{try{const E=await(await fetch(`https://zh.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=${encodeURIComponent(u)}&gsrlimit=1&prop=pageimages&pithumbsize=600&format=json&origin=*`)).json();if(E.query&&E.query.pages){const y=Object.values(E.query.pages);if(y.length>0&&y[0].thumbnail){const N=y[0].thumbnail.source;mc[u]=N,p&&f(N);return}}const v=await(await fetch(`https://en.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=${encodeURIComponent(u)}&gsrlimit=1&prop=pageimages&pithumbsize=600&format=json&origin=*`)).json();if(v.query&&v.query.pages){const y=Object.values(v.query.pages);if(y.length>0&&y[0].thumbnail){const N=y[0].thumbnail.source;mc[u]=N,p&&f(N)}}}catch(g){console.error("Failed to fetch Wikipedia image",g)}})(),()=>{p=!1}},[u]),d}const I2={:"",:"",:"",:"",:"",:""},D2={:"tag-food",:"tag-shop",:"tag-photo"};function fg({text:u}){const d=u.split(/(https?:\/\/[^\s)]+)/g);return A.jsx(A.Fragment,{children:d.map((f,p)=>/^https?:\/\//.test(f)?A.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--fuji-blue)",wordBreak:"break-all"},onClick:m=>m.stopPropagation(),children:f.length>40?f.substring(0,40)+"":f},p):f)})}function Cy({attraction:u,defaultRegion:d,initialSubIndex:f=0,onClose:p}){const[m,g]=oe.useState(f),E=u.subOptions&&u.subOptions.length>0,C=E?u.subOptions[m]:null,v=C?C.name:u.name,y=C?C.description:u.description,N=C?C.mapQuery:u.mapQuery||u.name,_=R2(v);return A.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",backdropFilter:"blur(4px)",animation:"fadeIn 0.2s ease"},onClick:p,children:A.jsxs("div",{style:{backgroundColor:"white",borderRadius:"20px",maxWidth:"500px",width:"100%",maxHeight:"85vh",overflow:"auto",padding:"24px",position:"relative",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",..._?{backgroundImage:`linear-gradient(to bottom, rgba(255,255,255,0.7) 0%, rgba(255,255,255,0.95) 40%, rgba(255,255,255,1) 60%), url(${_})`,backgroundSize:"cover",backgroundPosition:"center 20%"}:{}},onClick:R=>R.stopPropagation(),children:[A.jsx("button",{onClick:p,style:{position:"sticky",top:0,float:"right",background:"rgba(0,0,0,0.08)",border:"none",borderRadius:"50%",width:"36px",height:"36px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1},children:A.jsx(Zs,{size:18})}),A.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px",alignItems:"center"},children:[A.jsx("span",{style:{fontSize:"1.5rem"},children:I2[u.category]||""}),A.jsxs("span",{style:{fontSize:"0.85rem",color:"var(--text-light)"},children:[u.timeSlot&&u.timeSlot!==""?`[${u.timeSlot}] `:"",u.category]}),u.planVariant&&A.jsxs("span",{style:{padding:"2px 10px",borderRadius:"12px",fontSize:"0.8rem",backgroundColor:u.planVariant==="A"?"var(--fuji-blue)":"var(--sage-green)",color:"white",fontWeight:"bold"},children:[u.planVariant," "]}),u.isBackup&&A.jsx("span",{style:{padding:"2px 10px",borderRadius:"12px",fontSize:"0.8rem",backgroundColor:"#e0e0e0",color:"#666",border:"1px dashed #999"},children:""}),u.startTime&&A.jsxs("span",{style:{padding:"2px 10px",borderRadius:"12px",fontSize:"0.8rem",backgroundColor:"rgba(52, 88, 153, 0.1)",color:"var(--fuji-blue)",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[A.jsx(y2,{size:12})," ",u.startTime]}),u.tags.map(R=>A.jsx("span",{className:ai("card-tag",D2[R]||"tag-default"),children:R},R))]}),E&&A.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",marginBottom:"16px",paddingBottom:"4px"},children:u.subOptions.map((R,T)=>A.jsx("button",{onClick:()=>g(T),style:{padding:"6px 14px",borderRadius:"20px",fontSize:"0.9rem",fontWeight:600,border:"none",cursor:"pointer",whiteSpace:"nowrap",backgroundColor:m===T?"var(--fuji-blue)":"rgba(0,0,0,0.05)",color:m===T?"white":"var(--text-light)",transition:"all 0.2s ease"},children:R.label},T))}),A.jsx("h2",{style:{fontSize:"1.4rem",fontWeight:700,color:"var(--text-main)",margin:"0 0 16px",lineHeight:1.3},children:v}),(y||E&&u.description)&&A.jsxs("div",{style:{fontSize:"0.95rem",color:"var(--text-dark)",lineHeight:1.7,whiteSpace:"pre-wrap",wordBreak:"break-word",backgroundColor:"rgba(0,0,0,0.03)",padding:"16px",borderRadius:"12px",marginBottom:"16px"},children:[E&&u.description&&A.jsx("div",{style:{marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid rgba(0,0,0,0.1)",color:"var(--text-light)",fontStyle:"italic"},children:A.jsx(fg,{text:u.description})}),A.jsx(fg,{text:y})]}),u.category===""&&u.transitDetails&&Object.keys(u.transitDetails).length>0&&A.jsxs("div",{style:{marginBottom:"16px",backgroundColor:"var(--snow-white)",padding:"16px",borderRadius:"12px",borderLeft:"4px solid var(--fuji-blue)"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",color:"var(--fuji-blue)",fontWeight:600,fontSize:"1rem"},children:[A.jsx(_2,{size:18})," "]}),A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"0.9rem"},children:[u.transitDetails.line&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.line]}),u.transitDetails.platform&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.platform]}),u.transitDetails.exit&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.exit]}),u.transitDetails.cost&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.cost]})]})]}),(u.parkingInfo||u.gasInfo||u.photoTip)&&A.jsxs("div",{style:{marginBottom:"16px",fontSize:"0.9rem"},children:[u.parkingInfo&&A.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start",marginBottom:"8px"},children:[A.jsx(um,{size:16,style:{flexShrink:0,marginTop:"2px",color:"var(--text-light)"}}),A.jsx("span",{children:u.parkingInfo})]}),u.gasInfo&&A.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start",marginBottom:"8px"},children:[A.jsx(_m,{size:16,style:{flexShrink:0,marginTop:"2px",color:"var(--text-light)"}}),A.jsx("span",{children:u.gasInfo})]}),u.photoTip&&A.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start",marginBottom:"8px"},children:[A.jsx(Ac,{size:16,style:{flexShrink:0,marginTop:"2px",color:"var(--text-light)"}}),A.jsx("span",{children:u.photoTip})]})]}),u.durationMinutes&&u.durationMinutes>0&&A.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"16px"},children:["  ",u.durationMinutes>=60?`${Math.floor(u.durationMinutes/60)} ${u.durationMinutes%60>0?` ${u.durationMinutes%60} `:""}`:`${u.durationMinutes} `]}),A.jsxs("button",{style:{width:"100%",padding:"14px",borderRadius:"14px",border:"none",backgroundColor:"var(--fuji-blue)",color:"white",fontSize:"1rem",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"0 4px 12px rgba(52, 88, 153, 0.3)"},onClick:()=>{const R=d?`${d} ${N}`:N;window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(R)}`,"_blank")},children:[A.jsx(Mc,{size:18})," "]})]})})}function Ey({attraction:u,defaultRegion:d}){const[f,p]=oe.useState(!1),[m,g]=oe.useState(0),E=u.subOptions&&u.subOptions.length>0,C=E?u.subOptions[m]:null,v=C?C.name:u.name,y=C?C.description:u.description,N=C?C.mapQuery:u.mapQuery||u.name,_=R2(v);return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:ai("attraction-card",{"is-backup":u.isBackup}),style:{position:"relative",overflow:"hidden",cursor:"pointer",..._?{backgroundImage:`linear-gradient(to bottom, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.95) 50%, rgba(255,255,255,1) 100%), url(${_})`,backgroundSize:"cover",backgroundPosition:"center 30%"}:{}},onClick:()=>p(!0),children:[A.jsxs("div",{className:"card-header",children:[A.jsxs("div",{className:"card-category",children:[A.jsx("span",{className:"category-icon",children:I2[u.category]||""}),A.jsxs("span",{children:[u.timeSlot&&u.timeSlot!==""?`[${u.timeSlot}] `:"",u.category]})]}),A.jsxs("div",{className:"card-tags",children:[u.planVariant&&A.jsxs("span",{className:"card-tag",style:{backgroundColor:u.planVariant==="A"?"var(--fuji-blue)":"var(--sage-green)",color:"white",fontWeight:"bold"},children:[u.planVariant," "]}),u.isBackup&&A.jsx("span",{className:"card-tag",style:{backgroundColor:"#e0e0e0",color:"#666",border:"1px dashed #999"},children:""}),u.startTime&&A.jsxs("span",{className:"card-tag",style:{backgroundColor:"rgba(52, 88, 153, 0.1)",color:"var(--fuji-blue)",fontWeight:600,display:"flex",alignItems:"center",gap:"4px"},children:[A.jsx(y2,{size:12})," ",u.startTime]}),u.durationMinutes&&u.durationMinutes>0&&A.jsxs("span",{className:"card-tag",style:{backgroundColor:"transparent",color:"var(--text-light)",border:"1px solid #ddd"},children:[" ",u.durationMinutes>=60?`${Math.floor(u.durationMinutes/60)}h${u.durationMinutes%60>0?` ${u.durationMinutes%60}m`:""}`:`${u.durationMinutes}m`]}),u.tags.map(R=>A.jsx("span",{className:ai("card-tag",D2[R]||"tag-default"),children:R},R))]})]}),E&&A.jsx("div",{className:"card-suboptions",style:{display:"flex",gap:"6px",overflowX:"auto",marginBottom:"12px",paddingBottom:"4px"},onClick:R=>R.stopPropagation(),children:u.subOptions.map((R,T)=>A.jsx("button",{onClick:()=>g(T),style:{padding:"4px 10px",borderRadius:"14px",fontSize:"0.8rem",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap",backgroundColor:m===T?"var(--fuji-blue)":"var(--snow-white)",color:m===T?"white":"var(--text-light)",border:m===T?"1px solid var(--fuji-blue)":"1px solid #ddd",transition:"all 0.2s ease"},children:R.label},T))}),A.jsx("h3",{className:"card-title",style:{color:u.isBackup?"#666":"var(--text-main)",textDecoration:u.isBackup?"underline":"none",textDecorationStyle:"dotted"},children:v}),(y||E&&u.description)&&A.jsxs("p",{className:"card-desc",style:{fontStyle:u.isBackup?"italic":"normal",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:[E&&u.description&&A.jsxs("span",{style:{color:"var(--text-light)"},children:[u.description," - "]}),y]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[A.jsx("div",{className:"card-actions",onClick:R=>R.stopPropagation(),children:A.jsxs("button",{className:"btn-map",onClick:()=>{const R=d?`${d} ${N}`:N;window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(R)}`,"_blank")},children:[A.jsx(Mc,{size:16})," "]})}),A.jsx(Fm,{size:14,style:{color:"var(--text-light)",opacity:.5}})]}),u.category===""&&u.transitDetails&&Object.keys(u.transitDetails).length>0&&A.jsxs("div",{style:{marginTop:"16px",backgroundColor:"var(--snow-white)",padding:"12px",borderRadius:"12px",borderLeft:"4px solid var(--fuji-blue)"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",color:"var(--fuji-blue)",fontWeight:600,fontSize:"0.9rem"},children:[A.jsx(_2,{size:16})," "]}),A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",fontSize:"0.85rem"},children:[u.transitDetails.line&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.line]}),u.transitDetails.platform&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.platform]}),u.transitDetails.exit&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.exit]}),u.transitDetails.cost&&A.jsxs("div",{children:[A.jsx("span",{style:{color:"var(--text-light)"},children:":"})," ",u.transitDetails.cost]})]})]})]}),f&&Gs.createPortal(A.jsx(Cy,{attraction:u,defaultRegion:d,initialSubIndex:m,onClose:()=>p(!1)}),document.body)]})}const dg={};async function Ay(u,d){try{let f=dg[u];if(!f){const k=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(u)}&count=1&language=en&format=json`);if(!k.ok)throw new Error("Geocoding failed");const I=await k.json();if(!I.results||I.results.length===0)return console.warn(`No coordinates found for location: ${u}`),null;f={lat:I.results[0].latitude,lon:I.results[0].longitude},dg[u]=f}const p=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${f.lat}&longitude=${f.lon}&daily=weather_code,temperature_2m_max,temperature_2m_min&timezone=auto`);if(!p.ok)throw new Error("Weather fetch failed");const m=await p.json(),g=m.daily.time,E=m.daily.temperature_2m_max,C=m.daily.temperature_2m_min,v=m.daily.weather_code,y=g.findIndex(k=>k===d);let N=0,_=0,R=0;if(y!==-1)N=v[y],_=Math.round(C[y]),R=Math.round(E[y]);else return console.log(`Target date ${d} not in 10-day forecast. Serving generic fallback...`),null;let T="";return _<=0?T="":R<=10?T="10 +  + ":R<=18?T="":R<=25?T="":T="",N>=50&&N<=67?T+=" ()":N>=71&&N<=77&&(T+=""),{minTemp:_,maxTemp:R,weatherCode:N,advice:T}}catch(f){return console.error("Open-Meteo extraction error:",f),null}}function Sy({tripId:u,advice:d,dayIndex:f}){const{config:p}=ka(u),[m,g]=oe.useState(null),[E,C]=oe.useState(!1);oe.useEffect(()=>{if(!p.location||!p.startDate)return;(async()=>{C(!0);const N=new Date(p.startDate);N.setDate(N.getDate()+f);const _=N.toISOString().split("T")[0];try{const R=await Ay(p.location,_);g(R)}catch(R){console.error("Open-Meteo failure",R)}finally{C(!1)}})()},[p.location,p.startDate,f]);const v=y=>y===0||y===1?A.jsx(cy,{size:20,className:"inline-icon",color:"#ffb020"}):y===2||y===3?A.jsx(ag,{size:20,className:"inline-icon",color:"#9aa0a6"}):y>=50&&y<=67?A.jsx(ig,{size:20,className:"inline-icon",color:"#345899"}):y>=71&&y<=77?A.jsx(ly,{size:20,className:"inline-icon",color:"#71a8f5"}):y>=80?A.jsx(ig,{size:20,className:"inline-icon",color:"#345899"}):A.jsx(ag,{size:20,className:"inline-icon",color:"#9aa0a6"});return A.jsxs("div",{className:"daily-advice",children:[A.jsxs("h4",{className:"advice-title",children:[A.jsx(sg,{size:16,className:"advice-icon"})," "]}),A.jsxs("div",{className:"advice-content",children:[m?A.jsx("div",{className:"live-weather-box",style:{marginBottom:"10px",padding:"10px",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"12px"},children:A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px",fontWeight:"bold"},children:[v(m.weatherCode),A.jsxs("span",{children:["",m.minTemp,"C ~ ",m.maxTemp,"C"]})]})}):E?A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"10px"},children:"..."}):A.jsx("div",{className:"live-weather-box",style:{marginBottom:"10px",padding:"10px",backgroundColor:"rgba(255,255,255,0.7)",borderRadius:"12px"},children:A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#666"},children:[A.jsx(sg,{size:16,className:"inline-icon"}),A.jsx("span",{style:{fontSize:"0.85rem"},children:" 7 "})]})}),A.jsxs("p",{children:[A.jsx("strong",{children:""}),m?m.advice:""]}),A.jsxs("p",{children:[A.jsx("strong",{children:""}),d.snowCondition]})]})]})}function O2(u){const[d,f]=oe.useState([]),[p,m]=oe.useState(!0),g=oe.useCallback(async(C=!0)=>{if(u)try{C&&m(!0);const v=await fn.getItem(`${u}_app_config`);if(!v?.startDate||!v?.endDate){f([]);return}const y=new Date(v.startDate),N=new Date(v.endDate),_=Math.abs(N.getTime()-y.getTime()),R=Math.ceil(_/(1e3*60*60*24))+1;let T=await Sn.getItem(`${u}_dayOrder`);if(!T||T.length!==R){const I=[];for(let z=0;z<R;z++){const j=`day-${z+1}`;if(I.push(j),!await Sn.getItem(`${u}_${j}`)){const H=new Date(y);H.setDate(y.getDate()+z),await Sn.setItem(`${u}_${j}`,{id:j,dayLabel:`Day ${z+1}`,date:`${H.getMonth()+1}${H.getDate()}`,locationLabel:v.location||"",attractions:[],advice:{clothing:"...",snowCondition:""}})}}await Sn.setItem(`${u}_dayOrder`,I),T=I}const k=[];for(const I of T){const z=await Sn.getItem(`${u}_${I}`);z&&k.push(z)}f(k)}catch(v){console.error("Failed to load itinerary from IndexedDB",v)}finally{C&&m(!1)}},[u]);return oe.useEffect(()=>{g(!0);const C=()=>g(!0);return window.addEventListener("focus",C),()=>window.removeEventListener("focus",C)},[g,u]),{days:d,loading:p,saveDay:async C=>{u&&(await Sn.setItem(`${u}_${C.id}`,C),await g(!1))},refreshAgenda:g}}function M2({onSave:u,onCancel:d,editAttraction:f,onAutoSave:p}){const[m,g]=oe.useState(f?.name||""),[E,C]=oe.useState(f?.category||""),[v,y]=oe.useState(f?.description||""),[N,_]=oe.useState(f?.mapQuery||""),[R,T]=oe.useState(f?.timeSlot||""),[k,I]=oe.useState(f?.isBackup||!1),[z,j]=oe.useState(f?.durationMinutes||60),[P,H]=oe.useState(f?.startTime||""),[K,Z]=oe.useState(f?.planVariant||""),[V,L]=oe.useState(f?.transitDetails||{}),[Q,G]=oe.useState(f?.tags||[]);oe.useEffect(()=>{if(!f||!p||!m.trim())return;const re={id:f.id,name:m,category:E,description:v,mapQuery:N||m,tags:Q,timeSlot:R===""?void 0:R,durationMinutes:z,isBackup:k,startTime:P||void 0,planVariant:K||void 0,transitDetails:E===""?V:void 0};return()=>{re.name.trim()&&p(re)}},[]);const xe=oe.useRef(null);oe.useEffect(()=>{f&&(xe.current={id:f.id,name:m,category:E,description:v,mapQuery:N||m,tags:Q,timeSlot:R===""?void 0:R,durationMinutes:z,isBackup:k,startTime:P||void 0,planVariant:K||void 0,transitDetails:E===""?V:void 0})},[m,E,v,N,Q,R,z,k,P,K,V,f]),oe.useEffect(()=>()=>{p&&xe.current&&xe.current.name.trim()&&p(xe.current)},[p]);const ce=["","","","","",""],X=["","","",""],ie=["","","","",""],M=[{label:"30 ",value:30},{label:"1 ",value:60},{label:"1.5 ",value:90},{label:"2 ",value:120},{label:"3 ",value:180},{label:" (4)",value:240},{label:" (8)",value:480}],ae=re=>{Q.includes(re)?G(Q.filter(Ye=>Ye!==re)):G([...Q,re])},me=()=>{if(!m){alert("");return}const re={id:f?.id||crypto.randomUUID(),name:m,category:E,description:v,mapQuery:N||m,tags:Q,timeSlot:R===""?void 0:R,durationMinutes:z,isBackup:k,startTime:P||void 0,planVariant:K||void 0,transitDetails:E===""?V:void 0};u(re)};return A.jsxs("div",{className:"add-attraction-form fade-in",children:[A.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[f?" ":"",f&&A.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal",color:"var(--text-light)",backgroundColor:"var(--bg-color)",padding:"4px 8px",borderRadius:"12px"},children:""})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:""}),A.jsx("input",{type:"text",value:m,onChange:re=>g(re.target.value),placeholder:""})]}),A.jsxs("div",{className:"form-group",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"12px"},children:[A.jsxs("div",{children:[A.jsx("label",{children:""}),A.jsx("select",{value:E,onChange:re=>C(re.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd",marginTop:"4px"},children:ce.map(re=>A.jsx("option",{value:re,children:re},re))})]}),A.jsxs("div",{children:[A.jsx("label",{children:""}),A.jsx("select",{value:z,onChange:re=>j(Number(re.target.value)),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd",marginTop:"4px"},children:M.map(re=>A.jsx("option",{value:re.value,children:re.label},re.value))})]})]}),A.jsxs("div",{className:"form-group",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"12px"},children:[A.jsxs("div",{children:[A.jsx("label",{children:" ()"}),A.jsx("input",{type:"time",value:P,onChange:re=>H(re.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd",marginTop:"4px",fontFamily:"inherit"}})]}),A.jsxs("div",{children:[A.jsx("label",{children:" ()"}),A.jsx("input",{type:"text",value:K,onChange:re=>Z(re.target.value),placeholder:": AB...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd",marginTop:"4px"}})]})]}),A.jsxs("div",{className:"form-group",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"12px"},children:[A.jsxs("div",{children:[A.jsx("label",{children:" ()"}),A.jsx("select",{value:R,onChange:re=>T(re.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd",marginTop:"4px"},children:X.map(re=>A.jsx("option",{value:re,children:re},re))})]}),A.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[A.jsx("label",{children:""}),A.jsxs("label",{style:{display:"flex",alignItems:"center",height:"100%",gap:"8px",cursor:"pointer",fontWeight:"normal"},children:[A.jsx("input",{type:"checkbox",checked:k,onChange:re=>I(re.target.checked),style:{width:"auto",marginBottom:0}}),""]})]})]}),E===""&&A.jsxs("div",{style:{backgroundColor:"rgba(52, 88, 153, 0.05)",padding:"16px",borderRadius:"12px",marginBottom:"16px",border:"1px solid rgba(52, 88, 153, 0.1)"},children:[A.jsx("h4",{style:{fontSize:"0.9rem",color:"var(--fuji-blue)",marginBottom:"12px"},children:" "}),A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[A.jsxs("div",{children:[A.jsx("label",{style:{fontSize:"0.8rem",color:"#666"},children:" (Line)"}),A.jsx("input",{type:"text",value:V.line||"",onChange:re=>L({...V,line:re.target.value}),placeholder:": ",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"6px"}})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontSize:"0.8rem",color:"#666"},children:" (Platform)"}),A.jsx("input",{type:"text",value:V.platform||"",onChange:re=>L({...V,platform:re.target.value}),placeholder:": 1",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"6px"}})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontSize:"0.8rem",color:"#666"},children:" (Exit)"}),A.jsx("input",{type:"text",value:V.exit||"",onChange:re=>L({...V,exit:re.target.value}),placeholder:": ",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"6px"}})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontSize:"0.8rem",color:"#666"},children:" (Fare)"}),A.jsx("input",{type:"text",value:V.cost||"",onChange:re=>L({...V,cost:re.target.value}),placeholder:": 1140",style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"6px"}})]})]})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:""}),A.jsx("textarea",{value:v,onChange:re=>y(re.target.value),placeholder:"..."})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Google Maps  ()"}),A.jsx("input",{type:"text",value:N,onChange:re=>_(re.target.value),placeholder:": Sapporo Odori Park"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:""}),A.jsx("div",{className:"tag-selector",children:ie.map(re=>A.jsx("button",{className:`tag-toggle ${Q.includes(re)?"active":""}`,onClick:()=>ae(re),children:re},re))})]}),A.jsxs("div",{className:"form-actions",children:[A.jsx("button",{className:"btn-cancel",onClick:d,children:""}),A.jsx("button",{className:"btn-submit",onClick:me,children:""})]})]})}function _y(){for(var u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];return oe.useMemo(()=>p=>{d.forEach(m=>m(p))},d)}const Bc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qs(u){const d=Object.prototype.toString.call(u);return d==="[object Window]"||d==="[object global]"}function Rd(u){return"nodeType"in u}function zr(u){var d,f;return u?qs(u)?u:Rd(u)&&(d=(f=u.ownerDocument)==null?void 0:f.defaultView)!=null?d:window:window}function Id(u){const{Document:d}=zr(u);return u instanceof d}function Jl(u){return qs(u)?!1:u instanceof zr(u).HTMLElement}function B2(u){return u instanceof zr(u).SVGElement}function Ws(u){return u?qs(u)?u.document:Rd(u)?Id(u)?u:Jl(u)||B2(u)?u.ownerDocument:document:document:document}const Ii=Bc?oe.useLayoutEffect:oe.useEffect;function Dd(u){const d=oe.useRef(u);return Ii(()=>{d.current=u}),oe.useCallback(function(){for(var f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return d.current==null?void 0:d.current(...p)},[])}function Ty(){const u=oe.useRef(null),d=oe.useCallback((p,m)=>{u.current=setInterval(p,m)},[]),f=oe.useCallback(()=>{u.current!==null&&(clearInterval(u.current),u.current=null)},[]);return[d,f]}function Yl(u,d){d===void 0&&(d=[u]);const f=oe.useRef(u);return Ii(()=>{f.current!==u&&(f.current=u)},d),f}function $l(u,d){const f=oe.useRef();return oe.useMemo(()=>{const p=u(f.current);return f.current=p,p},[...d])}function _c(u){const d=Dd(u),f=oe.useRef(null),p=oe.useCallback(m=>{m!==f.current&&d?.(m,f.current),f.current=m},[]);return[f,p]}function bd(u){const d=oe.useRef();return oe.useEffect(()=>{d.current=u},[u]),d.current}let zf={};function eo(u,d){return oe.useMemo(()=>{if(d)return d;const f=zf[u]==null?0:zf[u]+1;return zf[u]=f,u+"-"+f},[u,d])}function k2(u){return function(d){for(var f=arguments.length,p=new Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];return p.reduce((g,E)=>{const C=Object.entries(E);for(const[v,y]of C){const N=g[v];N!=null&&(g[v]=N+u*y)}return g},{...d})}}const Xs=k2(1),Zl=k2(-1);function Ny(u){return"clientX"in u&&"clientY"in u}function Od(u){if(!u)return!1;const{KeyboardEvent:d}=zr(u.target);return d&&u instanceof d}function Ry(u){if(!u)return!1;const{TouchEvent:d}=zr(u.target);return d&&u instanceof d}function vd(u){if(Ry(u)){if(u.touches&&u.touches.length){const{clientX:d,clientY:f}=u.touches[0];return{x:d,y:f}}else if(u.changedTouches&&u.changedTouches.length){const{clientX:d,clientY:f}=u.changedTouches[0];return{x:d,y:f}}}return Ny(u)?{x:u.clientX,y:u.clientY}:null}const ql=Object.freeze({Translate:{toString(u){if(!u)return;const{x:d,y:f}=u;return"translate3d("+(d?Math.round(d):0)+"px, "+(f?Math.round(f):0)+"px, 0)"}},Scale:{toString(u){if(!u)return;const{scaleX:d,scaleY:f}=u;return"scaleX("+d+") scaleY("+f+")"}},Transform:{toString(u){if(u)return[ql.Translate.toString(u),ql.Scale.toString(u)].join(" ")}},Transition:{toString(u){let{property:d,duration:f,easing:p}=u;return d+" "+f+"ms "+p}}}),hg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Iy(u){return u.matches(hg)?u:u.querySelector(hg)}const Dy={display:"none"};function Oy(u){let{id:d,value:f}=u;return jr.createElement("div",{id:d,style:Dy},f)}function My(u){let{id:d,announcement:f,ariaLiveType:p="assertive"}=u;const m={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return jr.createElement("div",{id:d,style:m,role:"status","aria-live":p,"aria-atomic":!0},f)}function By(){const[u,d]=oe.useState("");return{announce:oe.useCallback(p=>{p!=null&&d(p)},[]),announcement:u}}const L2=oe.createContext(null);function ky(u){const d=oe.useContext(L2);oe.useEffect(()=>{if(!d)throw new Error("useDndMonitor must be used within a children of <DndContext>");return d(u)},[u,d])}function Ly(){const[u]=oe.useState(()=>new Set),d=oe.useCallback(p=>(u.add(p),()=>u.delete(p)),[u]);return[oe.useCallback(p=>{let{type:m,event:g}=p;u.forEach(E=>{var C;return(C=E[m])==null?void 0:C.call(E,g)})},[u]),d]}const jy={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},zy={onDragStart(u){let{active:d}=u;return"Picked up draggable item "+d.id+"."},onDragOver(u){let{active:d,over:f}=u;return f?"Draggable item "+d.id+" was moved over droppable area "+f.id+".":"Draggable item "+d.id+" is no longer over a droppable area."},onDragEnd(u){let{active:d,over:f}=u;return f?"Draggable item "+d.id+" was dropped over droppable area "+f.id:"Draggable item "+d.id+" was dropped."},onDragCancel(u){let{active:d}=u;return"Dragging was cancelled. Draggable item "+d.id+" was dropped."}};function Uy(u){let{announcements:d=zy,container:f,hiddenTextDescribedById:p,screenReaderInstructions:m=jy}=u;const{announce:g,announcement:E}=By(),C=eo("DndLiveRegion"),[v,y]=oe.useState(!1);if(oe.useEffect(()=>{y(!0)},[]),ky(oe.useMemo(()=>({onDragStart(_){let{active:R}=_;g(d.onDragStart({active:R}))},onDragMove(_){let{active:R,over:T}=_;d.onDragMove&&g(d.onDragMove({active:R,over:T}))},onDragOver(_){let{active:R,over:T}=_;g(d.onDragOver({active:R,over:T}))},onDragEnd(_){let{active:R,over:T}=_;g(d.onDragEnd({active:R,over:T}))},onDragCancel(_){let{active:R,over:T}=_;g(d.onDragCancel({active:R,over:T}))}}),[g,d])),!v)return null;const N=jr.createElement(jr.Fragment,null,jr.createElement(Oy,{id:p,value:m.draggable}),jr.createElement(My,{id:C,announcement:E}));return f?Gs.createPortal(N,f):N}var lr;(function(u){u.DragStart="dragStart",u.DragMove="dragMove",u.DragEnd="dragEnd",u.DragCancel="dragCancel",u.DragOver="dragOver",u.RegisterDroppable="registerDroppable",u.SetDroppableDisabled="setDroppableDisabled",u.UnregisterDroppable="unregisterDroppable"})(lr||(lr={}));function Tc(){}function Uf(u,d){return oe.useMemo(()=>({sensor:u,options:d??{}}),[u,d])}function Fy(){for(var u=arguments.length,d=new Array(u),f=0;f<u;f++)d[f]=arguments[f];return oe.useMemo(()=>[...d].filter(p=>p!=null),[...d])}const xi=Object.freeze({x:0,y:0});function j2(u,d){return Math.sqrt(Math.pow(u.x-d.x,2)+Math.pow(u.y-d.y,2))}function z2(u,d){let{data:{value:f}}=u,{data:{value:p}}=d;return f-p}function Py(u,d){let{data:{value:f}}=u,{data:{value:p}}=d;return p-f}function gg(u){let{left:d,top:f,height:p,width:m}=u;return[{x:d,y:f},{x:d+m,y:f},{x:d,y:f+p},{x:d+m,y:f+p}]}function U2(u,d){if(!u||u.length===0)return null;const[f]=u;return f[d]}function pg(u,d,f){return d===void 0&&(d=u.left),f===void 0&&(f=u.top),{x:d+u.width*.5,y:f+u.height*.5}}const Hy=u=>{let{collisionRect:d,droppableRects:f,droppableContainers:p}=u;const m=pg(d,d.left,d.top),g=[];for(const E of p){const{id:C}=E,v=f.get(C);if(v){const y=j2(pg(v),m);g.push({id:C,data:{droppableContainer:E,value:y}})}}return g.sort(z2)},Gy=u=>{let{collisionRect:d,droppableRects:f,droppableContainers:p}=u;const m=gg(d),g=[];for(const E of p){const{id:C}=E,v=f.get(C);if(v){const y=gg(v),N=m.reduce((R,T,k)=>R+j2(y[k],T),0),_=Number((N/4).toFixed(4));g.push({id:C,data:{droppableContainer:E,value:_}})}}return g.sort(z2)};function Vy(u,d){const f=Math.max(d.top,u.top),p=Math.max(d.left,u.left),m=Math.min(d.left+d.width,u.left+u.width),g=Math.min(d.top+d.height,u.top+u.height),E=m-p,C=g-f;if(p<m&&f<g){const v=d.width*d.height,y=u.width*u.height,N=E*C,_=N/(v+y-N);return Number(_.toFixed(4))}return 0}const Xy=u=>{let{collisionRect:d,droppableRects:f,droppableContainers:p}=u;const m=[];for(const g of p){const{id:E}=g,C=f.get(E);if(C){const v=Vy(C,d);v>0&&m.push({id:E,data:{droppableContainer:g,value:v}})}}return m.sort(Py)};function Yy(u,d,f){return{...u,scaleX:d&&f?d.width/f.width:1,scaleY:d&&f?d.height/f.height:1}}function F2(u,d){return u&&d?{x:u.left-d.left,y:u.top-d.top}:xi}function Zy(u){return function(f){for(var p=arguments.length,m=new Array(p>1?p-1:0),g=1;g<p;g++)m[g-1]=arguments[g];return m.reduce((E,C)=>({...E,top:E.top+u*C.y,bottom:E.bottom+u*C.y,left:E.left+u*C.x,right:E.right+u*C.x}),{...f})}}const qy=Zy(1);function Wy(u){if(u.startsWith("matrix3d(")){const d=u.slice(9,-1).split(/, /);return{x:+d[12],y:+d[13],scaleX:+d[0],scaleY:+d[5]}}else if(u.startsWith("matrix(")){const d=u.slice(7,-1).split(/, /);return{x:+d[4],y:+d[5],scaleX:+d[0],scaleY:+d[3]}}return null}function Ky(u,d,f){const p=Wy(d);if(!p)return u;const{scaleX:m,scaleY:g,x:E,y:C}=p,v=u.left-E-(1-m)*parseFloat(f),y=u.top-C-(1-g)*parseFloat(f.slice(f.indexOf(" ")+1)),N=m?u.width/m:u.width,_=g?u.height/g:u.height;return{width:N,height:_,top:y,right:v+N,bottom:y+_,left:v}}const Qy={ignoreTransform:!1};function Ks(u,d){d===void 0&&(d=Qy);let f=u.getBoundingClientRect();if(d.ignoreTransform){const{transform:y,transformOrigin:N}=zr(u).getComputedStyle(u);y&&(f=Ky(f,y,N))}const{top:p,left:m,width:g,height:E,bottom:C,right:v}=f;return{top:p,left:m,width:g,height:E,bottom:C,right:v}}function xg(u){return Ks(u,{ignoreTransform:!0})}function Jy(u){const d=u.innerWidth,f=u.innerHeight;return{top:0,left:0,right:d,bottom:f,width:d,height:f}}function $y(u,d){return d===void 0&&(d=zr(u).getComputedStyle(u)),d.position==="fixed"}function e3(u,d){d===void 0&&(d=zr(u).getComputedStyle(u));const f=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(m=>{const g=d[m];return typeof g=="string"?f.test(g):!1})}function kc(u,d){const f=[];function p(m){if(d!=null&&f.length>=d||!m)return f;if(Id(m)&&m.scrollingElement!=null&&!f.includes(m.scrollingElement))return f.push(m.scrollingElement),f;if(!Jl(m)||B2(m)||f.includes(m))return f;const g=zr(u).getComputedStyle(m);return m!==u&&e3(m,g)&&f.push(m),$y(m,g)?f:p(m.parentNode)}return u?p(u):f}function P2(u){const[d]=kc(u,1);return d??null}function Ff(u){return!Bc||!u?null:qs(u)?u:Rd(u)?Id(u)||u===Ws(u).scrollingElement?window:Jl(u)?u:null:null}function H2(u){return qs(u)?u.scrollX:u.scrollLeft}function G2(u){return qs(u)?u.scrollY:u.scrollTop}function wd(u){return{x:H2(u),y:G2(u)}}var fr;(function(u){u[u.Forward=1]="Forward",u[u.Backward=-1]="Backward"})(fr||(fr={}));function V2(u){return!Bc||!u?!1:u===document.scrollingElement}function X2(u){const d={x:0,y:0},f=V2(u)?{height:window.innerHeight,width:window.innerWidth}:{height:u.clientHeight,width:u.clientWidth},p={x:u.scrollWidth-f.width,y:u.scrollHeight-f.height},m=u.scrollTop<=d.y,g=u.scrollLeft<=d.x,E=u.scrollTop>=p.y,C=u.scrollLeft>=p.x;return{isTop:m,isLeft:g,isBottom:E,isRight:C,maxScroll:p,minScroll:d}}const t3={x:.2,y:.2};function n3(u,d,f,p,m){let{top:g,left:E,right:C,bottom:v}=f;p===void 0&&(p=10),m===void 0&&(m=t3);const{isTop:y,isBottom:N,isLeft:_,isRight:R}=X2(u),T={x:0,y:0},k={x:0,y:0},I={height:d.height*m.y,width:d.width*m.x};return!y&&g<=d.top+I.height?(T.y=fr.Backward,k.y=p*Math.abs((d.top+I.height-g)/I.height)):!N&&v>=d.bottom-I.height&&(T.y=fr.Forward,k.y=p*Math.abs((d.bottom-I.height-v)/I.height)),!R&&C>=d.right-I.width?(T.x=fr.Forward,k.x=p*Math.abs((d.right-I.width-C)/I.width)):!_&&E<=d.left+I.width&&(T.x=fr.Backward,k.x=p*Math.abs((d.left+I.width-E)/I.width)),{direction:T,speed:k}}function r3(u){if(u===document.scrollingElement){const{innerWidth:g,innerHeight:E}=window;return{top:0,left:0,right:g,bottom:E,width:g,height:E}}const{top:d,left:f,right:p,bottom:m}=u.getBoundingClientRect();return{top:d,left:f,right:p,bottom:m,width:u.clientWidth,height:u.clientHeight}}function Y2(u){return u.reduce((d,f)=>Xs(d,wd(f)),xi)}function i3(u){return u.reduce((d,f)=>d+H2(f),0)}function a3(u){return u.reduce((d,f)=>d+G2(f),0)}function s3(u,d){if(d===void 0&&(d=Ks),!u)return;const{top:f,left:p,bottom:m,right:g}=d(u);P2(u)&&(m<=0||g<=0||f>=window.innerHeight||p>=window.innerWidth)&&u.scrollIntoView({block:"center",inline:"center"})}const l3=[["x",["left","right"],i3],["y",["top","bottom"],a3]];class Md{constructor(d,f){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const p=kc(f),m=Y2(p);this.rect={...d},this.width=d.width,this.height=d.height;for(const[g,E,C]of l3)for(const v of E)Object.defineProperty(this,v,{get:()=>{const y=C(p),N=m[g]-y;return this.rect[v]+N},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Gl{constructor(d){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(f=>{var p;return(p=this.target)==null?void 0:p.removeEventListener(...f)})},this.target=d}add(d,f,p){var m;(m=this.target)==null||m.addEventListener(d,f,p),this.listeners.push([d,f,p])}}function o3(u){const{EventTarget:d}=zr(u);return u instanceof d?u:Ws(u)}function Pf(u,d){const f=Math.abs(u.x),p=Math.abs(u.y);return typeof d=="number"?Math.sqrt(f**2+p**2)>d:"x"in d&&"y"in d?f>d.x&&p>d.y:"x"in d?f>d.x:"y"in d?p>d.y:!1}var si;(function(u){u.Click="click",u.DragStart="dragstart",u.Keydown="keydown",u.ContextMenu="contextmenu",u.Resize="resize",u.SelectionChange="selectionchange",u.VisibilityChange="visibilitychange"})(si||(si={}));function mg(u){u.preventDefault()}function c3(u){u.stopPropagation()}var Kt;(function(u){u.Space="Space",u.Down="ArrowDown",u.Right="ArrowRight",u.Left="ArrowLeft",u.Up="ArrowUp",u.Esc="Escape",u.Enter="Enter",u.Tab="Tab"})(Kt||(Kt={}));const Z2={start:[Kt.Space,Kt.Enter],cancel:[Kt.Esc],end:[Kt.Space,Kt.Enter,Kt.Tab]},u3=(u,d)=>{let{currentCoordinates:f}=d;switch(u.code){case Kt.Right:return{...f,x:f.x+25};case Kt.Left:return{...f,x:f.x-25};case Kt.Down:return{...f,y:f.y+25};case Kt.Up:return{...f,y:f.y-25}}};class Bd{constructor(d){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=d;const{event:{target:f}}=d;this.props=d,this.listeners=new Gl(Ws(f)),this.windowListeners=new Gl(zr(f)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(si.Resize,this.handleCancel),this.windowListeners.add(si.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(si.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:d,onStart:f}=this.props,p=d.node.current;p&&s3(p),f(xi)}handleKeyDown(d){if(Od(d)){const{active:f,context:p,options:m}=this.props,{keyboardCodes:g=Z2,coordinateGetter:E=u3,scrollBehavior:C="smooth"}=m,{code:v}=d;if(g.end.includes(v)){this.handleEnd(d);return}if(g.cancel.includes(v)){this.handleCancel(d);return}const{collisionRect:y}=p.current,N=y?{x:y.left,y:y.top}:xi;this.referenceCoordinates||(this.referenceCoordinates=N);const _=E(d,{active:f,context:p.current,currentCoordinates:N});if(_){const R=Zl(_,N),T={x:0,y:0},{scrollableAncestors:k}=p.current;for(const I of k){const z=d.code,{isTop:j,isRight:P,isLeft:H,isBottom:K,maxScroll:Z,minScroll:V}=X2(I),L=r3(I),Q={x:Math.min(z===Kt.Right?L.right-L.width/2:L.right,Math.max(z===Kt.Right?L.left:L.left+L.width/2,_.x)),y:Math.min(z===Kt.Down?L.bottom-L.height/2:L.bottom,Math.max(z===Kt.Down?L.top:L.top+L.height/2,_.y))},G=z===Kt.Right&&!P||z===Kt.Left&&!H,xe=z===Kt.Down&&!K||z===Kt.Up&&!j;if(G&&Q.x!==_.x){const ce=I.scrollLeft+R.x,X=z===Kt.Right&&ce<=Z.x||z===Kt.Left&&ce>=V.x;if(X&&!R.y){I.scrollTo({left:ce,behavior:C});return}X?T.x=I.scrollLeft-ce:T.x=z===Kt.Right?I.scrollLeft-Z.x:I.scrollLeft-V.x,T.x&&I.scrollBy({left:-T.x,behavior:C});break}else if(xe&&Q.y!==_.y){const ce=I.scrollTop+R.y,X=z===Kt.Down&&ce<=Z.y||z===Kt.Up&&ce>=V.y;if(X&&!R.x){I.scrollTo({top:ce,behavior:C});return}X?T.y=I.scrollTop-ce:T.y=z===Kt.Down?I.scrollTop-Z.y:I.scrollTop-V.y,T.y&&I.scrollBy({top:-T.y,behavior:C});break}}this.handleMove(d,Xs(Zl(_,this.referenceCoordinates),T))}}}handleMove(d,f){const{onMove:p}=this.props;d.preventDefault(),p(f)}handleEnd(d){const{onEnd:f}=this.props;d.preventDefault(),this.detach(),f()}handleCancel(d){const{onCancel:f}=this.props;d.preventDefault(),this.detach(),f()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Bd.activators=[{eventName:"onKeyDown",handler:(u,d,f)=>{let{keyboardCodes:p=Z2,onActivation:m}=d,{active:g}=f;const{code:E}=u.nativeEvent;if(p.start.includes(E)){const C=g.activatorNode.current;return C&&u.target!==C?!1:(u.preventDefault(),m?.({event:u.nativeEvent}),!0)}return!1}}];function yg(u){return!!(u&&"distance"in u)}function bg(u){return!!(u&&"delay"in u)}class kd{constructor(d,f,p){var m;p===void 0&&(p=o3(d.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=d,this.events=f;const{event:g}=d,{target:E}=g;this.props=d,this.events=f,this.document=Ws(E),this.documentListeners=new Gl(this.document),this.listeners=new Gl(p),this.windowListeners=new Gl(zr(E)),this.initialCoordinates=(m=vd(g))!=null?m:xi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:d,props:{options:{activationConstraint:f,bypassActivationConstraint:p}}}=this;if(this.listeners.add(d.move.name,this.handleMove,{passive:!1}),this.listeners.add(d.end.name,this.handleEnd),d.cancel&&this.listeners.add(d.cancel.name,this.handleCancel),this.windowListeners.add(si.Resize,this.handleCancel),this.windowListeners.add(si.DragStart,mg),this.windowListeners.add(si.VisibilityChange,this.handleCancel),this.windowListeners.add(si.ContextMenu,mg),this.documentListeners.add(si.Keydown,this.handleKeydown),f){if(p!=null&&p({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(bg(f)){this.timeoutId=setTimeout(this.handleStart,f.delay),this.handlePending(f);return}if(yg(f)){this.handlePending(f);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(d,f){const{active:p,onPending:m}=this.props;m(p,d,this.initialCoordinates,f)}handleStart(){const{initialCoordinates:d}=this,{onStart:f}=this.props;d&&(this.activated=!0,this.documentListeners.add(si.Click,c3,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(si.SelectionChange,this.removeTextSelection),f(d))}handleMove(d){var f;const{activated:p,initialCoordinates:m,props:g}=this,{onMove:E,options:{activationConstraint:C}}=g;if(!m)return;const v=(f=vd(d))!=null?f:xi,y=Zl(m,v);if(!p&&C){if(yg(C)){if(C.tolerance!=null&&Pf(y,C.tolerance))return this.handleCancel();if(Pf(y,C.distance))return this.handleStart()}if(bg(C)&&Pf(y,C.tolerance))return this.handleCancel();this.handlePending(C,y);return}d.cancelable&&d.preventDefault(),E(v)}handleEnd(){const{onAbort:d,onEnd:f}=this.props;this.detach(),this.activated||d(this.props.active),f()}handleCancel(){const{onAbort:d,onCancel:f}=this.props;this.detach(),this.activated||d(this.props.active),f()}handleKeydown(d){d.code===Kt.Esc&&this.handleCancel()}removeTextSelection(){var d;(d=this.document.getSelection())==null||d.removeAllRanges()}}const f3={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ld extends kd{constructor(d){const{event:f}=d,p=Ws(f.target);super(d,f3,p)}}Ld.activators=[{eventName:"onPointerDown",handler:(u,d)=>{let{nativeEvent:f}=u,{onActivation:p}=d;return!f.isPrimary||f.button!==0?!1:(p?.({event:f}),!0)}}];const d3={move:{name:"mousemove"},end:{name:"mouseup"}};var Cd;(function(u){u[u.RightClick=2]="RightClick"})(Cd||(Cd={}));class h3 extends kd{constructor(d){super(d,d3,Ws(d.event.target))}}h3.activators=[{eventName:"onMouseDown",handler:(u,d)=>{let{nativeEvent:f}=u,{onActivation:p}=d;return f.button===Cd.RightClick?!1:(p?.({event:f}),!0)}}];const Hf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class q2 extends kd{constructor(d){super(d,Hf)}static setup(){return window.addEventListener(Hf.move.name,d,{capture:!1,passive:!1}),function(){window.removeEventListener(Hf.move.name,d)};function d(){}}}q2.activators=[{eventName:"onTouchStart",handler:(u,d)=>{let{nativeEvent:f}=u,{onActivation:p}=d;const{touches:m}=f;return m.length>1?!1:(p?.({event:f}),!0)}}];var Vl;(function(u){u[u.Pointer=0]="Pointer",u[u.DraggableRect=1]="DraggableRect"})(Vl||(Vl={}));var Nc;(function(u){u[u.TreeOrder=0]="TreeOrder",u[u.ReversedTreeOrder=1]="ReversedTreeOrder"})(Nc||(Nc={}));function g3(u){let{acceleration:d,activator:f=Vl.Pointer,canScroll:p,draggingRect:m,enabled:g,interval:E=5,order:C=Nc.TreeOrder,pointerCoordinates:v,scrollableAncestors:y,scrollableAncestorRects:N,delta:_,threshold:R}=u;const T=x3({delta:_,disabled:!g}),[k,I]=Ty(),z=oe.useRef({x:0,y:0}),j=oe.useRef({x:0,y:0}),P=oe.useMemo(()=>{switch(f){case Vl.Pointer:return v?{top:v.y,bottom:v.y,left:v.x,right:v.x}:null;case Vl.DraggableRect:return m}},[f,m,v]),H=oe.useRef(null),K=oe.useCallback(()=>{const V=H.current;if(!V)return;const L=z.current.x*j.current.x,Q=z.current.y*j.current.y;V.scrollBy(L,Q)},[]),Z=oe.useMemo(()=>C===Nc.TreeOrder?[...y].reverse():y,[C,y]);oe.useEffect(()=>{if(!g||!y.length||!P){I();return}for(const V of Z){if(p?.(V)===!1)continue;const L=y.indexOf(V),Q=N[L];if(!Q)continue;const{direction:G,speed:xe}=n3(V,Q,P,d,R);for(const ce of["x","y"])T[ce][G[ce]]||(xe[ce]=0,G[ce]=0);if(xe.x>0||xe.y>0){I(),H.current=V,k(K,E),z.current=xe,j.current=G;return}}z.current={x:0,y:0},j.current={x:0,y:0},I()},[d,K,p,I,g,E,JSON.stringify(P),JSON.stringify(T),k,y,Z,N,JSON.stringify(R)])}const p3={x:{[fr.Backward]:!1,[fr.Forward]:!1},y:{[fr.Backward]:!1,[fr.Forward]:!1}};function x3(u){let{delta:d,disabled:f}=u;const p=bd(d);return $l(m=>{if(f||!p||!m)return p3;const g={x:Math.sign(d.x-p.x),y:Math.sign(d.y-p.y)};return{x:{[fr.Backward]:m.x[fr.Backward]||g.x===-1,[fr.Forward]:m.x[fr.Forward]||g.x===1},y:{[fr.Backward]:m.y[fr.Backward]||g.y===-1,[fr.Forward]:m.y[fr.Forward]||g.y===1}}},[f,d,p])}function m3(u,d){const f=d!=null?u.get(d):void 0,p=f?f.node.current:null;return $l(m=>{var g;return d==null?null:(g=p??m)!=null?g:null},[p,d])}function y3(u,d){return oe.useMemo(()=>u.reduce((f,p)=>{const{sensor:m}=p,g=m.activators.map(E=>({eventName:E.eventName,handler:d(E.handler,p)}));return[...f,...g]},[]),[u,d])}var Wl;(function(u){u[u.Always=0]="Always",u[u.BeforeDragging=1]="BeforeDragging",u[u.WhileDragging=2]="WhileDragging"})(Wl||(Wl={}));var Ed;(function(u){u.Optimized="optimized"})(Ed||(Ed={}));const vg=new Map;function b3(u,d){let{dragging:f,dependencies:p,config:m}=d;const[g,E]=oe.useState(null),{frequency:C,measure:v,strategy:y}=m,N=oe.useRef(u),_=z(),R=Yl(_),T=oe.useCallback(function(j){j===void 0&&(j=[]),!R.current&&E(P=>P===null?j:P.concat(j.filter(H=>!P.includes(H))))},[R]),k=oe.useRef(null),I=$l(j=>{if(_&&!f)return vg;if(!j||j===vg||N.current!==u||g!=null){const P=new Map;for(let H of u){if(!H)continue;if(g&&g.length>0&&!g.includes(H.id)&&H.rect.current){P.set(H.id,H.rect.current);continue}const K=H.node.current,Z=K?new Md(v(K),K):null;H.rect.current=Z,Z&&P.set(H.id,Z)}return P}return j},[u,g,f,_,v]);return oe.useEffect(()=>{N.current=u},[u]),oe.useEffect(()=>{_||T()},[f,_]),oe.useEffect(()=>{g&&g.length>0&&E(null)},[JSON.stringify(g)]),oe.useEffect(()=>{_||typeof C!="number"||k.current!==null||(k.current=setTimeout(()=>{T(),k.current=null},C))},[C,_,T,...p]),{droppableRects:I,measureDroppableContainers:T,measuringScheduled:g!=null};function z(){switch(y){case Wl.Always:return!1;case Wl.BeforeDragging:return f;default:return!f}}}function W2(u,d){return $l(f=>u?f||(typeof d=="function"?d(u):u):null,[d,u])}function v3(u,d){return W2(u,d)}function w3(u){let{callback:d,disabled:f}=u;const p=Dd(d),m=oe.useMemo(()=>{if(f||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:g}=window;return new g(p)},[p,f]);return oe.useEffect(()=>()=>m?.disconnect(),[m]),m}function Lc(u){let{callback:d,disabled:f}=u;const p=Dd(d),m=oe.useMemo(()=>{if(f||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:g}=window;return new g(p)},[f]);return oe.useEffect(()=>()=>m?.disconnect(),[m]),m}function C3(u){return new Md(Ks(u),u)}function wg(u,d,f){d===void 0&&(d=C3);const[p,m]=oe.useState(null);function g(){m(v=>{if(!u)return null;if(u.isConnected===!1){var y;return(y=v??f)!=null?y:null}const N=d(u);return JSON.stringify(v)===JSON.stringify(N)?v:N})}const E=w3({callback(v){if(u)for(const y of v){const{type:N,target:_}=y;if(N==="childList"&&_ instanceof HTMLElement&&_.contains(u)){g();break}}}}),C=Lc({callback:g});return Ii(()=>{g(),u?(C?.observe(u),E?.observe(document.body,{childList:!0,subtree:!0})):(C?.disconnect(),E?.disconnect())},[u]),p}function E3(u){const d=W2(u);return F2(u,d)}const Cg=[];function A3(u){const d=oe.useRef(u),f=$l(p=>u?p&&p!==Cg&&u&&d.current&&u.parentNode===d.current.parentNode?p:kc(u):Cg,[u]);return oe.useEffect(()=>{d.current=u},[u]),f}function S3(u){const[d,f]=oe.useState(null),p=oe.useRef(u),m=oe.useCallback(g=>{const E=Ff(g.target);E&&f(C=>C?(C.set(E,wd(E)),new Map(C)):null)},[]);return oe.useEffect(()=>{const g=p.current;if(u!==g){E(g);const C=u.map(v=>{const y=Ff(v);return y?(y.addEventListener("scroll",m,{passive:!0}),[y,wd(y)]):null}).filter(v=>v!=null);f(C.length?new Map(C):null),p.current=u}return()=>{E(u),E(g)};function E(C){C.forEach(v=>{const y=Ff(v);y?.removeEventListener("scroll",m)})}},[m,u]),oe.useMemo(()=>u.length?d?Array.from(d.values()).reduce((g,E)=>Xs(g,E),xi):Y2(u):xi,[u,d])}function Eg(u,d){d===void 0&&(d=[]);const f=oe.useRef(null);return oe.useEffect(()=>{f.current=null},d),oe.useEffect(()=>{const p=u!==xi;p&&!f.current&&(f.current=u),!p&&f.current&&(f.current=null)},[u]),f.current?Zl(u,f.current):xi}function _3(u){oe.useEffect(()=>{if(!Bc)return;const d=u.map(f=>{let{sensor:p}=f;return p.setup==null?void 0:p.setup()});return()=>{for(const f of d)f?.()}},u.map(d=>{let{sensor:f}=d;return f}))}function T3(u,d){return oe.useMemo(()=>u.reduce((f,p)=>{let{eventName:m,handler:g}=p;return f[m]=E=>{g(E,d)},f},{}),[u,d])}function K2(u){return oe.useMemo(()=>u?Jy(u):null,[u])}const Ag=[];function N3(u,d){d===void 0&&(d=Ks);const[f]=u,p=K2(f?zr(f):null),[m,g]=oe.useState(Ag);function E(){g(()=>u.length?u.map(v=>V2(v)?p:new Md(d(v),v)):Ag)}const C=Lc({callback:E});return Ii(()=>{C?.disconnect(),E(),u.forEach(v=>C?.observe(v))},[u]),m}function R3(u){if(!u)return null;if(u.children.length>1)return u;const d=u.children[0];return Jl(d)?d:u}function I3(u){let{measure:d}=u;const[f,p]=oe.useState(null),m=oe.useCallback(y=>{for(const{target:N}of y)if(Jl(N)){p(_=>{const R=d(N);return _?{..._,width:R.width,height:R.height}:R});break}},[d]),g=Lc({callback:m}),E=oe.useCallback(y=>{const N=R3(y);g?.disconnect(),N&&g?.observe(N),p(N?d(N):null)},[d,g]),[C,v]=_c(E);return oe.useMemo(()=>({nodeRef:C,rect:f,setRef:v}),[f,C,v])}const D3=[{sensor:Ld,options:{}},{sensor:Bd,options:{}}],O3={current:{}},Ec={draggable:{measure:xg},droppable:{measure:xg,strategy:Wl.WhileDragging,frequency:Ed.Optimized},dragOverlay:{measure:Ks}};class Xl extends Map{get(d){var f;return d!=null&&(f=super.get(d))!=null?f:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(d=>{let{disabled:f}=d;return!f})}getNodeFor(d){var f,p;return(f=(p=this.get(d))==null?void 0:p.node.current)!=null?f:void 0}}const M3={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Tc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ec,measureDroppableContainers:Tc,windowRect:null,measuringScheduled:!1},B3={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Tc,draggableNodes:new Map,over:null,measureDroppableContainers:Tc},jc=oe.createContext(B3),Q2=oe.createContext(M3);function k3(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xl}}}function L3(u,d){switch(d.type){case lr.DragStart:return{...u,draggable:{...u.draggable,initialCoordinates:d.initialCoordinates,active:d.active}};case lr.DragMove:return u.draggable.active==null?u:{...u,draggable:{...u.draggable,translate:{x:d.coordinates.x-u.draggable.initialCoordinates.x,y:d.coordinates.y-u.draggable.initialCoordinates.y}}};case lr.DragEnd:case lr.DragCancel:return{...u,draggable:{...u.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case lr.RegisterDroppable:{const{element:f}=d,{id:p}=f,m=new Xl(u.droppable.containers);return m.set(p,f),{...u,droppable:{...u.droppable,containers:m}}}case lr.SetDroppableDisabled:{const{id:f,key:p,disabled:m}=d,g=u.droppable.containers.get(f);if(!g||p!==g.key)return u;const E=new Xl(u.droppable.containers);return E.set(f,{...g,disabled:m}),{...u,droppable:{...u.droppable,containers:E}}}case lr.UnregisterDroppable:{const{id:f,key:p}=d,m=u.droppable.containers.get(f);if(!m||p!==m.key)return u;const g=new Xl(u.droppable.containers);return g.delete(f),{...u,droppable:{...u.droppable,containers:g}}}default:return u}}function j3(u){let{disabled:d}=u;const{active:f,activatorEvent:p,draggableNodes:m}=oe.useContext(jc),g=bd(p),E=bd(f?.id);return oe.useEffect(()=>{if(!d&&!p&&g&&E!=null){if(!Od(g)||document.activeElement===g.target)return;const C=m.get(E);if(!C)return;const{activatorNode:v,node:y}=C;if(!v.current&&!y.current)return;requestAnimationFrame(()=>{for(const N of[v.current,y.current]){if(!N)continue;const _=Iy(N);if(_){_.focus();break}}})}},[p,d,m,E,g]),null}function z3(u,d){let{transform:f,...p}=d;return u!=null&&u.length?u.reduce((m,g)=>g({transform:m,...p}),f):f}function U3(u){return oe.useMemo(()=>({draggable:{...Ec.draggable,...u?.draggable},droppable:{...Ec.droppable,...u?.droppable},dragOverlay:{...Ec.dragOverlay,...u?.dragOverlay}}),[u?.draggable,u?.droppable,u?.dragOverlay])}function F3(u){let{activeNode:d,measure:f,initialRect:p,config:m=!0}=u;const g=oe.useRef(!1),{x:E,y:C}=typeof m=="boolean"?{x:m,y:m}:m;Ii(()=>{if(!E&&!C||!d){g.current=!1;return}if(g.current||!p)return;const y=d?.node.current;if(!y||y.isConnected===!1)return;const N=f(y),_=F2(N,p);if(E||(_.x=0),C||(_.y=0),g.current=!0,Math.abs(_.x)>0||Math.abs(_.y)>0){const R=P2(y);R&&R.scrollBy({top:_.y,left:_.x})}},[d,E,C,p,f])}const J2=oe.createContext({...xi,scaleX:1,scaleY:1});var Ma;(function(u){u[u.Uninitialized=0]="Uninitialized",u[u.Initializing=1]="Initializing",u[u.Initialized=2]="Initialized"})(Ma||(Ma={}));const P3=oe.memo(function(d){var f,p,m,g;let{id:E,accessibility:C,autoScroll:v=!0,children:y,sensors:N=D3,collisionDetection:_=Xy,measuring:R,modifiers:T,...k}=d;const I=oe.useReducer(L3,void 0,k3),[z,j]=I,[P,H]=Ly(),[K,Z]=oe.useState(Ma.Uninitialized),V=K===Ma.Initialized,{draggable:{active:L,nodes:Q,translate:G},droppable:{containers:xe}}=z,ce=L!=null?Q.get(L):null,X=oe.useRef({initial:null,translated:null}),ie=oe.useMemo(()=>{var Ut;return L!=null?{id:L,data:(Ut=ce?.data)!=null?Ut:O3,rect:X}:null},[L,ce]),M=oe.useRef(null),[ae,me]=oe.useState(null),[re,Ye]=oe.useState(null),ke=Yl(k,Object.values(k)),Je=eo("DndDescribedBy",E),q=oe.useMemo(()=>xe.getEnabled(),[xe]),ne=U3(R),{droppableRects:Oe,measureDroppableContainers:Te,measuringScheduled:je}=b3(q,{dragging:V,dependencies:[G.x,G.y],config:ne.droppable}),ze=m3(Q,L),ct=oe.useMemo(()=>re?vd(re):null,[re]),nt=Rt(),st=v3(ze,ne.draggable.measure);F3({activeNode:L!=null?Q.get(L):null,config:nt.layoutShiftCompensation,initialRect:st,measure:ne.draggable.measure});const ut=wg(ze,ne.draggable.measure,st),Ct=wg(ze?ze.parentElement:null),Qt=oe.useRef({activatorEvent:null,active:null,activeNode:ze,collisionRect:null,collisions:null,droppableRects:Oe,draggableNodes:Q,draggingNode:null,draggingNodeRect:null,droppableContainers:xe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xt=xe.getNodeFor((f=Qt.current.over)==null?void 0:f.id),D=I3({measure:ne.dragOverlay.measure}),Ne=(p=D.nodeRef.current)!=null?p:ze,_e=V?(m=D.rect)!=null?m:ut:null,le=!!(D.nodeRef.current&&D.rect),te=E3(le?null:ut),he=K2(Ne?zr(Ne):null),Pe=A3(V?xt??ze:null),Ee=N3(Pe),Se=z3(T,{transform:{x:G.x-te.x,y:G.y-te.y,scaleX:1,scaleY:1},activatorEvent:re,active:ie,activeNodeRect:ut,containerNodeRect:Ct,draggingNodeRect:_e,over:Qt.current.over,overlayNodeRect:D.rect,scrollableAncestors:Pe,scrollableAncestorRects:Ee,windowRect:he}),et=ct?Xs(ct,G):null,tt=S3(Pe),it=Eg(tt),ot=Eg(tt,[ut]),It=Xs(Se,it),pt=_e?qy(_e,Se):null,kt=ie&&pt?_({active:ie,collisionRect:pt,droppableRects:Oe,droppableContainers:q,pointerCoordinates:et}):null,dr=U2(kt,"id"),[dn,Cr]=oe.useState(null),bt=le?Se:Xs(Se,ot),qe=Yy(bt,(g=dn?.rect)!=null?g:null,ut),jt=oe.useRef(null),mt=oe.useCallback((Ut,en)=>{let{sensor:Mn,options:xn}=en;if(M.current==null)return;const Wn=Q.get(M.current);if(!Wn)return;const Yt=Ut.nativeEvent,Bn=new Mn({active:M.current,activeNode:Wn,event:Yt,options:xn,context:Qt,onAbort(tn){if(!Q.get(tn))return;const{onDragAbort:kn}=ke.current,or={id:tn};kn?.(or),P({type:"onDragAbort",event:or})},onPending(tn,Ar,kn,or){if(!Q.get(tn))return;const{onDragPending:nr}=ke.current,An={id:tn,constraint:Ar,initialCoordinates:kn,offset:or};nr?.(An),P({type:"onDragPending",event:An})},onStart(tn){const Ar=M.current;if(Ar==null)return;const kn=Q.get(Ar);if(!kn)return;const{onDragStart:or}=ke.current,vn={activatorEvent:Yt,active:{id:Ar,data:kn.data,rect:X}};Gs.unstable_batchedUpdates(()=>{or?.(vn),Z(Ma.Initializing),j({type:lr.DragStart,initialCoordinates:tn,active:Ar}),P({type:"onDragStart",event:vn}),me(jt.current),Ye(Yt)})},onMove(tn){j({type:lr.DragMove,coordinates:tn})},onEnd:tr(lr.DragEnd),onCancel:tr(lr.DragCancel)});jt.current=Bn;function tr(tn){return async function(){const{active:kn,collisions:or,over:vn,scrollAdjustedTranslate:nr}=Qt.current;let An=null;if(kn&&nr){const{cancelDrop:lt}=ke.current;An={activatorEvent:Yt,active:kn,collisions:or,delta:nr,over:vn},tn===lr.DragEnd&&typeof lt=="function"&&await Promise.resolve(lt(An))&&(tn=lr.DragCancel)}M.current=null,Gs.unstable_batchedUpdates(()=>{j({type:tn}),Z(Ma.Uninitialized),Cr(null),me(null),Ye(null),jt.current=null;const lt=tn===lr.DragEnd?"onDragEnd":"onDragCancel";if(An){const Hn=ke.current[lt];Hn?.(An),P({type:lt,event:An})}})}}},[Q]),Jt=oe.useCallback((Ut,en)=>(Mn,xn)=>{const Wn=Mn.nativeEvent,Yt=Q.get(xn);if(M.current!==null||!Yt||Wn.dndKit||Wn.defaultPrevented)return;const Bn={active:Yt};Ut(Mn,en.options,Bn)===!0&&(Wn.dndKit={capturedBy:en.sensor},M.current=xn,mt(Mn,en))},[Q,mt]),Er=y3(N,Jt);_3(N),Ii(()=>{ut&&K===Ma.Initializing&&Z(Ma.Initialized)},[ut,K]),oe.useEffect(()=>{const{onDragMove:Ut}=ke.current,{active:en,activatorEvent:Mn,collisions:xn,over:Wn}=Qt.current;if(!en||!Mn)return;const Yt={active:en,activatorEvent:Mn,collisions:xn,delta:{x:It.x,y:It.y},over:Wn};Gs.unstable_batchedUpdates(()=>{Ut?.(Yt),P({type:"onDragMove",event:Yt})})},[It.x,It.y]),oe.useEffect(()=>{const{active:Ut,activatorEvent:en,collisions:Mn,droppableContainers:xn,scrollAdjustedTranslate:Wn}=Qt.current;if(!Ut||M.current==null||!en||!Wn)return;const{onDragOver:Yt}=ke.current,Bn=xn.get(dr),tr=Bn&&Bn.rect.current?{id:Bn.id,rect:Bn.rect.current,data:Bn.data,disabled:Bn.disabled}:null,tn={active:Ut,activatorEvent:en,collisions:Mn,delta:{x:Wn.x,y:Wn.y},over:tr};Gs.unstable_batchedUpdates(()=>{Cr(tr),Yt?.(tn),P({type:"onDragOver",event:tn})})},[dr]),Ii(()=>{Qt.current={activatorEvent:re,active:ie,activeNode:ze,collisionRect:pt,collisions:kt,droppableRects:Oe,draggableNodes:Q,draggingNode:Ne,draggingNodeRect:_e,droppableContainers:xe,over:dn,scrollableAncestors:Pe,scrollAdjustedTranslate:It},X.current={initial:_e,translated:pt}},[ie,ze,kt,pt,Q,Ne,_e,Oe,xe,dn,Pe,It]),g3({...nt,delta:G,draggingRect:pt,pointerCoordinates:et,scrollableAncestors:Pe,scrollableAncestorRects:Ee});const oi=oe.useMemo(()=>({active:ie,activeNode:ze,activeNodeRect:ut,activatorEvent:re,collisions:kt,containerNodeRect:Ct,dragOverlay:D,draggableNodes:Q,droppableContainers:xe,droppableRects:Oe,over:dn,measureDroppableContainers:Te,scrollableAncestors:Pe,scrollableAncestorRects:Ee,measuringConfiguration:ne,measuringScheduled:je,windowRect:he}),[ie,ze,ut,re,kt,Ct,D,Q,xe,Oe,dn,Te,Pe,Ee,ne,je,he]),qn=oe.useMemo(()=>({activatorEvent:re,activators:Er,active:ie,activeNodeRect:ut,ariaDescribedById:{draggable:Je},dispatch:j,draggableNodes:Q,over:dn,measureDroppableContainers:Te}),[re,Er,ie,ut,j,Je,Q,dn,Te]);return jr.createElement(L2.Provider,{value:H},jr.createElement(jc.Provider,{value:qn},jr.createElement(Q2.Provider,{value:oi},jr.createElement(J2.Provider,{value:qe},y)),jr.createElement(j3,{disabled:C?.restoreFocus===!1})),jr.createElement(Uy,{...C,hiddenTextDescribedById:Je}));function Rt(){const Ut=ae?.autoScrollEnabled===!1,en=typeof v=="object"?v.enabled===!1:v===!1,Mn=V&&!Ut&&!en;return typeof v=="object"?{...v,enabled:Mn}:{enabled:Mn}}}),H3=oe.createContext(null),Sg="button",G3="Draggable";function V3(u){let{id:d,data:f,disabled:p=!1,attributes:m}=u;const g=eo(G3),{activators:E,activatorEvent:C,active:v,activeNodeRect:y,ariaDescribedById:N,draggableNodes:_,over:R}=oe.useContext(jc),{role:T=Sg,roleDescription:k="draggable",tabIndex:I=0}=m??{},z=v?.id===d,j=oe.useContext(z?J2:H3),[P,H]=_c(),[K,Z]=_c(),V=T3(E,d),L=Yl(f);Ii(()=>(_.set(d,{id:d,key:g,node:P,activatorNode:K,data:L}),()=>{const G=_.get(d);G&&G.key===g&&_.delete(d)}),[_,d]);const Q=oe.useMemo(()=>({role:T,tabIndex:I,"aria-disabled":p,"aria-pressed":z&&T===Sg?!0:void 0,"aria-roledescription":k,"aria-describedby":N.draggable}),[p,T,I,z,k,N.draggable]);return{active:v,activatorEvent:C,activeNodeRect:y,attributes:Q,isDragging:z,listeners:p?void 0:V,node:P,over:R,setNodeRef:H,setActivatorNodeRef:Z,transform:j}}function X3(){return oe.useContext(Q2)}const Y3="Droppable",Z3={timeout:25};function q3(u){let{data:d,disabled:f=!1,id:p,resizeObserverConfig:m}=u;const g=eo(Y3),{active:E,dispatch:C,over:v,measureDroppableContainers:y}=oe.useContext(jc),N=oe.useRef({disabled:f}),_=oe.useRef(!1),R=oe.useRef(null),T=oe.useRef(null),{disabled:k,updateMeasurementsFor:I,timeout:z}={...Z3,...m},j=Yl(I??p),P=oe.useCallback(()=>{if(!_.current){_.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{y(Array.isArray(j.current)?j.current:[j.current]),T.current=null},z)},[z]),H=Lc({callback:P,disabled:k||!E}),K=oe.useCallback((Q,G)=>{H&&(G&&(H.unobserve(G),_.current=!1),Q&&H.observe(Q))},[H]),[Z,V]=_c(K),L=Yl(d);return oe.useEffect(()=>{!H||!Z.current||(H.disconnect(),_.current=!1,H.observe(Z.current))},[Z,H]),oe.useEffect(()=>(C({type:lr.RegisterDroppable,element:{id:p,key:g,disabled:f,node:Z,rect:R,data:L}}),()=>C({type:lr.UnregisterDroppable,key:g,id:p})),[p]),oe.useEffect(()=>{f!==N.current.disabled&&(C({type:lr.SetDroppableDisabled,id:p,key:g,disabled:f}),N.current.disabled=f)},[p,g,f,C]),{active:E,rect:R,isOver:v?.id===p,node:Z,over:v,setNodeRef:V}}function jd(u,d,f){const p=u.slice();return p.splice(f<0?p.length+f:f,0,p.splice(d,1)[0]),p}function W3(u,d){return u.reduce((f,p,m)=>{const g=d.get(p);return g&&(f[m]=g),f},Array(u.length))}function yc(u){return u!==null&&u>=0}function K3(u,d){if(u===d)return!0;if(u.length!==d.length)return!1;for(let f=0;f<u.length;f++)if(u[f]!==d[f])return!1;return!0}function Q3(u){return typeof u=="boolean"?{draggable:u,droppable:u}:u}const $2=u=>{let{rects:d,activeIndex:f,overIndex:p,index:m}=u;const g=jd(d,p,f),E=d[m],C=g[m];return!C||!E?null:{x:C.left-E.left,y:C.top-E.top,scaleX:C.width/E.width,scaleY:C.height/E.height}},bc={scaleX:1,scaleY:1},J3=u=>{var d;let{activeIndex:f,activeNodeRect:p,index:m,rects:g,overIndex:E}=u;const C=(d=g[f])!=null?d:p;if(!C)return null;if(m===f){const y=g[E];return y?{x:0,y:f<E?y.top+y.height-(C.top+C.height):y.top-C.top,...bc}:null}const v=$3(g,m,f);return m>f&&m<=E?{x:0,y:-C.height-v,...bc}:m<f&&m>=E?{x:0,y:C.height+v,...bc}:{x:0,y:0,...bc}};function $3(u,d,f){const p=u[d],m=u[d-1],g=u[d+1];return p?f<d?m?p.top-(m.top+m.height):g?g.top-(p.top+p.height):0:g?g.top-(p.top+p.height):m?p.top-(m.top+m.height):0:0}const ep="Sortable",tp=jr.createContext({activeIndex:-1,containerId:ep,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:$2,disabled:{draggable:!1,droppable:!1}});function eb(u){let{children:d,id:f,items:p,strategy:m=$2,disabled:g=!1}=u;const{active:E,dragOverlay:C,droppableRects:v,over:y,measureDroppableContainers:N}=X3(),_=eo(ep,f),R=C.rect!==null,T=oe.useMemo(()=>p.map(V=>typeof V=="object"&&"id"in V?V.id:V),[p]),k=E!=null,I=E?T.indexOf(E.id):-1,z=y?T.indexOf(y.id):-1,j=oe.useRef(T),P=!K3(T,j.current),H=z!==-1&&I===-1||P,K=Q3(g);Ii(()=>{P&&k&&N(T)},[P,T,k,N]),oe.useEffect(()=>{j.current=T},[T]);const Z=oe.useMemo(()=>({activeIndex:I,containerId:_,disabled:K,disableTransforms:H,items:T,overIndex:z,useDragOverlay:R,sortedRects:W3(T,v),strategy:m}),[I,_,K.draggable,K.droppable,H,T,z,v,R,m]);return jr.createElement(tp.Provider,{value:Z},d)}const tb=u=>{let{id:d,items:f,activeIndex:p,overIndex:m}=u;return jd(f,p,m).indexOf(d)},nb=u=>{let{containerId:d,isSorting:f,wasDragging:p,index:m,items:g,newIndex:E,previousItems:C,previousContainerId:v,transition:y}=u;return!y||!p||C!==g&&m===E?!1:f?!0:E!==m&&d===v},rb={duration:200,easing:"ease"},np="transform",ib=ql.Transition.toString({property:np,duration:0,easing:"linear"}),ab={roleDescription:"sortable"};function sb(u){let{disabled:d,index:f,node:p,rect:m}=u;const[g,E]=oe.useState(null),C=oe.useRef(f);return Ii(()=>{if(!d&&f!==C.current&&p.current){const v=m.current;if(v){const y=Ks(p.current,{ignoreTransform:!0}),N={x:v.left-y.left,y:v.top-y.top,scaleX:v.width/y.width,scaleY:v.height/y.height};(N.x||N.y)&&E(N)}}f!==C.current&&(C.current=f)},[d,f,p,m]),oe.useEffect(()=>{g&&E(null)},[g]),g}function lb(u){let{animateLayoutChanges:d=nb,attributes:f,disabled:p,data:m,getNewIndex:g=tb,id:E,strategy:C,resizeObserverConfig:v,transition:y=rb}=u;const{items:N,containerId:_,activeIndex:R,disabled:T,disableTransforms:k,sortedRects:I,overIndex:z,useDragOverlay:j,strategy:P}=oe.useContext(tp),H=ob(p,T),K=N.indexOf(E),Z=oe.useMemo(()=>({sortable:{containerId:_,index:K,items:N},...m}),[_,m,K,N]),V=oe.useMemo(()=>N.slice(N.indexOf(E)),[N,E]),{rect:L,node:Q,isOver:G,setNodeRef:xe}=q3({id:E,data:Z,disabled:H.droppable,resizeObserverConfig:{updateMeasurementsFor:V,...v}}),{active:ce,activatorEvent:X,activeNodeRect:ie,attributes:M,setNodeRef:ae,listeners:me,isDragging:re,over:Ye,setActivatorNodeRef:ke,transform:Je}=V3({id:E,data:Z,attributes:{...ab,...f},disabled:H.draggable}),q=_y(xe,ae),ne=!!ce,Oe=ne&&!k&&yc(R)&&yc(z),Te=!j&&re,je=Te&&Oe?Je:null,ct=Oe?je??(C??P)({rects:I,activeNodeRect:ie,activeIndex:R,overIndex:z,index:K}):null,nt=yc(R)&&yc(z)?g({id:E,items:N,activeIndex:R,overIndex:z}):K,st=ce?.id,ut=oe.useRef({activeId:st,items:N,newIndex:nt,containerId:_}),Ct=N!==ut.current.items,Qt=d({active:ce,containerId:_,isDragging:re,isSorting:ne,id:E,index:K,items:N,newIndex:ut.current.newIndex,previousItems:ut.current.items,previousContainerId:ut.current.containerId,transition:y,wasDragging:ut.current.activeId!=null}),xt=sb({disabled:!Qt,index:K,node:Q,rect:L});return oe.useEffect(()=>{ne&&ut.current.newIndex!==nt&&(ut.current.newIndex=nt),_!==ut.current.containerId&&(ut.current.containerId=_),N!==ut.current.items&&(ut.current.items=N)},[ne,nt,_,N]),oe.useEffect(()=>{if(st===ut.current.activeId)return;if(st!=null&&ut.current.activeId==null){ut.current.activeId=st;return}const Ne=setTimeout(()=>{ut.current.activeId=st},50);return()=>clearTimeout(Ne)},[st]),{active:ce,activeIndex:R,attributes:M,data:Z,rect:L,index:K,newIndex:nt,items:N,isOver:G,isSorting:ne,isDragging:re,listeners:me,node:Q,overIndex:z,over:Ye,setNodeRef:q,setActivatorNodeRef:ke,setDroppableNodeRef:xe,setDraggableNodeRef:ae,transform:xt??ct,transition:D()};function D(){if(xt||Ct&&ut.current.newIndex===K)return ib;if(!(Te&&!Od(X)||!y)&&(ne||Qt))return ql.Transition.toString({...y,property:np})}}function ob(u,d){var f,p;return typeof u=="boolean"?{draggable:u,droppable:!1}:{draggable:(f=u?.draggable)!=null?f:d.draggable,droppable:(p=u?.droppable)!=null?p:d.droppable}}function Rc(u){if(!u)return!1;const d=u.data.current;return!!(d&&"sortable"in d&&typeof d.sortable=="object"&&"containerId"in d.sortable&&"items"in d.sortable&&"index"in d.sortable)}const cb=[Kt.Down,Kt.Right,Kt.Up,Kt.Left],ub=(u,d)=>{let{context:{active:f,collisionRect:p,droppableRects:m,droppableContainers:g,over:E,scrollableAncestors:C}}=d;if(cb.includes(u.code)){if(u.preventDefault(),!f||!p)return;const v=[];g.getEnabled().forEach(_=>{if(!_||_!=null&&_.disabled)return;const R=m.get(_.id);if(R)switch(u.code){case Kt.Down:p.top<R.top&&v.push(_);break;case Kt.Up:p.top>R.top&&v.push(_);break;case Kt.Left:p.left>R.left&&v.push(_);break;case Kt.Right:p.left<R.left&&v.push(_);break}});const y=Gy({collisionRect:p,droppableRects:m,droppableContainers:v});let N=U2(y,"id");if(N===E?.id&&y.length>1&&(N=y[1].id),N!=null){const _=g.get(f.id),R=g.get(N),T=R?m.get(R.id):null,k=R?.node.current;if(k&&T&&_&&R){const z=kc(k).some((V,L)=>C[L]!==V),j=rp(_,R),P=fb(_,R),H=z||!j?{x:0,y:0}:{x:P?p.width-T.width:0,y:P?p.height-T.height:0},K={x:T.left,y:T.top};return H.x&&H.y?K:Zl(K,H)}}}};function rp(u,d){return!Rc(u)||!Rc(d)?!1:u.data.current.sortable.containerId===d.data.current.sortable.containerId}function fb(u,d){return!Rc(u)||!Rc(d)||!rp(u,d)?!1:u.data.current.sortable.index<d.data.current.sortable.index}function db(u,d,f,p,m,g){const E=d.replace(/\r/g,""),C=/(?:^|[\n\s])(\d+)[.]\s*/g,v=[];let y;for(;(y=C.exec(E))!==null;)v.push({num:parseInt(y[1]),matchPos:y.index,start:y.index+y[0].length});if(v.length<2)return null;const N=[];for(let H=0;H<v.length;H++){const K=H+1<v.length?v[H+1].matchPos:E.length;N.push({num:v[H].num,text:E.substring(v[H].start,K).trim()})}const _=f.replace(/\r/g,""),R=new Map,T=[],k=/(?:^|[\n\s])(\d+)[.]\s*/g;for(;(y=k.exec(_))!==null;)T.push({num:parseInt(y[1]),matchPos:y.index,start:y.index+y[0].length});for(let H=0;H<T.length;H++){const K=H+1<T.length?T[H+1].matchPos:_.length;R.set(T[H].num,_.substring(T[H].start,K).trim())}const I="ABCDEFGHIJKLMNOPQRSTUVWXYZ",z=[];for(let H=0;H<N.length;H++){const{num:K,text:Z}=N[H],V=R.get(K)||"",L=V?`${Z}
 ${V}`:Z,Q=Z.replace(/.*?|\(.*?\)/g,"").replace(/\n/g," ").trim();z.push({label:`${I[H]} `,name:Z,description:L,mapQuery:Q})}const j=m?`[${m}] ${u}`:u,P=E.substring(0,v[0].matchPos).trim();return{id:`attr-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:j,category:p,description:P,tags:[],mapQuery:u,planVariant:g||void 0,subOptions:z}}function hb(u){const d=[];let f=[],p="",m=!1;for(let g=0;g<u.length;g++){const E=u[g];m?E==='"'?g+1<u.length&&u[g+1]==='"'?(p+='"',g++):m=!1:p+=E:E==='"'?m=!0:E==="	"?(f.push(p),p=""):E===`
`?(f.push(p),d.push(f),f=[],p=""):E==="\r"||(p+=E)}return(p!==""||f.length>0)&&(f.push(p),d.push(f)),d}function Gf(u,d){return/|||||||||Cafe|cafe/.test(u)||/|||/.test(d)?"":/|||||||||||/.test(u)||//.test(d)?"":/||||/.test(u)?"":/||||||/.test(u)?"":""}function gb(u,d){if(!u||!u.trim())return d;const f=hb(u),p=[...d.map(E=>({...E,attractions:[]}))];let m=[],g=-1;for(let E=0;E<Math.min(f.length,10);E++){const C=f[E];for(let v=0;v<C.length;v++){const y=C[v].trim();if(y===""||y===""||y===""||y===""){let N=v>0&&C[v-1].includes("")?v-1:-1,_=-1,R=-1;for(let T=v+1;T<C.length&&T<=v+5;T++){const k=C[T].trim();(k.includes("")||k.includes(""))&&(_=T),k.includes("")&&_===-1&&(_=T),(k.includes("")||k.includes(""))&&(R=T)}m.push({timeCol:N,nameCol:v,descCol:_,noteCol:R})}}if(m.length>0){g=E;break}}if(m.length>0){const E=f.length>0?f[0]:[];for(;p.length<m.length;){const C=p.length,v=m[C];let y="";for(let N=Math.max(0,v.timeCol);N<=v.nameCol;N++)if(N>=0&&N<E.length&&E[N].trim()){y=E[N].trim();break}p.push({id:`day${p.length+1}`,dayLabel:`Day ${p.length+1}`,date:y||`Day ${p.length+1}`,locationLabel:"",attractions:[],advice:{clothing:"",snowCondition:""}})}for(let C=0;C<m.length;C++){const v=m[C];let y="";for(let N=g+1;N<f.length;N++){const _=f[N];let R=v.timeCol!==-1&&v.timeCol<_.length?_[v.timeCol].trim():"",T=v.nameCol<_.length?_[v.nameCol].trim():"",k=v.descCol!==-1&&v.descCol<_.length?_[v.descCol].trim():"",I=v.noteCol!==-1&&v.noteCol<_.length?_[v.noteCol].trim():"";if(R&&!T&&!R.includes(":")&&!/\d/.test(R)){R!==""&&R!=="Date"&&R!=="Day"&&(y=R);continue}if(!T||T===""||T===""||T==="")continue;let z=k;for(let Z=v.nameCol+1;Z<=Math.max(v.descCol,v.noteCol);Z++)if(Z!==v.descCol&&Z!==v.noteCol&&Z<_.length){const V=_[Z].trim();V&&!z.includes(V)&&(z+=(z?" | ":"")+V)}I&&(z+=(z?`
 `:" ")+I),z=z.replace(/(?:^|\n)\s*\/\s*(?:$|\n)/g,`
`).replace(/^\s*\/\s*/gm,"").replace(/\s*\/\s*$/gm,"").trim();const j=T.replace(/\[.*?\]\s*/,"").split("").pop()||T;let P=R?`[${R}] ${T}`:T;const H=k.includes("1.")||k.includes("1")?k:z,K=db(T,H,I,Gf(T,z),R,y||void 0);if(K)p[C].attractions.push(K);else{const Z={id:`attr-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:P,category:Gf(T,z),description:z,tags:[],mapQuery:j.trim(),planVariant:y||void 0};p[C].attractions.push(Z)}}}return p}return f.forEach(E=>{if(E.length<2)return;let C=E[0].trim(),v=E[1].trim(),y=E.length>3?E[3].trim():"";const N=C.match(/\d+/);if(!N)return;const R=parseInt(N[0],10)-1;if(R<0||R>=p.length||v===""||v==="Name"||v===""||v==="")return;const T={id:`attr-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,name:v,category:Gf(v,y),description:y,tags:[],mapQuery:v};p[R].attractions.push(T)}),p}function pb({onImport:u,onClose:d}){const[f,p]=oe.useState(""),m=()=>{if(!f.trim()){alert("");return}window.confirm("")&&(u(f),d())};return A.jsx("div",{className:"add-form-overlay fade-in",children:A.jsxs("div",{className:"add-form-container",style:{maxWidth:"500px"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[A.jsxs("h3",{style:{margin:0,fontWeight:700},children:[A.jsx(v2,{size:20,className:"inline-icon"})," "]}),A.jsx("button",{onClick:d,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-light)"},children:A.jsx(Zs,{size:24})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{style:{fontSize:"1rem",color:"var(--text-main)",fontWeight:600,display:"block",marginBottom:"8px"},children:" "}),(()=>{const g=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return A.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:g?"rgba(255,165,0,0.1)":"rgba(52,88,153,0.1)",borderRadius:"8px",border:g?"1px solid orange":"1px solid var(--fuji-blue)"},children:[A.jsxs("div",{style:{fontWeight:"bold",color:g?"orange":"var(--fuji-blue)",marginBottom:"8px"},children:[" ",g?"":""]}),g?A.jsx("p",{style:{fontSize:"0.85rem",color:"#666",margin:0},children:" Excel ****"}):A.jsx("p",{style:{fontSize:"0.85rem",color:"#666",margin:0},children:" Excel  `Ctrl+C` `Ctrl+V`"})]})})(),A.jsxs("div",{style:{marginBottom:"12px"},children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"#16a34a",fontWeight:"bold",marginBottom:"8px"},children:"  Google Sheet "}),A.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",lineHeight:"1.5"},children:[" ",A.jsx("b",{children:""})," "]}),A.jsxs("ul",{style:{fontSize:"0.8rem",color:"var(--text-main)",paddingLeft:"20px",margin:"8px 0"},children:[A.jsxs("li",{children:[A.jsx("b",{children:""}),"  F~K "]}),A.jsxs("li",{children:[A.jsx("b",{children:""})," "]})]}),A.jsx("p",{style:{fontSize:"0.8rem",color:"#0284c7",margin:0},children:" "})]}),A.jsx("textarea",{value:f,onChange:g=>p(g.target.value),placeholder:` Google Sheet ...
 Excel /  Ctrl+C Ctrl+V `,style:{width:"100%",height:"150px",padding:"12px",borderRadius:"8px",border:"1px solid #ccc",fontFamily:"monospace",whiteSpace:"pre",overflowWrap:"normal",overflowX:"auto",backgroundColor:"#f9f9f9"}})]}),A.jsx("div",{className:"form-actions",children:A.jsx("button",{className:"btn-save",onClick:m,style:{width:"100%"},children:""})})]})})}function xb({attraction:u,editMode:d,onDelete:f,onEdit:p,onSaveEdit:m,onCancelEdit:g,isEditing:E,defaultRegion:C,onAutoSave:v}){const{attributes:y,listeners:N,setNodeRef:_,transform:R,transition:T}=lb({id:u.id}),k={transform:ql.Transform.toString(R),transition:T,zIndex:R?1:0,position:"relative"};return A.jsxs("div",{ref:_,style:k,className:"attraction-wrapper",children:[d&&A.jsx("div",{...y,...N,style:{position:"absolute",left:"-5px",top:"50%",transform:"translateY(-50%)",cursor:"grab",color:"#ccc",padding:"10px",zIndex:10,touchAction:"none"},children:A.jsx(Im,{size:24})}),A.jsx("div",{style:{marginLeft:d?"25px":"0",transition:"margin 0.3s"},children:E?A.jsx("div",{style:{marginBottom:"16px",backgroundColor:"var(--snow-white)",padding:"16px",borderRadius:"16px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid var(--fuji-blue-light)"},children:A.jsx(M2,{editAttraction:u,onSave:m,onCancel:g,onAutoSave:v})}):A.jsx(Ey,{attraction:u,defaultRegion:C})}),d&&!E&&A.jsxs("div",{style:{position:"absolute",top:"-10px",right:"-10px",display:"flex",gap:"8px",zIndex:20},children:[A.jsx("button",{className:"btn-action-circle edit",onClick:I=>{I.stopPropagation(),I.preventDefault(),p()},onPointerDown:I=>I.stopPropagation(),title:"",children:A.jsx(E2,{size:16})}),A.jsx("button",{className:"btn-action-circle delete",onClick:I=>{I.stopPropagation(),I.preventDefault(),f(u.id)},onPointerDown:I=>I.stopPropagation(),title:"",children:A.jsx(Zs,{size:18})})]})]})}function mb({tripId:u}){const{config:d}=ka(u),{days:f,loading:p,saveDay:m}=O2(u),[g,E]=oe.useState(""),[C,v]=oe.useState(!1),[y,N]=oe.useState(!1),[_,R]=oe.useState(!1),[T,k]=oe.useState(null),[I,z]=oe.useState("ALL"),j=Fy(Uf(Ld,{activationConstraint:{distance:5}}),Uf(q2,{activationConstraint:{delay:100,tolerance:5}}),Uf(Bd,{coordinateGetter:ub}));if(oe.useEffect(()=>{f.length>0&&!g&&E(f[0].id)},[f,g]),p)return A.jsx("div",{className:"tab-placeholder fade-in",children:"..."});if(!f.length)return A.jsx("div",{className:"tab-placeholder fade-in",children:""});const P=f.find(ce=>ce.id===g)||f[0],H=ce=>{const X=[...P.attractions,ce],ie={...P,attractions:X};m(ie),N(!1)},K=ce=>{const X=P.attractions.map(M=>M.id===ce.id?ce:M),ie={...P,attractions:X};m(ie),k(null)},Z=ce=>{if(!window.confirm(""))return;const X=P.attractions.filter(M=>M.id!==ce),ie={...P,attractions:X};m(ie)},V=async ce=>{const X=gb(ce,f),ie=X.map(M=>M.id);await Sn.setItem(`${u}_dayOrder`,ie);for(const M of X)await Sn.setItem(`${u}_${M.id}`,M);alert(""),window.location.reload()},L=ce=>{const{active:X,over:ie}=ce;if(ie&&X.id!==ie.id){const M=P.attractions.findIndex(re=>re.id===X.id),ae=P.attractions.findIndex(re=>re.id===ie.id),me=jd(P.attractions,M,ae);m({...P,attractions:me})}},Q=Array.from(new Set(P.attractions.map(ce=>ce.planVariant?.trim()).filter(Boolean))),G=Q.length>0,xe=P.attractions.filter(ce=>!G||I==="ALL"||!ce.planVariant?.trim()?!0:ce.planVariant.trim()===I);return A.jsxs("div",{className:"itinerary-view fade-in",children:[A.jsxs("div",{className:"itinerary-toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[A.jsx("button",{className:"btn-toggle-edit",style:{backgroundColor:"white",color:"var(--text-main)",border:"1px solid #ddd",width:"40px",height:"40px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>R(!0),title:" Excel / Sheets ",children:A.jsx(v2,{size:20})}),A.jsxs("button",{className:`btn-toggle-edit ${C?"active":""}`,onClick:()=>{v(!C),C&&N(!1)},children:[C?A.jsx(Zs,{size:16}):A.jsx(E2,{size:16}),C?"":""]})]}),A.jsx(wy,{days:f,selectedDayId:g||P.id,onSelectDay:E}),G&&A.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginBottom:"24px",flexWrap:"wrap"},children:["ALL",...Q].map(ce=>A.jsx("button",{onClick:()=>z(ce),style:{padding:"8px 24px",borderRadius:"24px",fontSize:"0.9rem",fontWeight:600,transition:"all 0.2s",border:I===ce?"none":"1px solid #ddd",backgroundColor:I===ce?"var(--fuji-blue)":"white",color:I===ce?"white":"var(--text-light)",boxShadow:I===ce?"0 4px 12px rgba(52, 88, 153, 0.3)":"none"},children:ce==="ALL"?"":`${ce}`},ce))}),(()=>{const ce=P.attractions.reduce((ae,me)=>ae+(me.durationMinutes||0),0),X=Math.floor(ce/60),ie=ce%60,M=ce>720;return ce===0?null:A.jsxs("div",{style:{padding:"0 16px",marginBottom:"16px"},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:M?"rgba(255, 165, 0, 0.1)":"var(--snow-white)",padding:"12px 16px",borderRadius:"12px",border:M?"1px solid orange":"1px solid #eee"},children:[A.jsx("span",{style:{fontSize:"0.85rem",color:M?"orange":"var(--text-light)",fontWeight:M?600:400},children:""}),A.jsxs("span",{style:{fontSize:"1rem",color:M?"orange":"var(--text-main)",fontWeight:600},children:[X>0?`${X}  `:"",ie>0?`${ie} `:""]})]}),M&&A.jsx("p",{style:{color:"orange",fontSize:"0.75rem",marginTop:"6px",textAlign:"right"},children:"  12 "})]})})(),A.jsx("div",{className:`itinerary-list ${C?"":"desktop-grid"}`,children:A.jsx(P3,{sensors:j,collisionDetection:Hy,onDragEnd:L,children:A.jsx(eb,{items:xe.map(ce=>ce.id),strategy:J3,children:xe.map(ce=>A.jsx(xb,{attraction:ce,editMode:C,onDelete:Z,onEdit:()=>k(ce.id),onSaveEdit:K,onCancelEdit:()=>k(null),onAutoSave:X=>{const ie=P.attractions.map(M=>M.id===X.id?X:M);m({...P,attractions:ie})},isEditing:T===ce.id,defaultRegion:d.defaultRegion},ce.id))})})}),C&&!y&&A.jsxs("button",{className:"btn-add-attraction fade-in",onClick:()=>N(!0),children:[A.jsx(Ql,{size:20})," "]}),y&&A.jsx(M2,{onSave:H,onCancel:()=>N(!1)}),_&&A.jsx(pb,{onImport:ce=>{V(ce),R(!1)},onClose:()=>R(!1)}),!C&&d.accommodations&&d.accommodations.length>0&&A.jsx("div",{style:{marginTop:"24px",display:"flex",flexDirection:"column",gap:"12px"},children:d.accommodations.filter(ce=>!ce.checkIn||!ce.checkOut?!0:P.date>=ce.checkIn&&P.date<=ce.checkOut).map((ce,X)=>A.jsxs("div",{children:[X===0&&A.jsx("h4",{style:{fontSize:"0.95rem",color:"var(--text-light)",paddingLeft:"8px",marginBottom:"12px"},children:""}),A.jsx("button",{onClick:()=>window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ce.address)}`,"_blank"),style:{width:"100%",backgroundColor:"var(--snow-white)",border:"1px solid var(--fuji-blue-light)",padding:"16px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"space-between",color:"var(--fuji-blue)",fontWeight:700,cursor:"pointer",boxShadow:"0 2px 8px rgba(52, 88, 153, 0.1)"},children:A.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx(Mc,{size:20}),"  ",ce.name]})})]},ce.id))}),!C&&A.jsx(Sy,{tripId:u,advice:P.advice,dayIndex:Math.max(0,f.findIndex(ce=>ce.id===P.id))})]})}function yb(u){const[d,f]=oe.useState([]),[p,m]=oe.useState(!0),g=async()=>{if(u)try{const y=(await xc.keys()).filter(_=>_.startsWith(`${u}_`)),N=[];for(const _ of y){const R=await xc.getItem(_);R&&N.push(R)}f(N.sort((_,R)=>new Date(R.dateISO).getTime()-new Date(_.dateISO).getTime()))}catch(v){console.error("Failed to load expenses",v)}finally{m(!1)}};return oe.useEffect(()=>{g()},[u]),{expenses:d,loading:p,addExpense:async v=>{if(!u)return;const y={id:crypto.randomUUID(),...v};await xc.setItem(`${u}_${y.id}`,y),await g()},removeExpense:async v=>{u&&(await xc.removeItem(`${u}_${v}`),await g())}}}const _g="hokkaido_exchange_rates",bb=1440*60*1e3;function vb(){const[u,d]=oe.useState({}),[f,p]=oe.useState(!0);return oe.useEffect(()=>{(async()=>{try{const E=localStorage.getItem(_g);if(E){const y=JSON.parse(E);if(Date.now()-y.timestamp<bb){d(y.rates),p(!1);return}}const v=await(await fetch("https://open.er-api.com/v6/latest/USD")).json();v&&v.rates&&(d(v.rates),localStorage.setItem(_g,JSON.stringify({rates:v.rates,timestamp:Date.now()})))}catch(E){console.error("Failed to fetch exchange rates:",E),Object.keys(u).length===0&&d({JPY:155,TWD:32,USD:1})}finally{p(!1)}})()},[]),{rates:u,loading:f,convert:(g,E,C)=>{if(!u||Object.keys(u).length===0||E===C)return g;const v=u[E],y=u[C];return!v||!y?g:g/v*y}}}const vc=u=>{switch(u){case"JPY":return"";case"TWD":return"NT$";case"USD":return"$";case"EUR":return"";case"KRW":return"";case"THB":return"";case"SGD":return"S$";case"HKD":return"HK$";case"MYR":return"RM";default:return u+" "}};function wb({tripId:u}){const{expenses:d,loading:f,addExpense:p,removeExpense:m}=yb(u),{config:g}=ka(u),{loading:E,convert:C}=vb(),[v,y]=oe.useState(!1),[N,_]=oe.useState(""),[R,T]=oe.useState(""),[k,I]=oe.useState(""),[z,j]=oe.useState(new Date().toISOString().split("T")[0]),[P,H]=oe.useState(""),K=["","","","","",""];if(f||E)return A.jsx("div",{className:"tab-placeholder fade-in",children:"..."});const Z=g.travelers||1,V=g.tripCurrency||"JPY",L=g.baseCurrency||"TWD",Q=d.reduce((M,ae)=>M+ae.amountJPY,0),G=Z>1?Math.ceil(Q/Z):Q,xe=Math.round(C(Q,V,L)),ce=Z>1?Math.ceil(xe/Z):xe,X=async()=>{const M=parseInt(N,10);if(isNaN(M)||M<=0){alert("");return}if(!R.trim()){alert("");return}await p({amountJPY:M,description:R.trim(),category:k,dateISO:z,paidBy:P.trim()||""}),_(""),T(""),y(!1)},ie=M=>{window.confirm("")&&m(M)};return A.jsxs("div",{className:"expense-view fade-in",children:[A.jsx("div",{style:{backgroundColor:"var(--fuji-blue)",color:"white",padding:"24px 20px",borderRadius:"16px",marginBottom:"20px",boxShadow:"0 8px 16px rgba(52, 88, 153, 0.2)"},children:A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[A.jsxs("div",{children:[A.jsxs("p",{style:{opacity:.8,fontSize:"0.9rem",marginBottom:"4px",display:"flex",alignItems:"center",gap:"6px"},children:[A.jsx(T2,{size:16}),"  (",V,")"]}),A.jsx("div",{style:{display:"flex",alignItems:"baseline",gap:"8px"},children:A.jsxs("span",{style:{fontSize:"2.2rem",fontWeight:800},children:[vc(V)," ",Q.toLocaleString()]})}),V!==L&&A.jsxs("p",{style:{opacity:.9,fontSize:"0.9rem",marginTop:"4px",backgroundColor:"rgba(255,255,255,0.1)",display:"inline-block",padding:"4px 8px",borderRadius:"8px"},children:[" ",vc(L)," ",xe.toLocaleString()]})]}),Z>1&&A.jsxs("div",{style:{textAlign:"right",backgroundColor:"rgba(255,255,255,0.15)",padding:"10px 14px",borderRadius:"12px"},children:[A.jsxs("p",{style:{opacity:.9,fontSize:"0.8rem",marginBottom:"2px"},children:[Z," "]}),A.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:700},children:[vc(V)," ",G.toLocaleString()]}),V!==L&&A.jsxs("div",{style:{fontSize:"0.85rem",opacity:.9,marginTop:"2px"},children:[" ",vc(L)," ",ce.toLocaleString()]})]})]})}),A.jsxs("button",{className:"btn-submit fade-in",style:{width:"100%",marginBottom:"24px",padding:"16px",borderRadius:"12px",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onClick:()=>y(!v),children:[v?A.jsx(rs,{size:20}):A.jsx(Ql,{size:20}),v?"":""]}),v&&A.jsxs("div",{className:"address-card fade-in",style:{marginBottom:"24px",padding:"20px"},children:[A.jsxs("h3",{style:{marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx(lg,{size:20,className:"icon-main"})," "]}),A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"12px",marginBottom:"12px"},children:[A.jsxs("div",{children:[A.jsxs("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:[" (",V,")"]}),A.jsxs("div",{style:{position:"relative"},children:[A.jsx(rm,{size:16,style:{position:"absolute",left:"10px",top:"12px",color:"#999"}}),A.jsx("input",{type:"number",min:"0",value:N,onChange:M=>_(M.target.value),placeholder:"0",style:{width:"100%",padding:"10px 10px 10px 32px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1.1rem"}})]})]}),A.jsxs("div",{children:[A.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsx("input",{type:"date",value:z,onChange:M=>j(M.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",height:"44px"}})]})]}),A.jsxs("div",{style:{marginBottom:"12px"},children:[A.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsx("input",{type:"text",value:R,onChange:M=>T(M.target.value),placeholder:"",style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem"}})]}),A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(130px, 1fr))",gap:"12px",marginBottom:"16px"},children:[A.jsxs("div",{children:[A.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsx("select",{value:k,onChange:M=>I(M.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #ddd",background:"white",fontSize:"1rem",height:"44px"},children:K.map(M=>A.jsx("option",{value:M,children:M},M))})]}),A.jsxs("div",{children:[A.jsx("label",{style:{display:"block",fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:" ()"}),A.jsx("input",{type:"text",value:P,onChange:M=>H(M.target.value),placeholder:"",style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",height:"44px"}})]})]}),A.jsx("button",{className:"btn-save",style:{width:"100%"},onClick:X,children:""})]}),A.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"12px",color:"var(--text-main)"},children:""}),d.length===0?A.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-light)",backgroundColor:"var(--snow-white)",borderRadius:"16px"},children:[A.jsx(lg,{size:40,style:{opacity:.2,margin:"0 auto 12px"}}),A.jsx("p",{children:""})]}):A.jsx("div",{className:"desktop-grid",style:{display:"grid",gap:"12px"},children:d.map(M=>A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"white",padding:"16px",borderRadius:"12px",border:"1px solid #eee"},children:[A.jsxs("div",{style:{flex:1},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[A.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",backgroundColor:"var(--snow-white)",color:"var(--text-main)",borderRadius:"12px"},children:M.category}),A.jsxs("span",{style:{fontSize:"0.85rem",color:"#999",display:"flex",alignItems:"center",gap:"4px"},children:[A.jsx(m2,{size:12})," ",M.dateISO]})]}),A.jsx("h4",{style:{fontSize:"1rem",color:"var(--text-main)"},children:M.description}),A.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginTop:"4px"},children:[": ",M.paidBy]})]}),A.jsxs("div",{style:{textAlign:"right"},children:[A.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:600,color:"var(--fuji-blue)"},children:["",M.amountJPY.toLocaleString()]}),A.jsx("button",{style:{marginTop:"8px",background:"none",border:"none",color:"#ff6b6b",fontSize:"0.85rem",cursor:"pointer"},onClick:()=>ie(M.id),children:""})]})]},M.id))}),A.jsx("div",{style:{height:"80px"}})]})}function Cb(u){const[d,f]=oe.useState([]),[p,m]=oe.useState(!0),g=async()=>{if(u)try{const y=(await Nr.keys()).filter(_=>_.startsWith(`${u}_`)),N=[];for(const _ of y){const R=await Nr.getItem(_);R&&N.push(R)}f(N.sort((_,R)=>R.addedAt-_.addedAt))}catch(v){console.error("Failed to load tickets",v)}finally{m(!1)}};return oe.useEffect(()=>{g()},[u]),{tickets:d,loading:p,addTicket:async v=>{if(!u)return;const y={id:crypto.randomUUID(),...v,addedAt:Date.now()};await Nr.setItem(`${u}_${y.id}`,y),await g()},removeTicket:async v=>{u&&(await Nr.removeItem(`${u}_${v}`),await g())}}}function Eb({tripId:u}){const{tickets:d,loading:f,addTicket:p,removeTicket:m}=Cb(u),[g,E]=oe.useState(!1),[C,v]=oe.useState(""),[y,N]=oe.useState("transit"),[_,R]=oe.useState(""),T=oe.useRef(null),k=oe.useRef(null),[I,z]=oe.useState(null),[j,P]=oe.useState(null),H=G=>new Promise((xe,ce)=>{const X=new FileReader;X.onloadend=()=>xe(X.result),X.onerror=ce,X.readAsDataURL(G)});if(f)return A.jsx("div",{className:"tab-placeholder fade-in",children:"..."});const K=G=>{G.target.files?.[0]&&z(G.target.files[0])},Z=G=>{G.target.files?.[0]&&P(G.target.files[0])},V=async()=>{if(!C){alert(" (: )");return}let G;j&&(G=await H(j)),await p({title:C,type:y,textPayload:_,privateImageBlob:I||void 0,publicTutorialBlob:j||void 0,publicTutorialBase64:G}),v(""),R(""),z(null),P(null),E(!1)},L=d.filter(G=>G.type==="flight"),Q=d.filter(G=>G.type==="transit"||G.type==="other");return A.jsxs("div",{className:"ticket-view fade-in",children:[A.jsxs("div",{className:"ticket-header",style:{marginBottom:"16px"},children:[A.jsxs("h2",{children:[A.jsx(yd,{className:"inline-icon"})," "]}),A.jsx("p",{children:" QR "}),!g&&A.jsxs("button",{className:"btn-upload",onClick:()=>E(!0),children:[A.jsx(py,{size:18})," //"]})]}),g&&A.jsxs("div",{className:"address-card",style:{padding:"16px",marginBottom:"24px"},children:[A.jsx("h3",{style:{marginBottom:"12px"},children:""}),A.jsxs("div",{className:"form-group",style:{marginBottom:"12px"},children:[A.jsx("label",{children:""}),A.jsxs("select",{value:y,onChange:G=>N(G.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd"},children:[A.jsx("option",{value:"transit",children:" (: JR Pass, 72HR)"}),A.jsx("option",{value:"flight",children:" (, )"}),A.jsx("option",{value:"other",children:""})]})]}),A.jsxs("div",{className:"form-group",style:{marginBottom:"12px"},children:[A.jsx("label",{children:""}),A.jsx("input",{type:"text",value:C,onChange:G=>v(G.target.value),placeholder:":  JX800",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd"}})]}),A.jsxs("div",{className:"form-group",style:{marginBottom:"12px"},children:[A.jsx("label",{children:" ()"}),A.jsx("input",{type:"text",value:_,onChange:G=>R(G.target.value),placeholder:": 2 / 10:30 ",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd"}})]}),A.jsxs("div",{className:"form-group",style:{marginBottom:"12px"},children:[A.jsx("label",{children:" / QR Code ()"}),A.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[A.jsx("button",{className:"btn-edit",onClick:()=>T.current?.click(),style:{flex:1},children:""}),A.jsx("span",{style:{fontSize:"0.8rem",color:I?"green":"#999"},children:I?"1":""})]}),A.jsx("input",{type:"file",ref:T,style:{display:"none"},accept:"image/*",onChange:K})]}),A.jsxs("div",{className:"form-group",style:{marginBottom:"24px"},children:[A.jsx("label",{children:"/ ()"}),A.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[A.jsx("button",{className:"btn-edit",onClick:()=>k.current?.click(),style:{flex:1},children:""}),A.jsx("span",{style:{fontSize:"0.8rem",color:j?"green":"#999"},children:j?"1":""})]}),A.jsx("input",{type:"file",ref:k,style:{display:"none"},accept:"image/*",onChange:Z})]}),A.jsxs("div",{style:{display:"flex",gap:"12px"},children:[A.jsx("button",{className:"btn-cancel",onClick:()=>E(!1),style:{flex:1},children:""}),A.jsx("button",{className:"btn-save",onClick:V,style:{flex:1},children:""})]})]}),L.length>0&&A.jsxs("div",{style:{marginBottom:"32px"},children:[A.jsxs("h3",{className:"section-title",children:[A.jsx(Ym,{size:24,style:{color:"var(--accent-primary)",display:"inline",verticalAlign:"middle",marginRight:"8px"}}),""]}),A.jsx("div",{className:"desktop-grid",children:L.map(G=>A.jsxs("div",{className:"address-card",style:{padding:"16px",marginBottom:"16px",position:"relative"},children:[A.jsx("button",{className:"btn-delete-ticket",onClick:()=>m(G.id),style:{position:"absolute",top:"16px",right:"16px"},children:A.jsx(rs,{size:16})}),A.jsx("h4",{style:{fontSize:"1.2rem",marginBottom:"8px"},children:G.title}),G.textPayload&&A.jsx("p",{style:{fontSize:"0.95rem",color:"#555",marginBottom:"16px"},children:G.textPayload}),A.jsxs("div",{style:{display:"flex",gap:"12px",overflowX:"auto"},children:[G.privateImageBlob&&A.jsx(wc,{blob:G.privateImageBlob,label:" ()"}),G.publicTutorialBlob&&A.jsx(wc,{blob:G.publicTutorialBlob,label:" ()"})]})]},G.id))})]}),Q.length>0&&A.jsxs("div",{children:[A.jsxs("h3",{className:"section-title",children:[A.jsx(yd,{size:24,style:{color:"var(--accent-primary)",display:"inline",verticalAlign:"middle",marginRight:"8px"}}),""]}),A.jsx("div",{className:"desktop-grid",children:Q.map(G=>A.jsxs("div",{className:"address-card",style:{padding:"16px",marginBottom:"16px",position:"relative"},children:[A.jsx("button",{className:"btn-delete-ticket",onClick:()=>m(G.id),style:{position:"absolute",top:"16px",right:"16px"},children:A.jsx(rs,{size:16})}),A.jsx("h4",{style:{fontSize:"1.2rem",marginBottom:"8px"},children:G.title}),G.textPayload&&A.jsx("p",{style:{fontSize:"0.95rem",color:"#555",marginBottom:"16px"},children:G.textPayload}),A.jsxs("div",{style:{display:"flex",gap:"12px",overflowX:"auto"},children:[G.privateImageBlob&&A.jsx(wc,{blob:G.privateImageBlob,label:" QR ()"}),G.publicTutorialBlob&&A.jsx(wc,{blob:G.publicTutorialBlob,label:" ()"})]})]},G.id))})]}),L.length===0&&Q.length===0&&!g&&A.jsx("div",{className:"empty-state",children:""})]})}function wc({blob:u,label:d}){const[f,p]=oe.useState("");return oe.useEffect(()=>{const m=URL.createObjectURL(u);return p(m),()=>URL.revokeObjectURL(m)},[u]),f?A.jsxs("div",{style:{minWidth:"200px",flex:1},children:[A.jsx("p",{style:{fontSize:"0.8rem",color:"#888",marginBottom:"4px",textAlign:"center"},children:d}),A.jsx("div",{className:"ticket-item",style:{margin:0},children:A.jsx("div",{className:"ticket-image-container",children:A.jsx("img",{src:f,alt:"Ticket Data",className:"ticket-image"})})})]}):null}const Ab=[{text:" ()",category:"",isPacked:!1},{text:" / ",category:"",isPacked:!1},{text:"Visit Japan Web QR Code",category:"",isPacked:!1},{text:" eSIM",category:"",isPacked:!1},{text:" ()",category:"",isPacked:!1},{text:" / ",category:"",isPacked:!1},{text:" / ",category:"",isPacked:!1},{text:"",category:"",isPacked:!1},{text:"",category:"",isPacked:!1}];function Sb(u){const[d,f]=oe.useState([]),[p,m]=oe.useState(!0),g=async()=>{if(u)try{const N=(await ns.keys()).filter(_=>_.startsWith(`${u}_`));if(N.length===0){const _=[];for(const R of Ab){const T={id:crypto.randomUUID(),...R};await ns.setItem(`${u}_${T.id}`,T),_.push(T)}f(_)}else{const _=[];for(const R of N){const T=await ns.getItem(R);T&&_.push(T)}f(_)}}catch(y){console.error("Failed to load checklist",y)}finally{m(!1)}};return oe.useEffect(()=>{g()},[u]),{items:d,loading:p,addItem:async y=>{if(!u)return;const N={id:crypto.randomUUID(),...y,isPacked:!1};await ns.setItem(`${u}_${N.id}`,N),await g()},togglePacked:async(y,N)=>{if(!u)return;const _=await ns.getItem(`${u}_${y}`);_&&(_.isPacked=!N,await ns.setItem(`${u}_${y}`,_),await g())},removeItem:async y=>{u&&(await ns.removeItem(`${u}_${y}`),await g())}}}function _b({tripId:u}){const{items:d,loading:f,addItem:p,togglePacked:m,removeItem:g}=Sb(u),{config:E}=ka(u),[C,v]=oe.useState(""),[y,N]=oe.useState(""),_=["","","","",""],[R,T]=oe.useState(null),[k,I]=oe.useState(!1),[z,j]=oe.useState([]);if(oe.useEffect(()=>{const L=[];d.some(ie=>ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("power bank")||ie.text.toLowerCase().includes("battery")||ie.text.toLowerCase().includes(""))&&L.push("  160Wh"),d.some(ie=>ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("liquid"))&&L.push(" / 100ml (g) 1  20x20 cm "),d.some(ie=>ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("lighter")||ie.text.toLowerCase().includes(""))&&L.push(" ()"),d.some(ie=>ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes(""))&&L.push(" //"),d.some(ie=>ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("")||ie.text.toLowerCase().includes("tripod"))&&L.push("  1  60 "),j(L)},[d]),oe.useEffect(()=>{if(!E.location||k)return;(async()=>{try{const Q="prohibited_rules_cache";let G=null;try{const xe=await fetch("https://raw.githubusercontent.com/whalechao/hokkaido-app/main/public/prohibited_rules.json");xe.ok&&(G=await xe.json(),await fn.setItem(Q,{data:G,timestamp:Date.now()}))}catch{console.warn("Could not fetch remote rules, falling back to cache or local.")}if(!G){const xe=await fn.getItem(Q);if(xe&&Date.now()-xe.timestamp<10080*60*1e3)G=xe.data;else{const ce=await fetch("/hokkaido-app/prohibited_rules.json");ce.ok&&(G=await ce.json())}}if(G&&G.rules){const xe=E.location.toLowerCase(),ce=G.rules.find(X=>X.keywords.some(ie=>xe.includes(ie.toLowerCase())));ce&&T(ce.message)}}catch(Q){console.error("Failed to load prohibited rules",Q)}})()},[E.location,k]),f)return A.jsx("div",{className:"tab-placeholder fade-in",children:"..."});const P=d.length,H=d.filter(L=>L.isPacked).length,K=P===0?0:Math.round(H/P*100),Z=async()=>{C.trim()&&(await p({text:C.trim(),category:y}),v(""))},V=_.reduce((L,Q)=>(L[Q]=d.filter(G=>G.category===Q),L),{});return A.jsxs("div",{className:"checklist-view fade-in",children:[R&&!k&&A.jsxs("div",{style:{backgroundColor:"#fff3cd",color:"#856404",padding:"16px",borderRadius:"16px",marginBottom:"20px",border:"1px solid #ffeeba",position:"relative",display:"flex",gap:"12px",alignItems:"flex-start"},children:[A.jsx(cg,{style:{flexShrink:0,marginTop:"2px"},size:20,color:"#856404"}),A.jsxs("div",{children:[A.jsx("strong",{style:{display:"block",marginBottom:"4px",fontSize:"1rem"},children:""}),A.jsx("p",{style:{margin:0,fontSize:"0.9rem",lineHeight:"1.4"},children:R})]}),A.jsx("button",{onClick:()=>I(!0),style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",cursor:"pointer",color:"#856404",padding:"4px"},title:"",children:A.jsx(Zs,{size:16})})]}),z.length>0&&A.jsxs("div",{style:{backgroundColor:"#fffbeb",color:"#b45309",padding:"16px",borderRadius:"16px",marginBottom:"20px",border:"1px solid #fde68a",display:"flex",gap:"12px",alignItems:"flex-start"},children:[A.jsx(cg,{style:{flexShrink:0,marginTop:"2px"},size:20,color:"#d97706"}),A.jsxs("div",{style:{width:"100%"},children:[A.jsx("strong",{style:{display:"block",marginBottom:"8px",fontSize:"1rem"},children:"/"}),A.jsx("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"0.9rem",lineHeight:"1.5",display:"flex",flexDirection:"column",gap:"6px"},children:z.map((L,Q)=>A.jsx("li",{style:{paddingLeft:"4px"},children:L},Q))})]})]}),A.jsxs("div",{style:{backgroundColor:"white",padding:"24px 20px",borderRadius:"16px",marginBottom:"20px",border:"1px solid #eee"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[A.jsxs("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px",color:"var(--fuji-blue)"},children:[A.jsx(am,{size:24})," "]}),A.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:600,color:"var(--text-main)"},children:[H," / ",P]})]}),A.jsx("div",{style:{width:"100%",height:"12px",backgroundColor:"var(--snow-white)",borderRadius:"6px",overflow:"hidden"},children:A.jsx("div",{style:{width:`${K}%`,height:"100%",backgroundColor:"var(--accent-primary)",transition:"width 0.3s ease-out"}})})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",flexWrap:"wrap"},children:[A.jsx("select",{value:y,onChange:L=>N(L.target.value),style:{flex:"1 1 100px",padding:"12px",borderRadius:"12px",border:"1px solid #ddd",background:"white"},children:_.map(L=>A.jsx("option",{value:L,children:L},L))}),A.jsx("input",{type:"text",value:C,onChange:L=>v(L.target.value),placeholder:"...",style:{flex:"2 1 140px",padding:"12px",borderRadius:"12px",border:"1px solid #ddd"},onKeyDown:L=>L.key==="Enter"&&Z()}),A.jsx("button",{className:"btn-add-checklist-item",onClick:Z,style:{flex:"0 0 auto",minWidth:"48px",backgroundColor:"var(--fuji-blue)",color:"white",border:"none",borderRadius:"12px",padding:"12px 16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:A.jsx(Ql,{size:20})})]}),A.jsx("div",{className:"desktop-grid",style:{paddingBottom:"80px"},children:_.map(L=>{const Q=V[L];return Q.length===0?null:A.jsxs("div",{style:{marginBottom:"24px"},children:[A.jsx("h4",{style:{fontSize:"1rem",color:"var(--text-light)",marginBottom:"12px",paddingLeft:"8px"},children:L}),A.jsx("div",{style:{backgroundColor:"white",borderRadius:"16px",border:"1px solid #eee",overflow:"hidden"},children:Q.map((G,xe)=>A.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"16px",borderBottom:xe!==Q.length-1?"1px solid #f5f5f5":"none",backgroundColor:G.isPacked?"#fafafa":"white",transition:"background-color 0.2s"},children:[A.jsx("button",{onClick:()=>m(G.id,G.isPacked),style:{background:"none",border:"none",padding:"0",marginRight:"16px",color:G.isPacked?"var(--accent-primary)":"#ddd",cursor:"pointer",display:"flex",alignItems:"center"},children:G.isPacked?A.jsx(gm,{size:24}):A.jsx(xm,{size:24})}),A.jsx("span",{style:{flex:1,fontSize:"1.05rem",color:G.isPacked?"#999":"var(--text-main)",textDecoration:G.isPacked?"line-through":"none",transition:"all 0.2s"},children:G.text}),A.jsx("button",{onClick:()=>g(G.id),style:{background:"none",border:"none",color:"#ff6b6b",opacity:.6,cursor:"pointer",padding:"4px"},children:A.jsx(rs,{size:18})})]},G.id))})]},L)})})]})}var Vf={exports:{}},Tg;function Tb(){return Tg||(Tg=1,(function(u){var d=(function(){var f=String.fromCharCode,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",g={};function E(v,y){if(!g[v]){g[v]={};for(var N=0;N<v.length;N++)g[v][v.charAt(N)]=N}return g[v][y]}var C={compressToBase64:function(v){if(v==null)return"";var y=C._compress(v,6,function(N){return p.charAt(N)});switch(y.length%4){default:case 0:return y;case 1:return y+"===";case 2:return y+"==";case 3:return y+"="}},decompressFromBase64:function(v){return v==null?"":v==""?null:C._decompress(v.length,32,function(y){return E(p,v.charAt(y))})},compressToUTF16:function(v){return v==null?"":C._compress(v,15,function(y){return f(y+32)})+" "},decompressFromUTF16:function(v){return v==null?"":v==""?null:C._decompress(v.length,16384,function(y){return v.charCodeAt(y)-32})},compressToUint8Array:function(v){for(var y=C.compress(v),N=new Uint8Array(y.length*2),_=0,R=y.length;_<R;_++){var T=y.charCodeAt(_);N[_*2]=T>>>8,N[_*2+1]=T%256}return N},decompressFromUint8Array:function(v){if(v==null)return C.decompress(v);for(var y=new Array(v.length/2),N=0,_=y.length;N<_;N++)y[N]=v[N*2]*256+v[N*2+1];var R=[];return y.forEach(function(T){R.push(f(T))}),C.decompress(R.join(""))},compressToEncodedURIComponent:function(v){return v==null?"":C._compress(v,6,function(y){return m.charAt(y)})},decompressFromEncodedURIComponent:function(v){return v==null?"":v==""?null:(v=v.replace(/ /g,"+"),C._decompress(v.length,32,function(y){return E(m,v.charAt(y))}))},compress:function(v){return C._compress(v,16,function(y){return f(y)})},_compress:function(v,y,N){if(v==null)return"";var _,R,T={},k={},I="",z="",j="",P=2,H=3,K=2,Z=[],V=0,L=0,Q;for(Q=0;Q<v.length;Q+=1)if(I=v.charAt(Q),Object.prototype.hasOwnProperty.call(T,I)||(T[I]=H++,k[I]=!0),z=j+I,Object.prototype.hasOwnProperty.call(T,z))j=z;else{if(Object.prototype.hasOwnProperty.call(k,j)){if(j.charCodeAt(0)<256){for(_=0;_<K;_++)V=V<<1,L==y-1?(L=0,Z.push(N(V)),V=0):L++;for(R=j.charCodeAt(0),_=0;_<8;_++)V=V<<1|R&1,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=R>>1}else{for(R=1,_=0;_<K;_++)V=V<<1|R,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=0;for(R=j.charCodeAt(0),_=0;_<16;_++)V=V<<1|R&1,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=R>>1}P--,P==0&&(P=Math.pow(2,K),K++),delete k[j]}else for(R=T[j],_=0;_<K;_++)V=V<<1|R&1,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=R>>1;P--,P==0&&(P=Math.pow(2,K),K++),T[z]=H++,j=String(I)}if(j!==""){if(Object.prototype.hasOwnProperty.call(k,j)){if(j.charCodeAt(0)<256){for(_=0;_<K;_++)V=V<<1,L==y-1?(L=0,Z.push(N(V)),V=0):L++;for(R=j.charCodeAt(0),_=0;_<8;_++)V=V<<1|R&1,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=R>>1}else{for(R=1,_=0;_<K;_++)V=V<<1|R,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=0;for(R=j.charCodeAt(0),_=0;_<16;_++)V=V<<1|R&1,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=R>>1}P--,P==0&&(P=Math.pow(2,K),K++),delete k[j]}else for(R=T[j],_=0;_<K;_++)V=V<<1|R&1,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=R>>1;P--,P==0&&(P=Math.pow(2,K),K++)}for(R=2,_=0;_<K;_++)V=V<<1|R&1,L==y-1?(L=0,Z.push(N(V)),V=0):L++,R=R>>1;for(;;)if(V=V<<1,L==y-1){Z.push(N(V));break}else L++;return Z.join("")},decompress:function(v){return v==null?"":v==""?null:C._decompress(v.length,32768,function(y){return v.charCodeAt(y)})},_decompress:function(v,y,N){var _=[],R=4,T=4,k=3,I="",z=[],j,P,H,K,Z,V,L,Q={val:N(0),position:y,index:1};for(j=0;j<3;j+=1)_[j]=j;for(H=0,Z=Math.pow(2,2),V=1;V!=Z;)K=Q.val&Q.position,Q.position>>=1,Q.position==0&&(Q.position=y,Q.val=N(Q.index++)),H|=(K>0?1:0)*V,V<<=1;switch(H){case 0:for(H=0,Z=Math.pow(2,8),V=1;V!=Z;)K=Q.val&Q.position,Q.position>>=1,Q.position==0&&(Q.position=y,Q.val=N(Q.index++)),H|=(K>0?1:0)*V,V<<=1;L=f(H);break;case 1:for(H=0,Z=Math.pow(2,16),V=1;V!=Z;)K=Q.val&Q.position,Q.position>>=1,Q.position==0&&(Q.position=y,Q.val=N(Q.index++)),H|=(K>0?1:0)*V,V<<=1;L=f(H);break;case 2:return""}for(_[3]=L,P=L,z.push(L);;){if(Q.index>v)return"";for(H=0,Z=Math.pow(2,k),V=1;V!=Z;)K=Q.val&Q.position,Q.position>>=1,Q.position==0&&(Q.position=y,Q.val=N(Q.index++)),H|=(K>0?1:0)*V,V<<=1;switch(L=H){case 0:for(H=0,Z=Math.pow(2,8),V=1;V!=Z;)K=Q.val&Q.position,Q.position>>=1,Q.position==0&&(Q.position=y,Q.val=N(Q.index++)),H|=(K>0?1:0)*V,V<<=1;_[T++]=f(H),L=T-1,R--;break;case 1:for(H=0,Z=Math.pow(2,16),V=1;V!=Z;)K=Q.val&Q.position,Q.position>>=1,Q.position==0&&(Q.position=y,Q.val=N(Q.index++)),H|=(K>0?1:0)*V,V<<=1;_[T++]=f(H),L=T-1,R--;break;case 2:return z.join("")}if(R==0&&(R=Math.pow(2,k),k++),_[L])I=_[L];else if(L===T)I=P+P.charAt(0);else return null;z.push(I),_[T++]=P+I.charAt(0),R--,P=I,R==0&&(R=Math.pow(2,k),k++)}}};return C})();u!=null?u.exports=d:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return d})})(Vf)),Vf.exports}var Nb=Tb();const Ad=Kl(Nb);var Xf={exports:{}};var Ng;function Rb(){return Ng||(Ng=1,(function(u,d){(function(f){u.exports=f()})(function(){return(function f(p,m,g){function E(y,N){if(!m[y]){if(!p[y]){var _=typeof Ba=="function"&&Ba;if(!N&&_)return _(y,!0);if(C)return C(y,!0);var R=new Error("Cannot find module '"+y+"'");throw R.code="MODULE_NOT_FOUND",R}var T=m[y]={exports:{}};p[y][0].call(T.exports,function(k){var I=p[y][1][k];return E(I||k)},T,T.exports,f,p,m,g)}return m[y].exports}for(var C=typeof Ba=="function"&&Ba,v=0;v<g.length;v++)E(g[v]);return E})({1:[function(f,p,m){var g=f("./utils"),E=f("./support"),C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";m.encode=function(v){for(var y,N,_,R,T,k,I,z=[],j=0,P=v.length,H=P,K=g.getTypeOf(v)!=="string";j<v.length;)H=P-j,_=K?(y=v[j++],N=j<P?v[j++]:0,j<P?v[j++]:0):(y=v.charCodeAt(j++),N=j<P?v.charCodeAt(j++):0,j<P?v.charCodeAt(j++):0),R=y>>2,T=(3&y)<<4|N>>4,k=1<H?(15&N)<<2|_>>6:64,I=2<H?63&_:64,z.push(C.charAt(R)+C.charAt(T)+C.charAt(k)+C.charAt(I));return z.join("")},m.decode=function(v){var y,N,_,R,T,k,I=0,z=0,j="data:";if(v.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");var P,H=3*(v=v.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(v.charAt(v.length-1)===C.charAt(64)&&H--,v.charAt(v.length-2)===C.charAt(64)&&H--,H%1!=0)throw new Error("Invalid base64 input, bad content length.");for(P=E.uint8array?new Uint8Array(0|H):new Array(0|H);I<v.length;)y=C.indexOf(v.charAt(I++))<<2|(R=C.indexOf(v.charAt(I++)))>>4,N=(15&R)<<4|(T=C.indexOf(v.charAt(I++)))>>2,_=(3&T)<<6|(k=C.indexOf(v.charAt(I++))),P[z++]=y,T!==64&&(P[z++]=N),k!==64&&(P[z++]=_);return P}},{"./support":30,"./utils":32}],2:[function(f,p,m){var g=f("./external"),E=f("./stream/DataWorker"),C=f("./stream/Crc32Probe"),v=f("./stream/DataLengthProbe");function y(N,_,R,T,k){this.compressedSize=N,this.uncompressedSize=_,this.crc32=R,this.compression=T,this.compressedContent=k}y.prototype={getContentWorker:function(){var N=new E(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new v("data_length")),_=this;return N.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),N},getCompressedWorker:function(){return new E(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(N,_,R){return N.pipe(new C).pipe(new v("uncompressedSize")).pipe(_.compressWorker(R)).pipe(new v("compressedSize")).withStreamInfo("compression",_)},p.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(f,p,m){var g=f("./stream/GenericWorker");m.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},m.DEFLATE=f("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(f,p,m){var g=f("./utils"),E=(function(){for(var C,v=[],y=0;y<256;y++){C=y;for(var N=0;N<8;N++)C=1&C?3988292384^C>>>1:C>>>1;v[y]=C}return v})();p.exports=function(C,v){return C!==void 0&&C.length?g.getTypeOf(C)!=="string"?(function(y,N,_,R){var T=E,k=R+_;y^=-1;for(var I=R;I<k;I++)y=y>>>8^T[255&(y^N[I])];return-1^y})(0|v,C,C.length,0):(function(y,N,_,R){var T=E,k=R+_;y^=-1;for(var I=R;I<k;I++)y=y>>>8^T[255&(y^N.charCodeAt(I))];return-1^y})(0|v,C,C.length,0):0}},{"./utils":32}],5:[function(f,p,m){m.base64=!1,m.binary=!1,m.dir=!1,m.createFolders=!0,m.date=null,m.compression=null,m.compressionOptions=null,m.comment=null,m.unixPermissions=null,m.dosPermissions=null},{}],6:[function(f,p,m){var g=null;g=typeof Promise<"u"?Promise:f("lie"),p.exports={Promise:g}},{lie:37}],7:[function(f,p,m){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",E=f("pako"),C=f("./utils"),v=f("./stream/GenericWorker"),y=g?"uint8array":"array";function N(_,R){v.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=R,this.meta={}}m.magic="\b\0",C.inherits(N,v),N.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(C.transformTo(y,_.data),!1)},N.prototype.flush=function(){v.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},N.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this._pako=null},N.prototype._createPako=function(){this._pako=new E[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(R){_.push({data:R,meta:_.meta})}},m.compressWorker=function(_){return new N("Deflate",_)},m.uncompressWorker=function(){return new N("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(f,p,m){function g(T,k){var I,z="";for(I=0;I<k;I++)z+=String.fromCharCode(255&T),T>>>=8;return z}function E(T,k,I,z,j,P){var H,K,Z=T.file,V=T.compression,L=P!==y.utf8encode,Q=C.transformTo("string",P(Z.name)),G=C.transformTo("string",y.utf8encode(Z.name)),xe=Z.comment,ce=C.transformTo("string",P(xe)),X=C.transformTo("string",y.utf8encode(xe)),ie=G.length!==Z.name.length,M=X.length!==xe.length,ae="",me="",re="",Ye=Z.dir,ke=Z.date,Je={crc32:0,compressedSize:0,uncompressedSize:0};k&&!I||(Je.crc32=T.crc32,Je.compressedSize=T.compressedSize,Je.uncompressedSize=T.uncompressedSize);var q=0;k&&(q|=8),L||!ie&&!M||(q|=2048);var ne=0,Oe=0;Ye&&(ne|=16),j==="UNIX"?(Oe=798,ne|=(function(je,ze){var ct=je;return je||(ct=ze?16893:33204),(65535&ct)<<16})(Z.unixPermissions,Ye)):(Oe=20,ne|=(function(je){return 63&(je||0)})(Z.dosPermissions)),H=ke.getUTCHours(),H<<=6,H|=ke.getUTCMinutes(),H<<=5,H|=ke.getUTCSeconds()/2,K=ke.getUTCFullYear()-1980,K<<=4,K|=ke.getUTCMonth()+1,K<<=5,K|=ke.getUTCDate(),ie&&(me=g(1,1)+g(N(Q),4)+G,ae+="up"+g(me.length,2)+me),M&&(re=g(1,1)+g(N(ce),4)+X,ae+="uc"+g(re.length,2)+re);var Te="";return Te+=`
\0`,Te+=g(q,2),Te+=V.magic,Te+=g(H,2),Te+=g(K,2),Te+=g(Je.crc32,4),Te+=g(Je.compressedSize,4),Te+=g(Je.uncompressedSize,4),Te+=g(Q.length,2),Te+=g(ae.length,2),{fileRecord:_.LOCAL_FILE_HEADER+Te+Q+ae,dirRecord:_.CENTRAL_FILE_HEADER+g(Oe,2)+Te+g(ce.length,2)+"\0\0\0\0"+g(ne,4)+g(z,4)+Q+ae+ce}}var C=f("../utils"),v=f("../stream/GenericWorker"),y=f("../utf8"),N=f("../crc32"),_=f("../signature");function R(T,k,I,z){v.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=k,this.zipPlatform=I,this.encodeFileName=z,this.streamFiles=T,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}C.inherits(R,v),R.prototype.push=function(T){var k=T.meta.percent||0,I=this.entriesCount,z=this._sources.length;this.accumulate?this.contentBuffer.push(T):(this.bytesWritten+=T.data.length,v.prototype.push.call(this,{data:T.data,meta:{currentFile:this.currentFile,percent:I?(k+100*(I-z-1))/I:100}}))},R.prototype.openedSource=function(T){this.currentSourceOffset=this.bytesWritten,this.currentFile=T.file.name;var k=this.streamFiles&&!T.file.dir;if(k){var I=E(T,k,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:I.fileRecord,meta:{percent:0}})}else this.accumulate=!0},R.prototype.closedSource=function(T){this.accumulate=!1;var k=this.streamFiles&&!T.file.dir,I=E(T,k,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(I.dirRecord),k)this.push({data:(function(z){return _.DATA_DESCRIPTOR+g(z.crc32,4)+g(z.compressedSize,4)+g(z.uncompressedSize,4)})(T),meta:{percent:100}});else for(this.push({data:I.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},R.prototype.flush=function(){for(var T=this.bytesWritten,k=0;k<this.dirRecords.length;k++)this.push({data:this.dirRecords[k],meta:{percent:100}});var I=this.bytesWritten-T,z=(function(j,P,H,K,Z){var V=C.transformTo("string",Z(K));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(j,2)+g(j,2)+g(P,4)+g(H,4)+g(V.length,2)+V})(this.dirRecords.length,I,T,this.zipComment,this.encodeFileName);this.push({data:z,meta:{percent:100}})},R.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},R.prototype.registerPrevious=function(T){this._sources.push(T);var k=this;return T.on("data",function(I){k.processChunk(I)}),T.on("end",function(){k.closedSource(k.previous.streamInfo),k._sources.length?k.prepareNextSource():k.end()}),T.on("error",function(I){k.error(I)}),this},R.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},R.prototype.error=function(T){var k=this._sources;if(!v.prototype.error.call(this,T))return!1;for(var I=0;I<k.length;I++)try{k[I].error(T)}catch{}return!0},R.prototype.lock=function(){v.prototype.lock.call(this);for(var T=this._sources,k=0;k<T.length;k++)T[k].lock()},p.exports=R},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(f,p,m){var g=f("../compressions"),E=f("./ZipFileWorker");m.generateWorker=function(C,v,y){var N=new E(v.streamFiles,y,v.platform,v.encodeFileName),_=0;try{C.forEach(function(R,T){_++;var k=(function(P,H){var K=P||H,Z=g[K];if(!Z)throw new Error(K+" is not a valid compression method !");return Z})(T.options.compression,v.compression),I=T.options.compressionOptions||v.compressionOptions||{},z=T.dir,j=T.date;T._compressWorker(k,I).withStreamInfo("file",{name:R,dir:z,date:j,comment:T.comment||"",unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions}).pipe(N)}),N.entriesCount=_}catch(R){N.error(R)}return N}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(f,p,m){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var E=new g;for(var C in this)typeof this[C]!="function"&&(E[C]=this[C]);return E}}(g.prototype=f("./object")).loadAsync=f("./load"),g.support=f("./support"),g.defaults=f("./defaults"),g.version="3.10.1",g.loadAsync=function(E,C){return new g().loadAsync(E,C)},g.external=f("./external"),p.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(f,p,m){var g=f("./utils"),E=f("./external"),C=f("./utf8"),v=f("./zipEntries"),y=f("./stream/Crc32Probe"),N=f("./nodejsUtils");function _(R){return new E.Promise(function(T,k){var I=R.decompressed.getContentWorker().pipe(new y);I.on("error",function(z){k(z)}).on("end",function(){I.streamInfo.crc32!==R.decompressed.crc32?k(new Error("Corrupted zip : CRC32 mismatch")):T()}).resume()})}p.exports=function(R,T){var k=this;return T=g.extend(T||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:C.utf8decode}),N.isNode&&N.isStream(R)?E.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",R,!0,T.optimizedBinaryString,T.base64).then(function(I){var z=new v(T);return z.load(I),z}).then(function(I){var z=[E.Promise.resolve(I)],j=I.files;if(T.checkCRC32)for(var P=0;P<j.length;P++)z.push(_(j[P]));return E.Promise.all(z)}).then(function(I){for(var z=I.shift(),j=z.files,P=0;P<j.length;P++){var H=j[P],K=H.fileNameStr,Z=g.resolve(H.fileNameStr);k.file(Z,H.decompressed,{binary:!0,optimizedBinaryString:!0,date:H.date,dir:H.dir,comment:H.fileCommentStr.length?H.fileCommentStr:null,unixPermissions:H.unixPermissions,dosPermissions:H.dosPermissions,createFolders:T.createFolders}),H.dir||(k.file(Z).unsafeOriginalName=K)}return z.zipComment.length&&(k.comment=z.zipComment),k})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(f,p,m){var g=f("../utils"),E=f("../stream/GenericWorker");function C(v,y){E.call(this,"Nodejs stream input adapter for "+v),this._upstreamEnded=!1,this._bindStream(y)}g.inherits(C,E),C.prototype._bindStream=function(v){var y=this;(this._stream=v).pause(),v.on("data",function(N){y.push({data:N,meta:{percent:0}})}).on("error",function(N){y.isPaused?this.generatedError=N:y.error(N)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},C.prototype.pause=function(){return!!E.prototype.pause.call(this)&&(this._stream.pause(),!0)},C.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},p.exports=C},{"../stream/GenericWorker":28,"../utils":32}],13:[function(f,p,m){var g=f("readable-stream").Readable;function E(C,v,y){g.call(this,v),this._helper=C;var N=this;C.on("data",function(_,R){N.push(_)||N._helper.pause(),y&&y(R)}).on("error",function(_){N.emit("error",_)}).on("end",function(){N.push(null)})}f("../utils").inherits(E,g),E.prototype._read=function(){this._helper.resume()},p.exports=E},{"../utils":32,"readable-stream":16}],14:[function(f,p,m){p.exports={isNode:typeof Buffer<"u",newBufferFrom:function(g,E){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(g,E);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new Buffer(g,E)},allocBuffer:function(g){if(Buffer.alloc)return Buffer.alloc(g);var E=new Buffer(g);return E.fill(0),E},isBuffer:function(g){return Buffer.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(f,p,m){function g(Z,V,L){var Q,G=C.getTypeOf(V),xe=C.extend(L||{},N);xe.date=xe.date||new Date,xe.compression!==null&&(xe.compression=xe.compression.toUpperCase()),typeof xe.unixPermissions=="string"&&(xe.unixPermissions=parseInt(xe.unixPermissions,8)),xe.unixPermissions&&16384&xe.unixPermissions&&(xe.dir=!0),xe.dosPermissions&&16&xe.dosPermissions&&(xe.dir=!0),xe.dir&&(Z=j(Z)),xe.createFolders&&(Q=z(Z))&&P.call(this,Q,!0);var ce=G==="string"&&xe.binary===!1&&xe.base64===!1;L&&L.binary!==void 0||(xe.binary=!ce),(V instanceof _&&V.uncompressedSize===0||xe.dir||!V||V.length===0)&&(xe.base64=!1,xe.binary=!0,V="",xe.compression="STORE",G="string");var X=null;X=V instanceof _||V instanceof v?V:k.isNode&&k.isStream(V)?new I(Z,V):C.prepareContent(Z,V,xe.binary,xe.optimizedBinaryString,xe.base64);var ie=new R(Z,X,xe);this.files[Z]=ie}var E=f("./utf8"),C=f("./utils"),v=f("./stream/GenericWorker"),y=f("./stream/StreamHelper"),N=f("./defaults"),_=f("./compressedObject"),R=f("./zipObject"),T=f("./generate"),k=f("./nodejsUtils"),I=f("./nodejs/NodejsStreamInputAdapter"),z=function(Z){Z.slice(-1)==="/"&&(Z=Z.substring(0,Z.length-1));var V=Z.lastIndexOf("/");return 0<V?Z.substring(0,V):""},j=function(Z){return Z.slice(-1)!=="/"&&(Z+="/"),Z},P=function(Z,V){return V=V!==void 0?V:N.createFolders,Z=j(Z),this.files[Z]||g.call(this,Z,null,{dir:!0,createFolders:V}),this.files[Z]};function H(Z){return Object.prototype.toString.call(Z)==="[object RegExp]"}var K={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Z){var V,L,Q;for(V in this.files)Q=this.files[V],(L=V.slice(this.root.length,V.length))&&V.slice(0,this.root.length)===this.root&&Z(L,Q)},filter:function(Z){var V=[];return this.forEach(function(L,Q){Z(L,Q)&&V.push(Q)}),V},file:function(Z,V,L){if(arguments.length!==1)return Z=this.root+Z,g.call(this,Z,V,L),this;if(H(Z)){var Q=Z;return this.filter(function(xe,ce){return!ce.dir&&Q.test(xe)})}var G=this.files[this.root+Z];return G&&!G.dir?G:null},folder:function(Z){if(!Z)return this;if(H(Z))return this.filter(function(G,xe){return xe.dir&&Z.test(G)});var V=this.root+Z,L=P.call(this,V),Q=this.clone();return Q.root=L.name,Q},remove:function(Z){Z=this.root+Z;var V=this.files[Z];if(V||(Z.slice(-1)!=="/"&&(Z+="/"),V=this.files[Z]),V&&!V.dir)delete this.files[Z];else for(var L=this.filter(function(G,xe){return xe.name.slice(0,Z.length)===Z}),Q=0;Q<L.length;Q++)delete this.files[L[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Z){var V,L={};try{if((L=C.extend(Z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:E.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");C.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var Q=L.comment||this.comment||"";V=T.generateWorker(this,L,Q)}catch(G){(V=new v("error")).error(G)}return new y(V,L.type||"string",L.mimeType)},generateAsync:function(Z,V){return this.generateInternalStream(Z).accumulate(V)},generateNodeStream:function(Z,V){return(Z=Z||{}).type||(Z.type="nodebuffer"),this.generateInternalStream(Z).toNodejsStream(V)}};p.exports=K},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(f,p,m){p.exports=f("stream")},{stream:void 0}],17:[function(f,p,m){var g=f("./DataReader");function E(C){g.call(this,C);for(var v=0;v<this.data.length;v++)C[v]=255&C[v]}f("../utils").inherits(E,g),E.prototype.byteAt=function(C){return this.data[this.zero+C]},E.prototype.lastIndexOfSignature=function(C){for(var v=C.charCodeAt(0),y=C.charCodeAt(1),N=C.charCodeAt(2),_=C.charCodeAt(3),R=this.length-4;0<=R;--R)if(this.data[R]===v&&this.data[R+1]===y&&this.data[R+2]===N&&this.data[R+3]===_)return R-this.zero;return-1},E.prototype.readAndCheckSignature=function(C){var v=C.charCodeAt(0),y=C.charCodeAt(1),N=C.charCodeAt(2),_=C.charCodeAt(3),R=this.readData(4);return v===R[0]&&y===R[1]&&N===R[2]&&_===R[3]},E.prototype.readData=function(C){if(this.checkOffset(C),C===0)return[];var v=this.data.slice(this.zero+this.index,this.zero+this.index+C);return this.index+=C,v},p.exports=E},{"../utils":32,"./DataReader":18}],18:[function(f,p,m){var g=f("../utils");function E(C){this.data=C,this.length=C.length,this.index=0,this.zero=0}E.prototype={checkOffset:function(C){this.checkIndex(this.index+C)},checkIndex:function(C){if(this.length<this.zero+C||C<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+C+"). Corrupted zip ?")},setIndex:function(C){this.checkIndex(C),this.index=C},skip:function(C){this.setIndex(this.index+C)},byteAt:function(){},readInt:function(C){var v,y=0;for(this.checkOffset(C),v=this.index+C-1;v>=this.index;v--)y=(y<<8)+this.byteAt(v);return this.index+=C,y},readString:function(C){return g.transformTo("string",this.readData(C))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var C=this.readInt(4);return new Date(Date.UTC(1980+(C>>25&127),(C>>21&15)-1,C>>16&31,C>>11&31,C>>5&63,(31&C)<<1))}},p.exports=E},{"../utils":32}],19:[function(f,p,m){var g=f("./Uint8ArrayReader");function E(C){g.call(this,C)}f("../utils").inherits(E,g),E.prototype.readData=function(C){this.checkOffset(C);var v=this.data.slice(this.zero+this.index,this.zero+this.index+C);return this.index+=C,v},p.exports=E},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(f,p,m){var g=f("./DataReader");function E(C){g.call(this,C)}f("../utils").inherits(E,g),E.prototype.byteAt=function(C){return this.data.charCodeAt(this.zero+C)},E.prototype.lastIndexOfSignature=function(C){return this.data.lastIndexOf(C)-this.zero},E.prototype.readAndCheckSignature=function(C){return C===this.readData(4)},E.prototype.readData=function(C){this.checkOffset(C);var v=this.data.slice(this.zero+this.index,this.zero+this.index+C);return this.index+=C,v},p.exports=E},{"../utils":32,"./DataReader":18}],21:[function(f,p,m){var g=f("./ArrayReader");function E(C){g.call(this,C)}f("../utils").inherits(E,g),E.prototype.readData=function(C){if(this.checkOffset(C),C===0)return new Uint8Array(0);var v=this.data.subarray(this.zero+this.index,this.zero+this.index+C);return this.index+=C,v},p.exports=E},{"../utils":32,"./ArrayReader":17}],22:[function(f,p,m){var g=f("../utils"),E=f("../support"),C=f("./ArrayReader"),v=f("./StringReader"),y=f("./NodeBufferReader"),N=f("./Uint8ArrayReader");p.exports=function(_){var R=g.getTypeOf(_);return g.checkSupport(R),R!=="string"||E.uint8array?R==="nodebuffer"?new y(_):E.uint8array?new N(g.transformTo("uint8array",_)):new C(g.transformTo("array",_)):new v(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(f,p,m){m.LOCAL_FILE_HEADER="PK",m.CENTRAL_FILE_HEADER="PK",m.CENTRAL_DIRECTORY_END="PK",m.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",m.ZIP64_CENTRAL_DIRECTORY_END="PK",m.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(f,p,m){var g=f("./GenericWorker"),E=f("../utils");function C(v){g.call(this,"ConvertWorker to "+v),this.destType=v}E.inherits(C,g),C.prototype.processChunk=function(v){this.push({data:E.transformTo(this.destType,v.data),meta:v.meta})},p.exports=C},{"../utils":32,"./GenericWorker":28}],25:[function(f,p,m){var g=f("./GenericWorker"),E=f("../crc32");function C(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}f("../utils").inherits(C,g),C.prototype.processChunk=function(v){this.streamInfo.crc32=E(v.data,this.streamInfo.crc32||0),this.push(v)},p.exports=C},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(f,p,m){var g=f("../utils"),E=f("./GenericWorker");function C(v){E.call(this,"DataLengthProbe for "+v),this.propName=v,this.withStreamInfo(v,0)}g.inherits(C,E),C.prototype.processChunk=function(v){if(v){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+v.data.length}E.prototype.processChunk.call(this,v)},p.exports=C},{"../utils":32,"./GenericWorker":28}],27:[function(f,p,m){var g=f("../utils"),E=f("./GenericWorker");function C(v){E.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,v.then(function(N){y.dataIsReady=!0,y.data=N,y.max=N&&N.length||0,y.type=g.getTypeOf(N),y.isPaused||y._tickAndRepeat()},function(N){y.error(N)})}g.inherits(C,E),C.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this.data=null},C.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},C.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},C.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var v=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":v=this.data.substring(this.index,y);break;case"uint8array":v=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":v=this.data.slice(this.index,y)}return this.index=y,this.push({data:v,meta:{percent:this.max?this.index/this.max*100:0}})},p.exports=C},{"../utils":32,"./GenericWorker":28}],28:[function(f,p,m){function g(E){this.name=E||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(E){this.emit("data",E)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(E){this.emit("error",E)}return!0},error:function(E){return!this.isFinished&&(this.isPaused?this.generatedError=E:(this.isFinished=!0,this.emit("error",E),this.previous&&this.previous.error(E),this.cleanUp()),!0)},on:function(E,C){return this._listeners[E].push(C),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(E,C){if(this._listeners[E])for(var v=0;v<this._listeners[E].length;v++)this._listeners[E][v].call(this,C)},pipe:function(E){return E.registerPrevious(this)},registerPrevious:function(E){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=E.streamInfo,this.mergeStreamInfo(),this.previous=E;var C=this;return E.on("data",function(v){C.processChunk(v)}),E.on("end",function(){C.end()}),E.on("error",function(v){C.error(v)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var E=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),E=!0),this.previous&&this.previous.resume(),!E},flush:function(){},processChunk:function(E){this.push(E)},withStreamInfo:function(E,C){return this.extraStreamInfo[E]=C,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var E in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,E)&&(this.streamInfo[E]=this.extraStreamInfo[E])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var E="Worker "+this.name;return this.previous?this.previous+" -> "+E:E}},p.exports=g},{}],29:[function(f,p,m){var g=f("../utils"),E=f("./ConvertWorker"),C=f("./GenericWorker"),v=f("../base64"),y=f("../support"),N=f("../external"),_=null;if(y.nodestream)try{_=f("../nodejs/NodejsStreamOutputAdapter")}catch{}function R(k,I){return new N.Promise(function(z,j){var P=[],H=k._internalType,K=k._outputType,Z=k._mimeType;k.on("data",function(V,L){P.push(V),I&&I(L)}).on("error",function(V){P=[],j(V)}).on("end",function(){try{var V=(function(L,Q,G){switch(L){case"blob":return g.newBlob(g.transformTo("arraybuffer",Q),G);case"base64":return v.encode(Q);default:return g.transformTo(L,Q)}})(K,(function(L,Q){var G,xe=0,ce=null,X=0;for(G=0;G<Q.length;G++)X+=Q[G].length;switch(L){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(ce=new Uint8Array(X),G=0;G<Q.length;G++)ce.set(Q[G],xe),xe+=Q[G].length;return ce;case"nodebuffer":return Buffer.concat(Q);default:throw new Error("concat : unsupported type '"+L+"'")}})(H,P),Z);z(V)}catch(L){j(L)}P=[]}).resume()})}function T(k,I,z){var j=I;switch(I){case"blob":case"arraybuffer":j="uint8array";break;case"base64":j="string"}try{this._internalType=j,this._outputType=I,this._mimeType=z,g.checkSupport(j),this._worker=k.pipe(new E(j)),k.lock()}catch(P){this._worker=new C("error"),this._worker.error(P)}}T.prototype={accumulate:function(k){return R(this,k)},on:function(k,I){var z=this;return k==="data"?this._worker.on(k,function(j){I.call(z,j.data,j.meta)}):this._worker.on(k,function(){g.delay(I,arguments,z)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(k){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},k)}},p.exports=T},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(f,p,m){if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",m.nodebuffer=typeof Buffer<"u",m.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")m.blob=!1;else{var g=new ArrayBuffer(0);try{m.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);E.append(g),m.blob=E.getBlob("application/zip").size===0}catch{m.blob=!1}}}try{m.nodestream=!!f("readable-stream").Readable}catch{m.nodestream=!1}},{"readable-stream":16}],31:[function(f,p,m){for(var g=f("./utils"),E=f("./support"),C=f("./nodejsUtils"),v=f("./stream/GenericWorker"),y=new Array(256),N=0;N<256;N++)y[N]=252<=N?6:248<=N?5:240<=N?4:224<=N?3:192<=N?2:1;y[254]=y[254]=1;function _(){v.call(this,"utf-8 decode"),this.leftOver=null}function R(){v.call(this,"utf-8 encode")}m.utf8encode=function(T){return E.nodebuffer?C.newBufferFrom(T,"utf-8"):(function(k){var I,z,j,P,H,K=k.length,Z=0;for(P=0;P<K;P++)(64512&(z=k.charCodeAt(P)))==55296&&P+1<K&&(64512&(j=k.charCodeAt(P+1)))==56320&&(z=65536+(z-55296<<10)+(j-56320),P++),Z+=z<128?1:z<2048?2:z<65536?3:4;for(I=E.uint8array?new Uint8Array(Z):new Array(Z),P=H=0;H<Z;P++)(64512&(z=k.charCodeAt(P)))==55296&&P+1<K&&(64512&(j=k.charCodeAt(P+1)))==56320&&(z=65536+(z-55296<<10)+(j-56320),P++),z<128?I[H++]=z:(z<2048?I[H++]=192|z>>>6:(z<65536?I[H++]=224|z>>>12:(I[H++]=240|z>>>18,I[H++]=128|z>>>12&63),I[H++]=128|z>>>6&63),I[H++]=128|63&z);return I})(T)},m.utf8decode=function(T){return E.nodebuffer?g.transformTo("nodebuffer",T).toString("utf-8"):(function(k){var I,z,j,P,H=k.length,K=new Array(2*H);for(I=z=0;I<H;)if((j=k[I++])<128)K[z++]=j;else if(4<(P=y[j]))K[z++]=65533,I+=P-1;else{for(j&=P===2?31:P===3?15:7;1<P&&I<H;)j=j<<6|63&k[I++],P--;1<P?K[z++]=65533:j<65536?K[z++]=j:(j-=65536,K[z++]=55296|j>>10&1023,K[z++]=56320|1023&j)}return K.length!==z&&(K.subarray?K=K.subarray(0,z):K.length=z),g.applyFromCharCode(K)})(T=g.transformTo(E.uint8array?"uint8array":"array",T))},g.inherits(_,v),_.prototype.processChunk=function(T){var k=g.transformTo(E.uint8array?"uint8array":"array",T.data);if(this.leftOver&&this.leftOver.length){if(E.uint8array){var I=k;(k=new Uint8Array(I.length+this.leftOver.length)).set(this.leftOver,0),k.set(I,this.leftOver.length)}else k=this.leftOver.concat(k);this.leftOver=null}var z=(function(P,H){var K;for((H=H||P.length)>P.length&&(H=P.length),K=H-1;0<=K&&(192&P[K])==128;)K--;return K<0||K===0?H:K+y[P[K]]>H?K:H})(k),j=k;z!==k.length&&(E.uint8array?(j=k.subarray(0,z),this.leftOver=k.subarray(z,k.length)):(j=k.slice(0,z),this.leftOver=k.slice(z,k.length))),this.push({data:m.utf8decode(j),meta:T.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:m.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},m.Utf8DecodeWorker=_,g.inherits(R,v),R.prototype.processChunk=function(T){this.push({data:m.utf8encode(T.data),meta:T.meta})},m.Utf8EncodeWorker=R},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(f,p,m){var g=f("./support"),E=f("./base64"),C=f("./nodejsUtils"),v=f("./external");function y(I){return I}function N(I,z){for(var j=0;j<I.length;++j)z[j]=255&I.charCodeAt(j);return z}f("setimmediate"),m.newBlob=function(I,z){m.checkSupport("blob");try{return new Blob([I],{type:z})}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return j.append(I),j.getBlob(z)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(I,z,j){var P=[],H=0,K=I.length;if(K<=j)return String.fromCharCode.apply(null,I);for(;H<K;)z==="array"||z==="nodebuffer"?P.push(String.fromCharCode.apply(null,I.slice(H,Math.min(H+j,K)))):P.push(String.fromCharCode.apply(null,I.subarray(H,Math.min(H+j,K)))),H+=j;return P.join("")},stringifyByChar:function(I){for(var z="",j=0;j<I.length;j++)z+=String.fromCharCode(I[j]);return z},applyCanBeUsed:{uint8array:(function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,C.allocBuffer(1)).length===1}catch{return!1}})()}};function R(I){var z=65536,j=m.getTypeOf(I),P=!0;if(j==="uint8array"?P=_.applyCanBeUsed.uint8array:j==="nodebuffer"&&(P=_.applyCanBeUsed.nodebuffer),P)for(;1<z;)try{return _.stringifyByChunk(I,j,z)}catch{z=Math.floor(z/2)}return _.stringifyByChar(I)}function T(I,z){for(var j=0;j<I.length;j++)z[j]=I[j];return z}m.applyFromCharCode=R;var k={};k.string={string:y,array:function(I){return N(I,new Array(I.length))},arraybuffer:function(I){return k.string.uint8array(I).buffer},uint8array:function(I){return N(I,new Uint8Array(I.length))},nodebuffer:function(I){return N(I,C.allocBuffer(I.length))}},k.array={string:R,array:y,arraybuffer:function(I){return new Uint8Array(I).buffer},uint8array:function(I){return new Uint8Array(I)},nodebuffer:function(I){return C.newBufferFrom(I)}},k.arraybuffer={string:function(I){return R(new Uint8Array(I))},array:function(I){return T(new Uint8Array(I),new Array(I.byteLength))},arraybuffer:y,uint8array:function(I){return new Uint8Array(I)},nodebuffer:function(I){return C.newBufferFrom(new Uint8Array(I))}},k.uint8array={string:R,array:function(I){return T(I,new Array(I.length))},arraybuffer:function(I){return I.buffer},uint8array:y,nodebuffer:function(I){return C.newBufferFrom(I)}},k.nodebuffer={string:R,array:function(I){return T(I,new Array(I.length))},arraybuffer:function(I){return k.nodebuffer.uint8array(I).buffer},uint8array:function(I){return T(I,new Uint8Array(I.length))},nodebuffer:y},m.transformTo=function(I,z){if(z=z||"",!I)return z;m.checkSupport(I);var j=m.getTypeOf(z);return k[j][I](z)},m.resolve=function(I){for(var z=I.split("/"),j=[],P=0;P<z.length;P++){var H=z[P];H==="."||H===""&&P!==0&&P!==z.length-1||(H===".."?j.pop():j.push(H))}return j.join("/")},m.getTypeOf=function(I){return typeof I=="string"?"string":Object.prototype.toString.call(I)==="[object Array]"?"array":g.nodebuffer&&C.isBuffer(I)?"nodebuffer":g.uint8array&&I instanceof Uint8Array?"uint8array":g.arraybuffer&&I instanceof ArrayBuffer?"arraybuffer":void 0},m.checkSupport=function(I){if(!g[I.toLowerCase()])throw new Error(I+" is not supported by this platform")},m.MAX_VALUE_16BITS=65535,m.MAX_VALUE_32BITS=-1,m.pretty=function(I){var z,j,P="";for(j=0;j<(I||"").length;j++)P+="\\x"+((z=I.charCodeAt(j))<16?"0":"")+z.toString(16).toUpperCase();return P},m.delay=function(I,z,j){setImmediate(function(){I.apply(j||null,z||[])})},m.inherits=function(I,z){function j(){}j.prototype=z.prototype,I.prototype=new j},m.extend=function(){var I,z,j={};for(I=0;I<arguments.length;I++)for(z in arguments[I])Object.prototype.hasOwnProperty.call(arguments[I],z)&&j[z]===void 0&&(j[z]=arguments[I][z]);return j},m.prepareContent=function(I,z,j,P,H){return v.Promise.resolve(z).then(function(K){return g.blob&&(K instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(K))!==-1)&&typeof FileReader<"u"?new v.Promise(function(Z,V){var L=new FileReader;L.onload=function(Q){Z(Q.target.result)},L.onerror=function(Q){V(Q.target.error)},L.readAsArrayBuffer(K)}):K}).then(function(K){var Z=m.getTypeOf(K);return Z?(Z==="arraybuffer"?K=m.transformTo("uint8array",K):Z==="string"&&(H?K=E.decode(K):j&&P!==!0&&(K=(function(V){return N(V,g.uint8array?new Uint8Array(V.length):new Array(V.length))})(K))),K):v.Promise.reject(new Error("Can't read the data of '"+I+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(f,p,m){var g=f("./reader/readerFor"),E=f("./utils"),C=f("./signature"),v=f("./zipEntry"),y=f("./support");function N(_){this.files=[],this.loadOptions=_}N.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var R=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+E.pretty(R)+", expected "+E.pretty(_)+")")}},isSignature:function(_,R){var T=this.reader.index;this.reader.setIndex(_);var k=this.reader.readString(4)===R;return this.reader.setIndex(T),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),R=y.uint8array?"uint8array":"array",T=E.transformTo(R,_);this.zipComment=this.loadOptions.decodeFileName(T)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,R,T,k=this.zip64EndOfCentralSize-44;0<k;)_=this.reader.readInt(2),R=this.reader.readInt(4),T=this.reader.readData(R),this.zip64ExtensibleData[_]={id:_,length:R,value:T}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,R;for(_=0;_<this.files.length;_++)R=this.files[_],this.reader.setIndex(R.localHeaderOffset),this.checkSignature(C.LOCAL_FILE_HEADER),R.readLocalPart(this.reader),R.handleUTF8(),R.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(C.CENTRAL_FILE_HEADER);)(_=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(C.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,C.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var R=_;if(this.checkSignature(C.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===E.MAX_VALUE_16BITS||this.diskWithCentralDirStart===E.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===E.MAX_VALUE_16BITS||this.centralDirRecords===E.MAX_VALUE_16BITS||this.centralDirSize===E.MAX_VALUE_32BITS||this.centralDirOffset===E.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(C.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(C.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,C.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(C.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(C.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var T=this.centralDirOffset+this.centralDirSize;this.zip64&&(T+=20,T+=12+this.zip64EndOfCentralSize);var k=R-T;if(0<k)this.isSignature(R,C.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(_){this.reader=g(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},p.exports=N},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(f,p,m){var g=f("./reader/readerFor"),E=f("./utils"),C=f("./compressedObject"),v=f("./crc32"),y=f("./utf8"),N=f("./compressions"),_=f("./support");function R(T,k){this.options=T,this.loadOptions=k}R.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(T){var k,I;if(T.skip(22),this.fileNameLength=T.readInt(2),I=T.readInt(2),this.fileName=T.readData(this.fileNameLength),T.skip(I),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((k=(function(z){for(var j in N)if(Object.prototype.hasOwnProperty.call(N,j)&&N[j].magic===z)return N[j];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+E.pretty(this.compressionMethod)+" unknown (inner file : "+E.transformTo("string",this.fileName)+")");this.decompressed=new C(this.compressedSize,this.uncompressedSize,this.crc32,k,T.readData(this.compressedSize))},readCentralPart:function(T){this.versionMadeBy=T.readInt(2),T.skip(2),this.bitFlag=T.readInt(2),this.compressionMethod=T.readString(2),this.date=T.readDate(),this.crc32=T.readInt(4),this.compressedSize=T.readInt(4),this.uncompressedSize=T.readInt(4);var k=T.readInt(2);if(this.extraFieldsLength=T.readInt(2),this.fileCommentLength=T.readInt(2),this.diskNumberStart=T.readInt(2),this.internalFileAttributes=T.readInt(2),this.externalFileAttributes=T.readInt(4),this.localHeaderOffset=T.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");T.skip(k),this.readExtraFields(T),this.parseZIP64ExtraField(T),this.fileComment=T.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var T=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),T==0&&(this.dosPermissions=63&this.externalFileAttributes),T==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var T=g(this.extraFields[1].value);this.uncompressedSize===E.MAX_VALUE_32BITS&&(this.uncompressedSize=T.readInt(8)),this.compressedSize===E.MAX_VALUE_32BITS&&(this.compressedSize=T.readInt(8)),this.localHeaderOffset===E.MAX_VALUE_32BITS&&(this.localHeaderOffset=T.readInt(8)),this.diskNumberStart===E.MAX_VALUE_32BITS&&(this.diskNumberStart=T.readInt(4))}},readExtraFields:function(T){var k,I,z,j=T.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});T.index+4<j;)k=T.readInt(2),I=T.readInt(2),z=T.readData(I),this.extraFields[k]={id:k,length:I,value:z};T.setIndex(j)},handleUTF8:function(){var T=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var k=this.findExtraFieldUnicodePath();if(k!==null)this.fileNameStr=k;else{var I=E.transformTo(T,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(I)}var z=this.findExtraFieldUnicodeComment();if(z!==null)this.fileCommentStr=z;else{var j=E.transformTo(T,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(j)}}},findExtraFieldUnicodePath:function(){var T=this.extraFields[28789];if(T){var k=g(T.value);return k.readInt(1)!==1||v(this.fileName)!==k.readInt(4)?null:y.utf8decode(k.readData(T.length-5))}return null},findExtraFieldUnicodeComment:function(){var T=this.extraFields[25461];if(T){var k=g(T.value);return k.readInt(1)!==1||v(this.fileComment)!==k.readInt(4)?null:y.utf8decode(k.readData(T.length-5))}return null}},p.exports=R},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(f,p,m){function g(k,I,z){this.name=k,this.dir=z.dir,this.date=z.date,this.comment=z.comment,this.unixPermissions=z.unixPermissions,this.dosPermissions=z.dosPermissions,this._data=I,this._dataBinary=z.binary,this.options={compression:z.compression,compressionOptions:z.compressionOptions}}var E=f("./stream/StreamHelper"),C=f("./stream/DataWorker"),v=f("./utf8"),y=f("./compressedObject"),N=f("./stream/GenericWorker");g.prototype={internalStream:function(k){var I=null,z="string";try{if(!k)throw new Error("No output type specified.");var j=(z=k.toLowerCase())==="string"||z==="text";z!=="binarystring"&&z!=="text"||(z="string"),I=this._decompressWorker();var P=!this._dataBinary;P&&!j&&(I=I.pipe(new v.Utf8EncodeWorker)),!P&&j&&(I=I.pipe(new v.Utf8DecodeWorker))}catch(H){(I=new N("error")).error(H)}return new E(I,z,"")},async:function(k,I){return this.internalStream(k).accumulate(I)},nodeStream:function(k,I){return this.internalStream(k||"nodebuffer").toNodejsStream(I)},_compressWorker:function(k,I){if(this._data instanceof y&&this._data.compression.magic===k.magic)return this._data.getCompressedWorker();var z=this._decompressWorker();return this._dataBinary||(z=z.pipe(new v.Utf8EncodeWorker)),y.createWorkerFrom(z,k,I)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof N?this._data:new C(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],R=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},T=0;T<_.length;T++)g.prototype[_[T]]=R;p.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(f,p,m){(function(g){var E,C,v=g.MutationObserver||g.WebKitMutationObserver;if(v){var y=0,N=new v(k),_=g.document.createTextNode("");N.observe(_,{characterData:!0}),E=function(){_.data=y=++y%2}}else if(g.setImmediate||g.MessageChannel===void 0)E="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var I=g.document.createElement("script");I.onreadystatechange=function(){k(),I.onreadystatechange=null,I.parentNode.removeChild(I),I=null},g.document.documentElement.appendChild(I)}:function(){setTimeout(k,0)};else{var R=new g.MessageChannel;R.port1.onmessage=k,E=function(){R.port2.postMessage(0)}}var T=[];function k(){var I,z;C=!0;for(var j=T.length;j;){for(z=T,T=[],I=-1;++I<j;)z[I]();j=T.length}C=!1}p.exports=function(I){T.push(I)!==1||C||E()}}).call(this,typeof li<"u"?li:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(f,p,m){var g=f("immediate");function E(){}var C={},v=["REJECTED"],y=["FULFILLED"],N=["PENDING"];function _(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,j!==E&&I(this,j)}function R(j,P,H){this.promise=j,typeof P=="function"&&(this.onFulfilled=P,this.callFulfilled=this.otherCallFulfilled),typeof H=="function"&&(this.onRejected=H,this.callRejected=this.otherCallRejected)}function T(j,P,H){g(function(){var K;try{K=P(H)}catch(Z){return C.reject(j,Z)}K===j?C.reject(j,new TypeError("Cannot resolve promise with itself")):C.resolve(j,K)})}function k(j){var P=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof P=="function")return function(){P.apply(j,arguments)}}function I(j,P){var H=!1;function K(L){H||(H=!0,C.reject(j,L))}function Z(L){H||(H=!0,C.resolve(j,L))}var V=z(function(){P(Z,K)});V.status==="error"&&K(V.value)}function z(j,P){var H={};try{H.value=j(P),H.status="success"}catch(K){H.status="error",H.value=K}return H}(p.exports=_).prototype.finally=function(j){if(typeof j!="function")return this;var P=this.constructor;return this.then(function(H){return P.resolve(j()).then(function(){return H})},function(H){return P.resolve(j()).then(function(){throw H})})},_.prototype.catch=function(j){return this.then(null,j)},_.prototype.then=function(j,P){if(typeof j!="function"&&this.state===y||typeof P!="function"&&this.state===v)return this;var H=new this.constructor(E);return this.state!==N?T(H,this.state===y?j:P,this.outcome):this.queue.push(new R(H,j,P)),H},R.prototype.callFulfilled=function(j){C.resolve(this.promise,j)},R.prototype.otherCallFulfilled=function(j){T(this.promise,this.onFulfilled,j)},R.prototype.callRejected=function(j){C.reject(this.promise,j)},R.prototype.otherCallRejected=function(j){T(this.promise,this.onRejected,j)},C.resolve=function(j,P){var H=z(k,P);if(H.status==="error")return C.reject(j,H.value);var K=H.value;if(K)I(j,K);else{j.state=y,j.outcome=P;for(var Z=-1,V=j.queue.length;++Z<V;)j.queue[Z].callFulfilled(P)}return j},C.reject=function(j,P){j.state=v,j.outcome=P;for(var H=-1,K=j.queue.length;++H<K;)j.queue[H].callRejected(P);return j},_.resolve=function(j){return j instanceof this?j:C.resolve(new this(E),j)},_.reject=function(j){var P=new this(E);return C.reject(P,j)},_.all=function(j){var P=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var H=j.length,K=!1;if(!H)return this.resolve([]);for(var Z=new Array(H),V=0,L=-1,Q=new this(E);++L<H;)G(j[L],L);return Q;function G(xe,ce){P.resolve(xe).then(function(X){Z[ce]=X,++V!==H||K||(K=!0,C.resolve(Q,Z))},function(X){K||(K=!0,C.reject(Q,X))})}},_.race=function(j){var P=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var H=j.length,K=!1;if(!H)return this.resolve([]);for(var Z=-1,V=new this(E);++Z<H;)L=j[Z],P.resolve(L).then(function(Q){K||(K=!0,C.resolve(V,Q))},function(Q){K||(K=!0,C.reject(V,Q))});var L;return V}},{immediate:36}],38:[function(f,p,m){var g={};(0,f("./lib/utils/common").assign)(g,f("./lib/deflate"),f("./lib/inflate"),f("./lib/zlib/constants")),p.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(f,p,m){var g=f("./zlib/deflate"),E=f("./utils/common"),C=f("./utils/strings"),v=f("./zlib/messages"),y=f("./zlib/zstream"),N=Object.prototype.toString,_=0,R=-1,T=0,k=8;function I(j){if(!(this instanceof I))return new I(j);this.options=E.assign({level:R,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:T,to:""},j||{});var P=this.options;P.raw&&0<P.windowBits?P.windowBits=-P.windowBits:P.gzip&&0<P.windowBits&&P.windowBits<16&&(P.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var H=g.deflateInit2(this.strm,P.level,P.method,P.windowBits,P.memLevel,P.strategy);if(H!==_)throw new Error(v[H]);if(P.header&&g.deflateSetHeader(this.strm,P.header),P.dictionary){var K;if(K=typeof P.dictionary=="string"?C.string2buf(P.dictionary):N.call(P.dictionary)==="[object ArrayBuffer]"?new Uint8Array(P.dictionary):P.dictionary,(H=g.deflateSetDictionary(this.strm,K))!==_)throw new Error(v[H]);this._dict_set=!0}}function z(j,P){var H=new I(P);if(H.push(j,!0),H.err)throw H.msg||v[H.err];return H.result}I.prototype.push=function(j,P){var H,K,Z=this.strm,V=this.options.chunkSize;if(this.ended)return!1;K=P===~~P?P:P===!0?4:0,typeof j=="string"?Z.input=C.string2buf(j):N.call(j)==="[object ArrayBuffer]"?Z.input=new Uint8Array(j):Z.input=j,Z.next_in=0,Z.avail_in=Z.input.length;do{if(Z.avail_out===0&&(Z.output=new E.Buf8(V),Z.next_out=0,Z.avail_out=V),(H=g.deflate(Z,K))!==1&&H!==_)return this.onEnd(H),!(this.ended=!0);Z.avail_out!==0&&(Z.avail_in!==0||K!==4&&K!==2)||(this.options.to==="string"?this.onData(C.buf2binstring(E.shrinkBuf(Z.output,Z.next_out))):this.onData(E.shrinkBuf(Z.output,Z.next_out)))}while((0<Z.avail_in||Z.avail_out===0)&&H!==1);return K===4?(H=g.deflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===_):K!==2||(this.onEnd(_),!(Z.avail_out=0))},I.prototype.onData=function(j){this.chunks.push(j)},I.prototype.onEnd=function(j){j===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},m.Deflate=I,m.deflate=z,m.deflateRaw=function(j,P){return(P=P||{}).raw=!0,z(j,P)},m.gzip=function(j,P){return(P=P||{}).gzip=!0,z(j,P)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(f,p,m){var g=f("./zlib/inflate"),E=f("./utils/common"),C=f("./utils/strings"),v=f("./zlib/constants"),y=f("./zlib/messages"),N=f("./zlib/zstream"),_=f("./zlib/gzheader"),R=Object.prototype.toString;function T(I){if(!(this instanceof T))return new T(I);this.options=E.assign({chunkSize:16384,windowBits:0,to:""},I||{});var z=this.options;z.raw&&0<=z.windowBits&&z.windowBits<16&&(z.windowBits=-z.windowBits,z.windowBits===0&&(z.windowBits=-15)),!(0<=z.windowBits&&z.windowBits<16)||I&&I.windowBits||(z.windowBits+=32),15<z.windowBits&&z.windowBits<48&&(15&z.windowBits)==0&&(z.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new N,this.strm.avail_out=0;var j=g.inflateInit2(this.strm,z.windowBits);if(j!==v.Z_OK)throw new Error(y[j]);this.header=new _,g.inflateGetHeader(this.strm,this.header)}function k(I,z){var j=new T(z);if(j.push(I,!0),j.err)throw j.msg||y[j.err];return j.result}T.prototype.push=function(I,z){var j,P,H,K,Z,V,L=this.strm,Q=this.options.chunkSize,G=this.options.dictionary,xe=!1;if(this.ended)return!1;P=z===~~z?z:z===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof I=="string"?L.input=C.binstring2buf(I):R.call(I)==="[object ArrayBuffer]"?L.input=new Uint8Array(I):L.input=I,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new E.Buf8(Q),L.next_out=0,L.avail_out=Q),(j=g.inflate(L,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&G&&(V=typeof G=="string"?C.string2buf(G):R.call(G)==="[object ArrayBuffer]"?new Uint8Array(G):G,j=g.inflateSetDictionary(this.strm,V)),j===v.Z_BUF_ERROR&&xe===!0&&(j=v.Z_OK,xe=!1),j!==v.Z_STREAM_END&&j!==v.Z_OK)return this.onEnd(j),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&j!==v.Z_STREAM_END&&(L.avail_in!==0||P!==v.Z_FINISH&&P!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(H=C.utf8border(L.output,L.next_out),K=L.next_out-H,Z=C.buf2string(L.output,H),L.next_out=K,L.avail_out=Q-K,K&&E.arraySet(L.output,L.output,H,K,0),this.onData(Z)):this.onData(E.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(xe=!0)}while((0<L.avail_in||L.avail_out===0)&&j!==v.Z_STREAM_END);return j===v.Z_STREAM_END&&(P=v.Z_FINISH),P===v.Z_FINISH?(j=g.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===v.Z_OK):P!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),!(L.avail_out=0))},T.prototype.onData=function(I){this.chunks.push(I)},T.prototype.onEnd=function(I){I===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg},m.Inflate=T,m.inflate=k,m.inflateRaw=function(I,z){return(z=z||{}).raw=!0,k(I,z)},m.ungzip=k},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(f,p,m){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";m.assign=function(v){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var N=y.shift();if(N){if(typeof N!="object")throw new TypeError(N+"must be non-object");for(var _ in N)N.hasOwnProperty(_)&&(v[_]=N[_])}}return v},m.shrinkBuf=function(v,y){return v.length===y?v:v.subarray?v.subarray(0,y):(v.length=y,v)};var E={arraySet:function(v,y,N,_,R){if(y.subarray&&v.subarray)v.set(y.subarray(N,N+_),R);else for(var T=0;T<_;T++)v[R+T]=y[N+T]},flattenChunks:function(v){var y,N,_,R,T,k;for(y=_=0,N=v.length;y<N;y++)_+=v[y].length;for(k=new Uint8Array(_),y=R=0,N=v.length;y<N;y++)T=v[y],k.set(T,R),R+=T.length;return k}},C={arraySet:function(v,y,N,_,R){for(var T=0;T<_;T++)v[R+T]=y[N+T]},flattenChunks:function(v){return[].concat.apply([],v)}};m.setTyped=function(v){v?(m.Buf8=Uint8Array,m.Buf16=Uint16Array,m.Buf32=Int32Array,m.assign(m,E)):(m.Buf8=Array,m.Buf16=Array,m.Buf32=Array,m.assign(m,C))},m.setTyped(g)},{}],42:[function(f,p,m){var g=f("./common"),E=!0,C=!0;try{String.fromCharCode.apply(null,[0])}catch{E=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{C=!1}for(var v=new g.Buf8(256),y=0;y<256;y++)v[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function N(_,R){if(R<65537&&(_.subarray&&C||!_.subarray&&E))return String.fromCharCode.apply(null,g.shrinkBuf(_,R));for(var T="",k=0;k<R;k++)T+=String.fromCharCode(_[k]);return T}v[254]=v[254]=1,m.string2buf=function(_){var R,T,k,I,z,j=_.length,P=0;for(I=0;I<j;I++)(64512&(T=_.charCodeAt(I)))==55296&&I+1<j&&(64512&(k=_.charCodeAt(I+1)))==56320&&(T=65536+(T-55296<<10)+(k-56320),I++),P+=T<128?1:T<2048?2:T<65536?3:4;for(R=new g.Buf8(P),I=z=0;z<P;I++)(64512&(T=_.charCodeAt(I)))==55296&&I+1<j&&(64512&(k=_.charCodeAt(I+1)))==56320&&(T=65536+(T-55296<<10)+(k-56320),I++),T<128?R[z++]=T:(T<2048?R[z++]=192|T>>>6:(T<65536?R[z++]=224|T>>>12:(R[z++]=240|T>>>18,R[z++]=128|T>>>12&63),R[z++]=128|T>>>6&63),R[z++]=128|63&T);return R},m.buf2binstring=function(_){return N(_,_.length)},m.binstring2buf=function(_){for(var R=new g.Buf8(_.length),T=0,k=R.length;T<k;T++)R[T]=_.charCodeAt(T);return R},m.buf2string=function(_,R){var T,k,I,z,j=R||_.length,P=new Array(2*j);for(T=k=0;T<j;)if((I=_[T++])<128)P[k++]=I;else if(4<(z=v[I]))P[k++]=65533,T+=z-1;else{for(I&=z===2?31:z===3?15:7;1<z&&T<j;)I=I<<6|63&_[T++],z--;1<z?P[k++]=65533:I<65536?P[k++]=I:(I-=65536,P[k++]=55296|I>>10&1023,P[k++]=56320|1023&I)}return N(P,k)},m.utf8border=function(_,R){var T;for((R=R||_.length)>_.length&&(R=_.length),T=R-1;0<=T&&(192&_[T])==128;)T--;return T<0||T===0?R:T+v[_[T]]>R?T:R}},{"./common":41}],43:[function(f,p,m){p.exports=function(g,E,C,v){for(var y=65535&g|0,N=g>>>16&65535|0,_=0;C!==0;){for(C-=_=2e3<C?2e3:C;N=N+(y=y+E[v++]|0)|0,--_;);y%=65521,N%=65521}return y|N<<16|0}},{}],44:[function(f,p,m){p.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(f,p,m){var g=(function(){for(var E,C=[],v=0;v<256;v++){E=v;for(var y=0;y<8;y++)E=1&E?3988292384^E>>>1:E>>>1;C[v]=E}return C})();p.exports=function(E,C,v,y){var N=g,_=y+v;E^=-1;for(var R=y;R<_;R++)E=E>>>8^N[255&(E^C[R])];return-1^E}},{}],46:[function(f,p,m){var g,E=f("../utils/common"),C=f("./trees"),v=f("./adler32"),y=f("./crc32"),N=f("./messages"),_=0,R=4,T=0,k=-2,I=-1,z=4,j=2,P=8,H=9,K=286,Z=30,V=19,L=2*K+1,Q=15,G=3,xe=258,ce=xe+G+1,X=42,ie=113,M=1,ae=2,me=3,re=4;function Ye(D,Ne){return D.msg=N[Ne],Ne}function ke(D){return(D<<1)-(4<D?9:0)}function Je(D){for(var Ne=D.length;0<=--Ne;)D[Ne]=0}function q(D){var Ne=D.state,_e=Ne.pending;_e>D.avail_out&&(_e=D.avail_out),_e!==0&&(E.arraySet(D.output,Ne.pending_buf,Ne.pending_out,_e,D.next_out),D.next_out+=_e,Ne.pending_out+=_e,D.total_out+=_e,D.avail_out-=_e,Ne.pending-=_e,Ne.pending===0&&(Ne.pending_out=0))}function ne(D,Ne){C._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,Ne),D.block_start=D.strstart,q(D.strm)}function Oe(D,Ne){D.pending_buf[D.pending++]=Ne}function Te(D,Ne){D.pending_buf[D.pending++]=Ne>>>8&255,D.pending_buf[D.pending++]=255&Ne}function je(D,Ne){var _e,le,te=D.max_chain_length,he=D.strstart,Pe=D.prev_length,Ee=D.nice_match,Se=D.strstart>D.w_size-ce?D.strstart-(D.w_size-ce):0,et=D.window,tt=D.w_mask,it=D.prev,ot=D.strstart+xe,It=et[he+Pe-1],pt=et[he+Pe];D.prev_length>=D.good_match&&(te>>=2),Ee>D.lookahead&&(Ee=D.lookahead);do if(et[(_e=Ne)+Pe]===pt&&et[_e+Pe-1]===It&&et[_e]===et[he]&&et[++_e]===et[he+1]){he+=2,_e++;do;while(et[++he]===et[++_e]&&et[++he]===et[++_e]&&et[++he]===et[++_e]&&et[++he]===et[++_e]&&et[++he]===et[++_e]&&et[++he]===et[++_e]&&et[++he]===et[++_e]&&et[++he]===et[++_e]&&he<ot);if(le=xe-(ot-he),he=ot-xe,Pe<le){if(D.match_start=Ne,Ee<=(Pe=le))break;It=et[he+Pe-1],pt=et[he+Pe]}}while((Ne=it[Ne&tt])>Se&&--te!=0);return Pe<=D.lookahead?Pe:D.lookahead}function ze(D){var Ne,_e,le,te,he,Pe,Ee,Se,et,tt,it=D.w_size;do{if(te=D.window_size-D.lookahead-D.strstart,D.strstart>=it+(it-ce)){for(E.arraySet(D.window,D.window,it,it,0),D.match_start-=it,D.strstart-=it,D.block_start-=it,Ne=_e=D.hash_size;le=D.head[--Ne],D.head[Ne]=it<=le?le-it:0,--_e;);for(Ne=_e=it;le=D.prev[--Ne],D.prev[Ne]=it<=le?le-it:0,--_e;);te+=it}if(D.strm.avail_in===0)break;if(Pe=D.strm,Ee=D.window,Se=D.strstart+D.lookahead,et=te,tt=void 0,tt=Pe.avail_in,et<tt&&(tt=et),_e=tt===0?0:(Pe.avail_in-=tt,E.arraySet(Ee,Pe.input,Pe.next_in,tt,Se),Pe.state.wrap===1?Pe.adler=v(Pe.adler,Ee,tt,Se):Pe.state.wrap===2&&(Pe.adler=y(Pe.adler,Ee,tt,Se)),Pe.next_in+=tt,Pe.total_in+=tt,tt),D.lookahead+=_e,D.lookahead+D.insert>=G)for(he=D.strstart-D.insert,D.ins_h=D.window[he],D.ins_h=(D.ins_h<<D.hash_shift^D.window[he+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[he+G-1])&D.hash_mask,D.prev[he&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=he,he++,D.insert--,!(D.lookahead+D.insert<G)););}while(D.lookahead<ce&&D.strm.avail_in!==0)}function ct(D,Ne){for(var _e,le;;){if(D.lookahead<ce){if(ze(D),D.lookahead<ce&&Ne===_)return M;if(D.lookahead===0)break}if(_e=0,D.lookahead>=G&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+G-1])&D.hash_mask,_e=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),_e!==0&&D.strstart-_e<=D.w_size-ce&&(D.match_length=je(D,_e)),D.match_length>=G)if(le=C._tr_tally(D,D.strstart-D.match_start,D.match_length-G),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=G){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+G-1])&D.hash_mask,_e=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else le=C._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(le&&(ne(D,!1),D.strm.avail_out===0))return M}return D.insert=D.strstart<G-1?D.strstart:G-1,Ne===R?(ne(D,!0),D.strm.avail_out===0?me:re):D.last_lit&&(ne(D,!1),D.strm.avail_out===0)?M:ae}function nt(D,Ne){for(var _e,le,te;;){if(D.lookahead<ce){if(ze(D),D.lookahead<ce&&Ne===_)return M;if(D.lookahead===0)break}if(_e=0,D.lookahead>=G&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+G-1])&D.hash_mask,_e=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=G-1,_e!==0&&D.prev_length<D.max_lazy_match&&D.strstart-_e<=D.w_size-ce&&(D.match_length=je(D,_e),D.match_length<=5&&(D.strategy===1||D.match_length===G&&4096<D.strstart-D.match_start)&&(D.match_length=G-1)),D.prev_length>=G&&D.match_length<=D.prev_length){for(te=D.strstart+D.lookahead-G,le=C._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-G),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=te&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+G-1])&D.hash_mask,_e=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=G-1,D.strstart++,le&&(ne(D,!1),D.strm.avail_out===0))return M}else if(D.match_available){if((le=C._tr_tally(D,0,D.window[D.strstart-1]))&&ne(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return M}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(le=C._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<G-1?D.strstart:G-1,Ne===R?(ne(D,!0),D.strm.avail_out===0?me:re):D.last_lit&&(ne(D,!1),D.strm.avail_out===0)?M:ae}function st(D,Ne,_e,le,te){this.good_length=D,this.max_lazy=Ne,this.nice_length=_e,this.max_chain=le,this.func=te}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=P,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*L),this.dyn_dtree=new E.Buf16(2*(2*Z+1)),this.bl_tree=new E.Buf16(2*(2*V+1)),Je(this.dyn_ltree),Je(this.dyn_dtree),Je(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(Q+1),this.heap=new E.Buf16(2*K+1),Je(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*K+1),Je(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ct(D){var Ne;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=j,(Ne=D.state).pending=0,Ne.pending_out=0,Ne.wrap<0&&(Ne.wrap=-Ne.wrap),Ne.status=Ne.wrap?X:ie,D.adler=Ne.wrap===2?0:1,Ne.last_flush=_,C._tr_init(Ne),T):Ye(D,k)}function Qt(D){var Ne=Ct(D);return Ne===T&&(function(_e){_e.window_size=2*_e.w_size,Je(_e.head),_e.max_lazy_match=g[_e.level].max_lazy,_e.good_match=g[_e.level].good_length,_e.nice_match=g[_e.level].nice_length,_e.max_chain_length=g[_e.level].max_chain,_e.strstart=0,_e.block_start=0,_e.lookahead=0,_e.insert=0,_e.match_length=_e.prev_length=G-1,_e.match_available=0,_e.ins_h=0})(D.state),Ne}function xt(D,Ne,_e,le,te,he){if(!D)return k;var Pe=1;if(Ne===I&&(Ne=6),le<0?(Pe=0,le=-le):15<le&&(Pe=2,le-=16),te<1||H<te||_e!==P||le<8||15<le||Ne<0||9<Ne||he<0||z<he)return Ye(D,k);le===8&&(le=9);var Ee=new ut;return(D.state=Ee).strm=D,Ee.wrap=Pe,Ee.gzhead=null,Ee.w_bits=le,Ee.w_size=1<<Ee.w_bits,Ee.w_mask=Ee.w_size-1,Ee.hash_bits=te+7,Ee.hash_size=1<<Ee.hash_bits,Ee.hash_mask=Ee.hash_size-1,Ee.hash_shift=~~((Ee.hash_bits+G-1)/G),Ee.window=new E.Buf8(2*Ee.w_size),Ee.head=new E.Buf16(Ee.hash_size),Ee.prev=new E.Buf16(Ee.w_size),Ee.lit_bufsize=1<<te+6,Ee.pending_buf_size=4*Ee.lit_bufsize,Ee.pending_buf=new E.Buf8(Ee.pending_buf_size),Ee.d_buf=1*Ee.lit_bufsize,Ee.l_buf=3*Ee.lit_bufsize,Ee.level=Ne,Ee.strategy=he,Ee.method=_e,Qt(D)}g=[new st(0,0,0,0,function(D,Ne){var _e=65535;for(_e>D.pending_buf_size-5&&(_e=D.pending_buf_size-5);;){if(D.lookahead<=1){if(ze(D),D.lookahead===0&&Ne===_)return M;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var le=D.block_start+_e;if((D.strstart===0||D.strstart>=le)&&(D.lookahead=D.strstart-le,D.strstart=le,ne(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-ce&&(ne(D,!1),D.strm.avail_out===0))return M}return D.insert=0,Ne===R?(ne(D,!0),D.strm.avail_out===0?me:re):(D.strstart>D.block_start&&(ne(D,!1),D.strm.avail_out),M)}),new st(4,4,8,4,ct),new st(4,5,16,8,ct),new st(4,6,32,32,ct),new st(4,4,16,16,nt),new st(8,16,32,32,nt),new st(8,16,128,128,nt),new st(8,32,128,256,nt),new st(32,128,258,1024,nt),new st(32,258,258,4096,nt)],m.deflateInit=function(D,Ne){return xt(D,Ne,P,15,8,0)},m.deflateInit2=xt,m.deflateReset=Qt,m.deflateResetKeep=Ct,m.deflateSetHeader=function(D,Ne){return D&&D.state?D.state.wrap!==2?k:(D.state.gzhead=Ne,T):k},m.deflate=function(D,Ne){var _e,le,te,he;if(!D||!D.state||5<Ne||Ne<0)return D?Ye(D,k):k;if(le=D.state,!D.output||!D.input&&D.avail_in!==0||le.status===666&&Ne!==R)return Ye(D,D.avail_out===0?-5:k);if(le.strm=D,_e=le.last_flush,le.last_flush=Ne,le.status===X)if(le.wrap===2)D.adler=0,Oe(le,31),Oe(le,139),Oe(le,8),le.gzhead?(Oe(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),Oe(le,255&le.gzhead.time),Oe(le,le.gzhead.time>>8&255),Oe(le,le.gzhead.time>>16&255),Oe(le,le.gzhead.time>>24&255),Oe(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),Oe(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(Oe(le,255&le.gzhead.extra.length),Oe(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(D.adler=y(D.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(Oe(le,0),Oe(le,0),Oe(le,0),Oe(le,0),Oe(le,0),Oe(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),Oe(le,3),le.status=ie);else{var Pe=P+(le.w_bits-8<<4)<<8;Pe|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(Pe|=32),Pe+=31-Pe%31,le.status=ie,Te(le,Pe),le.strstart!==0&&(Te(le,D.adler>>>16),Te(le,65535&D.adler)),D.adler=1}if(le.status===69)if(le.gzhead.extra){for(te=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>te&&(D.adler=y(D.adler,le.pending_buf,le.pending-te,te)),q(D),te=le.pending,le.pending!==le.pending_buf_size));)Oe(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>te&&(D.adler=y(D.adler,le.pending_buf,le.pending-te,te)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){te=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>te&&(D.adler=y(D.adler,le.pending_buf,le.pending-te,te)),q(D),te=le.pending,le.pending===le.pending_buf_size)){he=1;break}he=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,Oe(le,he)}while(he!==0);le.gzhead.hcrc&&le.pending>te&&(D.adler=y(D.adler,le.pending_buf,le.pending-te,te)),he===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){te=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>te&&(D.adler=y(D.adler,le.pending_buf,le.pending-te,te)),q(D),te=le.pending,le.pending===le.pending_buf_size)){he=1;break}he=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,Oe(le,he)}while(he!==0);le.gzhead.hcrc&&le.pending>te&&(D.adler=y(D.adler,le.pending_buf,le.pending-te,te)),he===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&q(D),le.pending+2<=le.pending_buf_size&&(Oe(le,255&D.adler),Oe(le,D.adler>>8&255),D.adler=0,le.status=ie)):le.status=ie),le.pending!==0){if(q(D),D.avail_out===0)return le.last_flush=-1,T}else if(D.avail_in===0&&ke(Ne)<=ke(_e)&&Ne!==R)return Ye(D,-5);if(le.status===666&&D.avail_in!==0)return Ye(D,-5);if(D.avail_in!==0||le.lookahead!==0||Ne!==_&&le.status!==666){var Ee=le.strategy===2?(function(Se,et){for(var tt;;){if(Se.lookahead===0&&(ze(Se),Se.lookahead===0)){if(et===_)return M;break}if(Se.match_length=0,tt=C._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++,tt&&(ne(Se,!1),Se.strm.avail_out===0))return M}return Se.insert=0,et===R?(ne(Se,!0),Se.strm.avail_out===0?me:re):Se.last_lit&&(ne(Se,!1),Se.strm.avail_out===0)?M:ae})(le,Ne):le.strategy===3?(function(Se,et){for(var tt,it,ot,It,pt=Se.window;;){if(Se.lookahead<=xe){if(ze(Se),Se.lookahead<=xe&&et===_)return M;if(Se.lookahead===0)break}if(Se.match_length=0,Se.lookahead>=G&&0<Se.strstart&&(it=pt[ot=Se.strstart-1])===pt[++ot]&&it===pt[++ot]&&it===pt[++ot]){It=Se.strstart+xe;do;while(it===pt[++ot]&&it===pt[++ot]&&it===pt[++ot]&&it===pt[++ot]&&it===pt[++ot]&&it===pt[++ot]&&it===pt[++ot]&&it===pt[++ot]&&ot<It);Se.match_length=xe-(It-ot),Se.match_length>Se.lookahead&&(Se.match_length=Se.lookahead)}if(Se.match_length>=G?(tt=C._tr_tally(Se,1,Se.match_length-G),Se.lookahead-=Se.match_length,Se.strstart+=Se.match_length,Se.match_length=0):(tt=C._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++),tt&&(ne(Se,!1),Se.strm.avail_out===0))return M}return Se.insert=0,et===R?(ne(Se,!0),Se.strm.avail_out===0?me:re):Se.last_lit&&(ne(Se,!1),Se.strm.avail_out===0)?M:ae})(le,Ne):g[le.level].func(le,Ne);if(Ee!==me&&Ee!==re||(le.status=666),Ee===M||Ee===me)return D.avail_out===0&&(le.last_flush=-1),T;if(Ee===ae&&(Ne===1?C._tr_align(le):Ne!==5&&(C._tr_stored_block(le,0,0,!1),Ne===3&&(Je(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),q(D),D.avail_out===0))return le.last_flush=-1,T}return Ne!==R?T:le.wrap<=0?1:(le.wrap===2?(Oe(le,255&D.adler),Oe(le,D.adler>>8&255),Oe(le,D.adler>>16&255),Oe(le,D.adler>>24&255),Oe(le,255&D.total_in),Oe(le,D.total_in>>8&255),Oe(le,D.total_in>>16&255),Oe(le,D.total_in>>24&255)):(Te(le,D.adler>>>16),Te(le,65535&D.adler)),q(D),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?T:1)},m.deflateEnd=function(D){var Ne;return D&&D.state?(Ne=D.state.status)!==X&&Ne!==69&&Ne!==73&&Ne!==91&&Ne!==103&&Ne!==ie&&Ne!==666?Ye(D,k):(D.state=null,Ne===ie?Ye(D,-3):T):k},m.deflateSetDictionary=function(D,Ne){var _e,le,te,he,Pe,Ee,Se,et,tt=Ne.length;if(!D||!D.state||(he=(_e=D.state).wrap)===2||he===1&&_e.status!==X||_e.lookahead)return k;for(he===1&&(D.adler=v(D.adler,Ne,tt,0)),_e.wrap=0,tt>=_e.w_size&&(he===0&&(Je(_e.head),_e.strstart=0,_e.block_start=0,_e.insert=0),et=new E.Buf8(_e.w_size),E.arraySet(et,Ne,tt-_e.w_size,_e.w_size,0),Ne=et,tt=_e.w_size),Pe=D.avail_in,Ee=D.next_in,Se=D.input,D.avail_in=tt,D.next_in=0,D.input=Ne,ze(_e);_e.lookahead>=G;){for(le=_e.strstart,te=_e.lookahead-(G-1);_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[le+G-1])&_e.hash_mask,_e.prev[le&_e.w_mask]=_e.head[_e.ins_h],_e.head[_e.ins_h]=le,le++,--te;);_e.strstart=le,_e.lookahead=G-1,ze(_e)}return _e.strstart+=_e.lookahead,_e.block_start=_e.strstart,_e.insert=_e.lookahead,_e.lookahead=0,_e.match_length=_e.prev_length=G-1,_e.match_available=0,D.next_in=Ee,D.input=Se,D.avail_in=Pe,_e.wrap=he,T},m.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(f,p,m){p.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(f,p,m){p.exports=function(g,E){var C,v,y,N,_,R,T,k,I,z,j,P,H,K,Z,V,L,Q,G,xe,ce,X,ie,M,ae;C=g.state,v=g.next_in,M=g.input,y=v+(g.avail_in-5),N=g.next_out,ae=g.output,_=N-(E-g.avail_out),R=N+(g.avail_out-257),T=C.dmax,k=C.wsize,I=C.whave,z=C.wnext,j=C.window,P=C.hold,H=C.bits,K=C.lencode,Z=C.distcode,V=(1<<C.lenbits)-1,L=(1<<C.distbits)-1;e:do{H<15&&(P+=M[v++]<<H,H+=8,P+=M[v++]<<H,H+=8),Q=K[P&V];t:for(;;){if(P>>>=G=Q>>>24,H-=G,(G=Q>>>16&255)===0)ae[N++]=65535&Q;else{if(!(16&G)){if((64&G)==0){Q=K[(65535&Q)+(P&(1<<G)-1)];continue t}if(32&G){C.mode=12;break e}g.msg="invalid literal/length code",C.mode=30;break e}xe=65535&Q,(G&=15)&&(H<G&&(P+=M[v++]<<H,H+=8),xe+=P&(1<<G)-1,P>>>=G,H-=G),H<15&&(P+=M[v++]<<H,H+=8,P+=M[v++]<<H,H+=8),Q=Z[P&L];n:for(;;){if(P>>>=G=Q>>>24,H-=G,!(16&(G=Q>>>16&255))){if((64&G)==0){Q=Z[(65535&Q)+(P&(1<<G)-1)];continue n}g.msg="invalid distance code",C.mode=30;break e}if(ce=65535&Q,H<(G&=15)&&(P+=M[v++]<<H,(H+=8)<G&&(P+=M[v++]<<H,H+=8)),T<(ce+=P&(1<<G)-1)){g.msg="invalid distance too far back",C.mode=30;break e}if(P>>>=G,H-=G,(G=N-_)<ce){if(I<(G=ce-G)&&C.sane){g.msg="invalid distance too far back",C.mode=30;break e}if(ie=j,(X=0)===z){if(X+=k-G,G<xe){for(xe-=G;ae[N++]=j[X++],--G;);X=N-ce,ie=ae}}else if(z<G){if(X+=k+z-G,(G-=z)<xe){for(xe-=G;ae[N++]=j[X++],--G;);if(X=0,z<xe){for(xe-=G=z;ae[N++]=j[X++],--G;);X=N-ce,ie=ae}}}else if(X+=z-G,G<xe){for(xe-=G;ae[N++]=j[X++],--G;);X=N-ce,ie=ae}for(;2<xe;)ae[N++]=ie[X++],ae[N++]=ie[X++],ae[N++]=ie[X++],xe-=3;xe&&(ae[N++]=ie[X++],1<xe&&(ae[N++]=ie[X++]))}else{for(X=N-ce;ae[N++]=ae[X++],ae[N++]=ae[X++],ae[N++]=ae[X++],2<(xe-=3););xe&&(ae[N++]=ae[X++],1<xe&&(ae[N++]=ae[X++]))}break}}break}}while(v<y&&N<R);v-=xe=H>>3,P&=(1<<(H-=xe<<3))-1,g.next_in=v,g.next_out=N,g.avail_in=v<y?y-v+5:5-(v-y),g.avail_out=N<R?R-N+257:257-(N-R),C.hold=P,C.bits=H}},{}],49:[function(f,p,m){var g=f("../utils/common"),E=f("./adler32"),C=f("./crc32"),v=f("./inffast"),y=f("./inftrees"),N=1,_=2,R=0,T=-2,k=1,I=852,z=592;function j(X){return(X>>>24&255)+(X>>>8&65280)+((65280&X)<<8)+((255&X)<<24)}function P(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function H(X){var ie;return X&&X.state?(ie=X.state,X.total_in=X.total_out=ie.total=0,X.msg="",ie.wrap&&(X.adler=1&ie.wrap),ie.mode=k,ie.last=0,ie.havedict=0,ie.dmax=32768,ie.head=null,ie.hold=0,ie.bits=0,ie.lencode=ie.lendyn=new g.Buf32(I),ie.distcode=ie.distdyn=new g.Buf32(z),ie.sane=1,ie.back=-1,R):T}function K(X){var ie;return X&&X.state?((ie=X.state).wsize=0,ie.whave=0,ie.wnext=0,H(X)):T}function Z(X,ie){var M,ae;return X&&X.state?(ae=X.state,ie<0?(M=0,ie=-ie):(M=1+(ie>>4),ie<48&&(ie&=15)),ie&&(ie<8||15<ie)?T:(ae.window!==null&&ae.wbits!==ie&&(ae.window=null),ae.wrap=M,ae.wbits=ie,K(X))):T}function V(X,ie){var M,ae;return X?(ae=new P,(X.state=ae).window=null,(M=Z(X,ie))!==R&&(X.state=null),M):T}var L,Q,G=!0;function xe(X){if(G){var ie;for(L=new g.Buf32(512),Q=new g.Buf32(32),ie=0;ie<144;)X.lens[ie++]=8;for(;ie<256;)X.lens[ie++]=9;for(;ie<280;)X.lens[ie++]=7;for(;ie<288;)X.lens[ie++]=8;for(y(N,X.lens,0,288,L,0,X.work,{bits:9}),ie=0;ie<32;)X.lens[ie++]=5;y(_,X.lens,0,32,Q,0,X.work,{bits:5}),G=!1}X.lencode=L,X.lenbits=9,X.distcode=Q,X.distbits=5}function ce(X,ie,M,ae){var me,re=X.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new g.Buf8(re.wsize)),ae>=re.wsize?(g.arraySet(re.window,ie,M-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(ae<(me=re.wsize-re.wnext)&&(me=ae),g.arraySet(re.window,ie,M-ae,me,re.wnext),(ae-=me)?(g.arraySet(re.window,ie,M-ae,ae,0),re.wnext=ae,re.whave=re.wsize):(re.wnext+=me,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=me))),0}m.inflateReset=K,m.inflateReset2=Z,m.inflateResetKeep=H,m.inflateInit=function(X){return V(X,15)},m.inflateInit2=V,m.inflate=function(X,ie){var M,ae,me,re,Ye,ke,Je,q,ne,Oe,Te,je,ze,ct,nt,st,ut,Ct,Qt,xt,D,Ne,_e,le,te=0,he=new g.Buf8(4),Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!X||!X.state||!X.output||!X.input&&X.avail_in!==0)return T;(M=X.state).mode===12&&(M.mode=13),Ye=X.next_out,me=X.output,Je=X.avail_out,re=X.next_in,ae=X.input,ke=X.avail_in,q=M.hold,ne=M.bits,Oe=ke,Te=Je,Ne=R;e:for(;;)switch(M.mode){case k:if(M.wrap===0){M.mode=13;break}for(;ne<16;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(2&M.wrap&&q===35615){he[M.check=0]=255&q,he[1]=q>>>8&255,M.check=C(M.check,he,2,0),ne=q=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&q)<<8)+(q>>8))%31){X.msg="incorrect header check",M.mode=30;break}if((15&q)!=8){X.msg="unknown compression method",M.mode=30;break}if(ne-=4,D=8+(15&(q>>>=4)),M.wbits===0)M.wbits=D;else if(D>M.wbits){X.msg="invalid window size",M.mode=30;break}M.dmax=1<<D,X.adler=M.check=1,M.mode=512&q?10:12,ne=q=0;break;case 2:for(;ne<16;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(M.flags=q,(255&M.flags)!=8){X.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){X.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=q>>8&1),512&M.flags&&(he[0]=255&q,he[1]=q>>>8&255,M.check=C(M.check,he,2,0)),ne=q=0,M.mode=3;case 3:for(;ne<32;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}M.head&&(M.head.time=q),512&M.flags&&(he[0]=255&q,he[1]=q>>>8&255,he[2]=q>>>16&255,he[3]=q>>>24&255,M.check=C(M.check,he,4,0)),ne=q=0,M.mode=4;case 4:for(;ne<16;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}M.head&&(M.head.xflags=255&q,M.head.os=q>>8),512&M.flags&&(he[0]=255&q,he[1]=q>>>8&255,M.check=C(M.check,he,2,0)),ne=q=0,M.mode=5;case 5:if(1024&M.flags){for(;ne<16;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}M.length=q,M.head&&(M.head.extra_len=q),512&M.flags&&(he[0]=255&q,he[1]=q>>>8&255,M.check=C(M.check,he,2,0)),ne=q=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(ke<(je=M.length)&&(je=ke),je&&(M.head&&(D=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),g.arraySet(M.head.extra,ae,re,je,D)),512&M.flags&&(M.check=C(M.check,ae,je,re)),ke-=je,re+=je,M.length-=je),M.length))break e;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(ke===0)break e;for(je=0;D=ae[re+je++],M.head&&D&&M.length<65536&&(M.head.name+=String.fromCharCode(D)),D&&je<ke;);if(512&M.flags&&(M.check=C(M.check,ae,je,re)),ke-=je,re+=je,D)break e}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(ke===0)break e;for(je=0;D=ae[re+je++],M.head&&D&&M.length<65536&&(M.head.comment+=String.fromCharCode(D)),D&&je<ke;);if(512&M.flags&&(M.check=C(M.check,ae,je,re)),ke-=je,re+=je,D)break e}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;ne<16;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(q!==(65535&M.check)){X.msg="header crc mismatch",M.mode=30;break}ne=q=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),X.adler=M.check=0,M.mode=12;break;case 10:for(;ne<32;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}X.adler=M.check=j(q),ne=q=0,M.mode=11;case 11:if(M.havedict===0)return X.next_out=Ye,X.avail_out=Je,X.next_in=re,X.avail_in=ke,M.hold=q,M.bits=ne,2;X.adler=M.check=1,M.mode=12;case 12:if(ie===5||ie===6)break e;case 13:if(M.last){q>>>=7&ne,ne-=7&ne,M.mode=27;break}for(;ne<3;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}switch(M.last=1&q,ne-=1,3&(q>>>=1)){case 0:M.mode=14;break;case 1:if(xe(M),M.mode=20,ie!==6)break;q>>>=2,ne-=2;break e;case 2:M.mode=17;break;case 3:X.msg="invalid block type",M.mode=30}q>>>=2,ne-=2;break;case 14:for(q>>>=7&ne,ne-=7&ne;ne<32;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if((65535&q)!=(q>>>16^65535)){X.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&q,ne=q=0,M.mode=15,ie===6)break e;case 15:M.mode=16;case 16:if(je=M.length){if(ke<je&&(je=ke),Je<je&&(je=Je),je===0)break e;g.arraySet(me,ae,re,je,Ye),ke-=je,re+=je,Je-=je,Ye+=je,M.length-=je;break}M.mode=12;break;case 17:for(;ne<14;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(M.nlen=257+(31&q),q>>>=5,ne-=5,M.ndist=1+(31&q),q>>>=5,ne-=5,M.ncode=4+(15&q),q>>>=4,ne-=4,286<M.nlen||30<M.ndist){X.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;ne<3;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}M.lens[Pe[M.have++]]=7&q,q>>>=3,ne-=3}for(;M.have<19;)M.lens[Pe[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,_e={bits:M.lenbits},Ne=y(0,M.lens,0,19,M.lencode,0,M.work,_e),M.lenbits=_e.bits,Ne){X.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;st=(te=M.lencode[q&(1<<M.lenbits)-1])>>>16&255,ut=65535&te,!((nt=te>>>24)<=ne);){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(ut<16)q>>>=nt,ne-=nt,M.lens[M.have++]=ut;else{if(ut===16){for(le=nt+2;ne<le;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(q>>>=nt,ne-=nt,M.have===0){X.msg="invalid bit length repeat",M.mode=30;break}D=M.lens[M.have-1],je=3+(3&q),q>>>=2,ne-=2}else if(ut===17){for(le=nt+3;ne<le;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}ne-=nt,D=0,je=3+(7&(q>>>=nt)),q>>>=3,ne-=3}else{for(le=nt+7;ne<le;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}ne-=nt,D=0,je=11+(127&(q>>>=nt)),q>>>=7,ne-=7}if(M.have+je>M.nlen+M.ndist){X.msg="invalid bit length repeat",M.mode=30;break}for(;je--;)M.lens[M.have++]=D}}if(M.mode===30)break;if(M.lens[256]===0){X.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,_e={bits:M.lenbits},Ne=y(N,M.lens,0,M.nlen,M.lencode,0,M.work,_e),M.lenbits=_e.bits,Ne){X.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,_e={bits:M.distbits},Ne=y(_,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,_e),M.distbits=_e.bits,Ne){X.msg="invalid distances set",M.mode=30;break}if(M.mode=20,ie===6)break e;case 20:M.mode=21;case 21:if(6<=ke&&258<=Je){X.next_out=Ye,X.avail_out=Je,X.next_in=re,X.avail_in=ke,M.hold=q,M.bits=ne,v(X,Te),Ye=X.next_out,me=X.output,Je=X.avail_out,re=X.next_in,ae=X.input,ke=X.avail_in,q=M.hold,ne=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;st=(te=M.lencode[q&(1<<M.lenbits)-1])>>>16&255,ut=65535&te,!((nt=te>>>24)<=ne);){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(st&&(240&st)==0){for(Ct=nt,Qt=st,xt=ut;st=(te=M.lencode[xt+((q&(1<<Ct+Qt)-1)>>Ct)])>>>16&255,ut=65535&te,!(Ct+(nt=te>>>24)<=ne);){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}q>>>=Ct,ne-=Ct,M.back+=Ct}if(q>>>=nt,ne-=nt,M.back+=nt,M.length=ut,st===0){M.mode=26;break}if(32&st){M.back=-1,M.mode=12;break}if(64&st){X.msg="invalid literal/length code",M.mode=30;break}M.extra=15&st,M.mode=22;case 22:if(M.extra){for(le=M.extra;ne<le;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}M.length+=q&(1<<M.extra)-1,q>>>=M.extra,ne-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;st=(te=M.distcode[q&(1<<M.distbits)-1])>>>16&255,ut=65535&te,!((nt=te>>>24)<=ne);){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if((240&st)==0){for(Ct=nt,Qt=st,xt=ut;st=(te=M.distcode[xt+((q&(1<<Ct+Qt)-1)>>Ct)])>>>16&255,ut=65535&te,!(Ct+(nt=te>>>24)<=ne);){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}q>>>=Ct,ne-=Ct,M.back+=Ct}if(q>>>=nt,ne-=nt,M.back+=nt,64&st){X.msg="invalid distance code",M.mode=30;break}M.offset=ut,M.extra=15&st,M.mode=24;case 24:if(M.extra){for(le=M.extra;ne<le;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}M.offset+=q&(1<<M.extra)-1,q>>>=M.extra,ne-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){X.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(Je===0)break e;if(je=Te-Je,M.offset>je){if((je=M.offset-je)>M.whave&&M.sane){X.msg="invalid distance too far back",M.mode=30;break}ze=je>M.wnext?(je-=M.wnext,M.wsize-je):M.wnext-je,je>M.length&&(je=M.length),ct=M.window}else ct=me,ze=Ye-M.offset,je=M.length;for(Je<je&&(je=Je),Je-=je,M.length-=je;me[Ye++]=ct[ze++],--je;);M.length===0&&(M.mode=21);break;case 26:if(Je===0)break e;me[Ye++]=M.length,Je--,M.mode=21;break;case 27:if(M.wrap){for(;ne<32;){if(ke===0)break e;ke--,q|=ae[re++]<<ne,ne+=8}if(Te-=Je,X.total_out+=Te,M.total+=Te,Te&&(X.adler=M.check=M.flags?C(M.check,me,Te,Ye-Te):E(M.check,me,Te,Ye-Te)),Te=Je,(M.flags?q:j(q))!==M.check){X.msg="incorrect data check",M.mode=30;break}ne=q=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;ne<32;){if(ke===0)break e;ke--,q+=ae[re++]<<ne,ne+=8}if(q!==(4294967295&M.total)){X.msg="incorrect length check",M.mode=30;break}ne=q=0}M.mode=29;case 29:Ne=1;break e;case 30:Ne=-3;break e;case 31:return-4;default:return T}return X.next_out=Ye,X.avail_out=Je,X.next_in=re,X.avail_in=ke,M.hold=q,M.bits=ne,(M.wsize||Te!==X.avail_out&&M.mode<30&&(M.mode<27||ie!==4))&&ce(X,X.output,X.next_out,Te-X.avail_out)?(M.mode=31,-4):(Oe-=X.avail_in,Te-=X.avail_out,X.total_in+=Oe,X.total_out+=Te,M.total+=Te,M.wrap&&Te&&(X.adler=M.check=M.flags?C(M.check,me,Te,X.next_out-Te):E(M.check,me,Te,X.next_out-Te)),X.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(Oe==0&&Te===0||ie===4)&&Ne===R&&(Ne=-5),Ne)},m.inflateEnd=function(X){if(!X||!X.state)return T;var ie=X.state;return ie.window&&(ie.window=null),X.state=null,R},m.inflateGetHeader=function(X,ie){var M;return X&&X.state?(2&(M=X.state).wrap)==0?T:((M.head=ie).done=!1,R):T},m.inflateSetDictionary=function(X,ie){var M,ae=ie.length;return X&&X.state?(M=X.state).wrap!==0&&M.mode!==11?T:M.mode===11&&E(1,ie,ae,0)!==M.check?-3:ce(X,ie,ae,ae)?(M.mode=31,-4):(M.havedict=1,R):T},m.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(f,p,m){var g=f("../utils/common"),E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];p.exports=function(N,_,R,T,k,I,z,j){var P,H,K,Z,V,L,Q,G,xe,ce=j.bits,X=0,ie=0,M=0,ae=0,me=0,re=0,Ye=0,ke=0,Je=0,q=0,ne=null,Oe=0,Te=new g.Buf16(16),je=new g.Buf16(16),ze=null,ct=0;for(X=0;X<=15;X++)Te[X]=0;for(ie=0;ie<T;ie++)Te[_[R+ie]]++;for(me=ce,ae=15;1<=ae&&Te[ae]===0;ae--);if(ae<me&&(me=ae),ae===0)return k[I++]=20971520,k[I++]=20971520,j.bits=1,0;for(M=1;M<ae&&Te[M]===0;M++);for(me<M&&(me=M),X=ke=1;X<=15;X++)if(ke<<=1,(ke-=Te[X])<0)return-1;if(0<ke&&(N===0||ae!==1))return-1;for(je[1]=0,X=1;X<15;X++)je[X+1]=je[X]+Te[X];for(ie=0;ie<T;ie++)_[R+ie]!==0&&(z[je[_[R+ie]]++]=ie);if(L=N===0?(ne=ze=z,19):N===1?(ne=E,Oe-=257,ze=C,ct-=257,256):(ne=v,ze=y,-1),X=M,V=I,Ye=ie=q=0,K=-1,Z=(Je=1<<(re=me))-1,N===1&&852<Je||N===2&&592<Je)return 1;for(;;){for(Q=X-Ye,xe=z[ie]<L?(G=0,z[ie]):z[ie]>L?(G=ze[ct+z[ie]],ne[Oe+z[ie]]):(G=96,0),P=1<<X-Ye,M=H=1<<re;k[V+(q>>Ye)+(H-=P)]=Q<<24|G<<16|xe|0,H!==0;);for(P=1<<X-1;q&P;)P>>=1;if(P!==0?(q&=P-1,q+=P):q=0,ie++,--Te[X]==0){if(X===ae)break;X=_[R+z[ie]]}if(me<X&&(q&Z)!==K){for(Ye===0&&(Ye=me),V+=M,ke=1<<(re=X-Ye);re+Ye<ae&&!((ke-=Te[re+Ye])<=0);)re++,ke<<=1;if(Je+=1<<re,N===1&&852<Je||N===2&&592<Je)return 1;k[K=q&Z]=me<<24|re<<16|V-I|0}}return q!==0&&(k[V+q]=X-Ye<<24|64<<16|0),j.bits=me,0}},{"../utils/common":41}],51:[function(f,p,m){p.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(f,p,m){var g=f("../utils/common"),E=0,C=1;function v(te){for(var he=te.length;0<=--he;)te[he]=0}var y=0,N=29,_=256,R=_+1+N,T=30,k=19,I=2*R+1,z=15,j=16,P=7,H=256,K=16,Z=17,V=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=new Array(2*(R+2));v(ce);var X=new Array(2*T);v(X);var ie=new Array(512);v(ie);var M=new Array(256);v(M);var ae=new Array(N);v(ae);var me,re,Ye,ke=new Array(T);function Je(te,he,Pe,Ee,Se){this.static_tree=te,this.extra_bits=he,this.extra_base=Pe,this.elems=Ee,this.max_length=Se,this.has_stree=te&&te.length}function q(te,he){this.dyn_tree=te,this.max_code=0,this.stat_desc=he}function ne(te){return te<256?ie[te]:ie[256+(te>>>7)]}function Oe(te,he){te.pending_buf[te.pending++]=255&he,te.pending_buf[te.pending++]=he>>>8&255}function Te(te,he,Pe){te.bi_valid>j-Pe?(te.bi_buf|=he<<te.bi_valid&65535,Oe(te,te.bi_buf),te.bi_buf=he>>j-te.bi_valid,te.bi_valid+=Pe-j):(te.bi_buf|=he<<te.bi_valid&65535,te.bi_valid+=Pe)}function je(te,he,Pe){Te(te,Pe[2*he],Pe[2*he+1])}function ze(te,he){for(var Pe=0;Pe|=1&te,te>>>=1,Pe<<=1,0<--he;);return Pe>>>1}function ct(te,he,Pe){var Ee,Se,et=new Array(z+1),tt=0;for(Ee=1;Ee<=z;Ee++)et[Ee]=tt=tt+Pe[Ee-1]<<1;for(Se=0;Se<=he;Se++){var it=te[2*Se+1];it!==0&&(te[2*Se]=ze(et[it]++,it))}}function nt(te){var he;for(he=0;he<R;he++)te.dyn_ltree[2*he]=0;for(he=0;he<T;he++)te.dyn_dtree[2*he]=0;for(he=0;he<k;he++)te.bl_tree[2*he]=0;te.dyn_ltree[2*H]=1,te.opt_len=te.static_len=0,te.last_lit=te.matches=0}function st(te){8<te.bi_valid?Oe(te,te.bi_buf):0<te.bi_valid&&(te.pending_buf[te.pending++]=te.bi_buf),te.bi_buf=0,te.bi_valid=0}function ut(te,he,Pe,Ee){var Se=2*he,et=2*Pe;return te[Se]<te[et]||te[Se]===te[et]&&Ee[he]<=Ee[Pe]}function Ct(te,he,Pe){for(var Ee=te.heap[Pe],Se=Pe<<1;Se<=te.heap_len&&(Se<te.heap_len&&ut(he,te.heap[Se+1],te.heap[Se],te.depth)&&Se++,!ut(he,Ee,te.heap[Se],te.depth));)te.heap[Pe]=te.heap[Se],Pe=Se,Se<<=1;te.heap[Pe]=Ee}function Qt(te,he,Pe){var Ee,Se,et,tt,it=0;if(te.last_lit!==0)for(;Ee=te.pending_buf[te.d_buf+2*it]<<8|te.pending_buf[te.d_buf+2*it+1],Se=te.pending_buf[te.l_buf+it],it++,Ee===0?je(te,Se,he):(je(te,(et=M[Se])+_+1,he),(tt=L[et])!==0&&Te(te,Se-=ae[et],tt),je(te,et=ne(--Ee),Pe),(tt=Q[et])!==0&&Te(te,Ee-=ke[et],tt)),it<te.last_lit;);je(te,H,he)}function xt(te,he){var Pe,Ee,Se,et=he.dyn_tree,tt=he.stat_desc.static_tree,it=he.stat_desc.has_stree,ot=he.stat_desc.elems,It=-1;for(te.heap_len=0,te.heap_max=I,Pe=0;Pe<ot;Pe++)et[2*Pe]!==0?(te.heap[++te.heap_len]=It=Pe,te.depth[Pe]=0):et[2*Pe+1]=0;for(;te.heap_len<2;)et[2*(Se=te.heap[++te.heap_len]=It<2?++It:0)]=1,te.depth[Se]=0,te.opt_len--,it&&(te.static_len-=tt[2*Se+1]);for(he.max_code=It,Pe=te.heap_len>>1;1<=Pe;Pe--)Ct(te,et,Pe);for(Se=ot;Pe=te.heap[1],te.heap[1]=te.heap[te.heap_len--],Ct(te,et,1),Ee=te.heap[1],te.heap[--te.heap_max]=Pe,te.heap[--te.heap_max]=Ee,et[2*Se]=et[2*Pe]+et[2*Ee],te.depth[Se]=(te.depth[Pe]>=te.depth[Ee]?te.depth[Pe]:te.depth[Ee])+1,et[2*Pe+1]=et[2*Ee+1]=Se,te.heap[1]=Se++,Ct(te,et,1),2<=te.heap_len;);te.heap[--te.heap_max]=te.heap[1],(function(pt,kt){var dr,dn,Cr,bt,qe,jt,mt=kt.dyn_tree,Jt=kt.max_code,Er=kt.stat_desc.static_tree,oi=kt.stat_desc.has_stree,qn=kt.stat_desc.extra_bits,Rt=kt.stat_desc.extra_base,Ut=kt.stat_desc.max_length,en=0;for(bt=0;bt<=z;bt++)pt.bl_count[bt]=0;for(mt[2*pt.heap[pt.heap_max]+1]=0,dr=pt.heap_max+1;dr<I;dr++)Ut<(bt=mt[2*mt[2*(dn=pt.heap[dr])+1]+1]+1)&&(bt=Ut,en++),mt[2*dn+1]=bt,Jt<dn||(pt.bl_count[bt]++,qe=0,Rt<=dn&&(qe=qn[dn-Rt]),jt=mt[2*dn],pt.opt_len+=jt*(bt+qe),oi&&(pt.static_len+=jt*(Er[2*dn+1]+qe)));if(en!==0){do{for(bt=Ut-1;pt.bl_count[bt]===0;)bt--;pt.bl_count[bt]--,pt.bl_count[bt+1]+=2,pt.bl_count[Ut]--,en-=2}while(0<en);for(bt=Ut;bt!==0;bt--)for(dn=pt.bl_count[bt];dn!==0;)Jt<(Cr=pt.heap[--dr])||(mt[2*Cr+1]!==bt&&(pt.opt_len+=(bt-mt[2*Cr+1])*mt[2*Cr],mt[2*Cr+1]=bt),dn--)}})(te,he),ct(et,It,te.bl_count)}function D(te,he,Pe){var Ee,Se,et=-1,tt=he[1],it=0,ot=7,It=4;for(tt===0&&(ot=138,It=3),he[2*(Pe+1)+1]=65535,Ee=0;Ee<=Pe;Ee++)Se=tt,tt=he[2*(Ee+1)+1],++it<ot&&Se===tt||(it<It?te.bl_tree[2*Se]+=it:Se!==0?(Se!==et&&te.bl_tree[2*Se]++,te.bl_tree[2*K]++):it<=10?te.bl_tree[2*Z]++:te.bl_tree[2*V]++,et=Se,It=(it=0)===tt?(ot=138,3):Se===tt?(ot=6,3):(ot=7,4))}function Ne(te,he,Pe){var Ee,Se,et=-1,tt=he[1],it=0,ot=7,It=4;for(tt===0&&(ot=138,It=3),Ee=0;Ee<=Pe;Ee++)if(Se=tt,tt=he[2*(Ee+1)+1],!(++it<ot&&Se===tt)){if(it<It)for(;je(te,Se,te.bl_tree),--it!=0;);else Se!==0?(Se!==et&&(je(te,Se,te.bl_tree),it--),je(te,K,te.bl_tree),Te(te,it-3,2)):it<=10?(je(te,Z,te.bl_tree),Te(te,it-3,3)):(je(te,V,te.bl_tree),Te(te,it-11,7));et=Se,It=(it=0)===tt?(ot=138,3):Se===tt?(ot=6,3):(ot=7,4)}}v(ke);var _e=!1;function le(te,he,Pe,Ee){Te(te,(y<<1)+(Ee?1:0),3),(function(Se,et,tt,it){st(Se),Oe(Se,tt),Oe(Se,~tt),g.arraySet(Se.pending_buf,Se.window,et,tt,Se.pending),Se.pending+=tt})(te,he,Pe)}m._tr_init=function(te){_e||((function(){var he,Pe,Ee,Se,et,tt=new Array(z+1);for(Se=Ee=0;Se<N-1;Se++)for(ae[Se]=Ee,he=0;he<1<<L[Se];he++)M[Ee++]=Se;for(M[Ee-1]=Se,Se=et=0;Se<16;Se++)for(ke[Se]=et,he=0;he<1<<Q[Se];he++)ie[et++]=Se;for(et>>=7;Se<T;Se++)for(ke[Se]=et<<7,he=0;he<1<<Q[Se]-7;he++)ie[256+et++]=Se;for(Pe=0;Pe<=z;Pe++)tt[Pe]=0;for(he=0;he<=143;)ce[2*he+1]=8,he++,tt[8]++;for(;he<=255;)ce[2*he+1]=9,he++,tt[9]++;for(;he<=279;)ce[2*he+1]=7,he++,tt[7]++;for(;he<=287;)ce[2*he+1]=8,he++,tt[8]++;for(ct(ce,R+1,tt),he=0;he<T;he++)X[2*he+1]=5,X[2*he]=ze(he,5);me=new Je(ce,L,_+1,R,z),re=new Je(X,Q,0,T,z),Ye=new Je(new Array(0),G,0,k,P)})(),_e=!0),te.l_desc=new q(te.dyn_ltree,me),te.d_desc=new q(te.dyn_dtree,re),te.bl_desc=new q(te.bl_tree,Ye),te.bi_buf=0,te.bi_valid=0,nt(te)},m._tr_stored_block=le,m._tr_flush_block=function(te,he,Pe,Ee){var Se,et,tt=0;0<te.level?(te.strm.data_type===2&&(te.strm.data_type=(function(it){var ot,It=4093624447;for(ot=0;ot<=31;ot++,It>>>=1)if(1&It&&it.dyn_ltree[2*ot]!==0)return E;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return C;for(ot=32;ot<_;ot++)if(it.dyn_ltree[2*ot]!==0)return C;return E})(te)),xt(te,te.l_desc),xt(te,te.d_desc),tt=(function(it){var ot;for(D(it,it.dyn_ltree,it.l_desc.max_code),D(it,it.dyn_dtree,it.d_desc.max_code),xt(it,it.bl_desc),ot=k-1;3<=ot&&it.bl_tree[2*xe[ot]+1]===0;ot--);return it.opt_len+=3*(ot+1)+5+5+4,ot})(te),Se=te.opt_len+3+7>>>3,(et=te.static_len+3+7>>>3)<=Se&&(Se=et)):Se=et=Pe+5,Pe+4<=Se&&he!==-1?le(te,he,Pe,Ee):te.strategy===4||et===Se?(Te(te,2+(Ee?1:0),3),Qt(te,ce,X)):(Te(te,4+(Ee?1:0),3),(function(it,ot,It,pt){var kt;for(Te(it,ot-257,5),Te(it,It-1,5),Te(it,pt-4,4),kt=0;kt<pt;kt++)Te(it,it.bl_tree[2*xe[kt]+1],3);Ne(it,it.dyn_ltree,ot-1),Ne(it,it.dyn_dtree,It-1)})(te,te.l_desc.max_code+1,te.d_desc.max_code+1,tt+1),Qt(te,te.dyn_ltree,te.dyn_dtree)),nt(te),Ee&&st(te)},m._tr_tally=function(te,he,Pe){return te.pending_buf[te.d_buf+2*te.last_lit]=he>>>8&255,te.pending_buf[te.d_buf+2*te.last_lit+1]=255&he,te.pending_buf[te.l_buf+te.last_lit]=255&Pe,te.last_lit++,he===0?te.dyn_ltree[2*Pe]++:(te.matches++,he--,te.dyn_ltree[2*(M[Pe]+_+1)]++,te.dyn_dtree[2*ne(he)]++),te.last_lit===te.lit_bufsize-1},m._tr_align=function(te){Te(te,2,3),je(te,H,ce),(function(he){he.bi_valid===16?(Oe(he,he.bi_buf),he.bi_buf=0,he.bi_valid=0):8<=he.bi_valid&&(he.pending_buf[he.pending++]=255&he.bi_buf,he.bi_buf>>=8,he.bi_valid-=8)})(te)}},{"../utils/common":41}],53:[function(f,p,m){p.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(f,p,m){(function(g){(function(E,C){if(!E.setImmediate){var v,y,N,_,R=1,T={},k=!1,I=E.document,z=Object.getPrototypeOf&&Object.getPrototypeOf(E);z=z&&z.setTimeout?z:E,v={}.toString.call(E.process)==="[object process]"?function(K){process.nextTick(function(){P(K)})}:(function(){if(E.postMessage&&!E.importScripts){var K=!0,Z=E.onmessage;return E.onmessage=function(){K=!1},E.postMessage("","*"),E.onmessage=Z,K}})()?(_="setImmediate$"+Math.random()+"$",E.addEventListener?E.addEventListener("message",H,!1):E.attachEvent("onmessage",H),function(K){E.postMessage(_+K,"*")}):E.MessageChannel?((N=new MessageChannel).port1.onmessage=function(K){P(K.data)},function(K){N.port2.postMessage(K)}):I&&"onreadystatechange"in I.createElement("script")?(y=I.documentElement,function(K){var Z=I.createElement("script");Z.onreadystatechange=function(){P(K),Z.onreadystatechange=null,y.removeChild(Z),Z=null},y.appendChild(Z)}):function(K){setTimeout(P,0,K)},z.setImmediate=function(K){typeof K!="function"&&(K=new Function(""+K));for(var Z=new Array(arguments.length-1),V=0;V<Z.length;V++)Z[V]=arguments[V+1];var L={callback:K,args:Z};return T[R]=L,v(R),R++},z.clearImmediate=j}function j(K){delete T[K]}function P(K){if(k)setTimeout(P,0,K);else{var Z=T[K];if(Z){k=!0;try{(function(V){var L=V.callback,Q=V.args;switch(Q.length){case 0:L();break;case 1:L(Q[0]);break;case 2:L(Q[0],Q[1]);break;case 3:L(Q[0],Q[1],Q[2]);break;default:L.apply(C,Q)}})(Z)}finally{j(K),k=!1}}}}function H(K){K.source===E&&typeof K.data=="string"&&K.data.indexOf(_)===0&&P(+K.data.slice(_.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,typeof li<"u"?li:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Xf)),Xf.exports}var Ib=Rb();const ip=Kl(Ib);async function ap(u){try{if(!u)throw new Error("No active trip");const d=await fn.getItem(`${u}_app_config`),f=await Sn.getItem(`${u}_dayOrder`),p=[];if(f)for(const v of f){const y=await Sn.getItem(`${u}_${v}`);y&&p.push(y)}const g=(await Nr.keys()).filter(v=>v.startsWith(`${u}_`)),E=[];for(const v of g){const y=await Nr.getItem(v);y&&E.push({id:y.id,title:y.title,type:y.type,textPayload:y.textPayload,addedAt:y.addedAt})}const C={v:2,config:d,dayOrder:f,days:p,tickets:E};return Ad.compressToBase64(JSON.stringify(C))}catch(d){throw console.error("Export failed",d),new Error("")}}async function Db(u){const d=await ap(u),f=await fetch("https://dpaste.com/api/v2/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({content:d,expires:"365"})});if(!f.ok)throw new Error("QR Code ");const m=(await f.text()).trim().split("/").pop();if(!m)throw new Error(" ID");return m}async function Ob(u){const d=await fetch(`https://dpaste.com/${u}.txt`);if(!d.ok)throw new Error("");return await d.text()}async function Mb(u){const d=await fn.getItem(`${u}_app_config`),f=await Sn.getItem(`${u}_dayOrder`),p=[];if(f)for(const C of f){const v=await Sn.getItem(`${u}_${C}`);v&&p.push(v)}const g=(await Nr.keys()).filter(C=>C.startsWith(`${u}_`)),E=[];for(const C of g){const v=await Nr.getItem(C);v&&E.push({id:v.id,title:v.title,type:v.type,textPayload:v.textPayload,publicTutorialBase64:v.publicTutorialBase64,addedAt:v.addedAt})}return{payload:{v:2,config:d,dayOrder:f,days:p,tickets:E},tripName:d?.tripName||"trip"}}async function sp(u){try{if(!u)throw new Error("No active trip");const{payload:d,tripName:f}=await Mb(u),p=JSON.stringify(d),m=new ip;m.file(`${f}.json`,p);const g=await m.generateAsync({type:"blob",compression:"DEFLATE"}),E=`${f}.zip`;try{const y=new File([g],E,{type:"application/zip"});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[y]})){await navigator.share({title:"",files:[y]});return}}catch(y){if(y?.name==="AbortError")return}const C=URL.createObjectURL(g),v=document.createElement("a");v.href=C,v.download=E,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(C)}catch(d){if(d?.name==="AbortError")return;throw console.error("File export failed",d),new Error("")}}function Bb(u,d="image/jpeg"){const f=atob(u.split(",")[1]||u),p=[];for(let m=0;m<f.length;m+=512){const g=f.slice(m,m+512),E=new Array(g.length);for(let v=0;v<g.length;v++)E[v]=g.charCodeAt(v);const C=new Uint8Array(E);p.push(C)}return new Blob(p,{type:d})}async function Sd(u,d){try{if(!u)throw new Error("No active trip");const f=await op(d);return await cp(u,f)}catch(f){return console.error("Import failed",f),!1}}async function lp(u,d){try{if(!u)throw new Error("No active trip");let f;if(d.name.endsWith(".zip")||d.type==="application/zip"||d.type==="application/x-zip-compressed"){const m=await ip.loadAsync(d),g=Object.values(m.files).find(E=>E.name.endsWith(".json"));if(!g)throw new Error("ZIP ");f=await g.async("string")}else f=await d.text();const p=await op(f);return await cp(u,p)}catch(f){return console.error("File import failed",f),!1}}async function op(u){try{const d=JSON.parse(u);if(d.config&&d.dayOrder&&d.days)return d}catch{}try{const d=Ad.decompressFromBase64(u);if(d){const f=JSON.parse(d);if(f.config&&f.dayOrder&&f.days)return f}}catch{}try{const d=Ad.decompressFromEncodedURIComponent(u);if(d){const f=JSON.parse(d);if(f.config&&f.dayOrder&&f.days)return f}}catch{}try{const d=decodeURIComponent(atob(u)),f=JSON.parse(d);if(f.config&&f.dayOrder&&f.days)return f}catch{}throw new Error("")}async function cp(u,d){if(!d.config||!d.dayOrder||!d.days)throw new Error("");await fn.setItem(`${u}_app_config`,d.config),await Sn.setItem(`${u}_dayOrder`,d.dayOrder);for(const f of d.days)await Sn.setItem(`${u}_${f.id}`,f);if(d.tickets&&Array.isArray(d.tickets))for(const f of d.tickets){const p={id:f.id,title:f.title,type:f.type,textPayload:f.textPayload,addedAt:f.addedAt,publicTutorialBlob:f.publicTutorialBase64?Bb(f.publicTutorialBase64):void 0,publicTutorialBase64:f.publicTutorialBase64};await Nr.setItem(`${u}_${p.id}`,p)}return!0}const zd=Object.freeze(Object.defineProperty({__proto__:null,exportToDpaste:Db,exportTripAsFile:sp,exportTripData:ap,fetchFromDpaste:Ob,importTripData:Sd,importTripFromFile:lp},Symbol.toStringTag,{value:"Module"}));var Hs={},Yf,Rg;function kb(){return Rg||(Rg=1,Yf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Yf}var Zf={},Oa={},Ig;function is(){if(Ig)return Oa;Ig=1;let u;const d=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Oa.getSymbolSize=function(p){if(!p)throw new Error('"version" cannot be null or undefined');if(p<1||p>40)throw new Error('"version" should be in range from 1 to 40');return p*4+17},Oa.getSymbolTotalCodewords=function(p){return d[p]},Oa.getBCHDigit=function(f){let p=0;for(;f!==0;)p++,f>>>=1;return p},Oa.setToSJISFunction=function(p){if(typeof p!="function")throw new Error('"toSJISFunc" is not a valid function.');u=p},Oa.isKanjiModeEnabled=function(){return typeof u<"u"},Oa.toSJIS=function(p){return u(p)},Oa}var qf={},Dg;function Ud(){return Dg||(Dg=1,(function(u){u.L={bit:1},u.M={bit:0},u.Q={bit:3},u.H={bit:2};function d(f){if(typeof f!="string")throw new Error("Param is not a string");switch(f.toLowerCase()){case"l":case"low":return u.L;case"m":case"medium":return u.M;case"q":case"quartile":return u.Q;case"h":case"high":return u.H;default:throw new Error("Unknown EC Level: "+f)}}u.isValid=function(p){return p&&typeof p.bit<"u"&&p.bit>=0&&p.bit<4},u.from=function(p,m){if(u.isValid(p))return p;try{return d(p)}catch{return m}}})(qf)),qf}var Wf,Og;function Lb(){if(Og)return Wf;Og=1;function u(){this.buffer=[],this.length=0}return u.prototype={get:function(d){const f=Math.floor(d/8);return(this.buffer[f]>>>7-d%8&1)===1},put:function(d,f){for(let p=0;p<f;p++)this.putBit((d>>>f-p-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(d){const f=Math.floor(this.length/8);this.buffer.length<=f&&this.buffer.push(0),d&&(this.buffer[f]|=128>>>this.length%8),this.length++}},Wf=u,Wf}var Kf,Mg;function jb(){if(Mg)return Kf;Mg=1;function u(d){if(!d||d<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=d,this.data=new Uint8Array(d*d),this.reservedBit=new Uint8Array(d*d)}return u.prototype.set=function(d,f,p,m){const g=d*this.size+f;this.data[g]=p,m&&(this.reservedBit[g]=!0)},u.prototype.get=function(d,f){return this.data[d*this.size+f]},u.prototype.xor=function(d,f,p){this.data[d*this.size+f]^=p},u.prototype.isReserved=function(d,f){return this.reservedBit[d*this.size+f]},Kf=u,Kf}var Qf={},Bg;function zb(){return Bg||(Bg=1,(function(u){const d=is().getSymbolSize;u.getRowColCoords=function(p){if(p===1)return[];const m=Math.floor(p/7)+2,g=d(p),E=g===145?26:Math.ceil((g-13)/(2*m-2))*2,C=[g-7];for(let v=1;v<m-1;v++)C[v]=C[v-1]-E;return C.push(6),C.reverse()},u.getPositions=function(p){const m=[],g=u.getRowColCoords(p),E=g.length;for(let C=0;C<E;C++)for(let v=0;v<E;v++)C===0&&v===0||C===0&&v===E-1||C===E-1&&v===0||m.push([g[C],g[v]]);return m}})(Qf)),Qf}var Jf={},kg;function Ub(){if(kg)return Jf;kg=1;const u=is().getSymbolSize,d=7;return Jf.getPositions=function(p){const m=u(p);return[[0,0],[m-d,0],[0,m-d]]},Jf}var $f={},Lg;function Fb(){return Lg||(Lg=1,(function(u){u.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const d={N1:3,N2:3,N3:40,N4:10};u.isValid=function(m){return m!=null&&m!==""&&!isNaN(m)&&m>=0&&m<=7},u.from=function(m){return u.isValid(m)?parseInt(m,10):void 0},u.getPenaltyN1=function(m){const g=m.size;let E=0,C=0,v=0,y=null,N=null;for(let _=0;_<g;_++){C=v=0,y=N=null;for(let R=0;R<g;R++){let T=m.get(_,R);T===y?C++:(C>=5&&(E+=d.N1+(C-5)),y=T,C=1),T=m.get(R,_),T===N?v++:(v>=5&&(E+=d.N1+(v-5)),N=T,v=1)}C>=5&&(E+=d.N1+(C-5)),v>=5&&(E+=d.N1+(v-5))}return E},u.getPenaltyN2=function(m){const g=m.size;let E=0;for(let C=0;C<g-1;C++)for(let v=0;v<g-1;v++){const y=m.get(C,v)+m.get(C,v+1)+m.get(C+1,v)+m.get(C+1,v+1);(y===4||y===0)&&E++}return E*d.N2},u.getPenaltyN3=function(m){const g=m.size;let E=0,C=0,v=0;for(let y=0;y<g;y++){C=v=0;for(let N=0;N<g;N++)C=C<<1&2047|m.get(y,N),N>=10&&(C===1488||C===93)&&E++,v=v<<1&2047|m.get(N,y),N>=10&&(v===1488||v===93)&&E++}return E*d.N3},u.getPenaltyN4=function(m){let g=0;const E=m.data.length;for(let v=0;v<E;v++)g+=m.data[v];return Math.abs(Math.ceil(g*100/E/5)-10)*d.N4};function f(p,m,g){switch(p){case u.Patterns.PATTERN000:return(m+g)%2===0;case u.Patterns.PATTERN001:return m%2===0;case u.Patterns.PATTERN010:return g%3===0;case u.Patterns.PATTERN011:return(m+g)%3===0;case u.Patterns.PATTERN100:return(Math.floor(m/2)+Math.floor(g/3))%2===0;case u.Patterns.PATTERN101:return m*g%2+m*g%3===0;case u.Patterns.PATTERN110:return(m*g%2+m*g%3)%2===0;case u.Patterns.PATTERN111:return(m*g%3+(m+g)%2)%2===0;default:throw new Error("bad maskPattern:"+p)}}u.applyMask=function(m,g){const E=g.size;for(let C=0;C<E;C++)for(let v=0;v<E;v++)g.isReserved(v,C)||g.xor(v,C,f(m,v,C))},u.getBestMask=function(m,g){const E=Object.keys(u.Patterns).length;let C=0,v=1/0;for(let y=0;y<E;y++){g(y),u.applyMask(y,m);const N=u.getPenaltyN1(m)+u.getPenaltyN2(m)+u.getPenaltyN3(m)+u.getPenaltyN4(m);u.applyMask(y,m),N<v&&(v=N,C=y)}return C}})($f)),$f}var Cc={},jg;function up(){if(jg)return Cc;jg=1;const u=Ud(),d=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],f=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Cc.getBlocksCount=function(m,g){switch(g){case u.L:return d[(m-1)*4+0];case u.M:return d[(m-1)*4+1];case u.Q:return d[(m-1)*4+2];case u.H:return d[(m-1)*4+3];default:return}},Cc.getTotalCodewordsCount=function(m,g){switch(g){case u.L:return f[(m-1)*4+0];case u.M:return f[(m-1)*4+1];case u.Q:return f[(m-1)*4+2];case u.H:return f[(m-1)*4+3];default:return}},Cc}var ed={},Pl={},zg;function Pb(){if(zg)return Pl;zg=1;const u=new Uint8Array(512),d=new Uint8Array(256);return(function(){let p=1;for(let m=0;m<255;m++)u[m]=p,d[p]=m,p<<=1,p&256&&(p^=285);for(let m=255;m<512;m++)u[m]=u[m-255]})(),Pl.log=function(p){if(p<1)throw new Error("log("+p+")");return d[p]},Pl.exp=function(p){return u[p]},Pl.mul=function(p,m){return p===0||m===0?0:u[d[p]+d[m]]},Pl}var Ug;function Hb(){return Ug||(Ug=1,(function(u){const d=Pb();u.mul=function(p,m){const g=new Uint8Array(p.length+m.length-1);for(let E=0;E<p.length;E++)for(let C=0;C<m.length;C++)g[E+C]^=d.mul(p[E],m[C]);return g},u.mod=function(p,m){let g=new Uint8Array(p);for(;g.length-m.length>=0;){const E=g[0];for(let v=0;v<m.length;v++)g[v]^=d.mul(m[v],E);let C=0;for(;C<g.length&&g[C]===0;)C++;g=g.slice(C)}return g},u.generateECPolynomial=function(p){let m=new Uint8Array([1]);for(let g=0;g<p;g++)m=u.mul(m,new Uint8Array([1,d.exp(g)]));return m}})(ed)),ed}var td,Fg;function Gb(){if(Fg)return td;Fg=1;const u=Hb();function d(f){this.genPoly=void 0,this.degree=f,this.degree&&this.initialize(this.degree)}return d.prototype.initialize=function(p){this.degree=p,this.genPoly=u.generateECPolynomial(this.degree)},d.prototype.encode=function(p){if(!this.genPoly)throw new Error("Encoder not initialized");const m=new Uint8Array(p.length+this.degree);m.set(p);const g=u.mod(m,this.genPoly),E=this.degree-g.length;if(E>0){const C=new Uint8Array(this.degree);return C.set(g,E),C}return g},td=d,td}var nd={},rd={},id={},Pg;function fp(){return Pg||(Pg=1,id.isValid=function(d){return!isNaN(d)&&d>=1&&d<=40}),id}var Ri={},Hg;function dp(){if(Hg)return Ri;Hg=1;const u="[0-9]+",d="[A-Z $%*+\\-./:]+";let f="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";f=f.replace(/u/g,"\\u");const p="(?:(?![A-Z0-9 $%*+\\-./:]|"+f+`)(?:.|[\r
]))+`;Ri.KANJI=new RegExp(f,"g"),Ri.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ri.BYTE=new RegExp(p,"g"),Ri.NUMERIC=new RegExp(u,"g"),Ri.ALPHANUMERIC=new RegExp(d,"g");const m=new RegExp("^"+f+"$"),g=new RegExp("^"+u+"$"),E=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ri.testKanji=function(v){return m.test(v)},Ri.testNumeric=function(v){return g.test(v)},Ri.testAlphanumeric=function(v){return E.test(v)},Ri}var Gg;function as(){return Gg||(Gg=1,(function(u){const d=fp(),f=dp();u.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},u.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},u.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},u.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},u.MIXED={bit:-1},u.getCharCountIndicator=function(g,E){if(!g.ccBits)throw new Error("Invalid mode: "+g);if(!d.isValid(E))throw new Error("Invalid version: "+E);return E>=1&&E<10?g.ccBits[0]:E<27?g.ccBits[1]:g.ccBits[2]},u.getBestModeForData=function(g){return f.testNumeric(g)?u.NUMERIC:f.testAlphanumeric(g)?u.ALPHANUMERIC:f.testKanji(g)?u.KANJI:u.BYTE},u.toString=function(g){if(g&&g.id)return g.id;throw new Error("Invalid mode")},u.isValid=function(g){return g&&g.bit&&g.ccBits};function p(m){if(typeof m!="string")throw new Error("Param is not a string");switch(m.toLowerCase()){case"numeric":return u.NUMERIC;case"alphanumeric":return u.ALPHANUMERIC;case"kanji":return u.KANJI;case"byte":return u.BYTE;default:throw new Error("Unknown mode: "+m)}}u.from=function(g,E){if(u.isValid(g))return g;try{return p(g)}catch{return E}}})(rd)),rd}var Vg;function Vb(){return Vg||(Vg=1,(function(u){const d=is(),f=up(),p=Ud(),m=as(),g=fp(),E=7973,C=d.getBCHDigit(E);function v(R,T,k){for(let I=1;I<=40;I++)if(T<=u.getCapacity(I,k,R))return I}function y(R,T){return m.getCharCountIndicator(R,T)+4}function N(R,T){let k=0;return R.forEach(function(I){const z=y(I.mode,T);k+=z+I.getBitsLength()}),k}function _(R,T){for(let k=1;k<=40;k++)if(N(R,k)<=u.getCapacity(k,T,m.MIXED))return k}u.from=function(T,k){return g.isValid(T)?parseInt(T,10):k},u.getCapacity=function(T,k,I){if(!g.isValid(T))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=m.BYTE);const z=d.getSymbolTotalCodewords(T),j=f.getTotalCodewordsCount(T,k),P=(z-j)*8;if(I===m.MIXED)return P;const H=P-y(I,T);switch(I){case m.NUMERIC:return Math.floor(H/10*3);case m.ALPHANUMERIC:return Math.floor(H/11*2);case m.KANJI:return Math.floor(H/13);case m.BYTE:default:return Math.floor(H/8)}},u.getBestVersionForData=function(T,k){let I;const z=p.from(k,p.M);if(Array.isArray(T)){if(T.length>1)return _(T,z);if(T.length===0)return 1;I=T[0]}else I=T;return v(I.mode,I.getLength(),z)},u.getEncodedBits=function(T){if(!g.isValid(T)||T<7)throw new Error("Invalid QR Code version");let k=T<<12;for(;d.getBCHDigit(k)-C>=0;)k^=E<<d.getBCHDigit(k)-C;return T<<12|k}})(nd)),nd}var ad={},Xg;function Xb(){if(Xg)return ad;Xg=1;const u=is(),d=1335,f=21522,p=u.getBCHDigit(d);return ad.getEncodedBits=function(g,E){const C=g.bit<<3|E;let v=C<<10;for(;u.getBCHDigit(v)-p>=0;)v^=d<<u.getBCHDigit(v)-p;return(C<<10|v)^f},ad}var sd={},ld,Yg;function Yb(){if(Yg)return ld;Yg=1;const u=as();function d(f){this.mode=u.NUMERIC,this.data=f.toString()}return d.getBitsLength=function(p){return 10*Math.floor(p/3)+(p%3?p%3*3+1:0)},d.prototype.getLength=function(){return this.data.length},d.prototype.getBitsLength=function(){return d.getBitsLength(this.data.length)},d.prototype.write=function(p){let m,g,E;for(m=0;m+3<=this.data.length;m+=3)g=this.data.substr(m,3),E=parseInt(g,10),p.put(E,10);const C=this.data.length-m;C>0&&(g=this.data.substr(m),E=parseInt(g,10),p.put(E,C*3+1))},ld=d,ld}var od,Zg;function Zb(){if(Zg)return od;Zg=1;const u=as(),d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function f(p){this.mode=u.ALPHANUMERIC,this.data=p}return f.getBitsLength=function(m){return 11*Math.floor(m/2)+6*(m%2)},f.prototype.getLength=function(){return this.data.length},f.prototype.getBitsLength=function(){return f.getBitsLength(this.data.length)},f.prototype.write=function(m){let g;for(g=0;g+2<=this.data.length;g+=2){let E=d.indexOf(this.data[g])*45;E+=d.indexOf(this.data[g+1]),m.put(E,11)}this.data.length%2&&m.put(d.indexOf(this.data[g]),6)},od=f,od}var cd,qg;function qb(){if(qg)return cd;qg=1;const u=as();function d(f){this.mode=u.BYTE,typeof f=="string"?this.data=new TextEncoder().encode(f):this.data=new Uint8Array(f)}return d.getBitsLength=function(p){return p*8},d.prototype.getLength=function(){return this.data.length},d.prototype.getBitsLength=function(){return d.getBitsLength(this.data.length)},d.prototype.write=function(f){for(let p=0,m=this.data.length;p<m;p++)f.put(this.data[p],8)},cd=d,cd}var ud,Wg;function Wb(){if(Wg)return ud;Wg=1;const u=as(),d=is();function f(p){this.mode=u.KANJI,this.data=p}return f.getBitsLength=function(m){return m*13},f.prototype.getLength=function(){return this.data.length},f.prototype.getBitsLength=function(){return f.getBitsLength(this.data.length)},f.prototype.write=function(p){let m;for(m=0;m<this.data.length;m++){let g=d.toSJIS(this.data[m]);if(g>=33088&&g<=40956)g-=33088;else if(g>=57408&&g<=60351)g-=49472;else throw new Error("Invalid SJIS character: "+this.data[m]+`
Make sure your charset is UTF-8`);g=(g>>>8&255)*192+(g&255),p.put(g,13)}},ud=f,ud}var fd={exports:{}},Kg;function Kb(){return Kg||(Kg=1,(function(u){var d={single_source_shortest_paths:function(f,p,m){var g={},E={};E[p]=0;var C=d.PriorityQueue.make();C.push(p,0);for(var v,y,N,_,R,T,k,I,z;!C.empty();){v=C.pop(),y=v.value,_=v.cost,R=f[y]||{};for(N in R)R.hasOwnProperty(N)&&(T=R[N],k=_+T,I=E[N],z=typeof E[N]>"u",(z||I>k)&&(E[N]=k,C.push(N,k),g[N]=y))}if(typeof m<"u"&&typeof E[m]>"u"){var j=["Could not find a path from ",p," to ",m,"."].join("");throw new Error(j)}return g},extract_shortest_path_from_predecessor_list:function(f,p){for(var m=[],g=p;g;)m.push(g),f[g],g=f[g];return m.reverse(),m},find_path:function(f,p,m){var g=d.single_source_shortest_paths(f,p,m);return d.extract_shortest_path_from_predecessor_list(g,m)},PriorityQueue:{make:function(f){var p=d.PriorityQueue,m={},g;f=f||{};for(g in p)p.hasOwnProperty(g)&&(m[g]=p[g]);return m.queue=[],m.sorter=f.sorter||p.default_sorter,m},default_sorter:function(f,p){return f.cost-p.cost},push:function(f,p){var m={value:f,cost:p};this.queue.push(m),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};u.exports=d})(fd)),fd.exports}var Qg;function Qb(){return Qg||(Qg=1,(function(u){const d=as(),f=Yb(),p=Zb(),m=qb(),g=Wb(),E=dp(),C=is(),v=Kb();function y(j){return unescape(encodeURIComponent(j)).length}function N(j,P,H){const K=[];let Z;for(;(Z=j.exec(H))!==null;)K.push({data:Z[0],index:Z.index,mode:P,length:Z[0].length});return K}function _(j){const P=N(E.NUMERIC,d.NUMERIC,j),H=N(E.ALPHANUMERIC,d.ALPHANUMERIC,j);let K,Z;return C.isKanjiModeEnabled()?(K=N(E.BYTE,d.BYTE,j),Z=N(E.KANJI,d.KANJI,j)):(K=N(E.BYTE_KANJI,d.BYTE,j),Z=[]),P.concat(H,K,Z).sort(function(L,Q){return L.index-Q.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function R(j,P){switch(P){case d.NUMERIC:return f.getBitsLength(j);case d.ALPHANUMERIC:return p.getBitsLength(j);case d.KANJI:return g.getBitsLength(j);case d.BYTE:return m.getBitsLength(j)}}function T(j){return j.reduce(function(P,H){const K=P.length-1>=0?P[P.length-1]:null;return K&&K.mode===H.mode?(P[P.length-1].data+=H.data,P):(P.push(H),P)},[])}function k(j){const P=[];for(let H=0;H<j.length;H++){const K=j[H];switch(K.mode){case d.NUMERIC:P.push([K,{data:K.data,mode:d.ALPHANUMERIC,length:K.length},{data:K.data,mode:d.BYTE,length:K.length}]);break;case d.ALPHANUMERIC:P.push([K,{data:K.data,mode:d.BYTE,length:K.length}]);break;case d.KANJI:P.push([K,{data:K.data,mode:d.BYTE,length:y(K.data)}]);break;case d.BYTE:P.push([{data:K.data,mode:d.BYTE,length:y(K.data)}])}}return P}function I(j,P){const H={},K={start:{}};let Z=["start"];for(let V=0;V<j.length;V++){const L=j[V],Q=[];for(let G=0;G<L.length;G++){const xe=L[G],ce=""+V+G;Q.push(ce),H[ce]={node:xe,lastCount:0},K[ce]={};for(let X=0;X<Z.length;X++){const ie=Z[X];H[ie]&&H[ie].node.mode===xe.mode?(K[ie][ce]=R(H[ie].lastCount+xe.length,xe.mode)-R(H[ie].lastCount,xe.mode),H[ie].lastCount+=xe.length):(H[ie]&&(H[ie].lastCount=xe.length),K[ie][ce]=R(xe.length,xe.mode)+4+d.getCharCountIndicator(xe.mode,P))}}Z=Q}for(let V=0;V<Z.length;V++)K[Z[V]].end=0;return{map:K,table:H}}function z(j,P){let H;const K=d.getBestModeForData(j);if(H=d.from(P,K),H!==d.BYTE&&H.bit<K.bit)throw new Error('"'+j+'" cannot be encoded with mode '+d.toString(H)+`.
 Suggested mode is: `+d.toString(K));switch(H===d.KANJI&&!C.isKanjiModeEnabled()&&(H=d.BYTE),H){case d.NUMERIC:return new f(j);case d.ALPHANUMERIC:return new p(j);case d.KANJI:return new g(j);case d.BYTE:return new m(j)}}u.fromArray=function(P){return P.reduce(function(H,K){return typeof K=="string"?H.push(z(K,null)):K.data&&H.push(z(K.data,K.mode)),H},[])},u.fromString=function(P,H){const K=_(P,C.isKanjiModeEnabled()),Z=k(K),V=I(Z,H),L=v.find_path(V.map,"start","end"),Q=[];for(let G=1;G<L.length-1;G++)Q.push(V.table[L[G]].node);return u.fromArray(T(Q))},u.rawSplit=function(P){return u.fromArray(_(P,C.isKanjiModeEnabled()))}})(sd)),sd}var Jg;function Jb(){if(Jg)return Zf;Jg=1;const u=is(),d=Ud(),f=Lb(),p=jb(),m=zb(),g=Ub(),E=Fb(),C=up(),v=Gb(),y=Vb(),N=Xb(),_=as(),R=Qb();function T(V,L){const Q=V.size,G=g.getPositions(L);for(let xe=0;xe<G.length;xe++){const ce=G[xe][0],X=G[xe][1];for(let ie=-1;ie<=7;ie++)if(!(ce+ie<=-1||Q<=ce+ie))for(let M=-1;M<=7;M++)X+M<=-1||Q<=X+M||(ie>=0&&ie<=6&&(M===0||M===6)||M>=0&&M<=6&&(ie===0||ie===6)||ie>=2&&ie<=4&&M>=2&&M<=4?V.set(ce+ie,X+M,!0,!0):V.set(ce+ie,X+M,!1,!0))}}function k(V){const L=V.size;for(let Q=8;Q<L-8;Q++){const G=Q%2===0;V.set(Q,6,G,!0),V.set(6,Q,G,!0)}}function I(V,L){const Q=m.getPositions(L);for(let G=0;G<Q.length;G++){const xe=Q[G][0],ce=Q[G][1];for(let X=-2;X<=2;X++)for(let ie=-2;ie<=2;ie++)X===-2||X===2||ie===-2||ie===2||X===0&&ie===0?V.set(xe+X,ce+ie,!0,!0):V.set(xe+X,ce+ie,!1,!0)}}function z(V,L){const Q=V.size,G=y.getEncodedBits(L);let xe,ce,X;for(let ie=0;ie<18;ie++)xe=Math.floor(ie/3),ce=ie%3+Q-8-3,X=(G>>ie&1)===1,V.set(xe,ce,X,!0),V.set(ce,xe,X,!0)}function j(V,L,Q){const G=V.size,xe=N.getEncodedBits(L,Q);let ce,X;for(ce=0;ce<15;ce++)X=(xe>>ce&1)===1,ce<6?V.set(ce,8,X,!0):ce<8?V.set(ce+1,8,X,!0):V.set(G-15+ce,8,X,!0),ce<8?V.set(8,G-ce-1,X,!0):ce<9?V.set(8,15-ce-1+1,X,!0):V.set(8,15-ce-1,X,!0);V.set(G-8,8,1,!0)}function P(V,L){const Q=V.size;let G=-1,xe=Q-1,ce=7,X=0;for(let ie=Q-1;ie>0;ie-=2)for(ie===6&&ie--;;){for(let M=0;M<2;M++)if(!V.isReserved(xe,ie-M)){let ae=!1;X<L.length&&(ae=(L[X]>>>ce&1)===1),V.set(xe,ie-M,ae),ce--,ce===-1&&(X++,ce=7)}if(xe+=G,xe<0||Q<=xe){xe-=G,G=-G;break}}}function H(V,L,Q){const G=new f;Q.forEach(function(M){G.put(M.mode.bit,4),G.put(M.getLength(),_.getCharCountIndicator(M.mode,V)),M.write(G)});const xe=u.getSymbolTotalCodewords(V),ce=C.getTotalCodewordsCount(V,L),X=(xe-ce)*8;for(G.getLengthInBits()+4<=X&&G.put(0,4);G.getLengthInBits()%8!==0;)G.putBit(0);const ie=(X-G.getLengthInBits())/8;for(let M=0;M<ie;M++)G.put(M%2?17:236,8);return K(G,V,L)}function K(V,L,Q){const G=u.getSymbolTotalCodewords(L),xe=C.getTotalCodewordsCount(L,Q),ce=G-xe,X=C.getBlocksCount(L,Q),ie=G%X,M=X-ie,ae=Math.floor(G/X),me=Math.floor(ce/X),re=me+1,Ye=ae-me,ke=new v(Ye);let Je=0;const q=new Array(X),ne=new Array(X);let Oe=0;const Te=new Uint8Array(V.buffer);for(let st=0;st<X;st++){const ut=st<M?me:re;q[st]=Te.slice(Je,Je+ut),ne[st]=ke.encode(q[st]),Je+=ut,Oe=Math.max(Oe,ut)}const je=new Uint8Array(G);let ze=0,ct,nt;for(ct=0;ct<Oe;ct++)for(nt=0;nt<X;nt++)ct<q[nt].length&&(je[ze++]=q[nt][ct]);for(ct=0;ct<Ye;ct++)for(nt=0;nt<X;nt++)je[ze++]=ne[nt][ct];return je}function Z(V,L,Q,G){let xe;if(Array.isArray(V))xe=R.fromArray(V);else if(typeof V=="string"){let ae=L;if(!ae){const me=R.rawSplit(V);ae=y.getBestVersionForData(me,Q)}xe=R.fromString(V,ae||40)}else throw new Error("Invalid data");const ce=y.getBestVersionForData(xe,Q);if(!ce)throw new Error("The amount of data is too big to be stored in a QR Code");if(!L)L=ce;else if(L<ce)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ce+`.
`);const X=H(L,Q,xe),ie=u.getSymbolSize(L),M=new p(ie);return T(M,L),k(M),I(M,L),j(M,Q,0),L>=7&&z(M,L),P(M,X),isNaN(G)&&(G=E.getBestMask(M,j.bind(null,M,Q))),E.applyMask(G,M),j(M,Q,G),{modules:M,version:L,errorCorrectionLevel:Q,maskPattern:G,segments:xe}}return Zf.create=function(L,Q){if(typeof L>"u"||L==="")throw new Error("No input text");let G=d.M,xe,ce;return typeof Q<"u"&&(G=d.from(Q.errorCorrectionLevel,d.M),xe=y.from(Q.version),ce=E.from(Q.maskPattern),Q.toSJISFunc&&u.setToSJISFunction(Q.toSJISFunc)),Z(L,xe,G,ce)},Zf}var dd={},hd={},$g;function hp(){return $g||($g=1,(function(u){function d(f){if(typeof f=="number"&&(f=f.toString()),typeof f!="string")throw new Error("Color should be defined as hex string");let p=f.slice().replace("#","").split("");if(p.length<3||p.length===5||p.length>8)throw new Error("Invalid hex color: "+f);(p.length===3||p.length===4)&&(p=Array.prototype.concat.apply([],p.map(function(g){return[g,g]}))),p.length===6&&p.push("F","F");const m=parseInt(p.join(""),16);return{r:m>>24&255,g:m>>16&255,b:m>>8&255,a:m&255,hex:"#"+p.slice(0,6).join("")}}u.getOptions=function(p){p||(p={}),p.color||(p.color={});const m=typeof p.margin>"u"||p.margin===null||p.margin<0?4:p.margin,g=p.width&&p.width>=21?p.width:void 0,E=p.scale||4;return{width:g,scale:g?4:E,margin:m,color:{dark:d(p.color.dark||"#000000ff"),light:d(p.color.light||"#ffffffff")},type:p.type,rendererOpts:p.rendererOpts||{}}},u.getScale=function(p,m){return m.width&&m.width>=p+m.margin*2?m.width/(p+m.margin*2):m.scale},u.getImageWidth=function(p,m){const g=u.getScale(p,m);return Math.floor((p+m.margin*2)*g)},u.qrToImageData=function(p,m,g){const E=m.modules.size,C=m.modules.data,v=u.getScale(E,g),y=Math.floor((E+g.margin*2)*v),N=g.margin*v,_=[g.color.light,g.color.dark];for(let R=0;R<y;R++)for(let T=0;T<y;T++){let k=(R*y+T)*4,I=g.color.light;if(R>=N&&T>=N&&R<y-N&&T<y-N){const z=Math.floor((R-N)/v),j=Math.floor((T-N)/v);I=_[C[z*E+j]?1:0]}p[k++]=I.r,p[k++]=I.g,p[k++]=I.b,p[k]=I.a}}})(hd)),hd}var e2;function $b(){return e2||(e2=1,(function(u){const d=hp();function f(m,g,E){m.clearRect(0,0,g.width,g.height),g.style||(g.style={}),g.height=E,g.width=E,g.style.height=E+"px",g.style.width=E+"px"}function p(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}u.render=function(g,E,C){let v=C,y=E;typeof v>"u"&&(!E||!E.getContext)&&(v=E,E=void 0),E||(y=p()),v=d.getOptions(v);const N=d.getImageWidth(g.modules.size,v),_=y.getContext("2d"),R=_.createImageData(N,N);return d.qrToImageData(R.data,g,v),f(_,y,N),_.putImageData(R,0,0),y},u.renderToDataURL=function(g,E,C){let v=C;typeof v>"u"&&(!E||!E.getContext)&&(v=E,E=void 0),v||(v={});const y=u.render(g,E,v),N=v.type||"image/png",_=v.rendererOpts||{};return y.toDataURL(N,_.quality)}})(dd)),dd}var gd={},t2;function ev(){if(t2)return gd;t2=1;const u=hp();function d(m,g){const E=m.a/255,C=g+'="'+m.hex+'"';return E<1?C+" "+g+'-opacity="'+E.toFixed(2).slice(1)+'"':C}function f(m,g,E){let C=m+g;return typeof E<"u"&&(C+=" "+E),C}function p(m,g,E){let C="",v=0,y=!1,N=0;for(let _=0;_<m.length;_++){const R=Math.floor(_%g),T=Math.floor(_/g);!R&&!y&&(y=!0),m[_]?(N++,_>0&&R>0&&m[_-1]||(C+=y?f("M",R+E,.5+T+E):f("m",v,0),v=0,y=!1),R+1<g&&m[_+1]||(C+=f("h",N),N=0)):v++}return C}return gd.render=function(g,E,C){const v=u.getOptions(E),y=g.modules.size,N=g.modules.data,_=y+v.margin*2,R=v.color.light.a?"<path "+d(v.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",T="<path "+d(v.color.dark,"stroke")+' d="'+p(N,y,v.margin)+'"/>',k='viewBox="0 0 '+_+" "+_+'"',z='<svg xmlns="http://www.w3.org/2000/svg" '+(v.width?'width="'+v.width+'" height="'+v.width+'" ':"")+k+' shape-rendering="crispEdges">'+R+T+`</svg>
`;return typeof C=="function"&&C(null,z),z},gd}var n2;function tv(){if(n2)return Hs;n2=1;const u=kb(),d=Jb(),f=$b(),p=ev();function m(g,E,C,v,y){const N=[].slice.call(arguments,1),_=N.length,R=typeof N[_-1]=="function";if(!R&&!u())throw new Error("Callback required as last argument");if(R){if(_<2)throw new Error("Too few arguments provided");_===2?(y=C,C=E,E=v=void 0):_===3&&(E.getContext&&typeof y>"u"?(y=v,v=void 0):(y=v,v=C,C=E,E=void 0))}else{if(_<1)throw new Error("Too few arguments provided");return _===1?(C=E,E=v=void 0):_===2&&!E.getContext&&(v=C,C=E,E=void 0),new Promise(function(T,k){try{const I=d.create(C,v);T(g(I,E,v))}catch(I){k(I)}})}try{const T=d.create(C,v);y(null,g(T,E,v))}catch(T){y(T)}}return Hs.create=d.create,Hs.toCanvas=m.bind(null,f.render),Hs.toDataURL=m.bind(null,f.renderToDataURL),Hs.toString=m.bind(null,function(g,E,C){return p.render(g,C)}),Hs}var nv=tv();const rv=Kl(nv);var ft;(function(u){u[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ft||(ft={}));var r2=new Map([[ft.QR_CODE,"QR_CODE"],[ft.AZTEC,"AZTEC"],[ft.CODABAR,"CODABAR"],[ft.CODE_39,"CODE_39"],[ft.CODE_93,"CODE_93"],[ft.CODE_128,"CODE_128"],[ft.DATA_MATRIX,"DATA_MATRIX"],[ft.MAXICODE,"MAXICODE"],[ft.ITF,"ITF"],[ft.EAN_13,"EAN_13"],[ft.EAN_8,"EAN_8"],[ft.PDF_417,"PDF_417"],[ft.RSS_14,"RSS_14"],[ft.RSS_EXPANDED,"RSS_EXPANDED"],[ft.UPC_A,"UPC_A"],[ft.UPC_E,"UPC_E"],[ft.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),i2;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.URL=1]="URL"})(i2||(i2={}));function iv(u){return Object.values(ft).includes(u)}var Ic;(function(u){u[u.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",u[u.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ic||(Ic={}));var av=(function(){function u(){}return u.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",u.SCAN_DEFAULT_FPS=2,u.DEFAULT_DISABLE_FLIP=!1,u.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,u.DEFAULT_SUPPORTED_SCAN_TYPE=[Ic.SCAN_TYPE_CAMERA,Ic.SCAN_TYPE_FILE],u})(),gp=(function(){function u(d,f){this.format=d,this.formatName=f}return u.prototype.toString=function(){return this.formatName},u.create=function(d){if(!r2.has(d))throw"".concat(d," not in html5QrcodeSupportedFormatsTextMap");return new u(d,r2.get(d))},u})(),a2=(function(){function u(){}return u.createFromText=function(d){var f={text:d};return{decodedText:d,result:f}},u.createFromQrcodeResult=function(d){return{decodedText:d.text,result:d}},u})(),_d;(function(u){u[u.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",u[u.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",u[u.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(_d||(_d={}));var sv=(function(){function u(){}return u.createFrom=function(d){return{errorMessage:d,type:_d.UNKWOWN_ERROR}},u})(),lv=(function(){function u(d){this.verbose=d}return u.prototype.log=function(d){this.verbose&&console.log(d)},u.prototype.warn=function(d){this.verbose&&console.warn(d)},u.prototype.logError=function(d,f){(this.verbose||f===!0)&&console.error(d)},u.prototype.logErrors=function(d){if(d.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(d)},u})();function ea(u){return typeof u>"u"||u===null}var Vs=(function(){function u(){}return u.codeParseError=function(d){return"QR code parse error, error = ".concat(d)},u.errorGettingUserMedia=function(d){return"Error getting userMedia, error = ".concat(d)},u.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},u.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},u.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},u.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},u.scannerPaused=function(){return"Scanner paused"},u})(),pp=(function(){function u(){}return u.isMediaStreamConstraintsValid=function(d,f){if(typeof d!="object"){var p=typeof d;return f.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(p,"."),!0),!1}for(var m=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(m),E=Object.keys(d),C=0,v=E;C<v.length;C++){var y=v[C];if(g.has(y))return f.logError("".concat(y," is not supported videoConstaints."),!0),!1}return!0},u})(),Hl={exports:{}},ov=Hl.exports,s2;function cv(){return s2||(s2=1,(function(u,d){(function(f,p){p(d)})(ov,(function(f){function p(U){return U==null}var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,t){U.__proto__=t}||function(U,t){for(var r in t)t.hasOwnProperty(r)&&(U[r]=t[r])};function g(U,t){m(U,t);function r(){this.constructor=U}U.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function E(U,t){var r=Object.setPrototypeOf;r?r(U,t):U.__proto__=t}function C(U,t){t===void 0&&(t=U.constructor);var r=Error.captureStackTrace;r&&r(U,t)}var v=(function(U){g(t,U);function t(r){var i=this.constructor,s=U.call(this,r)||this;return Object.defineProperty(s,"name",{value:i.name,enumerable:!1}),E(s,i.prototype),C(s),s}return t})(Error);class y extends v{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}y.kind="Exception";class N extends y{}N.kind="ArgumentException";class _ extends y{}_.kind="IllegalArgumentException";class R{constructor(t){if(this.binarizer=t,t===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,i,s){const l=this.binarizer.getLuminanceSource().crop(t,r,i,s);return new R(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends y{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class k{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class I{static arraycopy(t,r,i,s,l){for(;l--;)i[s++]=t[r++]}static currentTimeMillis(){return Date.now()}}class z extends y{}z.kind="IndexOutOfBoundsException";class j extends z{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}j.kind="ArrayIndexOutOfBoundsException";class P{static fill(t,r){for(let i=0,s=t.length;i<s;i++)t[i]=r}static fillWithin(t,r,i,s){P.rangeCheck(t.length,r,i);for(let l=r;l<i;l++)t[l]=s}static rangeCheck(t,r,i){if(r>i)throw new _("fromIndex("+r+") > toIndex("+i+")");if(r<0)throw new j(r);if(i>t)throw new j(i)}static asList(...t){return t}static create(t,r,i){return Array.from({length:t}).map(l=>Array.from({length:r}).fill(i))}static createInt32Array(t,r,i){return Array.from({length:t}).map(l=>Int32Array.from({length:r}).fill(i))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let i=0,s=t.length;i<s;i++)if(t[i]!==r[i])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const i of t)r=31*r+i;return r}static fillUint8Array(t,r){for(let i=0;i!==t.length;i++)t[i]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const i=new Uint8Array(r);return i.set(t),i}return t.slice(0,r)}static copyOfRange(t,r,i){const s=i-r,l=new Int32Array(s);return I.arraycopy(t,r,l,0,s),l}static binarySearch(t,r,i){i===void 0&&(i=P.numberComparator);let s=0,l=t.length-1;for(;s<=l;){const c=l+s>>1,h=i(r,t[c]);if(h>0)s=c+1;else if(h<0)l=c-1;else return c}return-s-1}static numberComparator(t,r){return t-r}}class H{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let i=31;return r=t<<16,r!==0&&(i-=16,t=r),r=t<<8,r!==0&&(i-=8,t=r),r=t<<4,r!==0&&(i-=4,t=r),r=t<<2,r!==0&&(i-=2,t=r),i-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}H.MIN_VALUE_32_BITS=-2147483648,H.MAX_VALUE=Number.MAX_SAFE_INTEGER;class K{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=K.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=K.makeArray(t);I.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const i=this.bits;let s=Math.floor(t/32),l=i[s];l&=~((1<<(t&31))-1);const c=i.length;for(;l===0;){if(++s===c)return r;l=i[s]}const h=s*32+H.numberOfTrailingZeros(l);return h>r?r:h}getNextUnset(t){const r=this.size;if(t>=r)return r;const i=this.bits;let s=Math.floor(t/32),l=~i[s];l&=~((1<<(t&31))-1);const c=i.length;for(;l===0;){if(++s===c)return r;l=~i[s]}const h=s*32+H.numberOfTrailingZeros(l);return h>r?r:h}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new _;if(r===t)return;r--;const i=Math.floor(t/32),s=Math.floor(r/32),l=this.bits;for(let c=i;c<=s;c++){const h=c>i?0:t&31,S=(2<<(c<s?31:r&31))-(1<<h);l[c]|=S}}clear(){const t=this.bits.length,r=this.bits;for(let i=0;i<t;i++)r[i]=0}isRange(t,r,i){if(r<t||t<0||r>this.size)throw new _;if(r===t)return!0;r--;const s=Math.floor(t/32),l=Math.floor(r/32),c=this.bits;for(let h=s;h<=l;h++){const b=h>s?0:t&31,O=(2<<(h<l?31:r&31))-(1<<b)&4294967295;if((c[h]&O)!==(i?O:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let i=r;i>0;i--)this.appendBit((t>>i-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let i=0;i<r;i++)this.appendBit(t.get(i))}xor(t){if(this.size!==t.size)throw new _("Sizes don't match");const r=this.bits;for(let i=0,s=r.length;i<s;i++)r[i]^=t.bits[i]}toBytes(t,r,i,s){for(let l=0;l<s;l++){let c=0;for(let h=0;h<8;h++)this.get(t)&&(c|=1<<7-h),t++;r[i+l]=c}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),i=r+1,s=this.bits;for(let l=0;l<i;l++){let c=s[l];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,t[r-l]=c}if(this.size!==i*32){const l=i*32-this.size;let c=t[0]>>>l;for(let h=1;h<i;h++){const b=t[h];c|=b<<32-l,t[h-1]=c,c=b>>>l}t[i-1]=c}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof K))return!1;const r=t;return this.size===r.size&&P.equals(this.bits,r.bits)}hashCode(){return 31*this.size+P.hashCode(this.bits)}toString(){let t="";for(let r=0,i=this.size;r<i;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new K(this.size,this.bits.slice())}}var Z;(function(U){U[U.OTHER=0]="OTHER",U[U.PURE_BARCODE=1]="PURE_BARCODE",U[U.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",U[U.TRY_HARDER=3]="TRY_HARDER",U[U.CHARACTER_SET=4]="CHARACTER_SET",U[U.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",U[U.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",U[U.ASSUME_GS1=7]="ASSUME_GS1",U[U.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",U[U.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",U[U.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var V=Z;class L extends y{static getFormatInstance(){return new L}}L.kind="FormatException";var Q;(function(U){U[U.Cp437=0]="Cp437",U[U.ISO8859_1=1]="ISO8859_1",U[U.ISO8859_2=2]="ISO8859_2",U[U.ISO8859_3=3]="ISO8859_3",U[U.ISO8859_4=4]="ISO8859_4",U[U.ISO8859_5=5]="ISO8859_5",U[U.ISO8859_6=6]="ISO8859_6",U[U.ISO8859_7=7]="ISO8859_7",U[U.ISO8859_8=8]="ISO8859_8",U[U.ISO8859_9=9]="ISO8859_9",U[U.ISO8859_10=10]="ISO8859_10",U[U.ISO8859_11=11]="ISO8859_11",U[U.ISO8859_13=12]="ISO8859_13",U[U.ISO8859_14=13]="ISO8859_14",U[U.ISO8859_15=14]="ISO8859_15",U[U.ISO8859_16=15]="ISO8859_16",U[U.SJIS=16]="SJIS",U[U.Cp1250=17]="Cp1250",U[U.Cp1251=18]="Cp1251",U[U.Cp1252=19]="Cp1252",U[U.Cp1256=20]="Cp1256",U[U.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",U[U.UTF8=22]="UTF8",U[U.ASCII=23]="ASCII",U[U.Big5=24]="Big5",U[U.GB18030=25]="GB18030",U[U.EUC_KR=26]="EUC_KR"})(Q||(Q={}));class G{constructor(t,r,i,...s){this.valueIdentifier=t,this.name=i,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=s,G.VALUE_IDENTIFIER_TO_ECI.set(t,this),G.NAME_TO_ECI.set(i,this);const l=this.values;for(let c=0,h=l.length;c!==h;c++){const b=l[c];G.VALUES_TO_ECI.set(b,this)}for(const c of s)G.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new L("incorect value");const r=G.VALUES_TO_ECI.get(t);if(r===void 0)throw new L("incorect value");return r}static getCharacterSetECIByName(t){const r=G.NAME_TO_ECI.get(t);if(r===void 0)throw new L("incorect value");return r}equals(t){if(!(t instanceof G))return!1;const r=t;return this.getName()===r.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(Q.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(Q.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(Q.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(Q.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(Q.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(Q.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(Q.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(Q.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(Q.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(Q.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(Q.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(Q.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(Q.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(Q.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(Q.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(Q.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(Q.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(Q.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(Q.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(Q.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(Q.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(Q.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(Q.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(Q.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(Q.Big5,28,"Big5"),G.GB18030=new G(Q.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(Q.EUC_KR,30,"EUC_KR","EUC-KR");class xe extends y{}xe.kind="UnsupportedOperationException";class ce{static decode(t,r){const i=this.encodingName(r);return this.customDecoder?this.customDecoder(t,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(t,i):new TextDecoder(i).decode(t)}static shouldDecodeOnFallback(t){return!ce.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const i=this.encodingName(r);return this.customEncoder?this.customEncoder(t,i):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof G?t:G.getCharacterSetECIByName(t)}static decodeFallback(t,r){const i=this.encodingCharacterSet(r);if(ce.isDecodeFallbackSupported(i)){let s="";for(let l=0,c=t.length;l<c;l++){let h=t[l].toString(16);h.length<2&&(h="0"+h),s+="%"+h}return decodeURIComponent(s)}if(i.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new xe(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(G.UTF8)||t.equals(G.ISO8859_1)||t.equals(G.ASCII)}static encodeFallback(t){const i=btoa(unescape(encodeURIComponent(t))).split(""),s=[];for(let l=0;l<i.length;l++)s.push(i[l].charCodeAt(0));return new Uint8Array(s)}}class X{static castAsNonUtf8Char(t,r=null){const i=r?r.getName():this.ISO88591;return ce.decode(new Uint8Array([t]),i)}static guessEncoding(t,r){if(r!=null&&r.get(V.CHARACTER_SET)!==void 0)return r.get(V.CHARACTER_SET).toString();const i=t.length;let s=!0,l=!0,c=!0,h=0,b=0,S=0,O=0,F=0,Y=0,se=0,ge=0,ye=0,Ae=0,Me=0;const rt=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let $e=0;$e<i&&(s||l||c);$e++){const Ze=t[$e]&255;c&&(h>0?(Ze&128)===0?c=!1:h--:(Ze&128)!==0&&((Ze&64)===0?c=!1:(h++,(Ze&32)===0?b++:(h++,(Ze&16)===0?S++:(h++,(Ze&8)===0?O++:c=!1))))),s&&(Ze>127&&Ze<160?s=!1:Ze>159&&(Ze<192||Ze===215||Ze===247)&&Me++),l&&(F>0?Ze<64||Ze===127||Ze>252?l=!1:F--:Ze===128||Ze===160||Ze>239?l=!1:Ze>160&&Ze<224?(Y++,ge=0,se++,se>ye&&(ye=se)):Ze>127?(F++,se=0,ge++,ge>Ae&&(Ae=ge)):(se=0,ge=0))}return c&&h>0&&(c=!1),l&&F>0&&(l=!1),c&&(rt||b+S+O>0)?X.UTF8:l&&(X.ASSUME_SHIFT_JIS||ye>=3||Ae>=3)?X.SHIFT_JIS:s&&l?ye===2&&Y===2||Me*10>=i?X.SHIFT_JIS:X.ISO88591:s?X.ISO88591:l?X.SHIFT_JIS:c?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let i=-1;function s(c,h,b,S,O,F){if(c==="%%")return"%";if(r[++i]===void 0)return;c=S?parseInt(S.substr(1)):void 0;let Y=O?parseInt(O.substr(1)):void 0,se;switch(F){case"s":se=r[i];break;case"c":se=r[i][0];break;case"f":se=parseFloat(r[i]).toFixed(c);break;case"p":se=parseFloat(r[i]).toPrecision(c);break;case"e":se=parseFloat(r[i]).toExponential(c);break;case"x":se=parseInt(r[i]).toString(Y||16);break;case"d":se=parseFloat(parseInt(r[i],Y||10).toPrecision(c)).toFixed(0);break}se=typeof se=="object"?JSON.stringify(se):(+se).toString(Y);let ge=parseInt(b),ye=b&&b[0]+""=="0"?"0":" ";for(;se.length<ge;)se=h!==void 0?se+ye:ye+se;return se}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,s)}static getBytes(t,r){return ce.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}X.SHIFT_JIS=G.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=G.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=G.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class ie{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=X.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,i){for(let s=r;r<r+i;s++)this.append(t[s]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class M{constructor(t,r,i,s){if(this.width=t,this.height=r,this.rowSize=i,this.bits=s,r==null&&(r=t),this.height=r,t<1||r<1)throw new _("Both dimensions must be greater than 0");i==null&&(i=Math.floor((t+31)/32)),this.rowSize=i,s==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,i=t[0].length,s=new M(i,r);for(let l=0;l<r;l++){const c=t[l];for(let h=0;h<i;h++)c[h]&&s.set(h,l)}return s}static parseFromString(t,r,i){if(t===null)throw new _("stringRepresentation cannot be null");const s=new Array(t.length);let l=0,c=0,h=-1,b=0,S=0;for(;S<t.length;)if(t.charAt(S)===`
`||t.charAt(S)==="\r"){if(l>c){if(h===-1)h=l-c;else if(l-c!==h)throw new _("row lengths do not match");c=l,b++}S++}else if(t.substring(S,S+r.length)===r)S+=r.length,s[l]=!0,l++;else if(t.substring(S,S+i.length)===i)S+=i.length,s[l]=!1,l++;else throw new _("illegal character encountered: "+t.substring(S));if(l>c){if(h===-1)h=l-c;else if(l-c!==h)throw new _("row lengths do not match");b++}const O=new M(h,b);for(let F=0;F<l;F++)s[F]&&O.set(Math.floor(F%h),Math.floor(F/h));return O}get(t,r){const i=r*this.rowSize+Math.floor(t/32);return(this.bits[i]>>>(t&31)&1)!==0}set(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]|=1<<(t&31)&4294967295}unset(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]&=~(1<<(t&31)&4294967295)}flip(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new _("input matrix dimensions do not match");const r=new K(Math.floor(this.width/32)+1),i=this.rowSize,s=this.bits;for(let l=0,c=this.height;l<c;l++){const h=l*i,b=t.getRow(l,r).getBitArray();for(let S=0;S<i;S++)s[h+S]^=b[S]}}clear(){const t=this.bits,r=t.length;for(let i=0;i<r;i++)t[i]=0}setRegion(t,r,i,s){if(r<0||t<0)throw new _("Left and top must be nonnegative");if(s<1||i<1)throw new _("Height and width must be at least 1");const l=t+i,c=r+s;if(c>this.height||l>this.width)throw new _("The region must fit inside the matrix");const h=this.rowSize,b=this.bits;for(let S=r;S<c;S++){const O=S*h;for(let F=t;F<l;F++)b[O+Math.floor(F/32)]|=1<<(F&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new K(this.width):r.clear();const i=this.rowSize,s=this.bits,l=t*i;for(let c=0;c<i;c++)r.setBulk(c*32,s[l+c]);return r}setRow(t,r){I.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let i=new K(t),s=new K(t);for(let l=0,c=Math.floor((r+1)/2);l<c;l++)i=this.getRow(l,i),s=this.getRow(r-1-l,s),i.reverse(),s.reverse(),this.setRow(l,s),this.setRow(r-1-l,i)}getEnclosingRectangle(){const t=this.width,r=this.height,i=this.rowSize,s=this.bits;let l=t,c=r,h=-1,b=-1;for(let S=0;S<r;S++)for(let O=0;O<i;O++){const F=s[S*i+O];if(F!==0){if(S<c&&(c=S),S>b&&(b=S),O*32<l){let Y=0;for(;(F<<31-Y&4294967295)===0;)Y++;O*32+Y<l&&(l=O*32+Y)}if(O*32+31>h){let Y=31;for(;!(F>>>Y);)Y--;O*32+Y>h&&(h=O*32+Y)}}}return h<l||b<c?null:Int32Array.from([l,c,h-l+1,b-c+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let i=0;for(;i<r.length&&r[i]===0;)i++;if(i===r.length)return null;const s=i/t;let l=i%t*32;const c=r[i];let h=0;for(;(c<<31-h&4294967295)===0;)h++;return l+=h,Int32Array.from([l,s])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let i=r.length-1;for(;i>=0&&r[i]===0;)i--;if(i<0)return null;const s=Math.floor(i/t);let l=Math.floor(i%t)*32;const c=r[i];let h=31;for(;!(c>>>h);)h--;return l+=h,Int32Array.from([l,s])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof M))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&P.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+P.hashCode(this.bits),t}toString(t="X ",r="  ",i=`
`){return this.buildToString(t,r,i)}buildToString(t,r,i){let s=new ie;for(let l=0,c=this.height;l<c;l++){for(let h=0,b=this.width;h<b;h++)s.append(this.get(h,l)?t:r);s.append(i)}return s.toString()}clone(){return new M(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends y{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class me extends k{constructor(t){super(t),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(t,r){const i=this.getLuminanceSource(),s=i.getWidth();r==null||r.getSize()<s?r=new K(s):r.clear(),this.initArrays(s);const l=i.getRow(t,this.luminances),c=this.buckets;for(let b=0;b<s;b++)c[(l[b]&255)>>me.LUMINANCE_SHIFT]++;const h=me.estimateBlackPoint(c);if(s<3)for(let b=0;b<s;b++)(l[b]&255)<h&&r.set(b);else{let b=l[0]&255,S=l[1]&255;for(let O=1;O<s-1;O++){const F=l[O+1]&255;(S*4-b-F)/2<h&&r.set(O),b=S,S=F}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),s=new M(r,i);this.initArrays(r);const l=this.buckets;for(let b=1;b<5;b++){const S=Math.floor(i*b/5),O=t.getRow(S,this.luminances),F=Math.floor(r*4/5);for(let Y=Math.floor(r/5);Y<F;Y++){const se=O[Y]&255;l[se>>me.LUMINANCE_SHIFT]++}}const c=me.estimateBlackPoint(l),h=t.getMatrix();for(let b=0;b<i;b++){const S=b*r;for(let O=0;O<r;O++)(h[S+O]&255)<c&&s.set(O,b)}return s}createBinarizer(t){return new me(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let i=0;i<me.LUMINANCE_BUCKETS;i++)r[i]=0}static estimateBlackPoint(t){const r=t.length;let i=0,s=0,l=0;for(let O=0;O<r;O++)t[O]>l&&(s=O,l=t[O]),t[O]>i&&(i=t[O]);let c=0,h=0;for(let O=0;O<r;O++){const F=O-s,Y=t[O]*F*F;Y>h&&(c=O,h=Y)}if(s>c){const O=s;s=c,c=O}if(c-s<=r/16)throw new ae;let b=c-1,S=-1;for(let O=c-1;O>s;O--){const F=O-s,Y=F*F*(c-O)*(i-t[O]);Y>S&&(b=O,S=Y)}return b<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class re extends me{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=re.MINIMUM_DIMENSION&&i>=re.MINIMUM_DIMENSION){const s=t.getMatrix();let l=r>>re.BLOCK_SIZE_POWER;(r&re.BLOCK_SIZE_MASK)!==0&&l++;let c=i>>re.BLOCK_SIZE_POWER;(i&re.BLOCK_SIZE_MASK)!==0&&c++;const h=re.calculateBlackPoints(s,l,c,r,i),b=new M(r,i);re.calculateThresholdForBlock(s,l,c,r,i,h,b),this.matrix=b}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new re(t)}static calculateThresholdForBlock(t,r,i,s,l,c,h){const b=l-re.BLOCK_SIZE,S=s-re.BLOCK_SIZE;for(let O=0;O<i;O++){let F=O<<re.BLOCK_SIZE_POWER;F>b&&(F=b);const Y=re.cap(O,2,i-3);for(let se=0;se<r;se++){let ge=se<<re.BLOCK_SIZE_POWER;ge>S&&(ge=S);const ye=re.cap(se,2,r-3);let Ae=0;for(let rt=-2;rt<=2;rt++){const $e=c[Y+rt];Ae+=$e[ye-2]+$e[ye-1]+$e[ye]+$e[ye+1]+$e[ye+2]}const Me=Ae/25;re.thresholdBlock(t,ge,F,Me,s,h)}}}static cap(t,r,i){return t<r?r:t>i?i:t}static thresholdBlock(t,r,i,s,l,c){for(let h=0,b=i*l+r;h<re.BLOCK_SIZE;h++,b+=l)for(let S=0;S<re.BLOCK_SIZE;S++)(t[b+S]&255)<=s&&c.set(r+S,i+h)}static calculateBlackPoints(t,r,i,s,l){const c=l-re.BLOCK_SIZE,h=s-re.BLOCK_SIZE,b=new Array(i);for(let S=0;S<i;S++){b[S]=new Int32Array(r);let O=S<<re.BLOCK_SIZE_POWER;O>c&&(O=c);for(let F=0;F<r;F++){let Y=F<<re.BLOCK_SIZE_POWER;Y>h&&(Y=h);let se=0,ge=255,ye=0;for(let Me=0,rt=O*s+Y;Me<re.BLOCK_SIZE;Me++,rt+=s){for(let $e=0;$e<re.BLOCK_SIZE;$e++){const Ze=t[rt+$e]&255;se+=Ze,Ze<ge&&(ge=Ze),Ze>ye&&(ye=Ze)}if(ye-ge>re.MIN_DYNAMIC_RANGE)for(Me++,rt+=s;Me<re.BLOCK_SIZE;Me++,rt+=s)for(let $e=0;$e<re.BLOCK_SIZE;$e++)se+=t[rt+$e]&255}let Ae=se>>re.BLOCK_SIZE_POWER*2;if(ye-ge<=re.MIN_DYNAMIC_RANGE&&(Ae=ge/2,S>0&&F>0)){const Me=(b[S-1][F]+2*b[S][F-1]+b[S-1][F-1])/4;ge<Me&&(Ae=Me)}b[S][F]=Ae}}return b}}re.BLOCK_SIZE_POWER=3,re.BLOCK_SIZE=1<<re.BLOCK_SIZE_POWER,re.BLOCK_SIZE_MASK=re.BLOCK_SIZE-1,re.MINIMUM_DIMENSION=re.BLOCK_SIZE*5,re.MIN_DYNAMIC_RANGE=24;class Ye{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,i,s){throw new xe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new xe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new xe("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new ie;for(let i=0;i<this.height;i++){const s=this.getRow(i,t);for(let l=0;l<this.width;l++){const c=s[l]&255;let h;c<64?h="#":c<128?h="+":c<192?h=".":h=" ",r.append(h)}r.append(`
`)}return r.toString()}}class ke extends Ye{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const i=this.delegate.getRow(t,r),s=this.getWidth();for(let l=0;l<s;l++)i[l]=255-(i[l]&255);return i}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r);for(let s=0;s<r;s++)i[s]=255-(t[s]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,i,s){return new ke(this.delegate.crop(t,r,i,s))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ke(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ke(this.delegate.rotateCounterClockwise45())}}class Je extends Ye{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Je.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return Je.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,i){const s=new Uint8ClampedArray(r*i);for(let l=0,c=0,h=t.length;l<h;l+=4,c++){let b;if(t[l+3]===0)b=255;else{const O=t[l],F=t[l+1],Y=t[l+2];b=306*O+601*F+117*Y+512>>10}s[c]=b}return s}getRow(t,r){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);const i=this.getWidth(),s=t*i;return r===null?r=this.buffer.slice(s,s+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(s,s+i))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,i,s){return super.crop(t,r,i,s),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),i=r.getContext("2d"),s=t*Je.DEGREE_TO_RADIANS,l=this.canvas.width,c=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(s))*l+Math.abs(Math.sin(s))*c),b=Math.ceil(Math.abs(Math.sin(s))*l+Math.abs(Math.cos(s))*c);return r.width=h,r.height=b,i.translate(h/2,b/2),i.rotate(s),i.drawImage(this.canvas,l/-2,c/-2),this.buffer=Je.makeBufferFromCanvasImageData(r),this}invert(){return new ke(this)}}Je.DEGREE_TO_RADIANS=Math.PI/180;class q{constructor(t,r,i){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ne=(globalThis||li||self||window||void 0)&&(globalThis||li||self||window||void 0).__awaiter||function(U,t,r,i){function s(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function h(O){try{S(i.next(O))}catch(F){c(F)}}function b(O){try{S(i.throw(O))}catch(F){c(F)}}function S(O){O.done?l(O.value):s(O.value).then(h,b)}S((i=i.apply(U,t||[])).next())})};class Oe{constructor(t,r=500,i){this.reader=t,this.timeBetweenScansMillis=r,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return ne(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const i of t){const s=i.kind==="video"?"videoinput":i.kind;if(s!=="videoinput")continue;const l=i.deviceId||i.id,c=i.label||`Video device ${r.length+1}`,h=i.groupId,b={deviceId:l,label:c,kind:s,groupId:h};r.push(b)}return r})}getVideoInputDevices(){return ne(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new q(r.deviceId,r.label))})}findDeviceById(t){return ne(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(i=>i.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return ne(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return ne(this,void 0,void 0,function*(){this.reset();let i;t?i={deviceId:{exact:t}}:i={facingMode:"environment"};const s={video:i};return yield this.decodeOnceFromConstraints(s,r)})}decodeOnceFromConstraints(t,r){return ne(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(i,r)})}decodeOnceFromStream(t,r){return ne(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(t,r,i){return ne(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,i)})}decodeFromVideoDevice(t,r,i){return ne(this,void 0,void 0,function*(){let s;t?s={deviceId:{exact:t}}:s={facingMode:"environment"};const l={video:s};return yield this.decodeFromConstraints(l,r,i)})}decodeFromConstraints(t,r,i){return ne(this,void 0,void 0,function*(){const s=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(s,r,i)})}decodeFromStream(t,r,i){return ne(this,void 0,void 0,function*(){this.reset();const s=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(s,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return ne(this,void 0,void 0,function*(){const i=this.prepareVideoElement(r);return this.addVideoSource(i,t),this.videoElement=i,this.stream=t,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(t){return new Promise((r,i)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return ne(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const i=document.getElementById(t);if(!i)throw new N(`element with id '${t}' not found`);if(i.nodeName.toLowerCase()!==r.toLowerCase())throw new N(`element with id '${t}' must be an ${r} element`);return i}decodeFromImage(t,r){if(!t&&!r)throw new N("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new N("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,i){if(t===void 0&&r===void 0)throw new N("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,i):this.decodeFromVideoElementContinuously(t,i)}decodeFromImageElement(t){if(!t)throw new N("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let i;return this.isImageLoaded(r)?i=this.decodeOnce(r,!1,!0):i=this._decodeOnLoadImage(r),i}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(i,r)}_decodeFromVideoElementSetup(t){if(!t)throw new N("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const i=this._decodeOnLoadImage(r);return r.src=t,i}decodeFromVideoUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElement(r);return r.src=t,i}decodeFromVideoUrlContinuously(t,r){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),s=this.decodeFromVideoElementContinuously(i,r);return i.src=t,s}_decodeOnLoadImage(t){return new Promise((r,i)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,i),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return ne(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return ne(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,i=!0){this._stopAsyncDecode=!1;const s=(l,c)=>{if(this._stopAsyncDecode){c(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(t);l(h)}catch(h){const b=r&&h instanceof ae,O=(h instanceof T||h instanceof L)&&i;if(b||O)return setTimeout(s,this._timeBetweenDecodingAttempts,l,c);c(h)}};return new Promise((l,c)=>s(l,c))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const s=this.decode(t);r(s,null),setTimeout(i,this.timeBetweenScansMillis)}catch(s){r(null,s);const l=s instanceof T||s instanceof L,c=s instanceof ae;(l||c)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,i){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,i=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),i=new Je(r),s=new re(i);return new R(s)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let i,s;return typeof t<"u"&&(t instanceof HTMLVideoElement?(i=t.videoWidth,s=t.videoHeight):t instanceof HTMLImageElement&&(i=t.naturalWidth||t.width,s=t.naturalHeight||t.height)),r.style.width=i+"px",r.style.height=s+"px",r.width=i,r.height=s,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Te{constructor(t,r,i=r==null?0:8*r.length,s,l,c=I.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=i,this.resultPoints=s,this.format=l,this.timestamp=c,this.text=t,this.rawBytes=r,i==null?this.numBits=r==null?0:8*r.length:this.numBits=i,this.resultPoints=s,this.format=l,this.resultMetadata=null,c==null?this.timestamp=I.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const i=new Array(r.length+t.length);I.arraycopy(r,0,i,0,r.length),I.arraycopy(t,0,i,r.length,t.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var je;(function(U){U[U.AZTEC=0]="AZTEC",U[U.CODABAR=1]="CODABAR",U[U.CODE_39=2]="CODE_39",U[U.CODE_93=3]="CODE_93",U[U.CODE_128=4]="CODE_128",U[U.DATA_MATRIX=5]="DATA_MATRIX",U[U.EAN_8=6]="EAN_8",U[U.EAN_13=7]="EAN_13",U[U.ITF=8]="ITF",U[U.MAXICODE=9]="MAXICODE",U[U.PDF_417=10]="PDF_417",U[U.QR_CODE=11]="QR_CODE",U[U.RSS_14=12]="RSS_14",U[U.RSS_EXPANDED=13]="RSS_EXPANDED",U[U.UPC_A=14]="UPC_A",U[U.UPC_E=15]="UPC_E",U[U.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(je||(je={}));var ze=je,ct;(function(U){U[U.OTHER=0]="OTHER",U[U.ORIENTATION=1]="ORIENTATION",U[U.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",U[U.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",U[U.ISSUE_NUMBER=4]="ISSUE_NUMBER",U[U.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",U[U.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",U[U.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",U[U.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",U[U.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",U[U.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ct||(ct={}));var nt=ct;class st{constructor(t,r,i,s,l=-1,c=-1){this.rawBytes=t,this.text=r,this.byteSegments=i,this.ecLevel=s,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=c,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ut{exp(t){return this.expTable[t]}log(t){if(t===0)throw new _;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Ct{constructor(t,r){if(r.length===0)throw new _;this.field=t;const i=r.length;if(i>1&&r[0]===0){let s=1;for(;s<i&&r[s]===0;)s++;s===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-s),I.arraycopy(r,s,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let i;if(t===1){i=0;for(let c=0,h=r.length;c!==h;c++){const b=r[c];i=ut.addOrSubtract(i,b)}return i}i=r[0];const s=r.length,l=this.field;for(let c=1;c<s;c++)i=ut.addOrSubtract(l.multiply(t,i),r[c]);return i}addOrSubtract(t){if(!this.field.equals(t.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,i=t.coefficients;if(r.length>i.length){const c=r;r=i,i=c}let s=new Int32Array(i.length);const l=i.length-r.length;I.arraycopy(i,0,s,0,l);for(let c=l;c<i.length;c++)s[c]=ut.addOrSubtract(r[c-l],i[c]);return new Ct(this.field,s)}multiply(t){if(!this.field.equals(t.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,i=r.length,s=t.coefficients,l=s.length,c=new Int32Array(i+l-1),h=this.field;for(let b=0;b<i;b++){const S=r[b];for(let O=0;O<l;O++)c[b+O]=ut.addOrSubtract(c[b+O],h.multiply(S,s[O]))}return new Ct(h,c)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,i=this.field,s=new Int32Array(r),l=this.coefficients;for(let c=0;c<r;c++)s[c]=i.multiply(l[c],t);return new Ct(i,s)}multiplyByMonomial(t,r){if(t<0)throw new _;if(r===0)return this.field.getZero();const i=this.coefficients,s=i.length,l=new Int32Array(s+t),c=this.field;for(let h=0;h<s;h++)l[h]=c.multiply(i[h],r);return new Ct(c,l)}divide(t){if(!this.field.equals(t.field))throw new _("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new _("Divide by 0");const r=this.field;let i=r.getZero(),s=this;const l=t.getCoefficient(t.getDegree()),c=r.inverse(l);for(;s.getDegree()>=t.getDegree()&&!s.isZero();){const h=s.getDegree()-t.getDegree(),b=r.multiply(s.getCoefficient(s.getDegree()),c),S=t.multiplyByMonomial(h,b),O=r.buildMonomial(h,b);i=i.addOrSubtract(O),s=s.addOrSubtract(S)}return[i,s]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);if(i!==0){if(i<0?(t+=" - ",i=-i):t.length>0&&(t+=" + "),r===0||i!==1){const s=this.field.log(i);s===0?t+="1":s===1?t+="a":(t+="a^",t+=s)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class Qt extends y{}Qt.kind="ArithmeticException";class xt extends ut{constructor(t,r,i){super(),this.primitive=t,this.size=r,this.generatorBase=i;const s=new Int32Array(r);let l=1;for(let h=0;h<r;h++)s[h]=l,l*=2,l>=r&&(l^=t,l&=r-1);this.expTable=s;const c=new Int32Array(r);for(let h=0;h<r-1;h++)c[s[h]]=h;this.logTable=c,this.zero=new Ct(this,Int32Array.from([0])),this.one=new Ct(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new _;if(r===0)return this.zero;const i=new Int32Array(t+1);return i[0]=r,new Ct(this,i)}inverse(t){if(t===0)throw new Qt;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+H.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}xt.AZTEC_DATA_12=new xt(4201,4096,1),xt.AZTEC_DATA_10=new xt(1033,1024,1),xt.AZTEC_DATA_6=new xt(67,64,1),xt.AZTEC_PARAM=new xt(19,16,1),xt.QR_CODE_FIELD_256=new xt(285,256,0),xt.DATA_MATRIX_FIELD_256=new xt(301,256,1),xt.AZTEC_DATA_8=xt.DATA_MATRIX_FIELD_256,xt.MAXICODE_FIELD_64=xt.AZTEC_DATA_6;class D extends y{}D.kind="ReedSolomonException";class Ne extends y{}Ne.kind="IllegalStateException";class _e{constructor(t){this.field=t}decode(t,r){const i=this.field,s=new Ct(i,t),l=new Int32Array(r);let c=!0;for(let se=0;se<r;se++){const ge=s.evaluateAt(i.exp(se+i.getGeneratorBase()));l[l.length-1-se]=ge,ge!==0&&(c=!1)}if(c)return;const h=new Ct(i,l),b=this.runEuclideanAlgorithm(i.buildMonomial(r,1),h,r),S=b[0],O=b[1],F=this.findErrorLocations(S),Y=this.findErrorMagnitudes(O,F);for(let se=0;se<F.length;se++){const ge=t.length-1-i.log(F[se]);if(ge<0)throw new D("Bad error location");t[ge]=xt.addOrSubtract(t[ge],Y[se])}}runEuclideanAlgorithm(t,r,i){if(t.getDegree()<r.getDegree()){const se=t;t=r,r=se}const s=this.field;let l=t,c=r,h=s.getZero(),b=s.getOne();for(;c.getDegree()>=(i/2|0);){let se=l,ge=h;if(l=c,h=b,l.isZero())throw new D("r_{i-1} was zero");c=se;let ye=s.getZero();const Ae=l.getCoefficient(l.getDegree()),Me=s.inverse(Ae);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){const rt=c.getDegree()-l.getDegree(),$e=s.multiply(c.getCoefficient(c.getDegree()),Me);ye=ye.addOrSubtract(s.buildMonomial(rt,$e)),c=c.addOrSubtract(l.multiplyByMonomial(rt,$e))}if(b=ye.multiply(h).addOrSubtract(ge),c.getDegree()>=l.getDegree())throw new Ne("Division algorithm failed to reduce polynomial?")}const S=b.getCoefficient(0);if(S===0)throw new D("sigmaTilde(0) was zero");const O=s.inverse(S),F=b.multiplyScalar(O),Y=c.multiplyScalar(O);return[F,Y]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const i=new Int32Array(r);let s=0;const l=this.field;for(let c=1;c<l.getSize()&&s<r;c++)t.evaluateAt(c)===0&&(i[s]=l.inverse(c),s++);if(s!==r)throw new D("Error locator degree does not match number of roots");return i}findErrorMagnitudes(t,r){const i=r.length,s=new Int32Array(i),l=this.field;for(let c=0;c<i;c++){const h=l.inverse(r[c]);let b=1;for(let S=0;S<i;S++)if(c!==S){const O=l.multiply(r[S],h),F=(O&1)===0?O|1:O&-2;b=l.multiply(b,F)}s[c]=l.multiply(t.evaluateAt(h),l.inverse(b)),l.getGeneratorBase()!==0&&(s[c]=l.multiply(s[c],h))}return s}}var le;(function(U){U[U.UPPER=0]="UPPER",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.DIGIT=3]="DIGIT",U[U.PUNCT=4]="PUNCT",U[U.BINARY=5]="BINARY"})(le||(le={}));class te{decode(t){this.ddata=t;let r=t.getBits(),i=this.extractBits(r),s=this.correctBits(i),l=te.convertBoolArrayToByteArray(s),c=te.getEncodedData(s),h=new st(l,c,null,null);return h.setNumBits(s.length),h}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,i=le.UPPER,s=le.UPPER,l="",c=0;for(;c<r;)if(s===le.BINARY){if(r-c<5)break;let h=te.readCode(t,c,5);if(c+=5,h===0){if(r-c<11)break;h=te.readCode(t,c,11)+31,c+=11}for(let b=0;b<h;b++){if(r-c<8){c=r;break}const S=te.readCode(t,c,8);l+=X.castAsNonUtf8Char(S),c+=8}s=i}else{let h=s===le.DIGIT?4:5;if(r-c<h)break;let b=te.readCode(t,c,h);c+=h;let S=te.getCharacter(s,b);S.startsWith("CTRL_")?(i=s,s=te.getTable(S.charAt(5)),S.charAt(6)==="L"&&(i=s)):(l+=S,s=i)}return l}static getTable(t){switch(t){case"L":return le.LOWER;case"P":return le.PUNCT;case"M":return le.MIXED;case"D":return le.DIGIT;case"B":return le.BINARY;default:return le.UPPER}}static getCharacter(t,r){switch(t){case le.UPPER:return te.UPPER_TABLE[r];case le.LOWER:return te.LOWER_TABLE[r];case le.MIXED:return te.MIXED_TABLE[r];case le.PUNCT:return te.PUNCT_TABLE[r];case le.DIGIT:return te.DIGIT_TABLE[r];default:throw new Ne("Bad table")}}correctBits(t){let r,i;this.ddata.getNbLayers()<=2?(i=6,r=xt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,r=xt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,r=xt.AZTEC_DATA_10):(i=12,r=xt.AZTEC_DATA_12);let s=this.ddata.getNbDatablocks(),l=t.length/i;if(l<s)throw new L;let c=t.length%i,h=new Int32Array(l);for(let Y=0;Y<l;Y++,c+=i)h[Y]=te.readCode(t,c,i);try{new _e(r).decode(h,l-s)}catch(Y){throw new L(Y)}let b=(1<<i)-1,S=0;for(let Y=0;Y<s;Y++){let se=h[Y];if(se===0||se===b)throw new L;(se===1||se===b-1)&&S++}let O=new Array(s*i-S),F=0;for(let Y=0;Y<s;Y++){let se=h[Y];if(se===1||se===b-1)O.fill(se>1,F,F+i-1),F+=i-1;else for(let ge=i-1;ge>=0;--ge)O[F++]=(se&1<<ge)!==0}return O}extractBits(t){let r=this.ddata.isCompact(),i=this.ddata.getNbLayers(),s=(r?11:14)+i*4,l=new Int32Array(s),c=new Array(this.totalBitsInLayer(i,r));if(r)for(let h=0;h<l.length;h++)l[h]=h;else{let h=s+1+2*H.truncDivision(H.truncDivision(s,2)-1,15),b=s/2,S=H.truncDivision(h,2);for(let O=0;O<b;O++){let F=O+H.truncDivision(O,15);l[b-O-1]=S-F-1,l[b+O]=S+F+1}}for(let h=0,b=0;h<i;h++){let S=(i-h)*4+(r?9:12),O=h*2,F=s-1-O;for(let Y=0;Y<S;Y++){let se=Y*2;for(let ge=0;ge<2;ge++)c[b+se+ge]=t.get(l[O+ge],l[O+Y]),c[b+2*S+se+ge]=t.get(l[O+Y],l[F-ge]),c[b+4*S+se+ge]=t.get(l[F-ge],l[F-Y]),c[b+6*S+se+ge]=t.get(l[F-Y],l[O+ge])}b+=S*8}return c}static readCode(t,r,i){let s=0;for(let l=r;l<r+i;l++)s<<=1,t[l]&&(s|=1);return s}static readByte(t,r){let i=t.length-r;return i>=8?te.readCode(t,r,8):te.readCode(t,r,i)<<8-i}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let i=0;i<r.length;i++)r[i]=te.readByte(t,8*i);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}te.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],te.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],te.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],te.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],te.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class he{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,i,s){const l=t-i,c=r-s;return Math.sqrt(l*l+c*c)}static sum(t){let r=0;for(let i=0,s=t.length;i!==s;i++){const l=t[i];r+=l}return r}}class Pe{static floatToIntBits(t){return t}}Pe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ee{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ee){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Pe.floatToIntBits(this.x)+Pe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),i=this.distance(t[1],t[2]),s=this.distance(t[0],t[2]);let l,c,h;if(i>=r&&i>=s?(c=t[0],l=t[1],h=t[2]):s>=i&&s>=r?(c=t[1],l=t[0],h=t[2]):(c=t[2],l=t[0],h=t[1]),this.crossProductZ(l,c,h)<0){const b=l;l=h,h=b}t[0]=l,t[1]=c,t[2]=h}static distance(t,r){return he.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,i){const s=r.x,l=r.y;return(i.x-s)*(t.y-l)-(i.y-l)*(t.x-s)}}class Se{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class et extends Se{constructor(t,r,i,s,l){super(t,r),this.compact=i,this.nbDatablocks=s,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class tt{constructor(t,r,i,s){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=tt.INIT_SIZE),i==null&&(i=t.getWidth()/2|0),s==null&&(s=t.getHeight()/2|0);const l=r/2|0;if(this.leftInit=i-l,this.rightInit=i+l,this.upInit=s-l,this.downInit=s+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let t=this.leftInit,r=this.rightInit,i=this.upInit,s=this.downInit,l=!1,c=!0,h=!1,b=!1,S=!1,O=!1,F=!1;const Y=this.width,se=this.height;for(;c;){c=!1;let ge=!0;for(;(ge||!b)&&r<Y;)ge=this.containsBlackPoint(i,s,r,!1),ge?(r++,c=!0,b=!0):b||r++;if(r>=Y){l=!0;break}let ye=!0;for(;(ye||!S)&&s<se;)ye=this.containsBlackPoint(t,r,s,!0),ye?(s++,c=!0,S=!0):S||s++;if(s>=se){l=!0;break}let Ae=!0;for(;(Ae||!O)&&t>=0;)Ae=this.containsBlackPoint(i,s,t,!1),Ae?(t--,c=!0,O=!0):O||t--;if(t<0){l=!0;break}let Me=!0;for(;(Me||!F)&&i>=0;)Me=this.containsBlackPoint(t,r,i,!0),Me?(i--,c=!0,F=!0):F||i--;if(i<0){l=!0;break}c&&(h=!0)}if(!l&&h){const ge=r-t;let ye=null;for(let $e=1;ye===null&&$e<ge;$e++)ye=this.getBlackPointOnSegment(t,s-$e,t+$e,s);if(ye==null)throw new ae;let Ae=null;for(let $e=1;Ae===null&&$e<ge;$e++)Ae=this.getBlackPointOnSegment(t,i+$e,t+$e,i);if(Ae==null)throw new ae;let Me=null;for(let $e=1;Me===null&&$e<ge;$e++)Me=this.getBlackPointOnSegment(r,i+$e,r-$e,i);if(Me==null)throw new ae;let rt=null;for(let $e=1;rt===null&&$e<ge;$e++)rt=this.getBlackPointOnSegment(r,s-$e,r-$e,s);if(rt==null)throw new ae;return this.centerEdges(rt,ye,Me,Ae)}else throw new ae}getBlackPointOnSegment(t,r,i,s){const l=he.round(he.distance(t,r,i,s)),c=(i-t)/l,h=(s-r)/l,b=this.image;for(let S=0;S<l;S++){const O=he.round(t+S*c),F=he.round(r+S*h);if(b.get(O,F))return new Ee(O,F)}return null}centerEdges(t,r,i,s){const l=t.getX(),c=t.getY(),h=r.getX(),b=r.getY(),S=i.getX(),O=i.getY(),F=s.getX(),Y=s.getY(),se=tt.CORR;return l<this.width/2?[new Ee(F-se,Y+se),new Ee(h+se,b+se),new Ee(S-se,O-se),new Ee(l+se,c-se)]:[new Ee(F+se,Y+se),new Ee(h+se,b-se),new Ee(S-se,O+se),new Ee(l-se,c-se)]}containsBlackPoint(t,r,i,s){const l=this.image;if(s){for(let c=t;c<=r;c++)if(l.get(c,i))return!0}else for(let c=t;c<=r;c++)if(l.get(i,c))return!0;return!1}}tt.INIT_SIZE=10,tt.CORR=1;class it{static checkAndNudgePoints(t,r){const i=t.getWidth(),s=t.getHeight();let l=!0;for(let c=0;c<r.length&&l;c+=2){const h=Math.floor(r[c]),b=Math.floor(r[c+1]);if(h<-1||h>i||b<-1||b>s)throw new ae;l=!1,h===-1?(r[c]=0,l=!0):h===i&&(r[c]=i-1,l=!0),b===-1?(r[c+1]=0,l=!0):b===s&&(r[c+1]=s-1,l=!0)}l=!0;for(let c=r.length-2;c>=0&&l;c-=2){const h=Math.floor(r[c]),b=Math.floor(r[c+1]);if(h<-1||h>i||b<-1||b>s)throw new ae;l=!1,h===-1?(r[c]=0,l=!0):h===i&&(r[c]=i-1,l=!0),b===-1?(r[c+1]=0,l=!0):b===s&&(r[c+1]=s-1,l=!0)}}}class ot{constructor(t,r,i,s,l,c,h,b,S){this.a11=t,this.a21=r,this.a31=i,this.a12=s,this.a22=l,this.a32=c,this.a13=h,this.a23=b,this.a33=S}static quadrilateralToQuadrilateral(t,r,i,s,l,c,h,b,S,O,F,Y,se,ge,ye,Ae){const Me=ot.quadrilateralToSquare(t,r,i,s,l,c,h,b);return ot.squareToQuadrilateral(S,O,F,Y,se,ge,ye,Ae).times(Me)}transformPoints(t){const r=t.length,i=this.a11,s=this.a12,l=this.a13,c=this.a21,h=this.a22,b=this.a23,S=this.a31,O=this.a32,F=this.a33;for(let Y=0;Y<r;Y+=2){const se=t[Y],ge=t[Y+1],ye=l*se+b*ge+F;t[Y]=(i*se+c*ge+S)/ye,t[Y+1]=(s*se+h*ge+O)/ye}}transformPointsWithValues(t,r){const i=this.a11,s=this.a12,l=this.a13,c=this.a21,h=this.a22,b=this.a23,S=this.a31,O=this.a32,F=this.a33,Y=t.length;for(let se=0;se<Y;se++){const ge=t[se],ye=r[se],Ae=l*ge+b*ye+F;t[se]=(i*ge+c*ye+S)/Ae,r[se]=(s*ge+h*ye+O)/Ae}}static squareToQuadrilateral(t,r,i,s,l,c,h,b){const S=t-i+l-h,O=r-s+c-b;if(S===0&&O===0)return new ot(i-t,l-i,t,s-r,c-s,r,0,0,1);{const F=i-l,Y=h-l,se=s-c,ge=b-c,ye=F*ge-Y*se,Ae=(S*ge-Y*O)/ye,Me=(F*O-S*se)/ye;return new ot(i-t+Ae*i,h-t+Me*h,t,s-r+Ae*s,b-r+Me*b,r,Ae,Me,1)}}static quadrilateralToSquare(t,r,i,s,l,c,h,b){return ot.squareToQuadrilateral(t,r,i,s,l,c,h,b).buildAdjoint()}buildAdjoint(){return new ot(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new ot(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class It extends it{sampleGrid(t,r,i,s,l,c,h,b,S,O,F,Y,se,ge,ye,Ae,Me,rt,$e){const Ze=ot.quadrilateralToQuadrilateral(s,l,c,h,b,S,O,F,Y,se,ge,ye,Ae,Me,rt,$e);return this.sampleGridWithTransform(t,r,i,Ze)}sampleGridWithTransform(t,r,i,s){if(r<=0||i<=0)throw new ae;const l=new M(r,i),c=new Float32Array(2*r);for(let h=0;h<i;h++){const b=c.length,S=h+.5;for(let O=0;O<b;O+=2)c[O]=O/2+.5,c[O+1]=S;s.transformPoints(c),it.checkAndNudgePoints(t,c);try{for(let O=0;O<b;O+=2)t.get(Math.floor(c[O]),Math.floor(c[O+1]))&&l.set(O/2,h)}catch{throw new ae}}return l}}class pt{static setGridSampler(t){pt.gridSampler=t}static getInstance(){return pt.gridSampler}}pt.gridSampler=new It;class kt{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new Ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class dr{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),i=this.getBullsEyeCorners(r);if(t){let c=i[0];i[0]=i[2],i[2]=c}this.extractParameters(i);let s=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),l=this.getMatrixCornerPoints(i);return new et(s,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ae;let r=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(i,r);let s=0;for(let c=0;c<4;c++){let h=i[(this.shift+c)%4];this.compact?(s<<=7,s+=h>>1&127):(s<<=10,s+=(h>>2&992)+(h>>1&31))}let l=this.getCorrectedParameterData(s,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(t,r){let i=0;t.forEach((s,l,c)=>{let h=(s>>r-2<<1)+(s&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let s=0;s<4;s++)if(H.bitCount(i^this.EXPECTED_CORNER_BITS[s])<=2)return s;throw new ae}getCorrectedParameterData(t,r){let i,s;r?(i=7,s=2):(i=10,s=4);let l=i-s,c=new Int32Array(i);for(let b=i-1;b>=0;--b)c[b]=t&15,t>>=4;try{new _e(xt.AZTEC_PARAM).decode(c,l)}catch{throw new ae}let h=0;for(let b=0;b<s;b++)h=(h<<4)+c[b];return h}getBullsEyeCorners(t){let r=t,i=t,s=t,l=t,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let F=this.getFirstDifferent(r,c,1,-1),Y=this.getFirstDifferent(i,c,1,1),se=this.getFirstDifferent(s,c,-1,1),ge=this.getFirstDifferent(l,c,-1,-1);if(this.nbCenterLayers>2){let ye=this.distancePoint(ge,F)*this.nbCenterLayers/(this.distancePoint(l,r)*(this.nbCenterLayers+2));if(ye<.75||ye>1.25||!this.isWhiteOrBlackRectangle(F,Y,se,ge))break}r=F,i=Y,s=se,l=ge,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let h=new Ee(r.getX()+.5,r.getY()-.5),b=new Ee(i.getX()+.5,i.getY()+.5),S=new Ee(s.getX()-.5,s.getY()+.5),O=new Ee(l.getX()-.5,l.getY()-.5);return this.expandSquare([h,b,S,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,i,s;try{let h=new tt(this.image).detect();t=h[0],r=h[1],i=h[2],s=h[3]}catch{let b=this.image.getWidth()/2,S=this.image.getHeight()/2;t=this.getFirstDifferent(new kt(b+7,S-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new kt(b+7,S+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new kt(b-7,S+7),!1,-1,1).toResultPoint(),s=this.getFirstDifferent(new kt(b-7,S-7),!1,-1,-1).toResultPoint()}let l=he.round((t.getX()+s.getX()+r.getX()+i.getX())/4),c=he.round((t.getY()+s.getY()+r.getY()+i.getY())/4);try{let h=new tt(this.image,15,l,c).detect();t=h[0],r=h[1],i=h[2],s=h[3]}catch{t=this.getFirstDifferent(new kt(l+7,c-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new kt(l+7,c+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new kt(l-7,c+7),!1,-1,1).toResultPoint(),s=this.getFirstDifferent(new kt(l-7,c-7),!1,-1,-1).toResultPoint()}return l=he.round((t.getX()+s.getX()+r.getX()+i.getX())/4),c=he.round((t.getY()+s.getY()+r.getY()+i.getY())/4),new kt(l,c)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,i,s,l){let c=pt.getInstance(),h=this.getDimension(),b=h/2-this.nbCenterLayers,S=h/2+this.nbCenterLayers;return c.sampleGrid(t,h,h,b,b,S,b,S,S,b,S,r.getX(),r.getY(),i.getX(),i.getY(),s.getX(),s.getY(),l.getX(),l.getY())}sampleLine(t,r,i){let s=0,l=this.distanceResultPoint(t,r),c=l/i,h=t.getX(),b=t.getY(),S=c*(r.getX()-t.getX())/l,O=c*(r.getY()-t.getY())/l;for(let F=0;F<i;F++)this.image.get(he.round(h+F*S),he.round(b+F*O))&&(s|=1<<i-F-1);return s}isWhiteOrBlackRectangle(t,r,i,s){let l=3;t=new kt(t.getX()-l,t.getY()+l),r=new kt(r.getX()-l,r.getY()-l),i=new kt(i.getX()+l,i.getY()-l),s=new kt(s.getX()+l,s.getY()+l);let c=this.getColor(s,t);if(c===0)return!1;let h=this.getColor(t,r);return h!==c||(h=this.getColor(r,i),h!==c)?!1:(h=this.getColor(i,s),h===c)}getColor(t,r){let i=this.distancePoint(t,r),s=(r.getX()-t.getX())/i,l=(r.getY()-t.getY())/i,c=0,h=t.getX(),b=t.getY(),S=this.image.get(t.getX(),t.getY()),O=Math.ceil(i);for(let Y=0;Y<O;Y++)h+=s,b+=l,this.image.get(he.round(h),he.round(b))!==S&&c++;let F=c/i;return F>.1&&F<.9?0:F<=.1===S?1:-1}getFirstDifferent(t,r,i,s){let l=t.getX()+i,c=t.getY()+s;for(;this.isValid(l,c)&&this.image.get(l,c)===r;)l+=i,c+=s;for(l-=i,c-=s;this.isValid(l,c)&&this.image.get(l,c)===r;)l+=i;for(l-=i;this.isValid(l,c)&&this.image.get(l,c)===r;)c+=s;return c-=s,new kt(l,c)}expandSquare(t,r,i){let s=i/(2*r),l=t[0].getX()-t[2].getX(),c=t[0].getY()-t[2].getY(),h=(t[0].getX()+t[2].getX())/2,b=(t[0].getY()+t[2].getY())/2,S=new Ee(h+s*l,b+s*c),O=new Ee(h-s*l,b-s*c);l=t[1].getX()-t[3].getX(),c=t[1].getY()-t[3].getY(),h=(t[1].getX()+t[3].getX())/2,b=(t[1].getY()+t[3].getY())/2;let F=new Ee(h+s*l,b+s*c),Y=new Ee(h-s*l,b-s*c);return[S,F,O,Y]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=he.round(t.getX()),i=he.round(t.getY());return this.isValid(r,i)}distancePoint(t,r){return he.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return he.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(H.truncDivision(this.nbLayers-4,8)+1)+15}}class dn{decode(t,r=null){let i=null,s=new dr(t.getBlackMatrix()),l=null,c=null;try{let O=s.detectMirror(!1);l=O.getPoints(),this.reportFoundResultPoints(r,l),c=new te().decode(O)}catch(O){i=O}if(c==null)try{let O=s.detectMirror(!0);l=O.getPoints(),this.reportFoundResultPoints(r,l),c=new te().decode(O)}catch(O){throw i??O}let h=new Te(c.getText(),c.getRawBytes(),c.getNumBits(),l,ze.AZTEC,I.currentTimeMillis()),b=c.getByteSegments();b!=null&&h.putMetadata(nt.BYTE_SEGMENTS,b);let S=c.getECLevel();return S!=null&&h.putMetadata(nt.ERROR_CORRECTION_LEVEL,S),h}reportFoundResultPoints(t,r){if(t!=null){let i=t.get(V.NEED_RESULT_POINT_CALLBACK);i!=null&&r.forEach((s,l,c)=>{i.foundPossibleResultPoint(s)})}}reset(){}}class Cr extends Oe{constructor(t=500){super(new dn,t)}}class bt{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(V.TRY_HARDER)===!0&&t.isRotateSupported()){const l=t.rotateCounterClockwise(),c=this.doDecode(l,r),h=c.getResultMetadata();let b=270;h!==null&&h.get(nt.ORIENTATION)===!0&&(b=b+h.get(nt.ORIENTATION)%360),c.putMetadata(nt.ORIENTATION,b);const S=c.getResultPoints();if(S!==null){const O=l.getHeight();for(let F=0;F<S.length;F++)S[F]=new Ee(O-S[F].getY()-1,S[F].getX())}return c}else throw new ae}}reset(){}doDecode(t,r){const i=t.getWidth(),s=t.getHeight();let l=new K(i);const c=r&&r.get(V.TRY_HARDER)===!0,h=Math.max(1,s>>(c?8:5));let b;c?b=s:b=15;const S=Math.trunc(s/2);for(let O=0;O<b;O++){const F=Math.trunc((O+1)/2),Y=(O&1)===0,se=S+h*(Y?F:-F);if(se<0||se>=s)break;try{l=t.getBlackRow(se,l)}catch{continue}for(let ge=0;ge<2;ge++){if(ge===1&&(l.reverse(),r&&r.get(V.NEED_RESULT_POINT_CALLBACK)===!0)){const ye=new Map;r.forEach((Ae,Me)=>ye.set(Me,Ae)),ye.delete(V.NEED_RESULT_POINT_CALLBACK),r=ye}try{const ye=this.decodeRow(se,l,r);if(ge===1){ye.putMetadata(nt.ORIENTATION,180);const Ae=ye.getResultPoints();Ae!==null&&(Ae[0]=new Ee(i-Ae[0].getX()-1,Ae[0].getY()),Ae[1]=new Ee(i-Ae[1].getX()-1,Ae[1].getY()))}return ye}catch{}}}throw new ae}static recordPattern(t,r,i){const s=i.length;for(let S=0;S<s;S++)i[S]=0;const l=t.getSize();if(r>=l)throw new ae;let c=!t.get(r),h=0,b=r;for(;b<l;){if(t.get(b)!==c)i[h]++;else{if(++h===s)break;i[h]=1,c=!c}b++}if(!(h===s||h===s-1&&b===l))throw new ae}static recordPatternInReverse(t,r,i){let s=i.length,l=t.get(r);for(;r>0&&s>=0;)t.get(--r)!==l&&(s--,l=!l);if(s>=0)throw new ae;bt.recordPattern(t,r+1,i)}static patternMatchVariance(t,r,i){const s=t.length;let l=0,c=0;for(let S=0;S<s;S++)l+=t[S],c+=r[S];if(l<c)return Number.POSITIVE_INFINITY;const h=l/c;i*=h;let b=0;for(let S=0;S<s;S++){const O=t[S],F=r[S]*h,Y=O>F?O-F:F-O;if(Y>i)return Number.POSITIVE_INFINITY;b+=Y}return b/l}}class qe extends bt{static findStartPattern(t){const r=t.getSize(),i=t.getNextSet(0);let s=0,l=Int32Array.from([0,0,0,0,0,0]),c=i,h=!1;const b=6;for(let S=i;S<r;S++)if(t.get(S)!==h)l[s]++;else{if(s===b-1){let O=qe.MAX_AVG_VARIANCE,F=-1;for(let Y=qe.CODE_START_A;Y<=qe.CODE_START_C;Y++){const se=bt.patternMatchVariance(l,qe.CODE_PATTERNS[Y],qe.MAX_INDIVIDUAL_VARIANCE);se<O&&(O=se,F=Y)}if(F>=0&&t.isRange(Math.max(0,c-(S-c)/2),c,!1))return Int32Array.from([c,S,F]);c+=l[0]+l[1],l=l.slice(2,l.length-1),l[s-1]=0,l[s]=0,s--}else s++;l[s]=1,h=!h}throw new ae}static decodeCode(t,r,i){bt.recordPattern(t,i,r);let s=qe.MAX_AVG_VARIANCE,l=-1;for(let c=0;c<qe.CODE_PATTERNS.length;c++){const h=qe.CODE_PATTERNS[c],b=this.patternMatchVariance(r,h,qe.MAX_INDIVIDUAL_VARIANCE);b<s&&(s=b,l=c)}if(l>=0)return l;throw new ae}decodeRow(t,r,i){const s=i&&i.get(V.ASSUME_GS1)===!0,l=qe.findStartPattern(r),c=l[2];let h=0;const b=new Uint8Array(20);b[h++]=c;let S;switch(c){case qe.CODE_START_A:S=qe.CODE_CODE_A;break;case qe.CODE_START_B:S=qe.CODE_CODE_B;break;case qe.CODE_START_C:S=qe.CODE_CODE_C;break;default:throw new L}let O=!1,F=!1,Y="",se=l[0],ge=l[1];const ye=Int32Array.from([0,0,0,0,0,0]);let Ae=0,Me=0,rt=c,$e=0,Ze=!0,Bt=!1,Tt=!1;for(;!O;){const zi=F;switch(F=!1,Ae=Me,Me=qe.decodeCode(r,ye,ge),b[h++]=Me,Me!==qe.CODE_STOP&&(Ze=!0),Me!==qe.CODE_STOP&&($e++,rt+=$e*Me),se=ge,ge+=ye.reduce((ho,sl)=>ho+sl,0),Me){case qe.CODE_START_A:case qe.CODE_START_B:case qe.CODE_START_C:throw new L}switch(S){case qe.CODE_CODE_A:if(Me<64)Tt===Bt?Y+=String.fromCharCode(32+Me):Y+=String.fromCharCode(32+Me+128),Tt=!1;else if(Me<96)Tt===Bt?Y+=String.fromCharCode(Me-64):Y+=String.fromCharCode(Me+64),Tt=!1;else switch(Me!==qe.CODE_STOP&&(Ze=!1),Me){case qe.CODE_FNC_1:s&&(Y.length===0?Y+="]C1":Y+="");break;case qe.CODE_FNC_2:case qe.CODE_FNC_3:break;case qe.CODE_FNC_4_A:!Bt&&Tt?(Bt=!0,Tt=!1):Bt&&Tt?(Bt=!1,Tt=!1):Tt=!0;break;case qe.CODE_SHIFT:F=!0,S=qe.CODE_CODE_B;break;case qe.CODE_CODE_B:S=qe.CODE_CODE_B;break;case qe.CODE_CODE_C:S=qe.CODE_CODE_C;break;case qe.CODE_STOP:O=!0;break}break;case qe.CODE_CODE_B:if(Me<96)Tt===Bt?Y+=String.fromCharCode(32+Me):Y+=String.fromCharCode(32+Me+128),Tt=!1;else switch(Me!==qe.CODE_STOP&&(Ze=!1),Me){case qe.CODE_FNC_1:s&&(Y.length===0?Y+="]C1":Y+="");break;case qe.CODE_FNC_2:case qe.CODE_FNC_3:break;case qe.CODE_FNC_4_B:!Bt&&Tt?(Bt=!0,Tt=!1):Bt&&Tt?(Bt=!1,Tt=!1):Tt=!0;break;case qe.CODE_SHIFT:F=!0,S=qe.CODE_CODE_A;break;case qe.CODE_CODE_A:S=qe.CODE_CODE_A;break;case qe.CODE_CODE_C:S=qe.CODE_CODE_C;break;case qe.CODE_STOP:O=!0;break}break;case qe.CODE_CODE_C:if(Me<100)Me<10&&(Y+="0"),Y+=Me;else switch(Me!==qe.CODE_STOP&&(Ze=!1),Me){case qe.CODE_FNC_1:s&&(Y.length===0?Y+="]C1":Y+="");break;case qe.CODE_CODE_A:S=qe.CODE_CODE_A;break;case qe.CODE_CODE_B:S=qe.CODE_CODE_B;break;case qe.CODE_STOP:O=!0;break}break}zi&&(S=S===qe.CODE_CODE_A?qe.CODE_CODE_B:qe.CODE_CODE_A)}const zn=ge-se;if(ge=r.getNextUnset(ge),!r.isRange(ge,Math.min(r.getSize(),ge+(ge-se)/2),!1))throw new ae;if(rt-=$e*Ae,rt%103!==Ae)throw new T;const Dr=Y.length;if(Dr===0)throw new ae;Dr>0&&Ze&&(S===qe.CODE_CODE_C?Y=Y.substring(0,Dr-2):Y=Y.substring(0,Dr-1));const gr=(l[1]+l[0])/2,un=se+zn/2,ar=b.length,_r=new Uint8Array(ar);for(let zi=0;zi<ar;zi++)_r[zi]=b[zi];const ca=[new Ee(gr,t),new Ee(un,t)];return new Te(Y,_r,0,ca,ze.CODE_128,new Date().getTime())}}qe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],qe.MAX_AVG_VARIANCE=.25,qe.MAX_INDIVIDUAL_VARIANCE=.7,qe.CODE_SHIFT=98,qe.CODE_CODE_C=99,qe.CODE_CODE_B=100,qe.CODE_CODE_A=101,qe.CODE_FNC_1=102,qe.CODE_FNC_2=97,qe.CODE_FNC_3=96,qe.CODE_FNC_4_A=101,qe.CODE_FNC_4_B=100,qe.CODE_START_A=103,qe.CODE_START_B=104,qe.CODE_START_C=105,qe.CODE_STOP=106;class jt extends bt{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,i){let s=this.counters;s.fill(0),this.decodeRowResult="";let l=jt.findAsteriskPattern(r,s),c=r.getNextSet(l[1]),h=r.getSize(),b,S;do{jt.recordPattern(r,c,s);let ye=jt.toNarrowWidePattern(s);if(ye<0)throw new ae;b=jt.patternToChar(ye),this.decodeRowResult+=b,S=c;for(let Ae of s)c+=Ae;c=r.getNextSet(c)}while(b!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ye of s)O+=ye;let F=c-S-O;if(c!==h&&F*2<O)throw new ae;if(this.usingCheckDigit){let ye=this.decodeRowResult.length-1,Ae=0;for(let Me=0;Me<ye;Me++)Ae+=jt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Me));if(this.decodeRowResult.charAt(ye)!==jt.ALPHABET_STRING.charAt(Ae%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,ye)}if(this.decodeRowResult.length===0)throw new ae;let Y;this.extendedMode?Y=jt.decodeExtended(this.decodeRowResult):Y=this.decodeRowResult;let se=(l[1]+l[0])/2,ge=S+O/2;return new Te(Y,null,0,[new Ee(se,t),new Ee(ge,t)],ze.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let i=t.getSize(),s=t.getNextSet(0),l=0,c=s,h=!1,b=r.length;for(let S=s;S<i;S++)if(t.get(S)!==h)r[l]++;else{if(l===b-1){if(this.toNarrowWidePattern(r)===jt.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((S-c)/2)),c,!1))return[c,S];c+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,h=!h}throw new ae}static toNarrowWidePattern(t){let r=t.length,i=0,s;do{let l=2147483647;for(let b of t)b<l&&b>i&&(l=b);i=l,s=0;let c=0,h=0;for(let b=0;b<r;b++){let S=t[b];S>i&&(h|=1<<r-1-b,s++,c+=S)}if(s===3){for(let b=0;b<r&&s>0;b++){let S=t[b];if(S>i&&(s--,S*2>=c))return-1}return h}}while(s>3);return-1}static patternToChar(t){for(let r=0;r<jt.CHARACTER_ENCODINGS.length;r++)if(jt.CHARACTER_ENCODINGS[r]===t)return jt.ALPHABET_STRING.charAt(r);if(t===jt.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(t){let r=t.length,i="";for(let s=0;s<r;s++){let l=t.charAt(s);if(l==="+"||l==="$"||l==="%"||l==="/"){let c=t.charAt(s+1),h="\0";switch(l){case"+":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)+32);else throw new L;break;case"$":if(c>="A"&&c<="Z")h=String.fromCharCode(c.charCodeAt(0)-64);else throw new L;break;case"%":if(c>="A"&&c<="E")h=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")h=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")h=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")h="\0";else if(c==="V")h="@";else if(c==="W")h="`";else if(c==="X"||c==="Y"||c==="Z")h="";else throw new L;break;case"/":if(c>="A"&&c<="O")h=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")h=":";else throw new L;break}i+=h,s++}else i+=l}return i}}jt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",jt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],jt.ASTERISK_ENCODING=148;class mt extends bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,i){let s=this.decodeStart(r),l=this.decodeEnd(r),c=new ie;mt.decodeMiddle(r,s[1],l[0],c);let h=c.toString(),b=null;i!=null&&(b=i.get(V.ALLOWED_LENGTHS)),b==null&&(b=mt.DEFAULT_ALLOWED_LENGTHS);let S=h.length,O=!1,F=0;for(let ge of b){if(S===ge){O=!0;break}ge>F&&(F=ge)}if(!O&&S>F&&(O=!0),!O)throw new L;const Y=[new Ee(s[1],t),new Ee(l[0],t)];return new Te(h,null,0,Y,ze.ITF,new Date().getTime())}static decodeMiddle(t,r,i,s){let l=new Int32Array(10),c=new Int32Array(5),h=new Int32Array(5);for(l.fill(0),c.fill(0),h.fill(0);r<i;){bt.recordPattern(t,r,l);for(let S=0;S<5;S++){let O=2*S;c[S]=l[O],h[S]=l[O+1]}let b=mt.decodeDigit(c);s.append(b.toString()),b=this.decodeDigit(h),s.append(b.toString()),l.forEach(function(S){r+=S})}}decodeStart(t){let r=mt.skipWhiteSpace(t),i=mt.findGuardPattern(t,r,mt.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i}validateQuietZone(t,r){let i=this.narrowLineWidth*10;i=i<r?i:r;for(let s=r-1;i>0&&s>=0&&!t.get(s);s--)i--;if(i!==0)throw new ae}static skipWhiteSpace(t){const r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new ae;return i}decodeEnd(t){t.reverse();try{let r=mt.skipWhiteSpace(t),i;try{i=mt.findGuardPattern(t,r,mt.END_PATTERN_REVERSED[0])}catch(l){l instanceof ae&&(i=mt.findGuardPattern(t,r,mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);let s=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-s,i}finally{t.reverse()}}static findGuardPattern(t,r,i){let s=i.length,l=new Int32Array(s),c=t.getSize(),h=!1,b=0,S=r;l.fill(0);for(let O=r;O<c;O++)if(t.get(O)!==h)l[b]++;else{if(b===s-1){if(bt.patternMatchVariance(l,i,mt.MAX_INDIVIDUAL_VARIANCE)<mt.MAX_AVG_VARIANCE)return[S,O];S+=l[0]+l[1],I.arraycopy(l,2,l,0,b-1),l[b-1]=0,l[b]=0,b--}else b++;l[b]=1,h=!h}throw new ae}static decodeDigit(t){let r=mt.MAX_AVG_VARIANCE,i=-1,s=mt.PATTERNS.length;for(let l=0;l<s;l++){let c=mt.PATTERNS[l],h=bt.patternMatchVariance(t,c,mt.MAX_INDIVIDUAL_VARIANCE);h<r?(r=h,i=l):h===r&&(i=-1)}if(i>=0)return i%10;throw new ae}}mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],mt.MAX_AVG_VARIANCE=.38,mt.MAX_INDIVIDUAL_VARIANCE=.5,mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],mt.START_PATTERN=Int32Array.from([1,1,1,1]),mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Jt extends bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,i,s=0,l=Int32Array.from([0,0,0]);for(;!r;){l=Int32Array.from([0,0,0]),i=Jt.findGuardPattern(t,s,!1,this.START_END_PATTERN,l);let c=i[0];s=i[1];let h=c-(s-c);h>=0&&(r=t.isRange(h,c,!1))}return i}static checkChecksum(t){return Jt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let i=parseInt(t.charAt(r-1),10);return Jt.getStandardUPCEANChecksum(t.substring(0,r-1))===i}static getStandardUPCEANChecksum(t){let r=t.length,i=0;for(let s=r-1;s>=0;s-=2){let l=t.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}i*=3;for(let s=r-2;s>=0;s-=2){let l=t.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}return(1e3-i)%10}static decodeEnd(t,r){return Jt.findGuardPattern(t,r,!1,Jt.START_END_PATTERN,new Int32Array(Jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,i,s){return this.findGuardPattern(t,r,i,s,new Int32Array(s.length))}static findGuardPattern(t,r,i,s,l){let c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);let h=0,b=r,S=s.length,O=i;for(let F=r;F<c;F++)if(t.get(F)!==O)l[h]++;else{if(h===S-1){if(bt.patternMatchVariance(l,s,Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE)return Int32Array.from([b,F]);b+=l[0]+l[1];let Y=l.slice(2,l.length-1);for(let se=0;se<h-1;se++)l[se]=Y[se];l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,O=!O}throw new ae}static decodeDigit(t,r,i,s){this.recordPattern(t,i,r);let l=this.MAX_AVG_VARIANCE,c=-1,h=s.length;for(let b=0;b<h;b++){let S=s[b],O=bt.patternMatchVariance(r,S,Jt.MAX_INDIVIDUAL_VARIANCE);O<l&&(l=O,c=b)}if(c>=0)return c;throw new ae}}Jt.MAX_AVG_VARIANCE=.48,Jt.MAX_INDIVIDUAL_VARIANCE=.7,Jt.START_END_PATTERN=Int32Array.from([1,1,1]),Jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Er{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,i){let s=this.decodeRowStringBuffer,l=this.decodeMiddle(r,i,s),c=s.toString(),h=Er.parseExtensionString(c),b=[new Ee((i[0]+i[1])/2,t),new Ee(l,t)],S=new Te(c,null,0,b,ze.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&S.putAllMetadata(h),S}decodeMiddle(t,r,i){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=t.getSize(),c=r[1],h=0;for(let S=0;S<5&&c<l;S++){let O=Jt.decodeDigit(t,s,c,Jt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+O%10);for(let F of s)c+=F;O>=10&&(h|=1<<4-S),S!==4&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(i.length!==5)throw new ae;let b=this.determineCheckDigit(h);if(Er.extensionChecksum(i.toString())!==b)throw new ae;return c}static extensionChecksum(t){let r=t.length,i=0;for(let s=r-2;s>=0;s-=2)i+=t.charAt(s).charCodeAt(0)-48;i*=3;for(let s=r-1;s>=0;s-=2)i+=t.charAt(s).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new ae}static parseExtensionString(t){if(t.length!==5)return null;let r=Er.parseExtension5String(t);return r==null?null:new Map([[nt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let i=parseInt(t.substring(1)),s=(i/100).toString(),l=i%100,c=l<10?"0"+l:l.toString();return r+s+"."+c}}class oi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,i){let s=this.decodeRowStringBuffer,l=this.decodeMiddle(r,i,s),c=s.toString(),h=oi.parseExtensionString(c),b=[new Ee((i[0]+i[1])/2,t),new Ee(l,t)],S=new Te(c,null,0,b,ze.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&S.putAllMetadata(h),S}decodeMiddle(t,r,i){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=t.getSize(),c=r[1],h=0;for(let b=0;b<2&&c<l;b++){let S=Jt.decodeDigit(t,s,c,Jt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+S%10);for(let O of s)c+=O;S>=10&&(h|=1<<1-b),b!==1&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(i.length!==2)throw new ae;if(parseInt(i.toString())%4!==h)throw new ae;return c}static parseExtensionString(t){return t.length!==2?null:new Map([[nt.ISSUE_NUMBER,parseInt(t)]])}}class qn{static decodeRow(t,r,i){let s=Jt.findGuardPattern(r,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Er().decodeRow(t,r,s)}catch{return new oi().decodeRow(t,r,s)}}}qn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Rt extends Jt{constructor(){super(),this.decodeRowStringBuffer="",Rt.L_AND_G_PATTERNS=Rt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=Rt.L_PATTERNS[t-10],i=new Int32Array(r.length);for(let s=0;s<r.length;s++)i[s]=r[r.length-s-1];Rt.L_AND_G_PATTERNS[t]=i}}decodeRow(t,r,i){let s=Rt.findStartGuardPattern(r),l=i==null?null:i.get(V.NEED_RESULT_POINT_CALLBACK);if(l!=null){const Ze=new Ee((s[0]+s[1])/2,t);l.foundPossibleResultPoint(Ze)}let c=this.decodeMiddle(r,s,this.decodeRowStringBuffer),h=c.rowOffset,b=c.resultString;if(l!=null){const Ze=new Ee(h,t);l.foundPossibleResultPoint(Ze)}let S=this.decodeEnd(r,h);if(l!=null){const Ze=new Ee((S[0]+S[1])/2,t);l.foundPossibleResultPoint(Ze)}let O=S[1],F=O+(O-S[0]);if(F>=r.getSize()||!r.isRange(O,F,!1))throw new ae;let Y=b.toString();if(Y.length<8)throw new L;if(!Rt.checkChecksum(Y))throw new T;let se=(s[1]+s[0])/2,ge=(S[1]+S[0])/2,ye=this.getBarcodeFormat(),Ae=[new Ee(se,t),new Ee(ge,t)],Me=new Te(Y,null,0,Ae,ye,new Date().getTime()),rt=0;try{let Ze=qn.decodeRow(t,r,S[1]);Me.putMetadata(nt.UPC_EAN_EXTENSION,Ze.getText()),Me.putAllMetadata(Ze.getResultMetadata()),Me.addResultPoints(Ze.getResultPoints()),rt=Ze.getText().length}catch{}let $e=i==null?null:i.get(V.ALLOWED_EAN_EXTENSIONS);if($e!=null){let Ze=!1;for(let Bt in $e)if(rt.toString()===Bt){Ze=!0;break}if(!Ze)throw new ae}return Me}decodeEnd(t,r){return Rt.findGuardPattern(t,r,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return Rt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let i=parseInt(t.charAt(r-1),10);return Rt.getStandardUPCEANChecksum(t.substring(0,r-1))===i}static getStandardUPCEANChecksum(t){let r=t.length,i=0;for(let s=r-1;s>=0;s-=2){let l=t.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}i*=3;for(let s=r-2;s>=0;s-=2){let l=t.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}return(1e3-i)%10}}class Ut extends Rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,i){let s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=t.getSize(),c=r[1],h=0;for(let S=0;S<6&&c<l;S++){let O=Rt.decodeDigit(t,s,c,Rt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+O%10);for(let F of s)c+=F;O>=10&&(h|=1<<5-S)}i=Ut.determineFirstDigit(i,h),c=Rt.findGuardPattern(t,c,!0,Rt.MIDDLE_PATTERN,new Int32Array(Rt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&c<l;S++){let O=Rt.decodeDigit(t,s,c,Rt.L_PATTERNS);i+=String.fromCharCode(48+O);for(let F of s)c+=F}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return ze.EAN_13}static determineFirstDigit(t,r){for(let i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new ae}}Ut.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class en extends Rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,i){const s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=t.getSize(),c=r[1];for(let b=0;b<4&&c<l;b++){let S=Rt.decodeDigit(t,s,c,Rt.L_PATTERNS);i+=String.fromCharCode(48+S);for(let O of s)c+=O}c=Rt.findGuardPattern(t,c,!0,Rt.MIDDLE_PATTERN,new Int32Array(Rt.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<4&&c<l;b++){let S=Rt.decodeDigit(t,s,c,Rt.L_PATTERNS);i+=String.fromCharCode(48+S);for(let O of s)c+=O}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return ze.EAN_8}}class Mn extends Rt{constructor(){super(...arguments),this.ean13Reader=new Ut}getBarcodeFormat(){return ze.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))}decodeMiddle(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let i=new Te(r.substring(1),null,null,t.getResultPoints(),ze.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new ae}reset(){this.ean13Reader.reset()}}class xn extends Rt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,i){const s=this.decodeMiddleCounters.map(S=>S);s[0]=0,s[1]=0,s[2]=0,s[3]=0;const l=t.getSize();let c=r[1],h=0;for(let S=0;S<6&&c<l;S++){const O=xn.decodeDigit(t,s,c,xn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+O%10);for(let F of s)c+=F;O>=10&&(h|=1<<5-S)}let b=xn.determineNumSysAndCheckDigit(i,h);return{rowOffset:c,resultString:b}}decodeEnd(t,r){return xn.findGuardPatternWithoutCounters(t,r,!0,xn.MIDDLE_END_PATTERN)}checkChecksum(t){return Rt.checkChecksum(xn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let i=0;i<=1;i++)for(let s=0;s<10;s++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][s]){let l=String.fromCharCode(48+i),c=String.fromCharCode(48+s);return l+t+c}throw ae.getNotFoundInstance()}getBarcodeFormat(){return ze.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(l=>l.charCodeAt(0)),i=new ie;i.append(t.charAt(0));let s=r[5];switch(s){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(s),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(s);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()}}xn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),xn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Wn extends bt{constructor(t){super();let r=t==null?null:t.get(V.POSSIBLE_FORMATS),i=[];p(r)?(i.push(new Ut),i.push(new Mn),i.push(new en),i.push(new xn)):(r.indexOf(ze.EAN_13)>-1&&i.push(new Ut),r.indexOf(ze.UPC_A)>-1&&i.push(new Mn),r.indexOf(ze.EAN_8)>-1&&i.push(new en),r.indexOf(ze.UPC_E)>-1&&i.push(new xn)),this.readers=i}decodeRow(t,r,i){for(let s of this.readers)try{const l=s.decodeRow(t,r,i),c=l.getBarcodeFormat()===ze.EAN_13&&l.getText().charAt(0)==="0",h=i==null?null:i.get(V.POSSIBLE_FORMATS),b=h==null||h.includes(ze.UPC_A);if(c&&b){const S=l.getRawBytes(),O=new Te(l.getText().substring(1),S,S?S.length:null,l.getResultPoints(),ze.UPC_A);return O.putAllMetadata(l.getResultMetadata()),O}return l}catch{}throw new ae}reset(){for(let t of this.readers)t.reset()}}class Yt extends bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let i=0;i<r.length;i++)if(bt.patternMatchVariance(t,r[i],Yt.MAX_INDIVIDUAL_VARIANCE)<Yt.MAX_AVG_VARIANCE)return i;throw new ae}static count(t){return he.sum(new Int32Array(t))}static increment(t,r){let i=0,s=r[0];for(let l=1;l<t.length;l++)r[l]>s&&(s=r[l],i=l);t[i]++}static decrement(t,r){let i=0,s=r[0];for(let l=1;l<t.length;l++)r[l]<s&&(s=r[l],i=l);t[i]--}static isFinderPattern(t){let r=t[0]+t[1],i=r+t[2]+t[3],s=r/i;if(s>=Yt.MIN_FINDER_PATTERN_RATIO&&s<=Yt.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let h of t)h>c&&(c=h),h<l&&(l=h);return c<10*l}return!1}}Yt.MAX_AVG_VARIANCE=.2,Yt.MAX_INDIVIDUAL_VARIANCE=.45,Yt.MIN_FINDER_PATTERN_RATIO=9.5/12,Yt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Bn{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Bn))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class tr{constructor(t,r,i,s,l){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ee(i,l)),this.resultPoints.push(new Ee(s,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof tr))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class tn{constructor(){}static getRSSvalue(t,r,i){let s=0;for(let b of t)s+=b;let l=0,c=0,h=t.length;for(let b=0;b<h-1;b++){let S;for(S=1,c|=1<<b;S<t[b];S++,c&=~(1<<b)){let O=tn.combins(s-S-1,h-b-2);if(i&&c===0&&s-S-(h-b-1)>=h-b-1&&(O-=tn.combins(s-S-(h-b),h-b-2)),h-b-1>1){let F=0;for(let Y=s-S-(h-b-2);Y>r;Y--)F+=tn.combins(s-S-Y-1,h-b-3);O-=F*(h-1-b)}else s-S>r&&O--;l+=O}s-=S}return l}static combins(t,r){let i,s;t-r>r?(s=r,i=t-r):(s=t-r,i=r);let l=1,c=1;for(let h=t;h>i;h--)l*=h,c<=s&&(l/=c,c++);for(;c<=s;)l/=c,c++;return l}}class Ar{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let i=12*r,s=new K(i),l=0,h=t[0].getRightChar().getValue();for(let b=11;b>=0;--b)(h&1<<b)!=0&&s.set(l),l++;for(let b=1;b<t.length;++b){let S=t[b],O=S.getLeftChar().getValue();for(let F=11;F>=0;--F)(O&1<<F)!=0&&s.set(l),l++;if(S.getRightChar()!=null){let F=S.getRightChar().getValue();for(let Y=11;Y>=0;--Y)(F&1<<Y)!=0&&s.set(l),l++}}return s}}class kn{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class or{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class vn extends or{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===vn.FNC1}}vn.FNC1="$";class nr extends or{constructor(t,r,i){super(t),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class An extends or{constructor(t,r,i){if(super(t),r<0||r>10||i<0||i>10)throw new L;this.firstDigit=r,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===An.FNC1}isSecondDigitFNC1(){return this.secondDigit===An.FNC1}isAnyFNC1(){return this.firstDigit===An.FNC1||this.secondDigit===An.FNC1}}An.FNC1=10;class lt{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ae;let r=t.substring(0,2);for(let l of lt.TWO_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(2,l[2],t):lt.processFixedAI(2,l[1],t);if(t.length<3)throw new ae;let i=t.substring(0,3);for(let l of lt.THREE_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(3,l[2],t):lt.processFixedAI(3,l[1],t);for(let l of lt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(4,l[2],t):lt.processFixedAI(4,l[1],t);if(t.length<4)throw new ae;let s=t.substring(0,4);for(let l of lt.FOUR_DIGIT_DATA_LENGTH)if(l[0]===s)return l[1]===lt.VARIABLE_LENGTH?lt.processVariableAI(4,l[2],t):lt.processFixedAI(4,l[1],t);throw new ae}static processFixedAI(t,r,i){if(i.length<t)throw new ae;let s=i.substring(0,t);if(i.length<t+r)throw new ae;let l=i.substring(t,t+r),c=i.substring(t+r),h="("+s+")"+l,b=lt.parseFieldsInGeneralPurpose(c);return b==null?h:h+b}static processVariableAI(t,r,i){let s=i.substring(0,t),l;i.length<t+r?l=i.length:l=t+r;let c=i.substring(t,l),h=i.substring(l),b="("+s+")"+c,S=lt.parseFieldsInGeneralPurpose(h);return S==null?b:b+S}}lt.VARIABLE_LENGTH=[],lt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",lt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",lt.VARIABLE_LENGTH,20],["22",lt.VARIABLE_LENGTH,29],["30",lt.VARIABLE_LENGTH,8],["37",lt.VARIABLE_LENGTH,8],["90",lt.VARIABLE_LENGTH,30],["91",lt.VARIABLE_LENGTH,30],["92",lt.VARIABLE_LENGTH,30],["93",lt.VARIABLE_LENGTH,30],["94",lt.VARIABLE_LENGTH,30],["95",lt.VARIABLE_LENGTH,30],["96",lt.VARIABLE_LENGTH,30],["97",lt.VARIABLE_LENGTH,3],["98",lt.VARIABLE_LENGTH,30],["99",lt.VARIABLE_LENGTH,30]],lt.THREE_DIGIT_DATA_LENGTH=[["240",lt.VARIABLE_LENGTH,30],["241",lt.VARIABLE_LENGTH,30],["242",lt.VARIABLE_LENGTH,6],["250",lt.VARIABLE_LENGTH,30],["251",lt.VARIABLE_LENGTH,30],["253",lt.VARIABLE_LENGTH,17],["254",lt.VARIABLE_LENGTH,20],["400",lt.VARIABLE_LENGTH,30],["401",lt.VARIABLE_LENGTH,30],["402",17],["403",lt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",lt.VARIABLE_LENGTH,20],["421",lt.VARIABLE_LENGTH,15],["422",3],["423",lt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],lt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",lt.VARIABLE_LENGTH,15],["391",lt.VARIABLE_LENGTH,18],["392",lt.VARIABLE_LENGTH,15],["393",lt.VARIABLE_LENGTH,18],["703",lt.VARIABLE_LENGTH,30]],lt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",lt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",lt.VARIABLE_LENGTH,20],["8003",lt.VARIABLE_LENGTH,30],["8004",lt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",lt.VARIABLE_LENGTH,30],["8008",lt.VARIABLE_LENGTH,12],["8018",18],["8020",lt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",lt.VARIABLE_LENGTH,70],["8200",lt.VARIABLE_LENGTH,70]];class Hn{constructor(t){this.buffer=new ie,this.information=t}decodeAllCodes(t,r){let i=r,s=null;do{let l=this.decodeGeneralPurposeField(i,s),c=lt.parseFieldsInGeneralPurpose(l.getNewString());if(c!=null&&t.append(c),l.isRemaining()?s=""+l.getRemainingValue():s=null,i===l.getNewPosition())break;i=l.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(t,4);return l===0?new An(this.information.getSize(),An.FNC1,An.FNC1):new An(this.information.getSize(),l-1,An.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,s=(r-8)%11;return new An(t+7,i,s)}extractNumericValueFromBitArray(t,r){return Hn.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,i){let s=0;for(let l=0;l<i;++l)t.get(r+l)&&(s|=1<<i-l-1);return s}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new nr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new nr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let i=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(i!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new nr(this.current.getPosition(),this.buffer.toString()):r=new nr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new kn(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new nr(this.current.getPosition(),this.buffer.toString());return new kn(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new kn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new nr(this.current.getPosition(),this.buffer.toString());return new kn(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new kn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new nr(this.current.getPosition(),this.buffer.toString());return new kn(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new kn(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,7);if(i>=64&&i<116)return!0;if(t+8>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(t,8);return s>=232&&s<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new vn(t+5,vn.FNC1);if(r>=5&&r<15)return new vn(t+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(t,7);if(i>=64&&i<90)return new vn(t+7,""+(i+1));if(i>=90&&i<116)return new vn(t+7,""+(i+7));let s=this.extractNumericValueFromBitArray(t,8),l;switch(s){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new L}return new vn(t+8,l)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,6);return i>=16&&i<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new vn(t+5,vn.FNC1);if(r>=5&&r<15)return new vn(t+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(t,6);if(i>=32&&i<58)return new vn(t+6,""+(i+33));let s;switch(i){case 58:s="*";break;case 59:s=",";break;case 60:s="-";break;case 61:s=".";break;case 62:s="/";break;default:throw new Ne("Decoding invalid alphanumeric value: "+i)}return new vn(t+6,s)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class Ln{constructor(t){this.information=t,this.generalDecoder=new Hn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class an extends Ln{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)}encodeCompressedGtinWithoutAI(t,r,i){for(let s=0;s<4;++s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*s,10);l/100===0&&t.append("0"),l/10===0&&t.append("0"),t.append(l)}an.appendCheckDigit(t,i)}static appendCheckDigit(t,r){let i=0;for(let s=0;s<13;s++){let l=t.charAt(s+r).charCodeAt(0)-48;i+=(s&1)===0?3*l:l}i=10-i%10,i===10&&(i=0),t.append(i)}}an.GTIN_SIZE=40;class Sr extends an{constructor(t){super(t)}parseInformation(){let t=new ie;t.append("(01)");let r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Sr.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,Sr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,Sr.HEADER_SIZE+44)}}Sr.HEADER_SIZE=4;class mi extends Ln{constructor(t){super(t)}parseInformation(){let t=new ie;return this.getGeneralDecoder().decodeAllCodes(t,mi.HEADER_SIZE)}}mi.HEADER_SIZE=5;class ta extends an{constructor(t){super(t)}encodeCompressedWeight(t,r,i){let s=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,s);let l=this.checkWeight(s),c=1e5;for(let h=0;h<5;++h)l/c===0&&t.append("0"),c/=10;t.append(l)}}class Rr extends ta{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Rr.HEADER_SIZE+ta.GTIN_SIZE+Rr.WEIGHT_SIZE)throw new ae;let t=new ie;return this.encodeCompressedGtin(t,Rr.HEADER_SIZE),this.encodeCompressedWeight(t,Rr.HEADER_SIZE+ta.GTIN_SIZE,Rr.WEIGHT_SIZE),t.toString()}}Rr.HEADER_SIZE=5,Rr.WEIGHT_SIZE=15;class ss extends Rr{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class Di extends Rr{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class br extends an{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<br.HEADER_SIZE+an.GTIN_SIZE)throw new ae;let t=new ie;this.encodeCompressedGtin(t,br.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(br.HEADER_SIZE+an.GTIN_SIZE,br.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(br.HEADER_SIZE+an.GTIN_SIZE+br.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()}}br.HEADER_SIZE=8,br.LAST_DIGIT_SIZE=2;class In extends an{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<In.HEADER_SIZE+an.GTIN_SIZE)throw new ae;let t=new ie;this.encodeCompressedGtin(t,In.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE+an.GTIN_SIZE,In.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(In.HEADER_SIZE+an.GTIN_SIZE+In.LAST_DIGIT_SIZE,In.FIRST_THREE_DIGITS_SIZE);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i);let s=this.getGeneralDecoder().decodeGeneralPurposeField(In.HEADER_SIZE+an.GTIN_SIZE+In.LAST_DIGIT_SIZE+In.FIRST_THREE_DIGITS_SIZE,null);return t.append(s.getNewString()),t.toString()}}In.HEADER_SIZE=8,In.LAST_DIGIT_SIZE=2,In.FIRST_THREE_DIGITS_SIZE=10;class $t extends ta{constructor(t,r,i){super(t),this.dateCode=i,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE+$t.DATE_SIZE)throw new ae;let t=new ie;return this.encodeCompressedGtin(t,$t.HEADER_SIZE),this.encodeCompressedWeight(t,$t.HEADER_SIZE+$t.GTIN_SIZE,$t.WEIGHT_SIZE),this.encodeCompressedDate(t,$t.HEADER_SIZE+$t.GTIN_SIZE+$t.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,$t.DATE_SIZE);if(i==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let s=i%32;i/=32;let l=i%12+1;i/=12;let c=i;c/10==0&&t.append("0"),t.append(c),l/10==0&&t.append("0"),t.append(l),s/10==0&&t.append("0"),t.append(s)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}$t.HEADER_SIZE=8,$t.WEIGHT_SIZE=20,$t.DATE_SIZE=16;function ci(U){try{if(U.get(1))return new Sr(U);if(!U.get(2))return new mi(U);switch(Hn.extractNumericValueFromBitArray(U,1,4)){case 4:return new ss(U);case 5:return new Di(U)}switch(Hn.extractNumericValueFromBitArray(U,1,5)){case 12:return new br(U);case 13:return new In(U)}switch(Hn.extractNumericValueFromBitArray(U,1,7)){case 56:return new $t(U,"310","11");case 57:return new $t(U,"320","11");case 58:return new $t(U,"310","13");case 59:return new $t(U,"320","13");case 60:return new $t(U,"310","15");case 61:return new $t(U,"320","15");case 62:return new $t(U,"310","17");case 63:return new $t(U,"320","17")}}catch(t){throw console.log(t),new Ne("unknown decoder: "+U)}}class Gn{constructor(t,r,i,s){this.leftchar=t,this.rightchar=r,this.finderpattern=i,this.maybeLast=s}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof Gn?Gn.equalsOrNull(t.leftchar,r.leftchar)&&Gn.equalsOrNull(t.rightchar,r.rightchar)&&Gn.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:Gn.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class _n{constructor(t,r,i){this.pairs=t,this.rowNumber=r,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof _n?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let i;return t.forEach((s,l)=>{r.forEach(c=>{s.getLeftChar().getValue()===c.getLeftChar().getValue()&&s.getRightChar().getValue()===c.getRightChar().getValue()&&s.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(i=!0)})}),i}}class Ve extends Yt{constructor(t){super(...arguments),this.pairs=new Array(Ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return Ve.constructResult(this.decodeRow2pairs(t,r))}catch(s){this.verbose&&console.log(s)}return this.pairs.length=0,this.startFromEven=!0,Ve.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(l){if(l instanceof ae){if(!this.pairs.length)throw new ae;i=!0}}if(this.checkChecksum())return this.pairs;let s;if(this.rows.length?s=!0:s=!1,this.storeRow(t,!1),s){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new ae}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let i=r;i<this.rows.length;i++){let s=this.rows[i];this.pairs.length=0;for(let c of t)this.pairs.push(c.getPairs());if(this.pairs.push(s.getPairs()),!Ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(t);l.push(s);try{return this.checkRows(l,i+1)}catch(c){this.verbose&&console.log(c)}}throw new ae}static isValidSequence(t){for(let r of Ve.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let i=!0;for(let s=0;s<t.length;s++)if(t[s].getFinderPattern().getValue()!=r[s]){i=!1;break}if(i)return!0}return!1}storeRow(t,r){let i=0,s=!1,l=!1;for(;i<this.rows.length;){let c=this.rows[i];if(c.getRowNumber()>t){l=c.isEquivalent(this.pairs);break}s=c.isEquivalent(this.pairs),i++}l||s||Ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new _n(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let i of r)if(i.getPairs().length!==t.length){for(let s of i.getPairs())for(let l of t)if(Gn.equals(s,l))break}}static isPartialRow(t,r){for(let i of r){let s=!0;for(let l of t){let c=!1;for(let h of i.getPairs())if(l.equals(h)){c=!0;break}if(!c){s=!1;break}}if(s)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=Ar.buildBitArray(t),s=ci(r).parseInformation(),l=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),h=[l[0],l[1],c[0],c[1]];return new Te(s,null,null,h,ze.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i==null)return!1;let s=i.getChecksumPortion(),l=2;for(let h=1;h<this.pairs.size();++h){let b=this.pairs.get(h);s+=b.getLeftChar().getChecksumPortion(),l++;let S=b.getRightChar();S!=null&&(s+=S.getChecksumPortion(),l++)}return s%=211,211*(l-4)+s==r.getValue()}static getNextSecondBar(t,r){let i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i}retrieveNextPair(t,r,i){let s=r.length%2==0;this.startFromEven&&(s=!s);let l,c=!0,h=-1;do this.findNextPair(t,r,h),l=this.parseFoundFinderPattern(t,i,s),l==null?h=Ve.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);let b=this.decodeDataCharacter(t,l,s,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ae;let S;try{S=this.decodeDataCharacter(t,l,s,!1)}catch(O){S=null,this.verbose&&console.log(O)}return new Gn(b,S,l,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,i){let s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;let l=t.getSize(),c;i>=0?c=i:this.isEmptyPair(r)?c=0:c=r[r.length-1].getFinderPattern().getStartEnd()[1];let h=r.length%2!=0;this.startFromEven&&(h=!h);let b=!1;for(;c<l&&(b=!t.get(c),!!b);)c++;let S=0,O=c;for(let F=c;F<l;F++)if(t.get(F)!=b)s[S]++;else{if(S==3){if(h&&Ve.reverseCounters(s),Ve.isFinderPattern(s)){this.startEnd[0]=O,this.startEnd[1]=F;return}h&&Ve.reverseCounters(s),O+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,S--}else S++;s[S]=1,b=!b}throw new ae}static reverseCounters(t){let r=t.length;for(let i=0;i<r/2;++i){let s=t[i];t[i]=t[r-i-1],t[r-i-1]=s}}parseFoundFinderPattern(t,r,i){let s,l,c;if(i){let S=this.startEnd[0]-1;for(;S>=0&&!t.get(S);)S--;S++,s=this.startEnd[0]-S,l=S,c=this.startEnd[1]}else l=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),s=c-this.startEnd[1];let h=this.getDecodeFinderCounters();I.arraycopy(h,0,h,1,h.length-1),h[0]=s;let b;try{b=this.parseFinderValue(h,Ve.FINDER_PATTERNS)}catch{return null}return new tr(b,[l,c],l,c,r)}decodeDataCharacter(t,r,i,s){let l=this.getDataCharacterCounters();for(let un=0;un<l.length;un++)l[un]=0;if(s)Ve.recordPatternInReverse(t,r.getStartEnd()[0],l);else{Ve.recordPattern(t,r.getStartEnd()[1],l);for(let un=0,ar=l.length-1;un<ar;un++,ar--){let _r=l[un];l[un]=l[ar],l[ar]=_r}}let c=17,h=he.sum(new Int32Array(l))/c,b=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-b)/b>.3)throw new ae;let S=this.getOddCounts(),O=this.getEvenCounts(),F=this.getOddRoundingErrors(),Y=this.getEvenRoundingErrors();for(let un=0;un<l.length;un++){let ar=1*l[un]/h,_r=ar+.5;if(_r<1){if(ar<.3)throw new ae;_r=1}else if(_r>8){if(ar>8.7)throw new ae;_r=8}let ca=un/2;(un&1)==0?(S[ca]=_r,F[ca]=ar-_r):(O[ca]=_r,Y[ca]=ar-_r)}this.adjustOddEvenCounts(c);let se=4*r.getValue()+(i?0:2)+(s?0:1)-1,ge=0,ye=0;for(let un=S.length-1;un>=0;un--){if(Ve.isNotA1left(r,i,s)){let ar=Ve.WEIGHTS[se][2*un];ye+=S[un]*ar}ge+=S[un]}let Ae=0;for(let un=O.length-1;un>=0;un--)if(Ve.isNotA1left(r,i,s)){let ar=Ve.WEIGHTS[se][2*un+1];Ae+=O[un]*ar}let Me=ye+Ae;if((ge&1)!=0||ge>13||ge<4)throw new ae;let rt=(13-ge)/2,$e=Ve.SYMBOL_WIDEST[rt],Ze=9-$e,Bt=tn.getRSSvalue(S,$e,!0),Tt=tn.getRSSvalue(O,Ze,!1),zn=Ve.EVEN_TOTAL_SUBSET[rt],Dr=Ve.GSUM[rt],gr=Bt*zn+Tt+Dr;return new Bn(gr,Me)}static isNotA1left(t,r,i){return!(t.getValue()==0&&r&&i)}adjustOddEvenCounts(t){let r=he.sum(new Int32Array(this.getOddCounts())),i=he.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1;r>13?l=!0:r<4&&(s=!0);let c=!1,h=!1;i>13?h=!0:i<4&&(c=!0);let b=r+i-t,S=(r&1)==1,O=(i&1)==0;if(b==1)if(S){if(O)throw new ae;l=!0}else{if(!O)throw new ae;h=!0}else if(b==-1)if(S){if(O)throw new ae;s=!0}else{if(!O)throw new ae;c=!0}else if(b==0){if(S){if(!O)throw new ae;r<i?(s=!0,h=!0):(l=!0,c=!0)}else if(O)throw new ae}else throw new ae;if(s){if(l)throw new ae;Ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new ae;Ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ve.SYMBOL_WIDEST=[7,5,4,3,1],Ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ve.GSUM=[0,348,1388,2948,3988],Ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ve.FINDER_PAT_A=0,Ve.FINDER_PAT_B=1,Ve.FINDER_PAT_C=2,Ve.FINDER_PAT_D=3,Ve.FINDER_PAT_E=4,Ve.FINDER_PAT_F=5,Ve.FINDER_PATTERN_SEQUENCES=[[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_C,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_C],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_E],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F]],Ve.MAX_PAIRS=11;class ls extends Bn{constructor(t,r,i){super(t,r),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Zt extends Yt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,i){const s=this.decodePair(r,!1,t,i);Zt.addOrTally(this.possibleLeftPairs,s),r.reverse();let l=this.decodePair(r,!0,t,i);Zt.addOrTally(this.possibleRightPairs,l),r.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Zt.checkChecksum(c,h))return Zt.constructResult(c,h)}throw new ae}static addOrTally(t,r){if(r==null)return;let i=!1;for(let s of t)if(s.getValue()===r.getValue()){s.incrementCount(),i=!0;break}i||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let i=4537077*t.getValue()+r.getValue(),s=new String(i).toString(),l=new ie;for(let S=13-s.length;S>0;S--)l.append("0");l.append(s);let c=0;for(let S=0;S<13;S++){let O=l.charAt(S).charCodeAt(0)-48;c+=(S&1)===0?3*O:O}c=10-c%10,c===10&&(c=0),l.append(c.toString());let h=t.getFinderPattern().getResultPoints(),b=r.getFinderPattern().getResultPoints();return new Te(l.toString(),null,0,[h[0],h[1],b[0],b[1]],ze.RSS_14,new Date().getTime())}static checkChecksum(t,r){let i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,s=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,i===s}decodePair(t,r,i,s){try{let l=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,l),h=s==null?null:s.get(V.NEED_RESULT_POINT_CALLBACK);if(h!=null){let O=(l[0]+l[1])/2;r&&(O=t.getSize()-1-O),h.foundPossibleResultPoint(new Ee(O,i))}let b=this.decodeDataCharacter(t,c,!0),S=this.decodeDataCharacter(t,c,!1);return new ls(1597*b.getValue()+S.getValue(),b.getChecksumPortion()+4*S.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(t,r,i){let s=this.getDataCharacterCounters();for(let Ae=0;Ae<s.length;Ae++)s[Ae]=0;if(i)bt.recordPatternInReverse(t,r.getStartEnd()[0],s);else{bt.recordPattern(t,r.getStartEnd()[1]+1,s);for(let Ae=0,Me=s.length-1;Ae<Me;Ae++,Me--){let rt=s[Ae];s[Ae]=s[Me],s[Me]=rt}}let l=i?16:15,c=he.sum(new Int32Array(s))/l,h=this.getOddCounts(),b=this.getEvenCounts(),S=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let Ae=0;Ae<s.length;Ae++){let Me=s[Ae]/c,rt=Math.floor(Me+.5);rt<1?rt=1:rt>8&&(rt=8);let $e=Math.floor(Ae/2);(Ae&1)===0?(h[$e]=rt,S[$e]=Me-rt):(b[$e]=rt,O[$e]=Me-rt)}this.adjustOddEvenCounts(i,l);let F=0,Y=0;for(let Ae=h.length-1;Ae>=0;Ae--)Y*=9,Y+=h[Ae],F+=h[Ae];let se=0,ge=0;for(let Ae=b.length-1;Ae>=0;Ae--)se*=9,se+=b[Ae],ge+=b[Ae];let ye=Y+3*se;if(i){if((F&1)!==0||F>12||F<4)throw new ae;let Ae=(12-F)/2,Me=Zt.OUTSIDE_ODD_WIDEST[Ae],rt=9-Me,$e=tn.getRSSvalue(h,Me,!1),Ze=tn.getRSSvalue(b,rt,!0),Bt=Zt.OUTSIDE_EVEN_TOTAL_SUBSET[Ae],Tt=Zt.OUTSIDE_GSUM[Ae];return new Bn($e*Bt+Ze+Tt,ye)}else{if((ge&1)!==0||ge>10||ge<4)throw new ae;let Ae=(10-ge)/2,Me=Zt.INSIDE_ODD_WIDEST[Ae],rt=9-Me,$e=tn.getRSSvalue(h,Me,!0),Ze=tn.getRSSvalue(b,rt,!1),Bt=Zt.INSIDE_ODD_TOTAL_SUBSET[Ae],Tt=Zt.INSIDE_GSUM[Ae];return new Bn(Ze*Bt+$e+Tt,ye)}}findFinderPattern(t,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let s=t.getSize(),l=!1,c=0;for(;c<s&&(l=!t.get(c),r!==l);)c++;let h=0,b=c;for(let S=c;S<s;S++)if(t.get(S)!==l)i[h]++;else{if(h===3){if(Yt.isFinderPattern(i))return[b,S];b+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,l=!l}throw new ae}parseFoundFinderPattern(t,r,i,s){let l=t.get(s[0]),c=s[0]-1;for(;c>=0&&l!==t.get(c);)c--;c++;const h=s[0]-c,b=this.getDecodeFinderCounters(),S=new Int32Array(b.length);I.arraycopy(b,0,S,1,b.length-1),S[0]=h;const O=this.parseFinderValue(S,Zt.FINDER_PATTERNS);let F=c,Y=s[1];return i&&(F=t.getSize()-1-F,Y=t.getSize()-1-Y),new tr(O,[c,s[1]],F,Y,r)}adjustOddEvenCounts(t,r){let i=he.sum(new Int32Array(this.getOddCounts())),s=he.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1,h=!1,b=!1;t?(i>12?c=!0:i<4&&(l=!0),s>12?b=!0:s<4&&(h=!0)):(i>11?c=!0:i<5&&(l=!0),s>10?b=!0:s<4&&(h=!0));let S=i+s-r,O=(i&1)===(t?1:0),F=(s&1)===1;if(S===1)if(O){if(F)throw new ae;c=!0}else{if(!F)throw new ae;b=!0}else if(S===-1)if(O){if(F)throw new ae;l=!0}else{if(!F)throw new ae;h=!0}else if(S===0){if(O){if(!F)throw new ae;i<s?(l=!0,b=!0):(c=!0,h=!0)}else if(F)throw new ae}else throw new ae;if(l){if(c)throw new ae;Yt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&Yt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(b)throw new ae;Yt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&Yt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Zt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Zt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Zt.OUTSIDE_GSUM=[0,161,961,2015,2715],Zt.INSIDE_GSUM=[0,336,1036,1516],Zt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Zt.INSIDE_ODD_WIDEST=[2,4,6,8],Zt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class hr extends bt{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const i=t?t.get(V.POSSIBLE_FORMATS):null,s=t&&t.get(V.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(ze.EAN_13)||i.includes(ze.UPC_A)||i.includes(ze.EAN_8)||i.includes(ze.UPC_E))&&this.readers.push(new Wn(t)),i.includes(ze.CODE_39)&&this.readers.push(new jt(s)),i.includes(ze.CODE_128)&&this.readers.push(new qe),i.includes(ze.ITF)&&this.readers.push(new mt),i.includes(ze.RSS_14)&&this.readers.push(new Zt),i.includes(ze.RSS_EXPANDED)&&this.readers.push(new Ve(this.verbose))):(this.readers.push(new Wn(t)),this.readers.push(new jt),this.readers.push(new Wn(t)),this.readers.push(new qe),this.readers.push(new mt),this.readers.push(new Zt),this.readers.push(new Ve(this.verbose)))}decodeRow(t,r,i){for(let s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(t,r,i)}catch{}throw new ae}reset(){this.readers.forEach(t=>t.reset())}}class Qs extends Oe{constructor(t=500,r){super(new hr(r),t,r)}}class qt{constructor(t,r,i){this.ecCodewords=t,this.ecBlocks=[r],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class zt{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Lt{constructor(t,r,i,s,l,c){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=i,this.dataRegionSizeRows=s,this.dataRegionSizeColumns=l,this.ecBlocks=c;let h=0;const b=c.getECCodewords(),S=c.getECBlocks();for(let O of S)h+=O.getCount()*(O.getDataCodewords()+b);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if((t&1)!==0||(r&1)!==0)throw new L;for(let i of Lt.VERSIONS)if(i.symbolSizeRows===t&&i.symbolSizeColumns===r)return i;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Lt(1,10,10,8,8,new qt(5,new zt(1,3))),new Lt(2,12,12,10,10,new qt(7,new zt(1,5))),new Lt(3,14,14,12,12,new qt(10,new zt(1,8))),new Lt(4,16,16,14,14,new qt(12,new zt(1,12))),new Lt(5,18,18,16,16,new qt(14,new zt(1,18))),new Lt(6,20,20,18,18,new qt(18,new zt(1,22))),new Lt(7,22,22,20,20,new qt(20,new zt(1,30))),new Lt(8,24,24,22,22,new qt(24,new zt(1,36))),new Lt(9,26,26,24,24,new qt(28,new zt(1,44))),new Lt(10,32,32,14,14,new qt(36,new zt(1,62))),new Lt(11,36,36,16,16,new qt(42,new zt(1,86))),new Lt(12,40,40,18,18,new qt(48,new zt(1,114))),new Lt(13,44,44,20,20,new qt(56,new zt(1,144))),new Lt(14,48,48,22,22,new qt(68,new zt(1,174))),new Lt(15,52,52,24,24,new qt(42,new zt(2,102))),new Lt(16,64,64,14,14,new qt(56,new zt(2,140))),new Lt(17,72,72,16,16,new qt(36,new zt(4,92))),new Lt(18,80,80,18,18,new qt(48,new zt(4,114))),new Lt(19,88,88,20,20,new qt(56,new zt(4,144))),new Lt(20,96,96,22,22,new qt(68,new zt(4,174))),new Lt(21,104,104,24,24,new qt(56,new zt(6,136))),new Lt(22,120,120,18,18,new qt(68,new zt(6,175))),new Lt(23,132,132,20,20,new qt(62,new zt(8,163))),new Lt(24,144,144,22,22,new qt(62,new zt(8,156),new zt(2,155))),new Lt(25,8,18,6,16,new qt(7,new zt(1,5))),new Lt(26,8,32,6,14,new qt(11,new zt(1,10))),new Lt(27,12,26,10,24,new qt(14,new zt(1,16))),new Lt(28,12,36,10,16,new qt(18,new zt(1,22))),new Lt(29,16,36,14,16,new qt(24,new zt(1,32))),new Lt(30,16,48,14,22,new qt(28,new zt(1,49)))]}}Lt.VERSIONS=Lt.buildVersions();class yi{constructor(t){const r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new L;this.version=yi.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new M(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),i=t.getWidth();return Lt.getVersionForDimensions(r,i)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,i=4,s=0;const l=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let h=!1,b=!1,S=!1,O=!1;do if(i===l&&s===0&&!h)t[r++]=this.readCorner1(l,c)&255,i-=2,s+=2,h=!0;else if(i===l-2&&s===0&&(c&3)!==0&&!b)t[r++]=this.readCorner2(l,c)&255,i-=2,s+=2,b=!0;else if(i===l+4&&s===2&&(c&7)===0&&!S)t[r++]=this.readCorner3(l,c)&255,i-=2,s+=2,S=!0;else if(i===l-2&&s===0&&(c&7)===4&&!O)t[r++]=this.readCorner4(l,c)&255,i-=2,s+=2,O=!0;else{do i<l&&s>=0&&!this.readMappingMatrix.get(s,i)&&(t[r++]=this.readUtah(i,s,l,c)&255),i-=2,s+=2;while(i>=0&&s<c);i+=1,s+=3;do i>=0&&s<c&&!this.readMappingMatrix.get(s,i)&&(t[r++]=this.readUtah(i,s,l,c)&255),i+=2,s-=2;while(i<l&&s>=0);i+=3,s+=1}while(i<l||s<c);if(r!==this.version.getTotalCodewords())throw new L;return t}readModule(t,r,i,s){return t<0&&(t+=i,r+=4-(i+4&7)),r<0&&(r+=s,t+=4-(s+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,i,s){let l=0;return this.readModule(t-2,r-2,i,s)&&(l|=1),l<<=1,this.readModule(t-2,r-1,i,s)&&(l|=1),l<<=1,this.readModule(t-1,r-2,i,s)&&(l|=1),l<<=1,this.readModule(t-1,r-1,i,s)&&(l|=1),l<<=1,this.readModule(t-1,r,i,s)&&(l|=1),l<<=1,this.readModule(t,r-2,i,s)&&(l|=1),l<<=1,this.readModule(t,r-1,i,s)&&(l|=1),l<<=1,this.readModule(t,r,i,s)&&(l|=1),l}readCorner1(t,r){let i=0;return this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,1,t,r)&&(i|=1),i<<=1,this.readModule(t-1,2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(2,r-1,t,r)&&(i|=1),i<<=1,this.readModule(3,r-1,t,r)&&(i|=1),i}readCorner2(t,r){let i=0;return this.readModule(t-3,0,t,r)&&(i|=1),i<<=1,this.readModule(t-2,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(0,r-4,t,r)&&(i|=1),i<<=1,this.readModule(0,r-3,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i}readCorner3(t,r){let i=0;return this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(0,r-3,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-3,t,r)&&(i|=1),i<<=1,this.readModule(1,r-2,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i}readCorner4(t,r){let i=0;return this.readModule(t-3,0,t,r)&&(i|=1),i<<=1,this.readModule(t-2,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(2,r-1,t,r)&&(i|=1),i<<=1,this.readModule(3,r-1,t,r)&&(i|=1),i}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new _("Dimension of bitMatrix must match the version size");const s=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),c=r/s|0,h=i/l|0,b=c*s,S=h*l,O=new M(S,b);for(let F=0;F<c;++F){const Y=F*s;for(let se=0;se<h;++se){const ge=se*l;for(let ye=0;ye<s;++ye){const Ae=F*(s+2)+1+ye,Me=Y+ye;for(let rt=0;rt<l;++rt){const $e=se*(l+2)+1+rt;if(t.get($e,Ae)){const Ze=ge+rt;O.set(Ze,Me)}}}}}return O}}class J{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const i=r.getECBlocks();let s=0;const l=i.getECBlocks();for(let ye of l)s+=ye.getCount();const c=new Array(s);let h=0;for(let ye of l)for(let Ae=0;Ae<ye.getCount();Ae++){const Me=ye.getDataCodewords(),rt=i.getECCodewords()+Me;c[h++]=new J(Me,new Uint8Array(rt))}const S=c[0].codewords.length-i.getECCodewords(),O=S-1;let F=0;for(let ye=0;ye<O;ye++)for(let Ae=0;Ae<h;Ae++)c[Ae].codewords[ye]=t[F++];const Y=r.getVersionNumber()===24,se=Y?8:h;for(let ye=0;ye<se;ye++)c[ye].codewords[S-1]=t[F++];const ge=c[0].codewords.length;for(let ye=S;ye<ge;ye++)for(let Ae=0;Ae<h;Ae++){const Me=Y?(Ae+8)%h:Ae,rt=Y&&Me>7?ye-1:ye;c[Me].codewords[rt]=t[F++]}if(F!==t.length)throw new _;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ue{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new _(""+t);let r=0,i=this.bitOffset,s=this.byteOffset;const l=this.bytes;if(i>0){const c=8-i,h=t<c?t:c,b=c-h,S=255>>8-h<<b;r=(l[s]&S)>>b,t-=h,i+=h,i===8&&(i=0,s++)}if(t>0){for(;t>=8;)r=r<<8|l[s]&255,s++,t-=8;if(t>0){const c=8-t,h=255>>c<<c;r=r<<t|(l[s]&h)>>c,i+=t}}return this.bitOffset=i,this.byteOffset=s,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ee;(function(U){U[U.PAD_ENCODE=0]="PAD_ENCODE",U[U.ASCII_ENCODE=1]="ASCII_ENCODE",U[U.C40_ENCODE=2]="C40_ENCODE",U[U.TEXT_ENCODE=3]="TEXT_ENCODE",U[U.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",U[U.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",U[U.BASE256_ENCODE=6]="BASE256_ENCODE"})(ee||(ee={}));class ve{static decode(t){const r=new ue(t),i=new ie,s=new ie,l=new Array;let c=ee.ASCII_ENCODE;do if(c===ee.ASCII_ENCODE)c=this.decodeAsciiSegment(r,i,s);else{switch(c){case ee.C40_ENCODE:this.decodeC40Segment(r,i);break;case ee.TEXT_ENCODE:this.decodeTextSegment(r,i);break;case ee.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,i);break;case ee.EDIFACT_ENCODE:this.decodeEdifactSegment(r,i);break;case ee.BASE256_ENCODE:this.decodeBase256Segment(r,i,l);break;default:throw new L}c=ee.ASCII_ENCODE}while(c!==ee.PAD_ENCODE&&r.available()>0);return s.length()>0&&i.append(s.toString()),new st(t,i.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(t,r,i){let s=!1;do{let l=t.readBits(8);if(l===0)throw new L;if(l<=128)return s&&(l+=128),r.append(String.fromCharCode(l-1)),ee.ASCII_ENCODE;if(l===129)return ee.PAD_ENCODE;if(l<=229){const c=l-130;c<10&&r.append("0"),r.append(""+c)}else switch(l){case 230:return ee.C40_ENCODE;case 231:return ee.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:s=!0;break;case 236:r.append("[)>05"),i.insert(0,"");break;case 237:r.append("[)>06"),i.insert(0,"");break;case 238:return ee.ANSIX12_ENCODE;case 239:return ee.TEXT_ENCODE;case 240:return ee.EDIFACT_ENCODE;case 241:break;default:if(l!==254||t.available()!==0)throw new L;break}}while(t.available()>0);return ee.ASCII_ENCODE}static decodeC40Segment(t,r){let i=!1;const s=[];let l=0;do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),s);for(let h=0;h<3;h++){const b=s[h];switch(l){case 0:if(b<3)l=b+1;else if(b<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[b];i?(r.append(String.fromCharCode(S.charCodeAt(0)+128)),i=!1):r.append(S)}else throw new L;break;case 1:i?(r.append(String.fromCharCode(b+128)),i=!1):r.append(String.fromCharCode(b)),l=0;break;case 2:if(b<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[b];i?(r.append(String.fromCharCode(S.charCodeAt(0)+128)),i=!1):r.append(S)}else switch(b){case 27:r.append("");break;case 30:i=!0;break;default:throw new L}l=0;break;case 3:i?(r.append(String.fromCharCode(b+224)),i=!1):r.append(String.fromCharCode(b+96)),l=0;break;default:throw new L}}}while(t.available()>0)}static decodeTextSegment(t,r){let i=!1,s=[],l=0;do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),s);for(let h=0;h<3;h++){const b=s[h];switch(l){case 0:if(b<3)l=b+1;else if(b<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[b];i?(r.append(String.fromCharCode(S.charCodeAt(0)+128)),i=!1):r.append(S)}else throw new L;break;case 1:i?(r.append(String.fromCharCode(b+128)),i=!1):r.append(String.fromCharCode(b)),l=0;break;case 2:if(b<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[b];i?(r.append(String.fromCharCode(S.charCodeAt(0)+128)),i=!1):r.append(S)}else switch(b){case 27:r.append("");break;case 30:i=!0;break;default:throw new L}l=0;break;case 3:if(b<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[b];i?(r.append(String.fromCharCode(S.charCodeAt(0)+128)),i=!1):r.append(S),l=0}else throw new L;break;default:throw new L}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const i=[];do{if(t.available()===8)return;const s=t.readBits(8);if(s===254)return;this.parseTwoBytes(s,t.readBits(8),i);for(let l=0;l<3;l++){const c=i[l];switch(c){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(c<14)r.append(String.fromCharCode(c+44));else if(c<40)r.append(String.fromCharCode(c+51));else throw new L;break}}}while(t.available()>0)}static parseTwoBytes(t,r,i){let s=(t<<8)+r-1,l=Math.floor(s/1600);i[0]=l,s-=l*1600,l=Math.floor(s/40),i[1]=l,i[2]=s-l*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let i=0;i<4;i++){let s=t.readBits(6);if(s===31){const l=8-t.getBitOffset();l!==8&&t.readBits(l);return}(s&32)===0&&(s|=64),r.append(String.fromCharCode(s))}}while(t.available()>0)}static decodeBase256Segment(t,r,i){let s=1+t.getByteOffset();const l=this.unrandomize255State(t.readBits(8),s++);let c;if(l===0?c=t.available()/8|0:l<250?c=l:c=250*(l-249)+this.unrandomize255State(t.readBits(8),s++),c<0)throw new L;const h=new Uint8Array(c);for(let b=0;b<c;b++){if(t.available()<8)throw new L;h[b]=this.unrandomize255State(t.readBits(8),s++)}i.push(h);try{r.append(ce.decode(h,X.ISO88591))}catch(b){throw new Ne("Platform does not support required encoding: "+b.message)}}static unrandomize255State(t,r){const i=149*r%255+1,s=t-i;return s>=0?s:s+256}}ve.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ve.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ve.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ve.TEXT_SHIFT2_SET_CHARS=ve.C40_SHIFT2_SET_CHARS,ve.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ce{constructor(){this.rsDecoder=new _e(xt.DATA_MATRIX_FIELD_256)}decode(t){const r=new yi(t),i=r.getVersion(),s=r.readCodewords(),l=J.getDataBlocks(s,i);let c=0;for(let S of l)c+=S.getNumDataCodewords();const h=new Uint8Array(c),b=l.length;for(let S=0;S<b;S++){const O=l[S],F=O.getCodewords(),Y=O.getNumDataCodewords();this.correctErrors(F,Y);for(let se=0;se<Y;se++)h[se*b+S]=F[se]}return ve.decode(h)}correctErrors(t,r){const i=new Int32Array(t);try{this.rsDecoder.decode(i,t.length-r)}catch{throw new T}for(let s=0;s<r;s++)t[s]=i[s]}}class pe{constructor(t){this.image=t,this.rectangleDetector=new tt(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new ae;r=this.shiftToModuleCenter(r);const i=r[0],s=r[1],l=r[2],c=r[3];let h=this.transitionsBetween(i,c)+1,b=this.transitionsBetween(l,c)+1;(h&1)===1&&(h+=1),(b&1)===1&&(b+=1),4*h<7*b&&4*b<7*h&&(h=b=Math.max(h,b));let S=pe.sampleGrid(this.image,i,s,l,c,h,b);return new Se(S,[i,s,l,c])}static shiftPoint(t,r,i){let s=(r.getX()-t.getX())/(i+1),l=(r.getY()-t.getY())/(i+1);return new Ee(t.getX()+s,t.getY()+l)}static moveAway(t,r,i){let s=t.getX(),l=t.getY();return s<r?s-=1:s+=1,l<i?l-=1:l+=1,new Ee(s,l)}detectSolid1(t){let r=t[0],i=t[1],s=t[3],l=t[2],c=this.transitionsBetween(r,i),h=this.transitionsBetween(i,s),b=this.transitionsBetween(s,l),S=this.transitionsBetween(l,r),O=c,F=[l,r,i,s];return O>h&&(O=h,F[0]=r,F[1]=i,F[2]=s,F[3]=l),O>b&&(O=b,F[0]=i,F[1]=s,F[2]=l,F[3]=r),O>S&&(F[0]=s,F[1]=l,F[2]=r,F[3]=i),F}detectSolid2(t){let r=t[0],i=t[1],s=t[2],l=t[3],c=this.transitionsBetween(r,l),h=pe.shiftPoint(i,s,(c+1)*4),b=pe.shiftPoint(s,i,(c+1)*4),S=this.transitionsBetween(h,r),O=this.transitionsBetween(b,l);return S<O?(t[0]=r,t[1]=i,t[2]=s,t[3]=l):(t[0]=i,t[1]=s,t[2]=l,t[3]=r),t}correctTopRight(t){let r=t[0],i=t[1],s=t[2],l=t[3],c=this.transitionsBetween(r,l),h=this.transitionsBetween(i,l),b=pe.shiftPoint(r,i,(h+1)*4),S=pe.shiftPoint(s,i,(c+1)*4);c=this.transitionsBetween(b,l),h=this.transitionsBetween(S,l);let O=new Ee(l.getX()+(s.getX()-i.getX())/(c+1),l.getY()+(s.getY()-i.getY())/(c+1)),F=new Ee(l.getX()+(r.getX()-i.getX())/(h+1),l.getY()+(r.getY()-i.getY())/(h+1));if(!this.isValid(O))return this.isValid(F)?F:null;if(!this.isValid(F))return O;let Y=this.transitionsBetween(b,O)+this.transitionsBetween(S,O),se=this.transitionsBetween(b,F)+this.transitionsBetween(S,F);return Y>se?O:F}shiftToModuleCenter(t){let r=t[0],i=t[1],s=t[2],l=t[3],c=this.transitionsBetween(r,l)+1,h=this.transitionsBetween(s,l)+1,b=pe.shiftPoint(r,i,h*4),S=pe.shiftPoint(s,i,c*4);c=this.transitionsBetween(b,l)+1,h=this.transitionsBetween(S,l)+1,(c&1)===1&&(c+=1),(h&1)===1&&(h+=1);let O=(r.getX()+i.getX()+s.getX()+l.getX())/4,F=(r.getY()+i.getY()+s.getY()+l.getY())/4;r=pe.moveAway(r,O,F),i=pe.moveAway(i,O,F),s=pe.moveAway(s,O,F),l=pe.moveAway(l,O,F);let Y,se;return b=pe.shiftPoint(r,i,h*4),b=pe.shiftPoint(b,l,c*4),Y=pe.shiftPoint(i,r,h*4),Y=pe.shiftPoint(Y,s,c*4),S=pe.shiftPoint(s,l,h*4),S=pe.shiftPoint(S,i,c*4),se=pe.shiftPoint(l,s,h*4),se=pe.shiftPoint(se,r,c*4),[b,Y,S,se]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,i,s,l,c,h){return pt.getInstance().sampleGrid(t,c,h,.5,.5,c-.5,.5,c-.5,h-.5,.5,h-.5,r.getX(),r.getY(),l.getX(),l.getY(),s.getX(),s.getY(),i.getX(),i.getY())}transitionsBetween(t,r){let i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),l=Math.trunc(r.getX()),c=Math.trunc(r.getY()),h=Math.abs(c-s)>Math.abs(l-i);if(h){let ye=i;i=s,s=ye,ye=l,l=c,c=ye}let b=Math.abs(l-i),S=Math.abs(c-s),O=-b/2,F=s<c?1:-1,Y=i<l?1:-1,se=0,ge=this.image.get(h?s:i,h?i:s);for(let ye=i,Ae=s;ye!==l;ye+=Y){let Me=this.image.get(h?Ae:ye,h?ye:Ae);if(Me!==ge&&(se++,ge=Me),O+=S,O>0){if(Ae===c)break;Ae+=F,O-=b}}return se}}class Fe{constructor(){this.decoder=new Ce}decode(t,r=null){let i,s;if(r!=null&&r.has(V.PURE_BARCODE)){const S=Fe.extractPureBits(t.getBlackMatrix());i=this.decoder.decode(S),s=Fe.NO_POINTS}else{const S=new pe(t.getBlackMatrix()).detect();i=this.decoder.decode(S.getBits()),s=S.getPoints()}const l=i.getRawBytes(),c=new Te(i.getText(),l,8*l.length,s,ze.DATA_MATRIX,I.currentTimeMillis()),h=i.getByteSegments();h!=null&&c.putMetadata(nt.BYTE_SEGMENTS,h);const b=i.getECLevel();return b!=null&&c.putMetadata(nt.ERROR_CORRECTION_LEVEL,b),c}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),i=t.getBottomRightOnBit();if(r==null||i==null)throw new ae;const s=this.moduleSize(r,t);let l=r[1];const c=i[1];let h=r[0];const S=(i[0]-h+1)/s,O=(c-l+1)/s;if(S<=0||O<=0)throw new ae;const F=s/2;l+=F,h+=F;const Y=new M(S,O);for(let se=0;se<O;se++){const ge=l+se*s;for(let ye=0;ye<S;ye++)t.get(h+ye*s,ge)&&Y.set(ye,se)}return Y}static moduleSize(t,r){const i=r.getWidth();let s=t[0];const l=t[1];for(;s<i&&r.get(s,l);)s++;if(s===i)throw new ae;const c=s-t[0];if(c===0)throw new ae;return c}}Fe.NO_POINTS=[];class We extends Oe{constructor(t=500){super(new Fe,t)}}var Qe;(function(U){U[U.L=0]="L",U[U.M=1]="M",U[U.Q=2]="Q",U[U.H=3]="H"})(Qe||(Qe={}));class Ue{constructor(t,r,i){this.value=t,this.stringValue=r,this.bits=i,Ue.FOR_BITS.set(i,this),Ue.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Ue.L;case"M":return Ue.M;case"Q":return Ue.Q;case"H":return Ue.H;default:throw new N(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Ue))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=Ue.FOR_BITS.size)throw new _;return Ue.FOR_BITS.get(t)}}Ue.FOR_BITS=new Map,Ue.FOR_VALUE=new Map,Ue.L=new Ue(Qe.L,"L",1),Ue.M=new Ue(Qe.M,"M",0),Ue.Q=new Ue(Qe.Q,"Q",3),Ue.H=new Ue(Qe.H,"H",2);class Ke{constructor(t){this.errorCorrectionLevel=Ue.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return H.bitCount(t^r)}static decodeFormatInformation(t,r){const i=Ke.doDecodeFormatInformation(t,r);return i!==null?i:Ke.doDecodeFormatInformation(t^Ke.FORMAT_INFO_MASK_QR,r^Ke.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let i=Number.MAX_SAFE_INTEGER,s=0;for(const l of Ke.FORMAT_INFO_DECODE_LOOKUP){const c=l[0];if(c===t||c===r)return new Ke(l[1]);let h=Ke.numBitsDiffering(t,c);h<i&&(s=l[1],i=h),t!==r&&(h=Ke.numBitsDiffering(r,c),h<i&&(s=l[1],i=h))}return i<=3?new Ke(s):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Ke))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Ke.FORMAT_INFO_MASK_QR=21522,Ke.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class de{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const i of r)t+=i.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ${constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class at{constructor(t,r,...i){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=i;let s=0;const l=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();for(const h of c)s+=h.getCount()*(h.getDataCodewords()+l);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new L;try{return this.getVersionForNumber((t-17)/4)}catch{throw new L}}static getVersionForNumber(t){if(t<1||t>40)throw new _;return at.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,i=0;for(let s=0;s<at.VERSION_DECODE_INFO.length;s++){const l=at.VERSION_DECODE_INFO[s];if(l===t)return at.getVersionForNumber(s+7);const c=Ke.numBitsDiffering(t,l);c<r&&(i=s+7,r=c)}return r<=3?at.getVersionForNumber(i):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new M(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const i=this.alignmentPatternCenters.length;for(let s=0;s<i;s++){const l=this.alignmentPatternCenters[s]-2;for(let c=0;c<i;c++)s===0&&(c===0||c===i-1)||s===i-1&&c===0||r.setRegion(this.alignmentPatternCenters[c]-2,l,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}at.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),at.VERSIONS=[new at(1,new Int32Array(0),new de(7,new $(1,19)),new de(10,new $(1,16)),new de(13,new $(1,13)),new de(17,new $(1,9))),new at(2,Int32Array.from([6,18]),new de(10,new $(1,34)),new de(16,new $(1,28)),new de(22,new $(1,22)),new de(28,new $(1,16))),new at(3,Int32Array.from([6,22]),new de(15,new $(1,55)),new de(26,new $(1,44)),new de(18,new $(2,17)),new de(22,new $(2,13))),new at(4,Int32Array.from([6,26]),new de(20,new $(1,80)),new de(18,new $(2,32)),new de(26,new $(2,24)),new de(16,new $(4,9))),new at(5,Int32Array.from([6,30]),new de(26,new $(1,108)),new de(24,new $(2,43)),new de(18,new $(2,15),new $(2,16)),new de(22,new $(2,11),new $(2,12))),new at(6,Int32Array.from([6,34]),new de(18,new $(2,68)),new de(16,new $(4,27)),new de(24,new $(4,19)),new de(28,new $(4,15))),new at(7,Int32Array.from([6,22,38]),new de(20,new $(2,78)),new de(18,new $(4,31)),new de(18,new $(2,14),new $(4,15)),new de(26,new $(4,13),new $(1,14))),new at(8,Int32Array.from([6,24,42]),new de(24,new $(2,97)),new de(22,new $(2,38),new $(2,39)),new de(22,new $(4,18),new $(2,19)),new de(26,new $(4,14),new $(2,15))),new at(9,Int32Array.from([6,26,46]),new de(30,new $(2,116)),new de(22,new $(3,36),new $(2,37)),new de(20,new $(4,16),new $(4,17)),new de(24,new $(4,12),new $(4,13))),new at(10,Int32Array.from([6,28,50]),new de(18,new $(2,68),new $(2,69)),new de(26,new $(4,43),new $(1,44)),new de(24,new $(6,19),new $(2,20)),new de(28,new $(6,15),new $(2,16))),new at(11,Int32Array.from([6,30,54]),new de(20,new $(4,81)),new de(30,new $(1,50),new $(4,51)),new de(28,new $(4,22),new $(4,23)),new de(24,new $(3,12),new $(8,13))),new at(12,Int32Array.from([6,32,58]),new de(24,new $(2,92),new $(2,93)),new de(22,new $(6,36),new $(2,37)),new de(26,new $(4,20),new $(6,21)),new de(28,new $(7,14),new $(4,15))),new at(13,Int32Array.from([6,34,62]),new de(26,new $(4,107)),new de(22,new $(8,37),new $(1,38)),new de(24,new $(8,20),new $(4,21)),new de(22,new $(12,11),new $(4,12))),new at(14,Int32Array.from([6,26,46,66]),new de(30,new $(3,115),new $(1,116)),new de(24,new $(4,40),new $(5,41)),new de(20,new $(11,16),new $(5,17)),new de(24,new $(11,12),new $(5,13))),new at(15,Int32Array.from([6,26,48,70]),new de(22,new $(5,87),new $(1,88)),new de(24,new $(5,41),new $(5,42)),new de(30,new $(5,24),new $(7,25)),new de(24,new $(11,12),new $(7,13))),new at(16,Int32Array.from([6,26,50,74]),new de(24,new $(5,98),new $(1,99)),new de(28,new $(7,45),new $(3,46)),new de(24,new $(15,19),new $(2,20)),new de(30,new $(3,15),new $(13,16))),new at(17,Int32Array.from([6,30,54,78]),new de(28,new $(1,107),new $(5,108)),new de(28,new $(10,46),new $(1,47)),new de(28,new $(1,22),new $(15,23)),new de(28,new $(2,14),new $(17,15))),new at(18,Int32Array.from([6,30,56,82]),new de(30,new $(5,120),new $(1,121)),new de(26,new $(9,43),new $(4,44)),new de(28,new $(17,22),new $(1,23)),new de(28,new $(2,14),new $(19,15))),new at(19,Int32Array.from([6,30,58,86]),new de(28,new $(3,113),new $(4,114)),new de(26,new $(3,44),new $(11,45)),new de(26,new $(17,21),new $(4,22)),new de(26,new $(9,13),new $(16,14))),new at(20,Int32Array.from([6,34,62,90]),new de(28,new $(3,107),new $(5,108)),new de(26,new $(3,41),new $(13,42)),new de(30,new $(15,24),new $(5,25)),new de(28,new $(15,15),new $(10,16))),new at(21,Int32Array.from([6,28,50,72,94]),new de(28,new $(4,116),new $(4,117)),new de(26,new $(17,42)),new de(28,new $(17,22),new $(6,23)),new de(30,new $(19,16),new $(6,17))),new at(22,Int32Array.from([6,26,50,74,98]),new de(28,new $(2,111),new $(7,112)),new de(28,new $(17,46)),new de(30,new $(7,24),new $(16,25)),new de(24,new $(34,13))),new at(23,Int32Array.from([6,30,54,78,102]),new de(30,new $(4,121),new $(5,122)),new de(28,new $(4,47),new $(14,48)),new de(30,new $(11,24),new $(14,25)),new de(30,new $(16,15),new $(14,16))),new at(24,Int32Array.from([6,28,54,80,106]),new de(30,new $(6,117),new $(4,118)),new de(28,new $(6,45),new $(14,46)),new de(30,new $(11,24),new $(16,25)),new de(30,new $(30,16),new $(2,17))),new at(25,Int32Array.from([6,32,58,84,110]),new de(26,new $(8,106),new $(4,107)),new de(28,new $(8,47),new $(13,48)),new de(30,new $(7,24),new $(22,25)),new de(30,new $(22,15),new $(13,16))),new at(26,Int32Array.from([6,30,58,86,114]),new de(28,new $(10,114),new $(2,115)),new de(28,new $(19,46),new $(4,47)),new de(28,new $(28,22),new $(6,23)),new de(30,new $(33,16),new $(4,17))),new at(27,Int32Array.from([6,34,62,90,118]),new de(30,new $(8,122),new $(4,123)),new de(28,new $(22,45),new $(3,46)),new de(30,new $(8,23),new $(26,24)),new de(30,new $(12,15),new $(28,16))),new at(28,Int32Array.from([6,26,50,74,98,122]),new de(30,new $(3,117),new $(10,118)),new de(28,new $(3,45),new $(23,46)),new de(30,new $(4,24),new $(31,25)),new de(30,new $(11,15),new $(31,16))),new at(29,Int32Array.from([6,30,54,78,102,126]),new de(30,new $(7,116),new $(7,117)),new de(28,new $(21,45),new $(7,46)),new de(30,new $(1,23),new $(37,24)),new de(30,new $(19,15),new $(26,16))),new at(30,Int32Array.from([6,26,52,78,104,130]),new de(30,new $(5,115),new $(10,116)),new de(28,new $(19,47),new $(10,48)),new de(30,new $(15,24),new $(25,25)),new de(30,new $(23,15),new $(25,16))),new at(31,Int32Array.from([6,30,56,82,108,134]),new de(30,new $(13,115),new $(3,116)),new de(28,new $(2,46),new $(29,47)),new de(30,new $(42,24),new $(1,25)),new de(30,new $(23,15),new $(28,16))),new at(32,Int32Array.from([6,34,60,86,112,138]),new de(30,new $(17,115)),new de(28,new $(10,46),new $(23,47)),new de(30,new $(10,24),new $(35,25)),new de(30,new $(19,15),new $(35,16))),new at(33,Int32Array.from([6,30,58,86,114,142]),new de(30,new $(17,115),new $(1,116)),new de(28,new $(14,46),new $(21,47)),new de(30,new $(29,24),new $(19,25)),new de(30,new $(11,15),new $(46,16))),new at(34,Int32Array.from([6,34,62,90,118,146]),new de(30,new $(13,115),new $(6,116)),new de(28,new $(14,46),new $(23,47)),new de(30,new $(44,24),new $(7,25)),new de(30,new $(59,16),new $(1,17))),new at(35,Int32Array.from([6,30,54,78,102,126,150]),new de(30,new $(12,121),new $(7,122)),new de(28,new $(12,47),new $(26,48)),new de(30,new $(39,24),new $(14,25)),new de(30,new $(22,15),new $(41,16))),new at(36,Int32Array.from([6,24,50,76,102,128,154]),new de(30,new $(6,121),new $(14,122)),new de(28,new $(6,47),new $(34,48)),new de(30,new $(46,24),new $(10,25)),new de(30,new $(2,15),new $(64,16))),new at(37,Int32Array.from([6,28,54,80,106,132,158]),new de(30,new $(17,122),new $(4,123)),new de(28,new $(29,46),new $(14,47)),new de(30,new $(49,24),new $(10,25)),new de(30,new $(24,15),new $(46,16))),new at(38,Int32Array.from([6,32,58,84,110,136,162]),new de(30,new $(4,122),new $(18,123)),new de(28,new $(13,46),new $(32,47)),new de(30,new $(48,24),new $(14,25)),new de(30,new $(42,15),new $(32,16))),new at(39,Int32Array.from([6,26,54,82,110,138,166]),new de(30,new $(20,117),new $(4,118)),new de(28,new $(40,47),new $(7,48)),new de(30,new $(43,24),new $(22,25)),new de(30,new $(10,15),new $(67,16))),new at(40,Int32Array.from([6,30,58,86,114,142,170]),new de(30,new $(19,118),new $(6,119)),new de(28,new $(18,47),new $(31,48)),new de(30,new $(34,24),new $(34,25)),new de(30,new $(20,15),new $(61,16)))];var Et;(function(U){U[U.DATA_MASK_000=0]="DATA_MASK_000",U[U.DATA_MASK_001=1]="DATA_MASK_001",U[U.DATA_MASK_010=2]="DATA_MASK_010",U[U.DATA_MASK_011=3]="DATA_MASK_011",U[U.DATA_MASK_100=4]="DATA_MASK_100",U[U.DATA_MASK_101=5]="DATA_MASK_101",U[U.DATA_MASK_110=6]="DATA_MASK_110",U[U.DATA_MASK_111=7]="DATA_MASK_111"})(Et||(Et={}));class Ht{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let i=0;i<r;i++)for(let s=0;s<r;s++)this.isMasked(i,s)&&t.flip(s,i)}}Ht.values=new Map([[Et.DATA_MASK_000,new Ht(Et.DATA_MASK_000,(U,t)=>(U+t&1)===0)],[Et.DATA_MASK_001,new Ht(Et.DATA_MASK_001,(U,t)=>(U&1)===0)],[Et.DATA_MASK_010,new Ht(Et.DATA_MASK_010,(U,t)=>t%3===0)],[Et.DATA_MASK_011,new Ht(Et.DATA_MASK_011,(U,t)=>(U+t)%3===0)],[Et.DATA_MASK_100,new Ht(Et.DATA_MASK_100,(U,t)=>(Math.floor(U/2)+Math.floor(t/3)&1)===0)],[Et.DATA_MASK_101,new Ht(Et.DATA_MASK_101,(U,t)=>U*t%6===0)],[Et.DATA_MASK_110,new Ht(Et.DATA_MASK_110,(U,t)=>U*t%6<3)],[Et.DATA_MASK_111,new Ht(Et.DATA_MASK_111,(U,t)=>(U+t+U*t%3&1)===0)]]);class on{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new L;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let l=0;l<6;l++)t=this.copyBit(l,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let l=5;l>=0;l--)t=this.copyBit(8,l,t);const r=this.bitMatrix.getHeight();let i=0;const s=r-7;for(let l=r-1;l>=s;l--)i=this.copyBit(8,l,i);for(let l=r-8;l<r;l++)i=this.copyBit(l,8,i);if(this.parsedFormatInfo=Ke.decodeFormatInformation(t,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return at.getVersionForNumber(r);let i=0;const s=t-11;for(let c=5;c>=0;c--)for(let h=t-9;h>=s;h--)i=this.copyBit(h,c,i);let l=at.decodeVersionInformation(i);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;i=0;for(let c=5;c>=0;c--)for(let h=t-9;h>=s;h--)i=this.copyBit(c,h,i);if(l=at.decodeVersionInformation(i),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new L}copyBit(t,r,i){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?i<<1|1:i<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),i=Ht.values.get(t.getDataMask()),s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s);const l=r.buildFunctionPattern();let c=!0;const h=new Uint8Array(r.getTotalCodewords());let b=0,S=0,O=0;for(let F=s-1;F>0;F-=2){F===6&&F--;for(let Y=0;Y<s;Y++){const se=c?s-1-Y:Y;for(let ge=0;ge<2;ge++)l.get(F-ge,se)||(O++,S<<=1,this.bitMatrix.get(F-ge,se)&&(S|=1),O===8&&(h[b++]=S,O=0,S=0))}c=!c}if(b!==r.getTotalCodewords())throw new L;return h}remask(){if(this.parsedFormatInfo===null)return;const t=Ht.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,i=t.getWidth();r<i;r++)for(let s=r+1,l=t.getHeight();s<l;s++)t.get(r,s)!==t.get(s,r)&&(t.flip(s,r),t.flip(r,s))}}class cr{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,i){if(t.length!==r.getTotalCodewords())throw new _;const s=r.getECBlocksForLevel(i);let l=0;const c=s.getECBlocks();for(const ge of c)l+=ge.getCount();const h=new Array(l);let b=0;for(const ge of c)for(let ye=0;ye<ge.getCount();ye++){const Ae=ge.getDataCodewords(),Me=s.getECCodewordsPerBlock()+Ae;h[b++]=new cr(Ae,new Uint8Array(Me))}const S=h[0].codewords.length;let O=h.length-1;for(;O>=0&&h[O].codewords.length!==S;)O--;O++;const F=S-s.getECCodewordsPerBlock();let Y=0;for(let ge=0;ge<F;ge++)for(let ye=0;ye<b;ye++)h[ye].codewords[ge]=t[Y++];for(let ge=O;ge<b;ge++)h[ge].codewords[F]=t[Y++];const se=h[0].codewords.length;for(let ge=F;ge<se;ge++)for(let ye=0;ye<b;ye++){const Ae=ye<O?ge:ge+1;h[ye].codewords[Ae]=t[Y++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Vn;(function(U){U[U.TERMINATOR=0]="TERMINATOR",U[U.NUMERIC=1]="NUMERIC",U[U.ALPHANUMERIC=2]="ALPHANUMERIC",U[U.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",U[U.BYTE=4]="BYTE",U[U.ECI=5]="ECI",U[U.KANJI=6]="KANJI",U[U.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",U[U.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",U[U.HANZI=9]="HANZI"})(Vn||(Vn={}));class gt{constructor(t,r,i,s){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=i,this.bits=s,gt.FOR_BITS.set(s,this),gt.FOR_VALUE.set(t,this)}static forBits(t){const r=gt.FOR_BITS.get(t);if(r===void 0)throw new _;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let i;return r<=9?i=0:r<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof gt))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}gt.FOR_BITS=new Map,gt.FOR_VALUE=new Map,gt.TERMINATOR=new gt(Vn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),gt.NUMERIC=new gt(Vn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),gt.ALPHANUMERIC=new gt(Vn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),gt.STRUCTURED_APPEND=new gt(Vn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),gt.BYTE=new gt(Vn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),gt.ECI=new gt(Vn.ECI,"ECI",Int32Array.from([0,0,0]),7),gt.KANJI=new gt(Vn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),gt.FNC1_FIRST_POSITION=new gt(Vn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),gt.FNC1_SECOND_POSITION=new gt(Vn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),gt.HANZI=new gt(Vn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class hn{static decode(t,r,i,s){const l=new ue(t);let c=new ie;const h=new Array;let b=-1,S=-1;try{let O=null,F=!1,Y;do{if(l.available()<4)Y=gt.TERMINATOR;else{const se=l.readBits(4);Y=gt.forBits(se)}switch(Y){case gt.TERMINATOR:break;case gt.FNC1_FIRST_POSITION:case gt.FNC1_SECOND_POSITION:F=!0;break;case gt.STRUCTURED_APPEND:if(l.available()<16)throw new L;b=l.readBits(8),S=l.readBits(8);break;case gt.ECI:const se=hn.parseECIValue(l);if(O=G.getCharacterSetECIByValue(se),O===null)throw new L;break;case gt.HANZI:const ge=l.readBits(4),ye=l.readBits(Y.getCharacterCountBits(r));ge===hn.GB2312_SUBSET&&hn.decodeHanziSegment(l,c,ye);break;default:const Ae=l.readBits(Y.getCharacterCountBits(r));switch(Y){case gt.NUMERIC:hn.decodeNumericSegment(l,c,Ae);break;case gt.ALPHANUMERIC:hn.decodeAlphanumericSegment(l,c,Ae,F);break;case gt.BYTE:hn.decodeByteSegment(l,c,Ae,O,h,s);break;case gt.KANJI:hn.decodeKanjiSegment(l,c,Ae);break;default:throw new L}break}}while(Y!==gt.TERMINATOR)}catch{throw new L}return new st(t,c.toString(),h.length===0?null:h,i===null?null:i.toString(),b,S)}static decodeHanziSegment(t,r,i){if(i*13>t.available())throw new L;const s=new Uint8Array(2*i);let l=0;for(;i>0;){const c=t.readBits(13);let h=c/96<<8&4294967295|c%96;h<959?h+=41377:h+=42657,s[l]=h>>8&255,s[l+1]=h&255,l+=2,i--}try{r.append(ce.decode(s,X.GB2312))}catch(c){throw new L(c)}}static decodeKanjiSegment(t,r,i){if(i*13>t.available())throw new L;const s=new Uint8Array(2*i);let l=0;for(;i>0;){const c=t.readBits(13);let h=c/192<<8&4294967295|c%192;h<7936?h+=33088:h+=49472,s[l]=h>>8,s[l+1]=h,l+=2,i--}try{r.append(ce.decode(s,X.SHIFT_JIS))}catch(c){throw new L(c)}}static decodeByteSegment(t,r,i,s,l,c){if(8*i>t.available())throw new L;const h=new Uint8Array(i);for(let S=0;S<i;S++)h[S]=t.readBits(8);let b;s===null?b=X.guessEncoding(h,c):b=s.getName();try{r.append(ce.decode(h,b))}catch(S){throw new L(S)}l.push(h)}static toAlphaNumericChar(t){if(t>=hn.ALPHANUMERIC_CHARS.length)throw new L;return hn.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,i,s){const l=r.length();for(;i>1;){if(t.available()<11)throw new L;const c=t.readBits(11);r.append(hn.toAlphaNumericChar(Math.floor(c/45))),r.append(hn.toAlphaNumericChar(c%45)),i-=2}if(i===1){if(t.available()<6)throw new L;r.append(hn.toAlphaNumericChar(t.readBits(6)))}if(s)for(let c=l;c<r.length();c++)r.charAt(c)==="%"&&(c<r.length()-1&&r.charAt(c+1)==="%"?r.deleteCharAt(c+1):r.setCharAt(c,""))}static decodeNumericSegment(t,r,i){for(;i>=3;){if(t.available()<10)throw new L;const s=t.readBits(10);if(s>=1e3)throw new L;r.append(hn.toAlphaNumericChar(Math.floor(s/100))),r.append(hn.toAlphaNumericChar(Math.floor(s/10)%10)),r.append(hn.toAlphaNumericChar(s%10)),i-=3}if(i===2){if(t.available()<7)throw new L;const s=t.readBits(7);if(s>=100)throw new L;r.append(hn.toAlphaNumericChar(Math.floor(s/10))),r.append(hn.toAlphaNumericChar(s%10))}else if(i===1){if(t.available()<4)throw new L;const s=t.readBits(4);if(s>=10)throw new L;r.append(hn.toAlphaNumericChar(s))}}static parseECIValue(t){const r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const i=t.readBits(8);return(r&63)<<8&4294967295|i}if((r&224)===192){const i=t.readBits(16);return(r&31)<<16&4294967295|i}throw new L}}hn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",hn.GB2312_SUBSET=1;class na{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class to{constructor(){this.rsDecoder=new _e(xt.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(M.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const i=new on(t);let s=null;try{return this.decodeBitMatrixParser(i,r)}catch(l){s=l}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const l=this.decodeBitMatrixParser(i,r);return l.setOther(new na(!0)),l}catch(l){throw s!==null?s:l}}decodeBitMatrixParser(t,r){const i=t.readVersion(),s=t.readFormatInformation().getErrorCorrectionLevel(),l=t.readCodewords(),c=cr.getDataBlocks(l,i,s);let h=0;for(const O of c)h+=O.getNumDataCodewords();const b=new Uint8Array(h);let S=0;for(const O of c){const F=O.getCodewords(),Y=O.getNumDataCodewords();this.correctErrors(F,Y);for(let se=0;se<Y;se++)b[S++]=F[se]}return hn.decode(b,i,s,r)}correctErrors(t,r){const i=new Int32Array(t);try{this.rsDecoder.decode(i,t.length-r)}catch{throw new T}for(let s=0;s<r;s++)t[s]=i[s]}}class bi extends Ee{constructor(t,r,i){super(t,r),this.estimatedModuleSize=i}aboutEquals(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){const s=Math.abs(t-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1}combineEstimate(t,r,i){const s=(this.getX()+r)/2,l=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new bi(s,l,c)}}class vr{constructor(t,r,i,s,l,c,h){this.image=t,this.startX=r,this.startY=i,this.width=s,this.height=l,this.moduleSize=c,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,i=this.width,s=t+i,l=this.startY+r/2,c=new Int32Array(3),h=this.image;for(let b=0;b<r;b++){const S=l+((b&1)===0?Math.floor((b+1)/2):-Math.floor((b+1)/2));c[0]=0,c[1]=0,c[2]=0;let O=t;for(;O<s&&!h.get(O,S);)O++;let F=0;for(;O<s;){if(h.get(O,S))if(F===1)c[1]++;else if(F===2){if(this.foundPatternCross(c)){const Y=this.handlePossibleCenter(c,S,O);if(Y!==null)return Y}c[0]=c[2],c[1]=1,c[2]=0,F=1}else c[++F]++;else F===1&&F++,c[F]++;O++}if(this.foundPatternCross(c)){const Y=this.handlePossibleCenter(c,S,s);if(Y!==null)return Y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,i=r/2;for(let s=0;s<3;s++)if(Math.abs(r-t[s])>=i)return!1;return!0}crossCheckVertical(t,r,i,s){const l=this.image,c=l.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let b=t;for(;b>=0&&l.get(r,b)&&h[1]<=i;)h[1]++,b--;if(b<0||h[1]>i)return NaN;for(;b>=0&&!l.get(r,b)&&h[0]<=i;)h[0]++,b--;if(h[0]>i)return NaN;for(b=t+1;b<c&&l.get(r,b)&&h[1]<=i;)h[1]++,b++;if(b===c||h[1]>i)return NaN;for(;b<c&&!l.get(r,b)&&h[2]<=i;)h[2]++,b++;if(h[2]>i)return NaN;const S=h[0]+h[1]+h[2];return 5*Math.abs(S-s)>=2*s?NaN:this.foundPatternCross(h)?vr.centerFromEnd(h,b):NaN}handlePossibleCenter(t,r,i){const s=t[0]+t[1]+t[2],l=vr.centerFromEnd(t,i),c=this.crossCheckVertical(r,l,2*t[1],s);if(!isNaN(c)){const h=(t[0]+t[1]+t[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(h,c,l))return S.combineEstimate(c,l,h);const b=new bi(l,c,h);this.possibleCenters.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return null}}class vi extends Ee{constructor(t,r,i,s){super(t,r),this.estimatedModuleSize=i,this.count=s,s===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){const s=Math.abs(t-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1}combineEstimate(t,r,i){const s=this.count+1,l=(this.count*this.getX()+r)/s,c=(this.count*this.getY()+t)/s,h=(this.count*this.estimatedModuleSize+i)/s;return new vi(l,c,h,s)}}class Js{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Tn{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(V.TRY_HARDER)!==void 0,i=t!=null&&t.get(V.PURE_BARCODE)!==void 0,s=this.image,l=s.getHeight(),c=s.getWidth();let h=Math.floor(3*l/(4*Tn.MAX_MODULES));(h<Tn.MIN_SKIP||r)&&(h=Tn.MIN_SKIP);let b=!1;const S=new Int32Array(5);for(let F=h-1;F<l&&!b;F+=h){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let Y=0;for(let se=0;se<c;se++)if(s.get(se,F))(Y&1)===1&&Y++,S[Y]++;else if((Y&1)===0)if(Y===4)if(Tn.foundPatternCross(S)){if(this.handlePossibleCenter(S,F,se,i)===!0)if(h=2,this.hasSkipped===!0)b=this.haveMultiplyConfirmedCenters();else{const ye=this.findRowSkip();ye>S[2]&&(F+=ye-S[2]-h,se=c-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,Y=3;continue}Y=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,Y=3;else S[++Y]++;else S[Y]++;Tn.foundPatternCross(S)&&this.handlePossibleCenter(S,F,c,i)===!0&&(h=S[0],this.hasSkipped&&(b=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Ee.orderBestPatterns(O),new Js(O)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let l=0;l<5;l++){const c=t[l];if(c===0)return!1;r+=c}if(r<7)return!1;const i=r/7,s=i/2;return Math.abs(i-t[0])<s&&Math.abs(i-t[1])<s&&Math.abs(3*i-t[2])<3*s&&Math.abs(i-t[3])<s&&Math.abs(i-t[4])<s}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,i,s){const l=this.getCrossCheckStateCount();let c=0;const h=this.image;for(;t>=c&&r>=c&&h.get(r-c,t-c);)l[2]++,c++;if(t<c||r<c)return!1;for(;t>=c&&r>=c&&!h.get(r-c,t-c)&&l[1]<=i;)l[1]++,c++;if(t<c||r<c||l[1]>i)return!1;for(;t>=c&&r>=c&&h.get(r-c,t-c)&&l[0]<=i;)l[0]++,c++;if(l[0]>i)return!1;const b=h.getHeight(),S=h.getWidth();for(c=1;t+c<b&&r+c<S&&h.get(r+c,t+c);)l[2]++,c++;if(t+c>=b||r+c>=S)return!1;for(;t+c<b&&r+c<S&&!h.get(r+c,t+c)&&l[3]<i;)l[3]++,c++;if(t+c>=b||r+c>=S||l[3]>=i)return!1;for(;t+c<b&&r+c<S&&h.get(r+c,t+c)&&l[4]<i;)l[4]++,c++;if(l[4]>=i)return!1;const O=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(O-s)<2*s&&Tn.foundPatternCross(l)}crossCheckVertical(t,r,i,s){const l=this.image,c=l.getHeight(),h=this.getCrossCheckStateCount();let b=t;for(;b>=0&&l.get(r,b);)h[2]++,b--;if(b<0)return NaN;for(;b>=0&&!l.get(r,b)&&h[1]<=i;)h[1]++,b--;if(b<0||h[1]>i)return NaN;for(;b>=0&&l.get(r,b)&&h[0]<=i;)h[0]++,b--;if(h[0]>i)return NaN;for(b=t+1;b<c&&l.get(r,b);)h[2]++,b++;if(b===c)return NaN;for(;b<c&&!l.get(r,b)&&h[3]<i;)h[3]++,b++;if(b===c||h[3]>=i)return NaN;for(;b<c&&l.get(r,b)&&h[4]<i;)h[4]++,b++;if(h[4]>=i)return NaN;const S=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(S-s)>=2*s?NaN:Tn.foundPatternCross(h)?Tn.centerFromEnd(h,b):NaN}crossCheckHorizontal(t,r,i,s){const l=this.image,c=l.getWidth(),h=this.getCrossCheckStateCount();let b=t;for(;b>=0&&l.get(b,r);)h[2]++,b--;if(b<0)return NaN;for(;b>=0&&!l.get(b,r)&&h[1]<=i;)h[1]++,b--;if(b<0||h[1]>i)return NaN;for(;b>=0&&l.get(b,r)&&h[0]<=i;)h[0]++,b--;if(h[0]>i)return NaN;for(b=t+1;b<c&&l.get(b,r);)h[2]++,b++;if(b===c)return NaN;for(;b<c&&!l.get(b,r)&&h[3]<i;)h[3]++,b++;if(b===c||h[3]>=i)return NaN;for(;b<c&&l.get(b,r)&&h[4]<i;)h[4]++,b++;if(h[4]>=i)return NaN;const S=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(S-s)>=s?NaN:Tn.foundPatternCross(h)?Tn.centerFromEnd(h,b):NaN}handlePossibleCenter(t,r,i,s){const l=t[0]+t[1]+t[2]+t[3]+t[4];let c=Tn.centerFromEnd(t,i),h=this.crossCheckVertical(r,Math.floor(c),t[2],l);if(!isNaN(h)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(h),t[2],l),!isNaN(c)&&(!s||this.crossCheckDiagonal(Math.floor(h),Math.floor(c),t[2],l)))){const b=l/7;let S=!1;const O=this.possibleCenters;for(let F=0,Y=O.length;F<Y;F++){const se=O[F];if(se.aboutEquals(b,h,c)){O[F]=se.combineEstimate(h,c,b),S=!0;break}}if(!S){const F=new vi(c,h,b);O.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const i of this.possibleCenters)if(i.getCount()>=Tn.CENTER_QUORUM)if(r==null)r=i;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-i.getX())-Math.abs(r.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const i=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=Tn.CENTER_QUORUM&&(t++,r+=c.getEstimatedModuleSize());if(t<3)return!1;const s=r/i;let l=0;for(const c of this.possibleCenters)l+=Math.abs(c.getEstimatedModuleSize()-s);return l<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ae;const r=this.possibleCenters;let i;if(t>3){let s=0,l=0;for(const b of this.possibleCenters){const S=b.getEstimatedModuleSize();s+=S,l+=S*S}i=s/t;let c=Math.sqrt(l/t-i*i);r.sort((b,S)=>{const O=Math.abs(S.getEstimatedModuleSize()-i),F=Math.abs(b.getEstimatedModuleSize()-i);return O<F?-1:O>F?1:0});const h=Math.max(.2*i,c);for(let b=0;b<r.length&&r.length>3;b++){const S=r[b];Math.abs(S.getEstimatedModuleSize()-i)>h&&(r.splice(b,1),b--)}}if(r.length>3){let s=0;for(const l of r)s+=l.getEstimatedModuleSize();i=s/r.length,r.sort((l,c)=>{if(c.getCount()===l.getCount()){const h=Math.abs(c.getEstimatedModuleSize()-i),b=Math.abs(l.getEstimatedModuleSize()-i);return h<b?1:h>b?-1:0}else return c.getCount()-l.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Tn.CENTER_QUORUM=2,Tn.MIN_SKIP=3,Tn.MAX_MODULES=57;class Wr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(V.NEED_RESULT_POINT_CALLBACK);const i=new Tn(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(i)}processFinderPatternInfo(t){const r=t.getTopLeft(),i=t.getTopRight(),s=t.getBottomLeft(),l=this.calculateModuleSize(r,i,s);if(l<1)throw new ae("No pattern found in proccess finder.");const c=Wr.computeDimension(r,i,s,l),h=at.getProvisionalVersionForDimension(c),b=h.getDimensionForVersion()-7;let S=null;if(h.getAlignmentPatternCenters().length>0){const se=i.getX()-r.getX()+s.getX(),ge=i.getY()-r.getY()+s.getY(),ye=1-3/b,Ae=Math.floor(r.getX()+ye*(se-r.getX())),Me=Math.floor(r.getY()+ye*(ge-r.getY()));for(let rt=4;rt<=16;rt<<=1)try{S=this.findAlignmentInRegion(l,Ae,Me,rt);break}catch($e){if(!($e instanceof ae))throw $e}}const O=Wr.createTransform(r,i,s,S,c),F=Wr.sampleGrid(this.image,O,c);let Y;return S===null?Y=[s,r,i]:Y=[s,r,i,S],new Se(F,Y)}static createTransform(t,r,i,s,l){const c=l-3.5;let h,b,S,O;return s!==null?(h=s.getX(),b=s.getY(),S=c-3,O=S):(h=r.getX()-t.getX()+i.getX(),b=r.getY()-t.getY()+i.getY(),S=c,O=c),ot.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,S,O,3.5,c,t.getX(),t.getY(),r.getX(),r.getY(),h,b,i.getX(),i.getY())}static sampleGrid(t,r,i){return pt.getInstance().sampleGridWithTransform(t,i,i,r)}static computeDimension(t,r,i,s){const l=he.round(Ee.distance(t,r)/s),c=he.round(Ee.distance(t,i)/s);let h=Math.floor((l+c)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new ae("Dimensions could be not found.")}return h}calculateModuleSize(t,r,i){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,i))/2}calculateModuleSizeOneWay(t,r){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(i)?s/7:isNaN(s)?i/7:(i+s)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,i,s){let l=this.sizeOfBlackWhiteBlackRun(t,r,i,s),c=1,h=t-(i-t);h<0?(c=t/(t-h),h=0):h>=this.image.getWidth()&&(c=(this.image.getWidth()-1-t)/(h-t),h=this.image.getWidth()-1);let b=Math.floor(r-(s-r)*c);return c=1,b<0?(c=r/(r-b),b=0):b>=this.image.getHeight()&&(c=(this.image.getHeight()-1-r)/(b-r),b=this.image.getHeight()-1),h=Math.floor(t+(h-t)*c),l+=this.sizeOfBlackWhiteBlackRun(t,r,h,b),l-1}sizeOfBlackWhiteBlackRun(t,r,i,s){const l=Math.abs(s-r)>Math.abs(i-t);if(l){let se=t;t=r,r=se,se=i,i=s,s=se}const c=Math.abs(i-t),h=Math.abs(s-r);let b=-c/2;const S=t<i?1:-1,O=r<s?1:-1;let F=0;const Y=i+S;for(let se=t,ge=r;se!==Y;se+=S){const ye=l?ge:se,Ae=l?se:ge;if(F===1===this.image.get(ye,Ae)){if(F===2)return he.distance(se,ge,t,r);F++}if(b+=h,b>0){if(ge===s)break;ge+=O,b-=c}}return F===2?he.distance(i+S,s,t,r):NaN}findAlignmentInRegion(t,r,i,s){const l=Math.floor(s*t),c=Math.max(0,r-l),h=Math.min(this.image.getWidth()-1,r+l);if(h-c<t*3)throw new ae("Alignment top exceeds estimated module size.");const b=Math.max(0,i-l),S=Math.min(this.image.getHeight()-1,i+l);if(S-b<t*3)throw new ae("Alignment bottom exceeds estimated module size.");return new vr(this.image,c,b,h-c,S-b,t,this.resultPointCallback).find()}}class ui{constructor(){this.decoder=new to}getDecoder(){return this.decoder}decode(t,r){let i,s;if(r!=null&&r.get(V.PURE_BARCODE)!==void 0){const b=ui.extractPureBits(t.getBlackMatrix());i=this.decoder.decodeBitMatrix(b,r),s=ui.NO_POINTS}else{const b=new Wr(t.getBlackMatrix()).detect(r);i=this.decoder.decodeBitMatrix(b.getBits(),r),s=b.getPoints()}i.getOther()instanceof na&&i.getOther().applyMirroredCorrection(s);const l=new Te(i.getText(),i.getRawBytes(),void 0,s,ze.QR_CODE,void 0),c=i.getByteSegments();c!==null&&l.putMetadata(nt.BYTE_SEGMENTS,c);const h=i.getECLevel();return h!==null&&l.putMetadata(nt.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(l.putMetadata(nt.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),l.putMetadata(nt.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),l}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),i=t.getBottomRightOnBit();if(r===null||i===null)throw new ae;const s=this.moduleSize(r,t);let l=r[1],c=i[1],h=r[0],b=i[0];if(h>=b||l>=c)throw new ae;if(c-l!==b-h&&(b=h+(c-l),b>=t.getWidth()))throw new ae;const S=Math.round((b-h+1)/s),O=Math.round((c-l+1)/s);if(S<=0||O<=0)throw new ae;if(O!==S)throw new ae;const F=Math.floor(s/2);l+=F,h+=F;const Y=h+Math.floor((S-1)*s)-b;if(Y>0){if(Y>F)throw new ae;h-=Y}const se=l+Math.floor((O-1)*s)-c;if(se>0){if(se>F)throw new ae;l-=se}const ge=new M(S,O);for(let ye=0;ye<O;ye++){const Ae=l+Math.floor(ye*s);for(let Me=0;Me<S;Me++)t.get(h+Math.floor(Me*s),Ae)&&ge.set(Me,ye)}return ge}static moduleSize(t,r){const i=r.getHeight(),s=r.getWidth();let l=t[0],c=t[1],h=!0,b=0;for(;l<s&&c<i;){if(h!==r.get(l,c)){if(++b===5)break;h=!h}l++,c++}if(l===s||c===i)throw new ae;return(l-t[0])/7}}ui.NO_POINTS=new Array;class vt{PDF417Common(){}static getBitCountSum(t){return he.sum(t)}static toIntArray(t){if(t==null||!t.length)return vt.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let i=0;for(const s of t)r[i++]=s;return r}static getCodeword(t){const r=P.binarySearch(vt.SYMBOL_TABLE,t&262143);return r<0?-1:(vt.CODEWORD_TABLE[r]-1)%vt.NUMBER_OF_CODEWORDS}}vt.NUMBER_OF_CODEWORDS=929,vt.MAX_CODEWORDS_IN_BARCODE=vt.NUMBER_OF_CODEWORDS-1,vt.MIN_ROWS_IN_BARCODE=3,vt.MAX_ROWS_IN_BARCODE=90,vt.MODULES_IN_CODEWORD=17,vt.MODULES_IN_STOP_PATTERN=18,vt.BARS_IN_MODULE=8,vt.EMPTY_INT_ARRAY=new Int32Array([]),vt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),vt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class no{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class _t{static detectMultiple(t,r,i){let s=t.getBlackMatrix(),l=_t.detect(i,s);return l.length||(s=s.clone(),s.rotate180(),l=_t.detect(i,s)),new no(s,l)}static detect(t,r){const i=new Array;let s=0,l=0,c=!1;for(;s<r.getHeight();){const h=_t.findVertices(r,s,l);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,l=0;for(const b of i)b[1]!=null&&(s=Math.trunc(Math.max(s,b[1].getY()))),b[3]!=null&&(s=Math.max(s,Math.trunc(b[3].getY())));s+=_t.ROW_STEP;continue}if(c=!0,i.push(h),!t)break;h[2]!=null?(l=Math.trunc(h[2].getX()),s=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY()))}return i}static findVertices(t,r,i){const s=t.getHeight(),l=t.getWidth(),c=new Array(8);return _t.copyToResult(c,_t.findRowsWithPattern(t,s,l,r,i,_t.START_PATTERN),_t.INDEXES_START_PATTERN),c[4]!=null&&(i=Math.trunc(c[4].getX()),r=Math.trunc(c[4].getY())),_t.copyToResult(c,_t.findRowsWithPattern(t,s,l,r,i,_t.STOP_PATTERN),_t.INDEXES_STOP_PATTERN),c}static copyToResult(t,r,i){for(let s=0;s<i.length;s++)t[i[s]]=r[s]}static findRowsWithPattern(t,r,i,s,l,c){const h=new Array(4);let b=!1;const S=new Int32Array(c.length);for(;s<r;s+=_t.ROW_STEP){let F=_t.findGuardPattern(t,l,s,i,!1,c,S);if(F!=null){for(;s>0;){const Y=_t.findGuardPattern(t,l,--s,i,!1,c,S);if(Y!=null)F=Y;else{s++;break}}h[0]=new Ee(F[0],s),h[1]=new Ee(F[1],s),b=!0;break}}let O=s+1;if(b){let F=0,Y=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;O<r;O++){const se=_t.findGuardPattern(t,Y[0],O,i,!1,c,S);if(se!=null&&Math.abs(Y[0]-se[0])<_t.MAX_PATTERN_DRIFT&&Math.abs(Y[1]-se[1])<_t.MAX_PATTERN_DRIFT)Y=se,F=0;else{if(F>_t.SKIPPED_ROW_COUNT_MAX)break;F++}}O-=F+1,h[2]=new Ee(Y[0],O),h[3]=new Ee(Y[1],O)}return O-s<_t.BARCODE_MIN_HEIGHT&&P.fill(h,null),h}static findGuardPattern(t,r,i,s,l,c,h){P.fillWithin(h,0,h.length,0);let b=r,S=0;for(;t.get(b,i)&&b>0&&S++<_t.MAX_PIXEL_DRIFT;)b--;let O=b,F=0,Y=c.length;for(let se=l;O<s;O++)if(t.get(O,i)!==se)h[F]++;else{if(F===Y-1){if(_t.patternMatchVariance(h,c,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return new Int32Array([b,O]);b+=h[0]+h[1],I.arraycopy(h,2,h,0,F-1),h[F-1]=0,h[F]=0,F--}else F++;h[F]=1,se=!se}return F===Y-1&&_t.patternMatchVariance(h,c,_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE?new Int32Array([b,O-1]):null}static patternMatchVariance(t,r,i){let s=t.length,l=0,c=0;for(let S=0;S<s;S++)l+=t[S],c+=r[S];if(l<c)return 1/0;let h=l/c;i*=h;let b=0;for(let S=0;S<s;S++){let O=t[S],F=r[S]*h,Y=O>F?O-F:F-O;if(Y>i)return 1/0;b+=Y}return b/l}}_t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),_t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),_t.MAX_AVG_VARIANCE=.42,_t.MAX_INDIVIDUAL_VARIANCE=.8,_t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),_t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),_t.MAX_PIXEL_DRIFT=3,_t.MAX_PATTERN_DRIFT=5,_t.SKIPPED_ROW_COUNT_MAX=25,_t.ROW_STEP=5,_t.BARCODE_MIN_HEIGHT=10;class wn{constructor(t,r){if(r.length===0)throw new _;this.field=t;let i=r.length;if(i>1&&r[0]===0){let s=1;for(;s<i&&r[s]===0;)s++;s===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-s),I.arraycopy(r,s,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let s=0;for(let l of this.coefficients)s=this.field.add(s,l);return s}let r=this.coefficients[0],i=this.coefficients.length;for(let s=1;s<i;s++)r=this.field.add(this.field.multiply(t,r),this.coefficients[s]);return r}add(t){if(!this.field.equals(t.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,i=t.coefficients;if(r.length>i.length){let c=r;r=i,i=c}let s=new Int32Array(i.length),l=i.length-r.length;I.arraycopy(i,0,s,0,l);for(let c=l;c<i.length;c++)s[c]=this.field.add(r[c-l],i[c]);return new wn(this.field,s)}subtract(t){if(!this.field.equals(t.field))throw new _("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof wn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new wn(this.field,new Int32Array([0]));let r=this.coefficients,i=r.length,s=t.coefficients,l=s.length,c=new Int32Array(i+l-1);for(let h=0;h<i;h++){let b=r[h];for(let S=0;S<l;S++)c[h+S]=this.field.add(c[h+S],this.field.multiply(b,s[S]))}return new wn(this.field,c)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let i=0;i<t;i++)r[i]=this.field.subtract(0,this.coefficients[i]);return new wn(this.field,r)}multiplyScalar(t){if(t===0)return new wn(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,i=new Int32Array(r);for(let s=0;s<r;s++)i[s]=this.field.multiply(this.coefficients[s],t);return new wn(this.field,i)}multiplyByMonomial(t,r){if(t<0)throw new _;if(r===0)return new wn(this.field,new Int32Array([0]));let i=this.coefficients.length,s=new Int32Array(i+t);for(let l=0;l<i;l++)s[l]=this.field.multiply(this.coefficients[l],r);return new wn(this.field,s)}toString(){let t=new ie;for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);i!==0&&(i<0?(t.append(" - "),i=-i):t.length()>0&&t.append(" + "),(r===0||i!==1)&&t.append(i),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class $s{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new _;return this.logTable[t]}inverse(t){if(t===0)throw new Qt;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Oi extends $s{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let i=1;for(let s=0;s<t;s++)this.expTable[s]=i,i=i*r%t;for(let s=0;s<t-1;s++)this.logTable[this.expTable[s]]=s;this.zero=new wn(this,new Int32Array([0])),this.one=new wn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new _;if(r===0)return this.zero;let i=new Int32Array(t+1);return i[0]=r,new wn(this,i)}}Oi.PDF417_GF=new Oi(vt.NUMBER_OF_CODEWORDS,3);class fi{constructor(){this.field=Oi.PDF417_GF}decode(t,r,i){let s=new wn(this.field,t),l=new Int32Array(r),c=!1;for(let ge=r;ge>0;ge--){let ye=s.evaluateAt(this.field.exp(ge));l[r-ge]=ye,ye!==0&&(c=!0)}if(!c)return 0;let h=this.field.getOne();if(i!=null)for(const ge of i){let ye=this.field.exp(t.length-1-ge),Ae=new wn(this.field,new Int32Array([this.field.subtract(0,ye),1]));h=h.multiply(Ae)}let b=new wn(this.field,l),S=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),b,r),O=S[0],F=S[1],Y=this.findErrorLocations(O),se=this.findErrorMagnitudes(F,O,Y);for(let ge=0;ge<Y.length;ge++){let ye=t.length-1-this.field.log(Y[ge]);if(ye<0)throw T.getChecksumInstance();t[ye]=this.field.subtract(t[ye],se[ge])}return Y.length}runEuclideanAlgorithm(t,r,i){if(t.getDegree()<r.getDegree()){let Y=t;t=r,r=Y}let s=t,l=r,c=this.field.getZero(),h=this.field.getOne();for(;l.getDegree()>=Math.round(i/2);){let Y=s,se=c;if(s=l,c=h,s.isZero())throw T.getChecksumInstance();l=Y;let ge=this.field.getZero(),ye=s.getCoefficient(s.getDegree()),Ae=this.field.inverse(ye);for(;l.getDegree()>=s.getDegree()&&!l.isZero();){let Me=l.getDegree()-s.getDegree(),rt=this.field.multiply(l.getCoefficient(l.getDegree()),Ae);ge=ge.add(this.field.buildMonomial(Me,rt)),l=l.subtract(s.multiplyByMonomial(Me,rt))}h=ge.multiply(c).subtract(se).negative()}let b=h.getCoefficient(0);if(b===0)throw T.getChecksumInstance();let S=this.field.inverse(b),O=h.multiply(S),F=l.multiply(S);return[O,F]}findErrorLocations(t){let r=t.getDegree(),i=new Int32Array(r),s=0;for(let l=1;l<this.field.getSize()&&s<r;l++)t.evaluateAt(l)===0&&(i[s]=this.field.inverse(l),s++);if(s!==r)throw T.getChecksumInstance();return i}findErrorMagnitudes(t,r,i){let s=r.getDegree(),l=new Int32Array(s);for(let S=1;S<=s;S++)l[s-S]=this.field.multiply(S,r.getCoefficient(S));let c=new wn(this.field,l),h=i.length,b=new Int32Array(h);for(let S=0;S<h;S++){let O=this.field.inverse(i[S]),F=this.field.subtract(0,t.evaluateAt(O)),Y=this.field.inverse(c.evaluateAt(O));b[S]=this.field.multiply(F,Y)}return b}}class di{constructor(t,r,i,s,l){t instanceof di?this.constructor_2(t):this.constructor_1(t,r,i,s,l)}constructor_1(t,r,i,s,l){const c=r==null||i==null,h=s==null||l==null;if(c&&h)throw new ae;c?(r=new Ee(0,s.getY()),i=new Ee(0,l.getY())):h&&(s=new Ee(t.getWidth()-1,r.getY()),l=new Ee(t.getWidth()-1,i.getY())),this.image=t,this.topLeft=r,this.bottomLeft=i,this.topRight=s,this.bottomRight=l,this.minX=Math.trunc(Math.min(r.getX(),i.getX())),this.maxX=Math.trunc(Math.max(s.getX(),l.getX())),this.minY=Math.trunc(Math.min(r.getY(),s.getY())),this.maxY=Math.trunc(Math.max(i.getY(),l.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new di(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,i){let s=this.topLeft,l=this.bottomLeft,c=this.topRight,h=this.bottomRight;if(t>0){let b=i?this.topLeft:this.topRight,S=Math.trunc(b.getY()-t);S<0&&(S=0);let O=new Ee(b.getX(),S);i?s=O:c=O}if(r>0){let b=i?this.bottomLeft:this.bottomRight,S=Math.trunc(b.getY()+r);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let O=new Ee(b.getX(),S);i?l=O:h=O}return new di(this.image,s,l,c,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class os{constructor(t,r,i,s){this.columnCount=t,this.errorCorrectionLevel=s,this.rowCountUpperPart=r,this.rowCountLowerPart=i,this.rowCount=r+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ra{constructor(){this.buffer=""}static form(t,r){let i=-1;function s(c,h,b,S,O,F){if(c==="%%")return"%";if(r[++i]===void 0)return;c=S?parseInt(S.substr(1)):void 0;let Y=O?parseInt(O.substr(1)):void 0,se;switch(F){case"s":se=r[i];break;case"c":se=r[i][0];break;case"f":se=parseFloat(r[i]).toFixed(c);break;case"p":se=parseFloat(r[i]).toPrecision(c);break;case"e":se=parseFloat(r[i]).toExponential(c);break;case"x":se=parseInt(r[i]).toString(Y||16);break;case"d":se=parseFloat(parseInt(r[i],Y||10).toPrecision(c)).toFixed(0);break}se=typeof se=="object"?JSON.stringify(se):(+se).toString(Y);let ge=parseInt(b),ye=b&&b[0]+""=="0"?"0":" ";for(;se.length<ge;)se=h!==void 0?se+ye:ye+se;return se}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(l,s)}format(t,...r){this.buffer+=ra.form(t,r)}toString(){return this.buffer}}class wi{constructor(t){this.boundingBox=new di(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let i=1;i<wi.MAX_NEARBY_DISTANCE;i++){let s=this.imageRowToCodewordIndex(t)-i;if(s>=0&&(r=this.codewords[s],r!=null)||(s=this.imageRowToCodewordIndex(t)+i,s<this.codewords.length&&(r=this.codewords[s],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new ra;let r=0;for(const i of this.codewords){if(i==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,i.getRowNumber(),i.getValue())}return t.toString()}}wi.MAX_NEARBY_DISTANCE=5;class Ci{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[i,s]of this.values.entries()){const l={getKey:()=>i,getValue:()=>s};l.getValue()>t?(t=l.getValue(),r=[],r.push(l.getKey())):l.getValue()===t&&r.push(l.getKey())}return vt.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class el extends wi{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let i=this.getBoundingBox(),s=this._isLeft?i.getTopLeft():i.getTopRight(),l=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),b=-1,S=1,O=0;for(let F=c;F<h;F++){if(r[F]==null)continue;let Y=r[F],se=Y.getRowNumber()-b;if(se===0)O++;else if(se===1)S=Math.max(S,O),O=1,b=Y.getRowNumber();else if(se<0||Y.getRowNumber()>=t.getRowCount()||se>F)r[F]=null;else{let ge;S>2?ge=(S-2)*se:ge=se;let ye=ge>=F;for(let Ae=1;Ae<=ge&&!ye;Ae++)ye=r[F-Ae]!=null;ye?r[F]=null:(b=Y.getRowNumber(),O=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let i of this.getCodewords())if(i!=null){let s=i.getRowNumber();if(s>=r.length)continue;r[s]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),s=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=this.getCodewords(),b=-1;for(let S=l;S<c;S++){if(h[S]==null)continue;let O=h[S];O.setRowNumberAsRowIndicatorColumn();let F=O.getRowNumber()-b;F===0||(F===1?b=O.getRowNumber():O.getRowNumber()>=t.getRowCount()?h[S]=null:b=O.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new Ci,i=new Ci,s=new Ci,l=new Ci;for(let h of t){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let b=h.getValue()%30,S=h.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:i.setValue(b*3+1);break;case 1:l.setValue(b/3),s.setValue(b%3);break;case 2:r.setValue(b+1);break}}if(r.getValue().length===0||i.getValue().length===0||s.getValue().length===0||l.getValue().length===0||r.getValue()[0]<1||i.getValue()[0]+s.getValue()[0]<vt.MIN_ROWS_IN_BARCODE||i.getValue()[0]+s.getValue()[0]>vt.MAX_ROWS_IN_BARCODE)return null;let c=new os(r.getValue()[0],i.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(t,c),c}removeIncorrectCodewords(t,r){for(let i=0;i<t.length;i++){let s=t[i];if(t[i]==null)continue;let l=s.getValue()%30,c=s.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:l*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:l+1!==r.getColumnCount()&&(t[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Kn{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=vt.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let i=this.detectionResultColumns[r].getCodewords();for(let s=0;s<i.length;s++)i[s]!=null&&(i[s].hasValidRowNumber()||this.adjustRowNumbers(r,s,i))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<t.length;i++)if(t[i]!=null&&r[i]!=null&&t[i].getRowNumber()===r[i].getRowNumber())for(let s=1;s<=this.barcodeColumnCount;s++){let l=this.detectionResultColumns[s].getCodewords()[i];l!=null&&(l.setRowNumber(t[i].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[s].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let s=r[i].getRowNumber(),l=0;for(let c=this.barcodeColumnCount+1;c>0&&l<this.ADJUST_ROW_NUMBER_SKIP;c--){let h=this.detectionResultColumns[c].getCodewords()[i];h!=null&&(l=Kn.adjustRowNumberIfValid(s,l,h),h.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let s=r[i].getRowNumber(),l=0;for(let c=1;c<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;c++){let h=this.detectionResultColumns[c].getCodewords()[i];h!=null&&(l=Kn.adjustRowNumberIfValid(s,l,h),h.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(t)?(i.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,i){if(!this.detectionResultColumns[t-1])return;let s=i[r],l=this.detectionResultColumns[t-1].getCodewords(),c=l;this.detectionResultColumns[t+1]!=null&&(c=this.detectionResultColumns[t+1].getCodewords());let h=new Array(14);h[2]=l[r],h[3]=c[r],r>0&&(h[0]=i[r-1],h[4]=l[r-1],h[5]=c[r-1]),r>1&&(h[8]=i[r-2],h[10]=l[r-2],h[11]=c[r-2]),r<i.length-1&&(h[1]=i[r+1],h[6]=l[r+1],h[7]=c[r+1]),r<i.length-2&&(h[9]=i[r+2],h[12]=l[r+2],h[13]=c[r+2]);for(let b of h)if(Kn.adjustRowNumber(s,b))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new ra;for(let i=0;i<t.getCodewords().length;i++){r.format("CW %3d:",i);for(let s=0;s<this.barcodeColumnCount+2;s++){if(this.detectionResultColumns[s]==null){r.format("    |   ");continue}let l=this.detectionResultColumns[s].getCodewords()[i];if(l==null){r.format("    |   ");continue}r.format(" %3d|%3d",l.getRowNumber(),l.getValue())}r.format("%n")}return r.toString()}}class Ur{constructor(t,r,i,s){this.rowNumber=Ur.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(i),this.value=Math.trunc(s)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==Ur.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}Ur.BARCODE_ROW_UNKNOWN=-1;class rr{static initialize(){for(let t=0;t<vt.SYMBOL_TABLE.length;t++){let r=vt.SYMBOL_TABLE[t],i=r&1;for(let s=0;s<vt.BARS_IN_MODULE;s++){let l=0;for(;(r&1)===i;)l+=1,r>>=1;i=r&1,rr.RATIOS_TABLE[t]||(rr.RATIOS_TABLE[t]=new Array(vt.BARS_IN_MODULE)),rr.RATIOS_TABLE[t][vt.BARS_IN_MODULE-s-1]=Math.fround(l/vt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=rr.getDecodedCodewordValue(rr.sampleBitCounts(t));return r!==-1?r:rr.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=he.sum(t),i=new Int32Array(vt.BARS_IN_MODULE),s=0,l=0;for(let c=0;c<vt.MODULES_IN_CODEWORD;c++){let h=r/(2*vt.MODULES_IN_CODEWORD)+c*r/vt.MODULES_IN_CODEWORD;l+t[s]<=h&&(l+=t[s],s++),i[s]++}return i}static getDecodedCodewordValue(t){let r=rr.getBitValue(t);return vt.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let i=0;i<t.length;i++)for(let s=0;s<t[i];s++)r=r<<1|(i%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=he.sum(t),i=new Array(vt.BARS_IN_MODULE);if(r>1)for(let c=0;c<i.length;c++)i[c]=Math.fround(t[c]/r);let s=Pe.MAX_VALUE,l=-1;this.bSymbolTableReady||rr.initialize();for(let c=0;c<rr.RATIOS_TABLE.length;c++){let h=0,b=rr.RATIOS_TABLE[c];for(let S=0;S<vt.BARS_IN_MODULE;S++){let O=Math.fround(b[S]-i[S]);if(h+=Math.fround(O*O),h>=s)break}h<s&&(s=h,l=vt.SYMBOL_TABLE[c])}return l}}rr.bSymbolTableReady=!1,rr.RATIOS_TABLE=new Array(vt.SYMBOL_TABLE.length).map(U=>new Array(vt.BARS_IN_MODULE));class ia{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class ro{static parseLong(t,r=void 0){return parseInt(t,r)}}class cs extends y{}cs.kind="NullPointerException";class tl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,i){if(t==null)throw new cs;if(r<0||r>t.length||i<0||r+i>t.length||r+i<0)throw new z;if(i===0)return;for(let s=0;s<i;s++)this.write(t[r+s])}flush(){}close(){}}class La extends y{}class us extends tl{constructor(t=32){if(super(),this.count=0,t<0)throw new _("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let i=this.buf.length<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new La;i=H.MAX_VALUE}this.buf=P.copyOfUint8Array(this.buf,i)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new z;this.ensureCapacity(this.count+i),I.arraycopy(t,r,this.buf,this.count,i),this.count+=i}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return P.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var sn;(function(U){U[U.ALPHA=0]="ALPHA",U[U.LOWER=1]="LOWER",U[U.MIXED=2]="MIXED",U[U.PUNCT=3]="PUNCT",U[U.ALPHA_SHIFT=4]="ALPHA_SHIFT",U[U.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(sn||(sn={}));function io(){if(typeof window<"u")return window.BigInt||null;if(typeof li<"u")return li.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let fs;function Ei(U){if(typeof fs>"u"&&(fs=io()),fs===null)throw new Error("BigInt is not supported!");return fs(U)}function nl(){let U=[];U[0]=Ei(1);let t=Ei(900);U[1]=t;for(let r=2;r<16;r++)U[r]=U[r-1]*t;return U}class Be{static decode(t,r){let i=new ie(""),s=G.ISO8859_1;i.enableDecoding(s);let l=1,c=t[l++],h=new ia;for(;l<t[0];){switch(c){case Be.TEXT_COMPACTION_MODE_LATCH:l=Be.textCompaction(t,l,i);break;case Be.BYTE_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH_6:l=Be.byteCompaction(c,t,s,l,i);break;case Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l++]);break;case Be.NUMERIC_COMPACTION_MODE_LATCH:l=Be.numericCompaction(t,l,i);break;case Be.ECI_CHARSET:G.getCharacterSetECIByValue(t[l++]);break;case Be.ECI_GENERAL_PURPOSE:l+=2;break;case Be.ECI_USER_DEFINED:l++;break;case Be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=Be.decodeMacroBlock(t,l,h);break;case Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Be.MACRO_PDF417_TERMINATOR:throw new L;default:l--,l=Be.textCompaction(t,l,i);break}if(l<t.length)c=t[l++];else throw L.getFormatInstance()}if(i.length()===0)throw L.getFormatInstance();let b=new st(null,i.toString(),null,r);return b.setOther(h),b}static decodeMacroBlock(t,r,i){if(r+Be.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw L.getFormatInstance();let s=new Int32Array(Be.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<Be.NUMBER_OF_SEQUENCE_CODEWORDS;h++,r++)s[h]=t[r];i.setSegmentIndex(H.parseInt(Be.decodeBase900toBase10(s,Be.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new ie;r=Be.textCompaction(t,r,l),i.setFileId(l.toString());let c=-1;for(t[r]===Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=r+1);r<t[0];)switch(t[r]){case Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case Be.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new ie;r=Be.textCompaction(t,r+1,h),i.setFileName(h.toString());break;case Be.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let b=new ie;r=Be.textCompaction(t,r+1,b),i.setSender(b.toString());break;case Be.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new ie;r=Be.textCompaction(t,r+1,S),i.setAddressee(S.toString());break;case Be.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new ie;r=Be.numericCompaction(t,r+1,O),i.setSegmentCount(H.parseInt(O.toString()));break;case Be.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let F=new ie;r=Be.numericCompaction(t,r+1,F),i.setTimestamp(ro.parseLong(F.toString()));break;case Be.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Y=new ie;r=Be.numericCompaction(t,r+1,Y),i.setChecksum(H.parseInt(Y.toString()));break;case Be.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let se=new ie;r=Be.numericCompaction(t,r+1,se),i.setFileSize(ro.parseLong(se.toString()));break;default:throw L.getFormatInstance()}break;case Be.MACRO_PDF417_TERMINATOR:r++,i.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(c!==-1){let h=r-c;i.isLastSegment()&&h--,i.setOptionalData(P.copyOfRange(t,c,c+h))}return r}static textCompaction(t,r,i){let s=new Int32Array((t[0]-r)*2),l=new Int32Array((t[0]-r)*2),c=0,h=!1;for(;r<t[0]&&!h;){let b=t[r++];if(b<Be.TEXT_COMPACTION_MODE_LATCH)s[c]=b/30,s[c+1]=b%30,c+=2;else switch(b){case Be.TEXT_COMPACTION_MODE_LATCH:s[c++]=Be.TEXT_COMPACTION_MODE_LATCH;break;case Be.BYTE_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH_6:case Be.NUMERIC_COMPACTION_MODE_LATCH:case Be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Be.MACRO_PDF417_TERMINATOR:r--,h=!0;break;case Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s[c]=Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,b=t[r++],l[c]=b,c++;break}}return Be.decodeTextCompaction(s,l,c,i),r}static decodeTextCompaction(t,r,i,s){let l=sn.ALPHA,c=sn.ALPHA,h=0;for(;h<i;){let b=t[h],S="";switch(l){case sn.ALPHA:if(b<26)S=String.fromCharCode(65+b);else switch(b){case 26:S=" ";break;case Be.LL:l=sn.LOWER;break;case Be.ML:l=sn.MIXED;break;case Be.PS:c=l,l=sn.PUNCT_SHIFT;break;case Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(r[h]);break;case Be.TEXT_COMPACTION_MODE_LATCH:l=sn.ALPHA;break}break;case sn.LOWER:if(b<26)S=String.fromCharCode(97+b);else switch(b){case 26:S=" ";break;case Be.AS:c=l,l=sn.ALPHA_SHIFT;break;case Be.ML:l=sn.MIXED;break;case Be.PS:c=l,l=sn.PUNCT_SHIFT;break;case Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(r[h]);break;case Be.TEXT_COMPACTION_MODE_LATCH:l=sn.ALPHA;break}break;case sn.MIXED:if(b<Be.PL)S=Be.MIXED_CHARS[b];else switch(b){case Be.PL:l=sn.PUNCT;break;case 26:S=" ";break;case Be.LL:l=sn.LOWER;break;case Be.AL:l=sn.ALPHA;break;case Be.PS:c=l,l=sn.PUNCT_SHIFT;break;case Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(r[h]);break;case Be.TEXT_COMPACTION_MODE_LATCH:l=sn.ALPHA;break}break;case sn.PUNCT:if(b<Be.PAL)S=Be.PUNCT_CHARS[b];else switch(b){case Be.PAL:l=sn.ALPHA;break;case Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(r[h]);break;case Be.TEXT_COMPACTION_MODE_LATCH:l=sn.ALPHA;break}break;case sn.ALPHA_SHIFT:if(l=c,b<26)S=String.fromCharCode(65+b);else switch(b){case 26:S=" ";break;case Be.TEXT_COMPACTION_MODE_LATCH:l=sn.ALPHA;break}break;case sn.PUNCT_SHIFT:if(l=c,b<Be.PAL)S=Be.PUNCT_CHARS[b];else switch(b){case Be.PAL:l=sn.ALPHA;break;case Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(r[h]);break;case Be.TEXT_COMPACTION_MODE_LATCH:l=sn.ALPHA;break}break}S!==""&&s.append(S),h++}}static byteCompaction(t,r,i,s,l){let c=new us,h=0,b=0,S=!1;switch(t){case Be.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),F=r[s++];for(;s<r[0]&&!S;)switch(O[h++]=F,b=900*b+F,F=r[s++],F){case Be.TEXT_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH:case Be.NUMERIC_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH_6:case Be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Be.MACRO_PDF417_TERMINATOR:s--,S=!0;break;default:if(h%5===0&&h>0){for(let Y=0;Y<6;++Y)c.write(Number(Ei(b)>>Ei(8*(5-Y))));b=0,h=0}break}s===r[0]&&F<Be.TEXT_COMPACTION_MODE_LATCH&&(O[h++]=F);for(let Y=0;Y<h;Y++)c.write(O[Y]);break;case Be.BYTE_COMPACTION_MODE_LATCH_6:for(;s<r[0]&&!S;){let Y=r[s++];if(Y<Be.TEXT_COMPACTION_MODE_LATCH)h++,b=900*b+Y;else switch(Y){case Be.TEXT_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH:case Be.NUMERIC_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH_6:case Be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Be.MACRO_PDF417_TERMINATOR:s--,S=!0;break}if(h%5===0&&h>0){for(let se=0;se<6;++se)c.write(Number(Ei(b)>>Ei(8*(5-se))));b=0,h=0}}break}return l.append(ce.decode(c.toByteArray(),i)),s}static numericCompaction(t,r,i){let s=0,l=!1,c=new Int32Array(Be.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!l;){let h=t[r++];if(r===t[0]&&(l=!0),h<Be.TEXT_COMPACTION_MODE_LATCH)c[s]=h,s++;else switch(h){case Be.TEXT_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH:case Be.BYTE_COMPACTION_MODE_LATCH_6:case Be.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Be.MACRO_PDF417_TERMINATOR:r--,l=!0;break}(s%Be.MAX_NUMERIC_CODEWORDS===0||h===Be.NUMERIC_COMPACTION_MODE_LATCH||l)&&s>0&&(i.append(Be.decodeBase900toBase10(c,s)),s=0)}return r}static decodeBase900toBase10(t,r){let i=Ei(0);for(let l=0;l<r;l++)i+=Be.EXP900[r-l-1]*Ei(t[l]);let s=i.toString();if(s.charAt(0)!=="1")throw new L;return s.substring(1)}}Be.TEXT_COMPACTION_MODE_LATCH=900,Be.BYTE_COMPACTION_MODE_LATCH=901,Be.NUMERIC_COMPACTION_MODE_LATCH=902,Be.BYTE_COMPACTION_MODE_LATCH_6=924,Be.ECI_USER_DEFINED=925,Be.ECI_GENERAL_PURPOSE=926,Be.ECI_CHARSET=927,Be.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Be.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Be.MACRO_PDF417_TERMINATOR=922,Be.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Be.MAX_NUMERIC_CODEWORDS=15,Be.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Be.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Be.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Be.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Be.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Be.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Be.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Be.PL=25,Be.LL=27,Be.AS=27,Be.ML=28,Be.AL=28,Be.PS=29,Be.PAL=29,Be.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Be.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Be.EXP900=io()?nl():[],Be.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ot{constructor(){}static decode(t,r,i,s,l,c,h){let b=new di(t,r,i,s,l),S=null,O=null,F;for(let ge=!0;;ge=!1){if(r!=null&&(S=Ot.getRowIndicatorColumn(t,b,r,!0,c,h)),s!=null&&(O=Ot.getRowIndicatorColumn(t,b,s,!1,c,h)),F=Ot.merge(S,O),F==null)throw ae.getNotFoundInstance();let ye=F.getBoundingBox();if(ge&&ye!=null&&(ye.getMinY()<b.getMinY()||ye.getMaxY()>b.getMaxY()))b=ye;else break}F.setBoundingBox(b);let Y=F.getBarcodeColumnCount()+1;F.setDetectionResultColumn(0,S),F.setDetectionResultColumn(Y,O);let se=S!=null;for(let ge=1;ge<=Y;ge++){let ye=se?ge:Y-ge;if(F.getDetectionResultColumn(ye)!==void 0)continue;let Ae;ye===0||ye===Y?Ae=new el(b,ye===0):Ae=new wi(b),F.setDetectionResultColumn(ye,Ae);let Me=-1,rt=Me;for(let $e=b.getMinY();$e<=b.getMaxY();$e++){if(Me=Ot.getStartColumn(F,ye,$e,se),Me<0||Me>b.getMaxX()){if(rt===-1)continue;Me=rt}let Ze=Ot.detectCodeword(t,b.getMinX(),b.getMaxX(),se,Me,$e,c,h);Ze!=null&&(Ae.setCodeword($e,Ze),rt=Me,c=Math.min(c,Ze.getWidth()),h=Math.max(h,Ze.getWidth()))}}return Ot.createDecoderResult(F)}static merge(t,r){if(t==null&&r==null)return null;let i=Ot.getBarcodeMetadata(t,r);if(i==null)return null;let s=di.merge(Ot.adjustBoundingBox(t),Ot.adjustBoundingBox(r));return new Kn(i,s)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let i=Ot.getMax(r),s=0;for(let h of r)if(s+=i-h,h>0)break;let l=t.getCodewords();for(let h=0;s>0&&l[h]==null;h++)s--;let c=0;for(let h=r.length-1;h>=0&&(c+=i-r[h],!(r[h]>0));h--);for(let h=l.length-1;c>0&&l[h]==null;h--)c--;return t.getBoundingBox().addMissingRows(s,c,t.isLeft())}static getMax(t){let r=-1;for(let i of t)r=Math.max(r,i);return r}static getBarcodeMetadata(t,r){let i;if(t==null||(i=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let s;return r==null||(s=r.getBarcodeMetadata())==null?i:i.getColumnCount()!==s.getColumnCount()&&i.getErrorCorrectionLevel()!==s.getErrorCorrectionLevel()&&i.getRowCount()!==s.getRowCount()?null:i}static getRowIndicatorColumn(t,r,i,s,l,c){let h=new el(r,s);for(let b=0;b<2;b++){let S=b===0?1:-1,O=Math.trunc(Math.trunc(i.getX()));for(let F=Math.trunc(Math.trunc(i.getY()));F<=r.getMaxY()&&F>=r.getMinY();F+=S){let Y=Ot.detectCodeword(t,0,t.getWidth(),s,O,F,l,c);Y!=null&&(h.setCodeword(F,Y),s?O=Y.getStartX():O=Y.getEndX())}}return h}static adjustCodewordCount(t,r){let i=r[0][1],s=i.getValue(),l=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Ot.getNumberOfECCodeWords(t.getBarcodeECLevel());if(s.length===0){if(l<1||l>vt.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();i.setValue(l)}else s[0]!==l&&i.setValue(l)}static createDecoderResult(t){let r=Ot.createBarcodeMatrix(t);Ot.adjustCodewordCount(t,r);let i=new Array,s=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),l=[],c=new Array;for(let b=0;b<t.getBarcodeRowCount();b++)for(let S=0;S<t.getBarcodeColumnCount();S++){let O=r[b][S+1].getValue(),F=b*t.getBarcodeColumnCount()+S;O.length===0?i.push(F):O.length===1?s[F]=O[0]:(c.push(F),l.push(O))}let h=new Array(l.length);for(let b=0;b<h.length;b++)h[b]=l[b];return Ot.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),s,vt.toIntArray(i),vt.toIntArray(c),h)}static createDecoderResultFromAmbiguousValues(t,r,i,s,l){let c=new Int32Array(s.length),h=100;for(;h-- >0;){for(let b=0;b<c.length;b++)r[s[b]]=l[b][c[b]];try{return Ot.decodeCodewords(r,t,i)}catch(b){if(!(b instanceof T))throw b}if(c.length===0)throw T.getChecksumInstance();for(let b=0;b<c.length;b++)if(c[b]<l[b].length-1){c[b]++;break}else if(c[b]=0,b===c.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let s=0;s<r.length;s++)for(let l=0;l<r[s].length;l++)r[s][l]=new Ci;let i=0;for(let s of t.getDetectionResultColumns()){if(s!=null){for(let l of s.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=0){if(c>=r.length)continue;r[c][i].setValue(l.getValue())}}}i++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,i,s){let l=s?1:-1,c=null;if(Ot.isValidBarcodeColumn(t,r-l)&&(c=t.getDetectionResultColumn(r-l).getCodeword(i)),c!=null)return s?c.getEndX():c.getStartX();if(c=t.getDetectionResultColumn(r).getCodewordNearby(i),c!=null)return s?c.getStartX():c.getEndX();if(Ot.isValidBarcodeColumn(t,r-l)&&(c=t.getDetectionResultColumn(r-l).getCodewordNearby(i)),c!=null)return s?c.getEndX():c.getStartX();let h=0;for(;Ot.isValidBarcodeColumn(t,r-l);){r-=l;for(let b of t.getDetectionResultColumn(r).getCodewords())if(b!=null)return(s?b.getEndX():b.getStartX())+l*h*(b.getEndX()-b.getStartX());h++}return s?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,i,s,l,c,h,b){l=Ot.adjustCodewordStartColumn(t,r,i,s,l,c);let S=Ot.getModuleBitCount(t,r,i,s,l,c);if(S==null)return null;let O,F=he.sum(S);if(s)O=l+F;else{for(let ge=0;ge<S.length/2;ge++){let ye=S[ge];S[ge]=S[S.length-1-ge],S[S.length-1-ge]=ye}O=l,l=O-F}if(!Ot.checkCodewordSkew(F,h,b))return null;let Y=rr.getDecodedValue(S),se=vt.getCodeword(Y);return se===-1?null:new Ur(l,O,Ot.getCodewordBucketNumber(Y),se)}static getModuleBitCount(t,r,i,s,l,c){let h=l,b=new Int32Array(8),S=0,O=s?1:-1,F=s;for(;(s?h<i:h>=r)&&S<b.length;)t.get(h,c)===F?(b[S]++,h+=O):(S++,F=!F);return S===b.length||h===(s?i:r)&&S===b.length-1?b:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,i,s,l,c){let h=l,b=s?-1:1;for(let S=0;S<2;S++){for(;(s?h>=r:h<i)&&s===t.get(h,c);){if(Math.abs(l-h)>Ot.CODEWORD_SKEW_SIZE)return l;h+=b}b=-b,s=!s}return h}static checkCodewordSkew(t,r,i){return r-Ot.CODEWORD_SKEW_SIZE<=t&&t<=i+Ot.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,i){if(t.length===0)throw L.getFormatInstance();let s=1<<r+1,l=Ot.correctErrors(t,i,s);Ot.verifyCodewordCount(t,s);let c=Be.decode(t,""+r);return c.setErrorsCorrected(l),c.setErasures(i.length),c}static correctErrors(t,r,i){if(r!=null&&r.length>i/2+Ot.MAX_ERRORS||i<0||i>Ot.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return Ot.errorCorrection.decode(t,i,r)}static verifyCodewordCount(t,r){if(t.length<4)throw L.getFormatInstance();let i=t[0];if(i>t.length)throw L.getFormatInstance();if(i===0)if(r<t.length)t[0]=t.length-r;else throw L.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),i=0,s=r.length-1;for(;!((t&1)!==i&&(i=t&1,s--,s<0));)r[s]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Ot.getCodewordBucketNumber(Ot.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new ra;for(let i=0;i<t.length;i++){r.format("Row %2d: ",i);for(let s=0;s<t[i].length;s++){let l=t[i][s];l.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}r.format("%n")}return r.toString()}}Ot.CODEWORD_SKEW_SIZE=2,Ot.MAX_ERRORS=3,Ot.MAX_EC_CODEWORDS=512,Ot.errorCorrection=new fi;class ir{decode(t,r=null){let i=ir.decode(t,r,!1);if(i==null||i.length===0||i[0]==null)throw ae.getNotFoundInstance();return i[0]}decodeMultiple(t,r=null){try{return ir.decode(t,r,!0)}catch(i){throw i instanceof L||i instanceof T?ae.getNotFoundInstance():i}}static decode(t,r,i){const s=new Array,l=_t.detectMultiple(t,r,i);for(const c of l.getPoints()){const h=Ot.decode(l.getBits(),c[4],c[5],c[6],c[7],ir.getMinCodewordWidth(c),ir.getMaxCodewordWidth(c)),b=new Te(h.getText(),h.getRawBytes(),void 0,c,ze.PDF_417);b.putMetadata(nt.ERROR_CORRECTION_LEVEL,h.getECLevel());const S=h.getOther();S!=null&&b.putMetadata(nt.PDF417_EXTRA_METADATA,S),s.push(b)}return s.map(c=>c)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?H.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(ir.getMaxWidth(t[0],t[4]),ir.getMaxWidth(t[6],t[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.max(ir.getMaxWidth(t[1],t[5]),ir.getMaxWidth(t[7],t[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(ir.getMinWidth(t[0],t[4]),ir.getMinWidth(t[6],t[2])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN),Math.min(ir.getMinWidth(t[1],t[5]),ir.getMinWidth(t[7],t[3])*vt.MODULES_IN_CODEWORD/vt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ds extends y{}ds.kind="ReaderException";class ao{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!p(t)&&t.get(V.TRY_HARDER)===!0,i=p(t)?null:t.get(V.POSSIBLE_FORMATS),s=new Array;if(!p(i)){const l=i.some(c=>c===ze.UPC_A||c===ze.UPC_E||c===ze.EAN_13||c===ze.EAN_8||c===ze.CODABAR||c===ze.CODE_39||c===ze.CODE_93||c===ze.CODE_128||c===ze.ITF||c===ze.RSS_14||c===ze.RSS_EXPANDED);l&&!r&&s.push(new hr(t,this.verbose)),i.includes(ze.QR_CODE)&&s.push(new ui),i.includes(ze.DATA_MATRIX)&&s.push(new Fe),i.includes(ze.AZTEC)&&s.push(new dn),i.includes(ze.PDF_417)&&s.push(new ir),l&&r&&s.push(new hr(t,this.verbose))}s.length===0&&(r||s.push(new hr(t,this.verbose)),s.push(new ui),s.push(new Fe),s.push(new dn),s.push(new ir),r&&s.push(new hr(t,this.verbose))),this.readers=s}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new ds("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(i){if(i instanceof ds)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class so extends Oe{constructor(t=null,r=500){const i=new ao;i.setHints(t),super(i,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class zc extends Oe{constructor(t=500){super(new ir,t)}}class Uc extends Oe{constructor(t=500){super(new ui,t)}}var rl;(function(U){U[U.ERROR_CORRECTION=0]="ERROR_CORRECTION",U[U.CHARACTER_SET=1]="CHARACTER_SET",U[U.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",U[U.MIN_SIZE=3]="MIN_SIZE",U[U.MAX_SIZE=4]="MAX_SIZE",U[U.MARGIN=5]="MARGIN",U[U.PDF417_COMPACT=6]="PDF417_COMPACT",U[U.PDF417_COMPACTION=7]="PDF417_COMPACTION",U[U.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",U[U.AZTEC_LAYERS=9]="AZTEC_LAYERS",U[U.QR_VERSION=10]="QR_VERSION"})(rl||(rl={}));var Xn=rl;class ja{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Ct(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let i=r[r.length-1];const s=this.field;for(let l=r.length;l<=t;l++){const c=i.multiply(new Ct(s,Int32Array.from([1,s.exp(l-1+s.getGeneratorBase())])));r.push(c),i=c}}return r[t]}encode(t,r){if(r===0)throw new _("No error correction bytes");const i=t.length-r;if(i<=0)throw new _("No data bytes provided");const s=this.buildGenerator(r),l=new Int32Array(i);I.arraycopy(t,0,l,0,i);let c=new Ct(this.field,l);c=c.multiplyByMonomial(r,1);const b=c.divide(s)[1].getCoefficients(),S=r-b.length;for(let O=0;O<S;O++)t[i+O]=0;I.arraycopy(b,0,t,i+S,b.length)}}class Dn{constructor(){}static applyMaskPenaltyRule1(t){return Dn.applyMaskPenaltyRule1Internal(t,!0)+Dn.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const i=t.getArray(),s=t.getWidth(),l=t.getHeight();for(let c=0;c<l-1;c++){const h=i[c];for(let b=0;b<s-1;b++){const S=h[b];S===h[b+1]&&S===i[c+1][b]&&S===i[c+1][b+1]&&r++}}return Dn.N2*r}static applyMaskPenaltyRule3(t){let r=0;const i=t.getArray(),s=t.getWidth(),l=t.getHeight();for(let c=0;c<l;c++)for(let h=0;h<s;h++){const b=i[c];h+6<s&&b[h]===1&&b[h+1]===0&&b[h+2]===1&&b[h+3]===1&&b[h+4]===1&&b[h+5]===0&&b[h+6]===1&&(Dn.isWhiteHorizontal(b,h-4,h)||Dn.isWhiteHorizontal(b,h+7,h+11))&&r++,c+6<l&&i[c][h]===1&&i[c+1][h]===0&&i[c+2][h]===1&&i[c+3][h]===1&&i[c+4][h]===1&&i[c+5][h]===0&&i[c+6][h]===1&&(Dn.isWhiteVertical(i,h,c-4,c)||Dn.isWhiteVertical(i,h,c+7,c+11))&&r++}return r*Dn.N3}static isWhiteHorizontal(t,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(let s=r;s<i;s++)if(t[s]===1)return!1;return!0}static isWhiteVertical(t,r,i,s){i=Math.max(i,0),s=Math.min(s,t.length);for(let l=i;l<s;l++)if(t[l][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const i=t.getArray(),s=t.getWidth(),l=t.getHeight();for(let b=0;b<l;b++){const S=i[b];for(let O=0;O<s;O++)S[O]===1&&r++}const c=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-c)*10/c)*Dn.N4}static getDataMaskBit(t,r,i){let s,l;switch(t){case 0:s=i+r&1;break;case 1:s=i&1;break;case 2:s=r%3;break;case 3:s=(i+r)%3;break;case 4:s=Math.floor(i/2)+Math.floor(r/3)&1;break;case 5:l=i*r,s=(l&1)+l%3;break;case 6:l=i*r,s=(l&1)+l%3&1;break;case 7:l=i*r,s=l%3+(i+r&1)&1;break;default:throw new _("Invalid mask pattern: "+t)}return s===0}static applyMaskPenaltyRule1Internal(t,r){let i=0;const s=r?t.getHeight():t.getWidth(),l=r?t.getWidth():t.getHeight(),c=t.getArray();for(let h=0;h<s;h++){let b=0,S=-1;for(let O=0;O<l;O++){const F=r?c[h][O]:c[O][h];F===S?b++:(b>=5&&(i+=Dn.N1+(b-5)),b=1,S=F)}b>=5&&(i+=Dn.N1+(b-5))}return i}}Dn.N1=3,Dn.N2=3,Dn.N3=40,Dn.N4=10;class hs{constructor(t,r){this.width=t,this.height=r;const i=new Array(r);for(let s=0;s!==r;s++)i[s]=new Uint8Array(t);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,i){this.bytes[r][t]=i}setBoolean(t,r,i){this.bytes[r][t]=i?1:0}clear(t){for(const r of this.bytes)P.fill(r,t)}equals(t){if(!(t instanceof hs))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let i=0,s=this.height;i<s;++i){const l=this.bytes[i],c=r.bytes[i];for(let h=0,b=this.width;h<b;++h)if(l[h]!==c[h])return!1}return!0}toString(){const t=new ie;for(let r=0,i=this.height;r<i;++r){const s=this.bytes[r];for(let l=0,c=this.width;l<c;++l)switch(s[l]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class Mi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new ie;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<Mi.NUM_MASK_PATTERNS}}Mi.NUM_MASK_PATTERNS=8;class cn extends y{}cn.kind="WriterException";class wt{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,i,s,l){wt.clearMatrix(l),wt.embedBasicPatterns(i,l),wt.embedTypeInfo(r,s,l),wt.maybeEmbedVersionInfo(i,l),wt.embedDataBits(t,s,l)}static embedBasicPatterns(t,r){wt.embedPositionDetectionPatternsAndSeparators(r),wt.embedDarkDotAtLeftBottomCorner(r),wt.maybeEmbedPositionAdjustmentPatterns(t,r),wt.embedTimingPatterns(r)}static embedTypeInfo(t,r,i){const s=new K;wt.makeTypeInfoBits(t,r,s);for(let l=0,c=s.getSize();l<c;++l){const h=s.get(s.getSize()-1-l),b=wt.TYPE_INFO_COORDINATES[l],S=b[0],O=b[1];if(i.setBoolean(S,O,h),l<8){const F=i.getWidth()-l-1;i.setBoolean(F,8,h)}else{const Y=i.getHeight()-7+(l-8);i.setBoolean(8,Y,h)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const i=new K;wt.makeVersionInfoBits(t,i);let s=17;for(let l=0;l<6;++l)for(let c=0;c<3;++c){const h=i.get(s);s--,r.setBoolean(l,r.getHeight()-11+c,h),r.setBoolean(r.getHeight()-11+c,l,h)}}static embedDataBits(t,r,i){let s=0,l=-1,c=i.getWidth()-1,h=i.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);h>=0&&h<i.getHeight();){for(let b=0;b<2;++b){const S=c-b;if(!wt.isEmpty(i.get(S,h)))continue;let O;s<t.getSize()?(O=t.get(s),++s):O=!1,r!==255&&Dn.getDataMaskBit(r,S,h)&&(O=!O),i.setBoolean(S,h,O)}h+=l}l=-l,h+=l,c-=2}if(s!==t.getSize())throw new cn("Not all bits consumed: "+s+"/"+t.getSize())}static findMSBSet(t){return 32-H.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new _("0 polynomial");const i=wt.findMSBSet(r);for(t<<=i-1;wt.findMSBSet(t)>=i;)t^=r<<wt.findMSBSet(t)-i;return t}static makeTypeInfoBits(t,r,i){if(!Mi.isValidMaskPattern(r))throw new cn("Invalid mask pattern");const s=t.getBits()<<3|r;i.appendBits(s,5);const l=wt.calculateBCHCode(s,wt.TYPE_INFO_POLY);i.appendBits(l,10);const c=new K;if(c.appendBits(wt.TYPE_INFO_MASK_PATTERN,15),i.xor(c),i.getSize()!==15)throw new cn("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const i=wt.calculateBCHCode(t.getVersionNumber(),wt.VERSION_INFO_POLY);if(r.appendBits(i,12),r.getSize()!==18)throw new cn("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const i=(r+1)%2;wt.isEmpty(t.get(r,6))&&t.setNumber(r,6,i),wt.isEmpty(t.get(6,r))&&t.setNumber(6,r,i)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new cn;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,i){for(let s=0;s<8;++s){if(!wt.isEmpty(i.get(t+s,r)))throw new cn;i.setNumber(t+s,r,0)}}static embedVerticalSeparationPattern(t,r,i){for(let s=0;s<7;++s){if(!wt.isEmpty(i.get(t,r+s)))throw new cn;i.setNumber(t,r+s,0)}}static embedPositionAdjustmentPattern(t,r,i){for(let s=0;s<5;++s){const l=wt.POSITION_ADJUSTMENT_PATTERN[s];for(let c=0;c<5;++c)i.setNumber(t+c,r+s,l[c])}}static embedPositionDetectionPattern(t,r,i){for(let s=0;s<7;++s){const l=wt.POSITION_DETECTION_PATTERN[s];for(let c=0;c<7;++c)i.setNumber(t+c,r+s,l[c])}}static embedPositionDetectionPatternsAndSeparators(t){const r=wt.POSITION_DETECTION_PATTERN[0].length;wt.embedPositionDetectionPattern(0,0,t),wt.embedPositionDetectionPattern(t.getWidth()-r,0,t),wt.embedPositionDetectionPattern(0,t.getWidth()-r,t);const i=8;wt.embedHorizontalSeparationPattern(0,i-1,t),wt.embedHorizontalSeparationPattern(t.getWidth()-i,i-1,t),wt.embedHorizontalSeparationPattern(0,t.getWidth()-i,t);const s=7;wt.embedVerticalSeparationPattern(s,0,t),wt.embedVerticalSeparationPattern(t.getHeight()-s-1,0,t),wt.embedVerticalSeparationPattern(s,t.getHeight()-s,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const i=t.getVersionNumber()-1,s=wt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let l=0,c=s.length;l!==c;l++){const h=s[l];if(h>=0)for(let b=0;b!==c;b++){const S=s[b];S>=0&&wt.isEmpty(r.get(S,h))&&wt.embedPositionAdjustmentPattern(S-2,h-2,r)}}}}wt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),wt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),wt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),wt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),wt.VERSION_INFO_POLY=7973,wt.TYPE_INFO_POLY=1335,wt.TYPE_INFO_MASK_PATTERN=21522;class Fc{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Cn{constructor(){}static calculateMaskPenalty(t){return Dn.applyMaskPenaltyRule1(t)+Dn.applyMaskPenaltyRule2(t)+Dn.applyMaskPenaltyRule3(t)+Dn.applyMaskPenaltyRule4(t)}static encode(t,r,i=null){let s=Cn.DEFAULT_BYTE_MODE_ENCODING;const l=i!==null&&i.get(Xn.CHARACTER_SET)!==void 0;l&&(s=i.get(Xn.CHARACTER_SET).toString());const c=this.chooseMode(t,s),h=new K;if(c===gt.BYTE&&(l||Cn.DEFAULT_BYTE_MODE_ENCODING!==s)){const $e=G.getCharacterSetECIByName(s);$e!==void 0&&this.appendECI($e,h)}this.appendModeInfo(c,h);const b=new K;this.appendBytes(t,c,b,s);let S;if(i!==null&&i.get(Xn.QR_VERSION)!==void 0){const $e=Number.parseInt(i.get(Xn.QR_VERSION).toString(),10);S=at.getVersionForNumber($e);const Ze=this.calculateBitsNeeded(c,h,b,S);if(!this.willFit(Ze,S,r))throw new cn("Data too big for requested version")}else S=this.recommendVersion(r,c,h,b);const O=new K;O.appendBitArray(h);const F=c===gt.BYTE?b.getSizeInBytes():t.length;this.appendLengthInfo(F,S,c,O),O.appendBitArray(b);const Y=S.getECBlocksForLevel(r),se=S.getTotalCodewords()-Y.getTotalECCodewords();this.terminateBits(se,O);const ge=this.interleaveWithECBytes(O,S.getTotalCodewords(),se,Y.getNumBlocks()),ye=new Mi;ye.setECLevel(r),ye.setMode(c),ye.setVersion(S);const Ae=S.getDimensionForVersion(),Me=new hs(Ae,Ae),rt=this.chooseMaskPattern(ge,r,S,Me);return ye.setMaskPattern(rt),wt.buildMatrix(ge,r,S,rt,Me),ye.setMatrix(Me),ye}static recommendVersion(t,r,i,s){const l=this.calculateBitsNeeded(r,i,s,at.getVersionForNumber(1)),c=this.chooseVersion(l,t),h=this.calculateBitsNeeded(r,i,s,c);return this.chooseVersion(h,t)}static calculateBitsNeeded(t,r,i,s){return r.getSize()+t.getCharacterCountBits(s)+i.getSize()}static getAlphanumericCode(t){return t<Cn.ALPHANUMERIC_TABLE.length?Cn.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(G.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return gt.KANJI;let i=!1,s=!1;for(let l=0,c=t.length;l<c;++l){const h=t.charAt(l);if(Cn.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)s=!0;else return gt.BYTE}return s?gt.ALPHANUMERIC:i?gt.NUMERIC:gt.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=ce.encode(t,G.SJIS)}catch{return!1}const i=r.length;if(i%2!==0)return!1;for(let s=0;s<i;s+=2){const l=r[s]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(t,r,i,s){let l=Number.MAX_SAFE_INTEGER,c=-1;for(let h=0;h<Mi.NUM_MASK_PATTERNS;h++){wt.buildMatrix(t,r,i,h,s);let b=this.calculateMaskPenalty(s);b<l&&(l=b,c=h)}return c}static chooseVersion(t,r){for(let i=1;i<=40;i++){const s=at.getVersionForNumber(i);if(Cn.willFit(t,s,r))return s}throw new cn("Data too big")}static willFit(t,r,i){const s=r.getTotalCodewords(),c=r.getECBlocksForLevel(i).getTotalECCodewords(),h=s-c,b=(t+7)/8;return h>=b}static terminateBits(t,r){const i=t*8;if(r.getSize()>i)throw new cn("data bits cannot fit in the QR Code"+r.getSize()+" > "+i);for(let c=0;c<4&&r.getSize()<i;++c)r.appendBit(!1);const s=r.getSize()&7;if(s>0)for(let c=s;c<8;c++)r.appendBit(!1);const l=t-r.getSizeInBytes();for(let c=0;c<l;++c)r.appendBits((c&1)===0?236:17,8);if(r.getSize()!==i)throw new cn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,i,s,l,c){if(s>=i)throw new cn("Block ID too large");const h=t%i,b=i-h,S=Math.floor(t/i),O=S+1,F=Math.floor(r/i),Y=F+1,se=S-F,ge=O-Y;if(se!==ge)throw new cn("EC bytes mismatch");if(i!==b+h)throw new cn("RS blocks mismatch");if(t!==(F+se)*b+(Y+ge)*h)throw new cn("Total bytes mismatch");s<b?(l[0]=F,c[0]=se):(l[0]=Y,c[0]=ge)}static interleaveWithECBytes(t,r,i,s){if(t.getSizeInBytes()!==i)throw new cn("Number of bits and data bytes does not match");let l=0,c=0,h=0;const b=new Array;for(let O=0;O<s;++O){const F=new Int32Array(1),Y=new Int32Array(1);Cn.getNumDataBytesAndNumECBytesForBlockID(r,i,s,O,F,Y);const se=F[0],ge=new Uint8Array(se);t.toBytes(8*l,ge,0,se);const ye=Cn.generateECBytes(ge,Y[0]);b.push(new Fc(ge,ye)),c=Math.max(c,se),h=Math.max(h,ye.length),l+=F[0]}if(i!==l)throw new cn("Data bytes does not match offset");const S=new K;for(let O=0;O<c;++O)for(const F of b){const Y=F.getDataBytes();O<Y.length&&S.appendBits(Y[O],8)}for(let O=0;O<h;++O)for(const F of b){const Y=F.getErrorCorrectionBytes();O<Y.length&&S.appendBits(Y[O],8)}if(r!==S.getSizeInBytes())throw new cn("Interleaving error: "+r+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(t,r){const i=t.length,s=new Int32Array(i+r);for(let c=0;c<i;c++)s[c]=t[c]&255;new ja(xt.QR_CODE_FIELD_256).encode(s,r);const l=new Uint8Array(r);for(let c=0;c<r;c++)l[c]=s[i+c];return l}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,i,s){const l=i.getCharacterCountBits(r);if(t>=1<<l)throw new cn(t+" is bigger than "+((1<<l)-1));s.appendBits(t,l)}static appendBytes(t,r,i,s){switch(r){case gt.NUMERIC:Cn.appendNumericBytes(t,i);break;case gt.ALPHANUMERIC:Cn.appendAlphanumericBytes(t,i);break;case gt.BYTE:Cn.append8BitBytes(t,i,s);break;case gt.KANJI:Cn.appendKanjiBytes(t,i);break;default:throw new cn("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=Cn.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const i=t.length;let s=0;for(;s<i;){const l=Cn.getDigit(t.charAt(s));if(s+2<i){const c=Cn.getDigit(t.charAt(s+1)),h=Cn.getDigit(t.charAt(s+2));r.appendBits(l*100+c*10+h,10),s+=3}else if(s+1<i){const c=Cn.getDigit(t.charAt(s+1));r.appendBits(l*10+c,7),s+=2}else r.appendBits(l,4),s++}}static appendAlphanumericBytes(t,r){const i=t.length;let s=0;for(;s<i;){const l=Cn.getAlphanumericCode(t.charCodeAt(s));if(l===-1)throw new cn;if(s+1<i){const c=Cn.getAlphanumericCode(t.charCodeAt(s+1));if(c===-1)throw new cn;r.appendBits(l*45+c,11),s+=2}else r.appendBits(l,6),s++}}static append8BitBytes(t,r,i){let s;try{s=ce.encode(t,i)}catch(l){throw new cn(l)}for(let l=0,c=s.length;l!==c;l++){const h=s[l];r.appendBits(h,8)}}static appendKanjiBytes(t,r){let i;try{i=ce.encode(t,G.SJIS)}catch(l){throw new cn(l)}const s=i.length;for(let l=0;l<s;l+=2){const c=i[l]&255,h=i[l+1]&255,b=c<<8&4294967295|h;let S=-1;if(b>=33088&&b<=40956?S=b-33088:b>=57408&&b<=60351&&(S=b-49472),S===-1)throw new cn("Invalid byte sequence");const O=(S>>8)*192+(S&255);r.appendBits(O,13)}}static appendECI(t,r){r.appendBits(gt.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}Cn.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Cn.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();class Bi{write(t,r,i,s=null){if(t.length===0)throw new _("Found empty contents");if(r<0||i<0)throw new _("Requested dimensions are too small: "+r+"x"+i);let l=Ue.L,c=Bi.QUIET_ZONE_SIZE;s!==null&&(s.get(Xn.ERROR_CORRECTION)!==void 0&&(l=Ue.fromString(s.get(Xn.ERROR_CORRECTION).toString())),s.get(Xn.MARGIN)!==void 0&&(c=Number.parseInt(s.get(Xn.MARGIN).toString(),10)));const h=Cn.encode(t,l,s);return this.renderResult(h,r,i,c)}writeToDom(t,r,i,s,l=null){typeof t=="string"&&(t=document.querySelector(t));const c=this.write(r,i,s,l);t&&t.appendChild(c)}renderResult(t,r,i,s){const l=t.getMatrix();if(l===null)throw new Ne;const c=l.getWidth(),h=l.getHeight(),b=c+s*2,S=h+s*2,O=Math.max(r,b),F=Math.max(i,S),Y=Math.min(Math.floor(O/b),Math.floor(F/S)),se=Math.floor((O-c*Y)/2),ge=Math.floor((F-h*Y)/2),ye=this.createSVGElement(O,F);for(let Ae=0,Me=ge;Ae<h;Ae++,Me+=Y)for(let rt=0,$e=se;rt<c;rt++,$e+=Y)if(l.get(rt,Ae)===1){const Ze=this.createSvgRectElement($e,Me,Y,Y);ye.appendChild(Ze)}return ye}createSVGElement(t,r){const i=document.createElementNS(Bi.SVG_NS,"svg");return i.setAttributeNS(null,"height",t.toString()),i.setAttributeNS(null,"width",r.toString()),i}createSvgRectElement(t,r,i,s){const l=document.createElementNS(Bi.SVG_NS,"rect");return l.setAttributeNS(null,"x",t.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",s.toString()),l.setAttributeNS(null,"fill","#000000"),l}}Bi.QUIET_ZONE_SIZE=4,Bi.SVG_NS="http://www.w3.org/2000/svg";class aa{encode(t,r,i,s,l){if(t.length===0)throw new _("Found empty contents");if(r!==ze.QR_CODE)throw new _("Can only encode QR_CODE, but got "+r);if(i<0||s<0)throw new _(`Requested dimensions are too small: ${i}x${s}`);let c=Ue.L,h=aa.QUIET_ZONE_SIZE;l!==null&&(l.get(Xn.ERROR_CORRECTION)!==void 0&&(c=Ue.fromString(l.get(Xn.ERROR_CORRECTION).toString())),l.get(Xn.MARGIN)!==void 0&&(h=Number.parseInt(l.get(Xn.MARGIN).toString(),10)));const b=Cn.encode(t,c,l);return aa.renderResult(b,i,s,h)}static renderResult(t,r,i,s){const l=t.getMatrix();if(l===null)throw new Ne;const c=l.getWidth(),h=l.getHeight(),b=c+s*2,S=h+s*2,O=Math.max(r,b),F=Math.max(i,S),Y=Math.min(Math.floor(O/b),Math.floor(F/S)),se=Math.floor((O-c*Y)/2),ge=Math.floor((F-h*Y)/2),ye=new M(O,F);for(let Ae=0,Me=ge;Ae<h;Ae++,Me+=Y)for(let rt=0,$e=se;rt<c;rt++,$e+=Y)l.get(rt,Ae)===1&&ye.setRegion($e,Me,Y,Y);return ye}}aa.QUIET_ZONE_SIZE=4;class Pc{encode(t,r,i,s,l){let c;if(r===ze.QR_CODE)c=new aa;else throw new _("No encoder available for format "+r);return c.encode(t,r,i,s,l)}}class Kr extends Ye{constructor(t,r,i,s,l,c,h,b){if(super(c,h),this.yuvData=t,this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=l,s+c>r||l+h>i)throw new _("Crop rectangle does not fit within image data.");b&&this.reverseHorizontal(c,h)}getRow(t,r){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const s=(t+this.top)*this.dataWidth+this.left;return I.arraycopy(this.yuvData,s,r,0,i),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const i=t*r,s=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return I.arraycopy(this.yuvData,l,s,0,i),s;for(let c=0;c<r;c++){const h=c*t;I.arraycopy(this.yuvData,l,s,h,t),l+=this.dataWidth}return s}isCropSupported(){return!0}crop(t,r,i,s){return new Kr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,s,!1)}renderThumbnail(){const t=this.getWidth()/Kr.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Kr.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),s=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let c=0;c<r;c++){const h=c*t;for(let b=0;b<t;b++){const S=s[l+b*Kr.THUMBNAIL_SCALE_FACTOR]&255;i[h+b]=4278190080|S*65793}l+=this.dataWidth*Kr.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Kr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Kr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const i=this.yuvData;for(let s=0,l=this.top*this.dataWidth+this.left;s<r;s++,l+=this.dataWidth){const c=l+t/2;for(let h=l,b=l+t-1;h<c;h++,b--){const S=i[h];i[h]=i[b],i[b]=S}}}invert(){return new ke(this)}}Kr.THUMBNAIL_SCALE_FACTOR=2;class il extends Ye{constructor(t,r,i,s,l,c,h){if(super(r,i),this.dataWidth=s,this.dataHeight=l,this.left=c,this.top=h,t.BYTES_PER_ELEMENT===4){const b=r*i,S=new Uint8ClampedArray(b);for(let O=0;O<b;O++){const F=t[O],Y=F>>16&255,se=F>>7&510,ge=F&255;S[O]=(Y+se+ge)/4&255}this.luminances=S}else this.luminances=t;if(s===void 0&&(this.dataWidth=r),l===void 0&&(this.dataHeight=i),c===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+i>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new _("Requested row is outside the image: "+t);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const s=(t+this.top)*this.dataWidth+this.left;return I.arraycopy(this.luminances,s,r,0,i),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const i=t*r,s=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return I.arraycopy(this.luminances,l,s,0,i),s;for(let c=0;c<r;c++){const h=c*t;I.arraycopy(this.luminances,l,s,h,t),l+=this.dataWidth}return s}isCropSupported(){return!0}crop(t,r,i,s){return new il(this.luminances,i,s,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new ke(this)}}class lo extends G{static forName(t){return this.getCharacterSetECIByName(t)}}class za{}za.ISO_8859_1=G.ISO8859_1;class sa{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class oo{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class co{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ki extends co{constructor(t,r,i){super(t),this.value=r,this.bitCount=i}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new ki(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ki(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+H.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class gs extends ki{constructor(t,r,i){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=i}appendTo(t,r){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)}addBinaryShift(t,r){return new gs(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function uo(U,t,r){return new gs(U,t,r)}function la(U,t,r){return new ki(U,t,r)}const oa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ai=0,ps=1,Ir=2,al=3,Fr=4,Ua=new ki(null,0,0),Li=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hc(U){for(let t of U)P.fill(t,-1);return U[Ai][Fr]=0,U[ps][Fr]=0,U[ps][Ai]=28,U[al][Fr]=0,U[Ir][Fr]=0,U[Ir][Ai]=15,U}const Fa=Hc(P.createInt32Array(6,6));class Pr{constructor(t,r,i,s){this.token=t,this.mode=r,this.binaryShiftByteCount=i,this.bitCount=s}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let i=this.bitCount,s=this.token;if(t!==this.mode){let c=Li[this.mode][t];s=la(s,c&65535,c>>16),i+=c>>16}let l=t===Ir?4:5;return s=la(s,r,l),new Pr(s,t,0,i+l)}shiftAndAppend(t,r){let i=this.token,s=this.mode===Ir?4:5;return i=la(i,Fa[this.mode][t],s),i=la(i,r,5),new Pr(i,this.mode,0,this.bitCount+s+5)}addBinaryShiftChar(t){let r=this.token,i=this.mode,s=this.bitCount;if(this.mode===Fr||this.mode===Ir){let h=Li[i][Ai];r=la(r,h&65535,h>>16),s+=h>>16,i=Ai}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new Pr(r,i,this.binaryShiftByteCount+1,s+l);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(t+1)),c}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=uo(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Pr(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(Li[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=Pr.calculateBinaryShiftCost(t)-Pr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let s=this.endBinaryShift(t.length).token;s!==null;s=s.getPrevious())r.unshift(s);let i=new K;for(const s of r)s.appendTo(i,t);return i}toString(){return X.format("%s bits=%d bytes=%d",oa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Pr.INITIAL_STATE=new Pr(Ua,Ai,0,0);function fo(U){const t=X.getCharCode(" "),r=X.getCharCode("."),i=X.getCharCode(",");U[Ai][t]=1;const s=X.getCharCode("Z"),l=X.getCharCode("A");for(let Y=l;Y<=s;Y++)U[Ai][Y]=Y-l+2;U[ps][t]=1;const c=X.getCharCode("z"),h=X.getCharCode("a");for(let Y=h;Y<=c;Y++)U[ps][Y]=Y-h+2;U[Ir][t]=1;const b=X.getCharCode("9"),S=X.getCharCode("0");for(let Y=S;Y<=b;Y++)U[Ir][Y]=Y-S+2;U[Ir][i]=12,U[Ir][r]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Y=0;Y<O.length;Y++)U[al][X.getCharCode(O[Y])]=Y;const F=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Y=0;Y<F.length;Y++)X.getCharCode(F[Y])>0&&(U[Fr][X.getCharCode(F[Y])]=Y);return U}const Pa=fo(P.createInt32Array(5,256));class ji{constructor(t){this.text=t}encode(){const t=X.getCharCode(" "),r=X.getCharCode(`
`);let i=oo.singletonList(Pr.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let c,h=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case X.getCharCode("\r"):c=h===r?2:0;break;case X.getCharCode("."):c=h===t?3:0;break;case X.getCharCode(","):c=h===t?4:0;break;case X.getCharCode(":"):c=h===t?5:0;break;default:c=0}c>0?(i=ji.updateStateListForPair(i,l,c),l++):i=this.updateStateListForChar(i,l)}return oo.min(i,(l,c)=>l.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const i=[];for(let s of t)this.updateStateForChar(s,r,i);return ji.simplifyStates(i)}updateStateForChar(t,r,i){let s=this.text[r]&255,l=Pa[t.getMode()][s]>0,c=null;for(let h=0;h<=Fr;h++){let b=Pa[h][s];if(b>0){if(c==null&&(c=t.endBinaryShift(r)),!l||h===t.getMode()||h===Ir){const S=c.latchAndAppend(h,b);i.push(S)}if(!l&&Fa[t.getMode()][h]>=0){const S=c.shiftAndAppend(h,b);i.push(S)}}}if(t.getBinaryShiftByteCount()>0||Pa[t.getMode()][s]===0){let h=t.addBinaryShiftChar(r);i.push(h)}}static updateStateListForPair(t,r,i){const s=[];for(let l of t)this.updateStateForPair(l,r,i,s);return this.simplifyStates(s)}static updateStateForPair(t,r,i,s){let l=t.endBinaryShift(r);if(s.push(l.latchAndAppend(Fr,i)),t.getMode()!==Fr&&s.push(l.shiftAndAppend(Fr,i)),i===3||i===4){let c=l.latchAndAppend(Ir,16-i).latchAndAppend(Ir,1);s.push(c)}if(t.getBinaryShiftByteCount()>0){let c=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);s.push(c)}}static simplifyStates(t){let r=[];for(const i of t){let s=!0;for(const l of r){if(l.isBetterThanOrEqualTo(i)){s=!1;break}i.isBetterThanOrEqualTo(l)&&(r=r.filter(c=>c!==l))}s&&r.push(i)}return r}}class Gt{constructor(){}static encodeBytes(t){return Gt.encode(t,Gt.DEFAULT_EC_PERCENT,Gt.DEFAULT_AZTEC_LAYERS)}static encode(t,r,i){let s=new ji(t).encode(),l=H.truncDivision(s.getSize()*r,100)+11,c=s.getSize()+l,h,b,S,O,F;if(i!==Gt.DEFAULT_AZTEC_LAYERS){if(h=i<0,b=Math.abs(i),b>(h?Gt.MAX_NB_BITS_COMPACT:Gt.MAX_NB_BITS))throw new _(X.format("Illegal value %s for layers",i));S=Gt.totalBitsInLayer(b,h),O=Gt.WORD_SIZE[b];let Ze=S-S%O;if(F=Gt.stuffBits(s,O),F.getSize()+l>Ze)throw new _("Data to large for user specified layer");if(h&&F.getSize()>O*64)throw new _("Data to large for user specified layer")}else{O=0,F=null;for(let Ze=0;;Ze++){if(Ze>Gt.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(h=Ze<=3,b=h?Ze+1:Ze,S=Gt.totalBitsInLayer(b,h),c>S)continue;(F==null||O!==Gt.WORD_SIZE[b])&&(O=Gt.WORD_SIZE[b],F=Gt.stuffBits(s,O));let Bt=S-S%O;if(!(h&&F.getSize()>O*64)&&F.getSize()+l<=Bt)break}}let Y=Gt.generateCheckWords(F,S,O),se=F.getSize()/O,ge=Gt.generateModeMessage(h,b,se),ye=(h?11:14)+b*4,Ae=new Int32Array(ye),Me;if(h){Me=ye;for(let Ze=0;Ze<Ae.length;Ze++)Ae[Ze]=Ze}else{Me=ye+1+2*H.truncDivision(H.truncDivision(ye,2)-1,15);let Ze=H.truncDivision(ye,2),Bt=H.truncDivision(Me,2);for(let Tt=0;Tt<Ze;Tt++){let zn=Tt+H.truncDivision(Tt,15);Ae[Ze-Tt-1]=Bt-zn-1,Ae[Ze+Tt]=Bt+zn+1}}let rt=new M(Me);for(let Ze=0,Bt=0;Ze<b;Ze++){let Tt=(b-Ze)*4+(h?9:12);for(let zn=0;zn<Tt;zn++){let Dr=zn*2;for(let gr=0;gr<2;gr++)Y.get(Bt+Dr+gr)&&rt.set(Ae[Ze*2+gr],Ae[Ze*2+zn]),Y.get(Bt+Tt*2+Dr+gr)&&rt.set(Ae[Ze*2+zn],Ae[ye-1-Ze*2-gr]),Y.get(Bt+Tt*4+Dr+gr)&&rt.set(Ae[ye-1-Ze*2-gr],Ae[ye-1-Ze*2-zn]),Y.get(Bt+Tt*6+Dr+gr)&&rt.set(Ae[ye-1-Ze*2-zn],Ae[Ze*2+gr])}Bt+=Tt*8}if(Gt.drawModeMessage(rt,h,Me,ge),h)Gt.drawBullsEye(rt,H.truncDivision(Me,2),5);else{Gt.drawBullsEye(rt,H.truncDivision(Me,2),7);for(let Ze=0,Bt=0;Ze<H.truncDivision(ye,2)-1;Ze+=15,Bt+=16)for(let Tt=H.truncDivision(Me,2)&1;Tt<Me;Tt+=2)rt.set(H.truncDivision(Me,2)-Bt,Tt),rt.set(H.truncDivision(Me,2)+Bt,Tt),rt.set(Tt,H.truncDivision(Me,2)-Bt),rt.set(Tt,H.truncDivision(Me,2)+Bt)}let $e=new sa;return $e.setCompact(h),$e.setSize(Me),$e.setLayers(b),$e.setCodeWords(se),$e.setMatrix(rt),$e}static drawBullsEye(t,r,i){for(let s=0;s<i;s+=2)for(let l=r-s;l<=r+s;l++)t.set(l,r-s),t.set(l,r+s),t.set(r-s,l),t.set(r+s,l);t.set(r-i,r-i),t.set(r-i+1,r-i),t.set(r-i,r-i+1),t.set(r+i,r-i),t.set(r+i,r-i+1),t.set(r+i,r+i-1)}static generateModeMessage(t,r,i){let s=new K;return t?(s.appendBits(r-1,2),s.appendBits(i-1,6),s=Gt.generateCheckWords(s,28,4)):(s.appendBits(r-1,5),s.appendBits(i-1,11),s=Gt.generateCheckWords(s,40,4)),s}static drawModeMessage(t,r,i,s){let l=H.truncDivision(i,2);if(r)for(let c=0;c<7;c++){let h=l-3+c;s.get(c)&&t.set(h,l-5),s.get(c+7)&&t.set(l+5,h),s.get(20-c)&&t.set(h,l+5),s.get(27-c)&&t.set(l-5,h)}else for(let c=0;c<10;c++){let h=l-5+c+H.truncDivision(c,5);s.get(c)&&t.set(h,l-7),s.get(c+10)&&t.set(l+7,h),s.get(29-c)&&t.set(h,l+7),s.get(39-c)&&t.set(l-7,h)}}static generateCheckWords(t,r,i){let s=t.getSize()/i,l=new ja(Gt.getGF(i)),c=H.truncDivision(r,i),h=Gt.bitsToWords(t,i,c);l.encode(h,c-s);let b=r%i,S=new K;S.appendBits(0,b);for(const O of Array.from(h))S.appendBits(O,i);return S}static bitsToWords(t,r,i){let s=new Int32Array(i),l,c;for(l=0,c=t.getSize()/r;l<c;l++){let h=0;for(let b=0;b<r;b++)h|=t.get(l*r+b)?1<<r-b-1:0;s[l]=h}return s}static getGF(t){switch(t){case 4:return xt.AZTEC_PARAM;case 6:return xt.AZTEC_DATA_6;case 8:return xt.AZTEC_DATA_8;case 10:return xt.AZTEC_DATA_10;case 12:return xt.AZTEC_DATA_12;default:throw new _("Unsupported word size "+t)}}static stuffBits(t,r){let i=new K,s=t.getSize(),l=(1<<r)-2;for(let c=0;c<s;c+=r){let h=0;for(let b=0;b<r;b++)(c+b>=s||t.get(c+b))&&(h|=1<<r-1-b);(h&l)===l?(i.appendBits(h&l,r),c--):(h&l)===0?(i.appendBits(h|1,r),c--):i.appendBits(h,r)}return i}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Gt.DEFAULT_EC_PERCENT=33,Gt.DEFAULT_AZTEC_LAYERS=0,Gt.MAX_NB_BITS=32,Gt.MAX_NB_BITS_COMPACT=4,Gt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ha{encode(t,r,i,s){return this.encodeWithHints(t,r,i,s,null)}encodeWithHints(t,r,i,s,l){let c=za.ISO_8859_1,h=Gt.DEFAULT_EC_PERCENT,b=Gt.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Xn.CHARACTER_SET)&&(c=lo.forName(l.get(Xn.CHARACTER_SET).toString())),l.has(Xn.ERROR_CORRECTION)&&(h=H.parseInt(l.get(Xn.ERROR_CORRECTION).toString())),l.has(Xn.AZTEC_LAYERS)&&(b=H.parseInt(l.get(Xn.AZTEC_LAYERS).toString()))),Ha.encodeLayers(t,r,i,s,c,h,b)}static encodeLayers(t,r,i,s,l,c,h){if(r!==ze.AZTEC)throw new _("Can only encode AZTEC, but got "+r);let b=Gt.encode(X.getBytes(t,l),c,h);return Ha.renderResult(b,i,s)}static renderResult(t,r,i){let s=t.getMatrix();if(s==null)throw new Ne;let l=s.getWidth(),c=s.getHeight(),h=Math.max(r,l),b=Math.max(i,c),S=Math.min(h/l,b/c),O=(h-l*S)/2,F=(b-c*S)/2,Y=new M(h,b);for(let se=0,ge=F;se<c;se++,ge+=S)for(let ye=0,Ae=O;ye<l;ye++,Ae+=S)s.get(ye,se)&&Y.setRegion(Ae,ge,S,S);return Y}}f.AbstractExpandedDecoder=Ln,f.ArgumentException=N,f.ArithmeticException=Qt,f.AztecCode=sa,f.AztecCodeReader=dn,f.AztecCodeWriter=Ha,f.AztecDecoder=te,f.AztecDetector=dr,f.AztecDetectorResult=et,f.AztecEncoder=Gt,f.AztecHighLevelEncoder=ji,f.AztecPoint=kt,f.BarcodeFormat=ze,f.Binarizer=k,f.BinaryBitmap=R,f.BitArray=K,f.BitMatrix=M,f.BitSource=ue,f.BrowserAztecCodeReader=Cr,f.BrowserBarcodeReader=Qs,f.BrowserCodeReader=Oe,f.BrowserDatamatrixCodeReader=We,f.BrowserMultiFormatReader=so,f.BrowserPDF417Reader=zc,f.BrowserQRCodeReader=Uc,f.BrowserQRCodeSvgWriter=Bi,f.CharacterSetECI=G,f.ChecksumException=T,f.Code128Reader=qe,f.Code39Reader=jt,f.DataMatrixDecodedBitStreamParser=ve,f.DataMatrixReader=Fe,f.DecodeHintType=V,f.DecoderResult=st,f.DefaultGridSampler=It,f.DetectorResult=Se,f.EAN13Reader=Ut,f.EncodeHintType=Xn,f.Exception=y,f.FormatException=L,f.GenericGF=xt,f.GenericGFPoly=Ct,f.GlobalHistogramBinarizer=me,f.GridSampler=it,f.GridSamplerInstance=pt,f.HTMLCanvasElementLuminanceSource=Je,f.HybridBinarizer=re,f.ITFReader=mt,f.IllegalArgumentException=_,f.IllegalStateException=Ne,f.InvertedLuminanceSource=ke,f.LuminanceSource=Ye,f.MathUtils=he,f.MultiFormatOneDReader=hr,f.MultiFormatReader=ao,f.MultiFormatWriter=Pc,f.NotFoundException=ae,f.OneDReader=bt,f.PDF417DecodedBitStreamParser=Be,f.PDF417DecoderErrorCorrection=fi,f.PDF417Reader=ir,f.PDF417ResultMetadata=ia,f.PerspectiveTransform=ot,f.PlanarYUVLuminanceSource=Kr,f.QRCodeByteMatrix=hs,f.QRCodeDataMask=Ht,f.QRCodeDecodedBitStreamParser=hn,f.QRCodeDecoderErrorCorrectionLevel=Ue,f.QRCodeDecoderFormatInformation=Ke,f.QRCodeEncoder=Cn,f.QRCodeEncoderQRCode=Mi,f.QRCodeMaskUtil=Dn,f.QRCodeMatrixUtil=wt,f.QRCodeMode=gt,f.QRCodeReader=ui,f.QRCodeVersion=at,f.QRCodeWriter=aa,f.RGBLuminanceSource=il,f.RSS14Reader=Zt,f.RSSExpandedReader=Ve,f.ReaderException=ds,f.ReedSolomonDecoder=_e,f.ReedSolomonEncoder=ja,f.ReedSolomonException=D,f.Result=Te,f.ResultMetadataType=nt,f.ResultPoint=Ee,f.StringUtils=X,f.UnsupportedOperationException=xe,f.VideoInputDevice=q,f.WhiteRectangleDetector=tt,f.WriterException=cn,f.ZXingArrays=P,f.ZXingCharset=lo,f.ZXingInteger=H,f.ZXingStandardCharsets=za,f.ZXingStringBuilder=ie,f.ZXingStringEncoding=ce,f.ZXingSystem=I,f.createAbstractExpandedDecoder=ci,Object.defineProperty(f,"__esModule",{value:!0})}))})(Hl,Hl.exports)),Hl.exports}var jn=cv();const uv=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var l2=(function(){function u(d,f,p){if(this.formatMap=new Map([[ft.QR_CODE,jn.BarcodeFormat.QR_CODE],[ft.AZTEC,jn.BarcodeFormat.AZTEC],[ft.CODABAR,jn.BarcodeFormat.CODABAR],[ft.CODE_39,jn.BarcodeFormat.CODE_39],[ft.CODE_93,jn.BarcodeFormat.CODE_93],[ft.CODE_128,jn.BarcodeFormat.CODE_128],[ft.DATA_MATRIX,jn.BarcodeFormat.DATA_MATRIX],[ft.MAXICODE,jn.BarcodeFormat.MAXICODE],[ft.ITF,jn.BarcodeFormat.ITF],[ft.EAN_13,jn.BarcodeFormat.EAN_13],[ft.EAN_8,jn.BarcodeFormat.EAN_8],[ft.PDF_417,jn.BarcodeFormat.PDF_417],[ft.RSS_14,jn.BarcodeFormat.RSS_14],[ft.RSS_EXPANDED,jn.BarcodeFormat.RSS_EXPANDED],[ft.UPC_A,jn.BarcodeFormat.UPC_A],[ft.UPC_E,jn.BarcodeFormat.UPC_E],[ft.UPC_EAN_EXTENSION,jn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!uv)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=f,this.logger=p;var m=this.createZXingFormats(d),g=new Map;g.set(jn.DecodeHintType.POSSIBLE_FORMATS,m),g.set(jn.DecodeHintType.TRY_HARDER,!1),this.hints=g}return u.prototype.decodeAsync=function(d){var f=this;return new Promise(function(p,m){try{p(f.decode(d))}catch(g){m(g)}})},u.prototype.decode=function(d){var f=new jn.MultiFormatReader(this.verbose,this.hints),p=new jn.HTMLCanvasElementLuminanceSource(d),m=new jn.BinaryBitmap(new jn.HybridBinarizer(p)),g=f.decode(m);return{text:g.text,format:gp.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},u.prototype.createReverseFormatMap=function(){var d=new Map;return this.formatMap.forEach(function(f,p,m){d.set(f,p)}),d},u.prototype.toHtml5QrcodeSupportedFormats=function(d){if(!this.reverseFormatMap.has(d))throw"reverseFormatMap doesn't have ".concat(d);return this.reverseFormatMap.get(d)},u.prototype.createZXingFormats=function(d){for(var f=[],p=0,m=d;p<m.length;p++){var g=m[p];this.formatMap.has(g)?f.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return f},u.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},u})(),fv=function(u,d,f,p){function m(g){return g instanceof f?g:new f(function(E){E(g)})}return new(f||(f=Promise))(function(g,E){function C(N){try{y(p.next(N))}catch(_){E(_)}}function v(N){try{y(p.throw(N))}catch(_){E(_)}}function y(N){N.done?g(N.value):m(N.value).then(C,v)}y((p=p.apply(u,d||[])).next())})},dv=function(u,d){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(y){return function(N){return v([y,N])}}function v(y){if(p)throw new TypeError("Generator is already executing.");for(;E&&(E=0,y[0]&&(f=0)),f;)try{if(p=1,m&&(g=y[0]&2?m.return:y[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,y[1])).done)return g;switch(m=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return f.label++,{value:y[1],done:!1};case 5:f.label++,m=y[1],y=[0];continue;case 7:y=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){f=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){f.label=y[1];break}if(y[0]===6&&f.label<g[1]){f.label=g[1],g=y;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(y);break}g[2]&&f.ops.pop(),f.trys.pop();continue}y=d.call(u,f)}catch(N){y=[6,N],m=0}finally{p=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},o2=(function(){function u(d,f,p){if(this.formatMap=new Map([[ft.QR_CODE,"qr_code"],[ft.AZTEC,"aztec"],[ft.CODABAR,"codabar"],[ft.CODE_39,"code_39"],[ft.CODE_93,"code_93"],[ft.CODE_128,"code_128"],[ft.DATA_MATRIX,"data_matrix"],[ft.ITF,"itf"],[ft.EAN_13,"ean_13"],[ft.EAN_8,"ean_8"],[ft.PDF_417,"pdf417"],[ft.UPC_A,"upc_a"],[ft.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!u.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=f,this.logger=p;var m=this.createBarcodeDetectorFormats(d);if(this.detector=new BarcodeDetector(m),!this.detector)throw"BarcodeDetector detector not supported"}return u.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var d=new BarcodeDetector({formats:["qr_code"]});return typeof d<"u"},u.prototype.decodeAsync=function(d){return fv(this,void 0,void 0,function(){var f,p;return dv(this,function(m){switch(m.label){case 0:return[4,this.detector.detect(d)];case 1:if(f=m.sent(),!f||f.length===0)throw"No barcode or QR code detected.";return p=this.selectLargestBarcode(f),[2,{text:p.rawValue,format:gp.create(this.toHtml5QrcodeSupportedFormats(p.format)),debugData:this.createDebugData()}]}})})},u.prototype.selectLargestBarcode=function(d){for(var f=null,p=0,m=0,g=d;m<g.length;m++){var E=g[m],C=E.boundingBox.width*E.boundingBox.height;C>p&&(p=C,f=E)}if(!f)throw"No largest barcode found";return f},u.prototype.createBarcodeDetectorFormats=function(d){for(var f=[],p=0,m=d;p<m.length;p++){var g=m[p];this.formatMap.has(g)?f.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:f}},u.prototype.toHtml5QrcodeSupportedFormats=function(d){if(!this.reverseFormatMap.has(d))throw"reverseFormatMap doesn't have ".concat(d);return this.reverseFormatMap.get(d)},u.prototype.createReverseFormatMap=function(){var d=new Map;return this.formatMap.forEach(function(f,p,m){d.set(f,p)}),d},u.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},u})(),c2=function(u,d,f,p){function m(g){return g instanceof f?g:new f(function(E){E(g)})}return new(f||(f=Promise))(function(g,E){function C(N){try{y(p.next(N))}catch(_){E(_)}}function v(N){try{y(p.throw(N))}catch(_){E(_)}}function y(N){N.done?g(N.value):m(N.value).then(C,v)}y((p=p.apply(u,d||[])).next())})},u2=function(u,d){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(y){return function(N){return v([y,N])}}function v(y){if(p)throw new TypeError("Generator is already executing.");for(;E&&(E=0,y[0]&&(f=0)),f;)try{if(p=1,m&&(g=y[0]&2?m.return:y[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,y[1])).done)return g;switch(m=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return f.label++,{value:y[1],done:!1};case 5:f.label++,m=y[1],y=[0];continue;case 7:y=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){f=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){f.label=y[1];break}if(y[0]===6&&f.label<g[1]){f.label=g[1],g=y;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(y);break}g[2]&&f.ops.pop(),f.trys.pop();continue}y=d.call(u,f)}catch(N){y=[6,N],m=0}finally{p=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},hv=(function(){function u(d,f,p,m){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=p,f&&o2.isSupported()?(this.primaryDecoder=new o2(d,p,m),this.secondaryDecoder=new l2(d,p,m)):this.primaryDecoder=new l2(d,p,m)}return u.prototype.decodeAsync=function(d){return c2(this,void 0,void 0,function(){var f;return u2(this,function(p){switch(p.label){case 0:f=performance.now(),p.label=1;case 1:return p.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(d)];case 2:return[2,p.sent()];case 3:return this.possiblyLogPerformance(f),[7];case 4:return[2]}})})},u.prototype.decodeRobustlyAsync=function(d){return c2(this,void 0,void 0,function(){var f,p;return u2(this,function(m){switch(m.label){case 0:f=performance.now(),m.label=1;case 1:return m.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(d)];case 2:return[2,m.sent()];case 3:if(p=m.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(d)];throw p;case 4:return this.possiblyLogPerformance(f),[7];case 5:return[2]}})})},u.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},u.prototype.possiblyLogPerformance=function(d){if(this.verbose){var f=performance.now()-d;this.executionResults.push(f),this.executions++,this.possiblyFlushPerformanceReport()}},u.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var d=0,f=0,p=this.executionResults;f<p.length;f++){var m=p[f];d+=m}var g=d/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},u})(),Fd=(function(){var u=function(d,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g])},u(d,f)};return function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})(),Dc=function(u,d,f,p){function m(g){return g instanceof f?g:new f(function(E){E(g)})}return new(f||(f=Promise))(function(g,E){function C(N){try{y(p.next(N))}catch(_){E(_)}}function v(N){try{y(p.throw(N))}catch(_){E(_)}}function y(N){N.done?g(N.value):m(N.value).then(C,v)}y((p=p.apply(u,d||[])).next())})},Oc=function(u,d){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(y){return function(N){return v([y,N])}}function v(y){if(p)throw new TypeError("Generator is already executing.");for(;E&&(E=0,y[0]&&(f=0)),f;)try{if(p=1,m&&(g=y[0]&2?m.return:y[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,y[1])).done)return g;switch(m=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return f.label++,{value:y[1],done:!1};case 5:f.label++,m=y[1],y=[0];continue;case 7:y=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){f=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){f.label=y[1];break}if(y[0]===6&&f.label<g[1]){f.label=g[1],g=y;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(y);break}g[2]&&f.ops.pop(),f.trys.pop();continue}y=d.call(u,f)}catch(N){y=[6,N],m=0}finally{p=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},xp=(function(){function u(d,f){this.name=d,this.track=f}return u.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},u.prototype.apply=function(d){var f={};f[this.name]=d;var p={advanced:[f]};return this.track.applyConstraints(p)},u.prototype.value=function(){var d=this.track.getSettings();if(this.name in d){var f=d[this.name];return f}return null},u})(),gv=(function(u){Fd(d,u);function d(f,p){return u.call(this,f,p)||this}return d.prototype.min=function(){return this.getCapabilities().min},d.prototype.max=function(){return this.getCapabilities().max},d.prototype.step=function(){return this.getCapabilities().step},d.prototype.apply=function(f){var p={};p[this.name]=f;var m={advanced:[p]};return this.track.applyConstraints(m)},d.prototype.getCapabilities=function(){this.failIfNotSupported();var f=this.track.getCapabilities(),p=f[this.name];return{min:p.min,max:p.max,step:p.step}},d.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},d})(xp),pv=(function(u){Fd(d,u);function d(f){return u.call(this,"zoom",f)||this}return d})(gv),xv=(function(u){Fd(d,u);function d(f){return u.call(this,"torch",f)||this}return d})(xp),mv=(function(){function u(d){this.track=d}return u.prototype.zoomFeature=function(){return new pv(this.track)},u.prototype.torchFeature=function(){return new xv(this.track)},u})(),yv=(function(){function u(d,f,p){this.isClosed=!1,this.parentElement=d,this.mediaStream=f,this.callbacks=p,this.surface=this.createVideoElement(this.parentElement.clientWidth),d.append(this.surface)}return u.prototype.createVideoElement=function(d){var f=document.createElement("video");return f.style.width="".concat(d,"px"),f.style.display="block",f.muted=!0,f.setAttribute("muted","true"),f.playsInline=!0,f},u.prototype.setupSurface=function(){var d=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var f=function(){var p=d.surface.clientWidth,m=d.surface.clientHeight;d.callbacks.onRenderSurfaceReady(p,m),d.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.srcObject=this.mediaStream,this.surface.play()},u.create=function(d,f,p,m){return Dc(this,void 0,void 0,function(){var g,E;return Oc(this,function(C){switch(C.label){case 0:return g=new u(d,f,m),p.aspectRatio?(E={aspectRatio:p.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:C.sent(),C.label=2;case 2:return g.setupSurface(),[2,g]}})})},u.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},u.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},u.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},u.prototype.resume=function(d){this.failIfClosed();var f=this,p=function(){setTimeout(d,200),f.surface.removeEventListener("playing",p)};this.surface.addEventListener("playing",p),this.surface.play()},u.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},u.prototype.getSurface=function(){return this.failIfClosed(),this.surface},u.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},u.prototype.applyVideoConstraints=function(d){return Dc(this,void 0,void 0,function(){return Oc(this,function(f){if("aspectRatio"in d)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(d)]})})},u.prototype.close=function(){if(this.isClosed)return Promise.resolve();var d=this;return new Promise(function(f,p){var m=d.mediaStream.getVideoTracks(),g=m.length,E=0;d.mediaStream.getVideoTracks().forEach(function(C){d.mediaStream.removeTrack(C),C.stop(),++E,E>=g&&(d.isClosed=!0,d.parentElement.removeChild(d.surface),f())})})},u.prototype.getCapabilities=function(){return new mv(this.getFirstTrackOrFail())},u})(),bv=(function(){function u(d){this.mediaStream=d}return u.prototype.render=function(d,f,p){return Dc(this,void 0,void 0,function(){return Oc(this,function(m){return[2,yv.create(d,this.mediaStream,f,p)]})})},u.create=function(d){return Dc(this,void 0,void 0,function(){var f,p;return Oc(this,function(m){switch(m.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return f={audio:!1,video:d},[4,navigator.mediaDevices.getUserMedia(f)];case 1:return p=m.sent(),[2,new u(p)]}})})},u})(),f2=function(u,d,f,p){function m(g){return g instanceof f?g:new f(function(E){E(g)})}return new(f||(f=Promise))(function(g,E){function C(N){try{y(p.next(N))}catch(_){E(_)}}function v(N){try{y(p.throw(N))}catch(_){E(_)}}function y(N){N.done?g(N.value):m(N.value).then(C,v)}y((p=p.apply(u,d||[])).next())})},d2=function(u,d){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(y){return function(N){return v([y,N])}}function v(y){if(p)throw new TypeError("Generator is already executing.");for(;E&&(E=0,y[0]&&(f=0)),f;)try{if(p=1,m&&(g=y[0]&2?m.return:y[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,y[1])).done)return g;switch(m=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return f.label++,{value:y[1],done:!1};case 5:f.label++,m=y[1],y=[0];continue;case 7:y=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){f=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){f.label=y[1];break}if(y[0]===6&&f.label<g[1]){f.label=g[1],g=y;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(y);break}g[2]&&f.ops.pop(),f.trys.pop();continue}y=d.call(u,f)}catch(N){y=[6,N],m=0}finally{p=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},vv=(function(){function u(){}return u.failIfNotSupported=function(){return f2(this,void 0,void 0,function(){return d2(this,function(d){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new u]})})},u.prototype.create=function(d){return f2(this,void 0,void 0,function(){return d2(this,function(f){return[2,bv.create(d)]})})},u})(),wv=function(u,d,f,p){function m(g){return g instanceof f?g:new f(function(E){E(g)})}return new(f||(f=Promise))(function(g,E){function C(N){try{y(p.next(N))}catch(_){E(_)}}function v(N){try{y(p.throw(N))}catch(_){E(_)}}function y(N){N.done?g(N.value):m(N.value).then(C,v)}y((p=p.apply(u,d||[])).next())})},Cv=function(u,d){var f={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},p,m,g,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(y){return function(N){return v([y,N])}}function v(y){if(p)throw new TypeError("Generator is already executing.");for(;E&&(E=0,y[0]&&(f=0)),f;)try{if(p=1,m&&(g=y[0]&2?m.return:y[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,y[1])).done)return g;switch(m=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return f.label++,{value:y[1],done:!1};case 5:f.label++,m=y[1],y=[0];continue;case 7:y=f.ops.pop(),f.trys.pop();continue;default:if(g=f.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){f=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){f.label=y[1];break}if(y[0]===6&&f.label<g[1]){f.label=g[1],g=y;break}if(g&&f.label<g[2]){f.label=g[2],f.ops.push(y);break}g[2]&&f.ops.pop(),f.trys.pop();continue}y=d.call(u,f)}catch(N){y=[6,N],m=0}finally{p=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},Ev=(function(){function u(){}return u.retrieve=function(){if(navigator.mediaDevices)return u.getCamerasFromMediaDevices();var d=MediaStreamTrack;return MediaStreamTrack&&d.getSources?u.getCamerasFromMediaStreamTrack():u.rejectWithError()},u.rejectWithError=function(){var d=Vs.unableToQuerySupportedDevices();return u.isHttpsOrLocalhost()||(d=Vs.insecureContextCameraQueryError()),Promise.reject(d)},u.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var d=location.host.split(":")[0];return d==="127.0.0.1"||d==="localhost"},u.getCamerasFromMediaDevices=function(){return wv(this,void 0,void 0,function(){var d,f,p,m,g,E,C;return Cv(this,function(v){switch(v.label){case 0:return d=function(y){for(var N=y.getVideoTracks(),_=0,R=N;_<R.length;_++){var T=R[_];T.enabled=!1,T.stop(),y.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return f=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(p=v.sent(),m=[],g=0,E=p;g<E.length;g++)C=E[g],C.kind==="videoinput"&&m.push({id:C.deviceId,label:C.label});return d(f),[2,m]}})})},u.getCamerasFromMediaStreamTrack=function(){return new Promise(function(d,f){var p=function(g){for(var E=[],C=0,v=g;C<v.length;C++){var y=v[C];y.kind==="video"&&E.push({id:y.id,label:y.label})}d(E)},m=MediaStreamTrack;m.getSources(p)})},u})(),Pn;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.NOT_STARTED=1]="NOT_STARTED",u[u.SCANNING=2]="SCANNING",u[u.PAUSED=3]="PAUSED"})(Pn||(Pn={}));var Av=(function(){function u(){this.state=Pn.NOT_STARTED,this.onGoingTransactionNewState=Pn.UNKNOWN}return u.prototype.directTransition=function(d){this.failIfTransitionOngoing(),this.validateTransition(d),this.state=d},u.prototype.startTransition=function(d){return this.failIfTransitionOngoing(),this.validateTransition(d),this.onGoingTransactionNewState=d,this},u.prototype.execute=function(){if(this.onGoingTransactionNewState===Pn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var d=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Pn.UNKNOWN,this.directTransition(d)},u.prototype.cancel=function(){if(this.onGoingTransactionNewState===Pn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Pn.UNKNOWN},u.prototype.getState=function(){return this.state},u.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Pn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},u.prototype.validateTransition=function(d){switch(this.state){case Pn.UNKNOWN:throw"Transition from unknown is not allowed";case Pn.NOT_STARTED:this.failIfNewStateIs(d,[Pn.PAUSED]);break;case Pn.SCANNING:break;case Pn.PAUSED:break}},u.prototype.failIfNewStateIs=function(d,f){for(var p=0,m=f;p<m.length;p++){var g=m[p];if(d===g)throw"Cannot transition from ".concat(this.state," to ").concat(d)}},u})(),Sv=(function(){function u(d){this.stateManager=d}return u.prototype.startTransition=function(d){return this.stateManager.startTransition(d)},u.prototype.directTransition=function(d){this.stateManager.directTransition(d)},u.prototype.getState=function(){return this.stateManager.getState()},u.prototype.canScanFile=function(){return this.stateManager.getState()===Pn.NOT_STARTED},u.prototype.isScanning=function(){return this.stateManager.getState()!==Pn.NOT_STARTED},u.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Pn.SCANNING},u.prototype.isPaused=function(){return this.stateManager.getState()===Pn.PAUSED},u})(),_v=(function(){function u(){}return u.create=function(){return new Sv(new Av)},u})(),Tv=(function(){var u=function(d,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(p[g]=m[g])},u(d,f)};return function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(d,f);function p(){this.constructor=d}d.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})(),qr=(function(u){Tv(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.DEFAULT_WIDTH=300,d.DEFAULT_WIDTH_OFFSET=2,d.FILE_SCAN_MIN_HEIGHT=300,d.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,d.MIN_QR_BOX_SIZE=50,d.SHADED_LEFT=1,d.SHADED_RIGHT=2,d.SHADED_TOP=3,d.SHADED_BOTTOM=4,d.SHADED_REGION_ELEMENT_ID="qr-shaded-region",d.VERBOSE=!1,d.BORDER_SHADER_DEFAULT_COLOR="#ffffff",d.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",d})(av),Nv=(function(){function u(d,f){this.logger=f,this.fps=qr.SCAN_DEFAULT_FPS,d?(d.fps&&(this.fps=d.fps),this.disableFlip=d.disableFlip===!0,this.qrbox=d.qrbox,this.aspectRatio=d.aspectRatio,this.videoConstraints=d.videoConstraints):this.disableFlip=qr.DEFAULT_DISABLE_FLIP}return u.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?pp.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},u.prototype.isShadedBoxEnabled=function(){return!ea(this.qrbox)},u.create=function(d,f){return new u(d,f)},u})(),Rv=(function(){function u(d,f){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(d))throw"HTML Element with id=".concat(d," not found");this.elementId=d,this.verbose=!1;var p;typeof f=="boolean"?this.verbose=f===!0:f&&(p=f,this.verbose=p.verbose===!0,p.experimentalFeatures),this.logger=new lv(this.verbose),this.qrcode=new hv(this.getSupportedFormats(f),this.getUseBarCodeDetectorIfSupported(p),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=_v.create()}return u.prototype.start=function(d,f,p,m){var g=this;if(!d)throw"cameraIdOrConfig is required";if(!p||typeof p!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;m?E=m:E=this.verbose?this.logger.log:function(){};var C=Nv.create(f,this.logger);this.clearElement();var v=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var y=v,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:qr.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var _=this,R=this.stateManagerProxy.startTransition(Pn.SCANNING);return new Promise(function(T,k){var I=y?C.videoConstraints:_.createVideoConstraints(d);if(!I){R.cancel(),k("videoConstraints should be defined");return}var z={};(!y||C.aspectRatio)&&(z.aspectRatio=C.aspectRatio);var j={onRenderSurfaceReady:function(P,H){_.setupUi(P,H,C),_.isScanning=!0,_.foreverScan(C,p,E)}};vv.failIfNotSupported().then(function(P){P.create(I).then(function(H){return H.render(g.element,z,j).then(function(K){_.renderedCamera=K,R.execute(),T(null)}).catch(function(K){R.cancel(),k(K)})}).catch(function(H){R.cancel(),k(Vs.errorGettingUserMedia(H))})}).catch(function(P){R.cancel(),k(Vs.cameraStreamingNotSupported())})})},u.prototype.pause=function(d){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Pn.PAUSED),this.showPausedState(),(ea(d)||d!==!0)&&(d=!1),d&&this.renderedCamera&&this.renderedCamera.pause()},u.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var d=this,f=function(){d.stateManagerProxy.directTransition(Pn.SCANNING),d.hidePausedState()};if(!this.renderedCamera.isPaused()){f();return}this.renderedCamera.resume(function(){f()})},u.prototype.getState=function(){return this.stateManagerProxy.getState()},u.prototype.stop=function(){var d=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var f=this.stateManagerProxy.startTransition(Pn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var p=function(){if(d.element){var g=document.getElementById(qr.SHADED_REGION_ELEMENT_ID);g&&d.element.removeChild(g)}},m=this;return this.renderedCamera.close().then(function(){return m.renderedCamera=null,m.element&&(m.element.removeChild(m.canvasElement),m.canvasElement=null),p(),m.qrRegion&&(m.qrRegion=null),m.context&&(m.context=null),f.execute(),m.hidePausedState(),m.isScanning=!1,Promise.resolve()})},u.prototype.scanFile=function(d,f){return this.scanFileV2(d,f).then(function(p){return p.decodedText})},u.prototype.scanFileV2=function(d,f){var p=this;if(!d||!(d instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ea(f)&&(f=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(m,g){p.possiblyCloseLastScanImageFile(),p.clearElement(),p.lastScanImageFile=URL.createObjectURL(d);var E=new Image;E.onload=function(){var C=E.width,v=E.height,y=document.getElementById(p.elementId),N=y.clientWidth?y.clientWidth:qr.DEFAULT_WIDTH,_=Math.max(y.clientHeight?y.clientHeight:v,qr.FILE_SCAN_MIN_HEIGHT),R=p.computeCanvasDrawConfig(C,v,N,_);if(f){var T=p.createCanvasElement(N,_,"qr-canvas-visible");T.style.display="inline-block",y.appendChild(T);var k=T.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=N,k.canvas.height=_,k.drawImage(E,0,0,C,v,R.x,R.y,R.width,R.height)}var I=qr.FILE_SCAN_HIDDEN_CANVAS_PADDING,z=Math.max(E.width,R.width),j=Math.max(E.height,R.height),P=z+2*I,H=j+2*I,K=p.createCanvasElement(P,H);y.appendChild(K);var Z=K.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=P,Z.canvas.height=H,Z.drawImage(E,0,0,C,v,I,I,z,j);try{p.qrcode.decodeRobustlyAsync(K).then(function(V){m(a2.createFromQrcodeResult(V))}).catch(g)}catch(V){g("QR code parse error, error = ".concat(V))}},E.onerror=g,E.onabort=g,E.onstalled=g,E.onsuspend=g,E.src=URL.createObjectURL(d)})},u.prototype.clear=function(){this.clearElement()},u.getCameras=function(){return Ev.retrieve()},u.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},u.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},u.prototype.applyVideoConstraints=function(d){if(d){if(!pp.isMediaStreamConstraintsValid(d,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(d)},u.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},u.prototype.getSupportedFormats=function(d){var f=[ft.QR_CODE,ft.AZTEC,ft.CODABAR,ft.CODE_39,ft.CODE_93,ft.CODE_128,ft.DATA_MATRIX,ft.MAXICODE,ft.ITF,ft.EAN_13,ft.EAN_8,ft.PDF_417,ft.RSS_14,ft.RSS_EXPANDED,ft.UPC_A,ft.UPC_E,ft.UPC_EAN_EXTENSION];if(!d||typeof d=="boolean"||!d.formatsToSupport)return f;if(!Array.isArray(d.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(d.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var p=[],m=0,g=d.formatsToSupport;m<g.length;m++){var E=g[m];iv(E)?p.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(p.length===0)throw"None of formatsToSupport match supported values.";return p},u.prototype.getUseBarCodeDetectorIfSupported=function(d){if(ea(d))return!0;if(!ea(d.useBarCodeDetectorIfSupported))return d.useBarCodeDetectorIfSupported!==!1;if(ea(d.experimentalFeatures))return!0;var f=d.experimentalFeatures;return ea(f.useBarCodeDetectorIfSupported)?!0:f.useBarCodeDetectorIfSupported!==!1},u.prototype.validateQrboxSize=function(d,f,p){var m=this,g=p.qrbox;this.validateQrboxConfig(g);var E=this.toQrdimensions(d,f,g),C=function(y){if(y<qr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(qr.MIN_QR_BOX_SIZE,"px.")},v=function(y){return y>d&&(m.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=d),y};C(E.width),C(E.height),E.width=v(E.width)},u.prototype.validateQrboxConfig=function(d){if(typeof d!="number"&&typeof d!="function"&&(d.width===void 0||d.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},u.prototype.toQrdimensions=function(d,f,p){if(typeof p=="number")return{width:p,height:p};if(typeof p=="function")try{return p(d,f)}catch(m){throw new Error("qrbox config was passed as a function but it failed with unknown error"+m)}return p},u.prototype.setupUi=function(d,f,p){p.isShadedBoxEnabled()&&this.validateQrboxSize(d,f,p);var m=ea(p.qrbox)?{width:d,height:f}:p.qrbox;this.validateQrboxConfig(m);var g=this.toQrdimensions(d,f,m);g.height>f&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=p.isShadedBoxEnabled()&&g.height<=f,C={x:0,y:0,width:d,height:f},v=E?this.getShadedRegionBounds(d,f,g):C,y=this.createCanvasElement(v.width,v.height),N={willReadFrequently:!0},_=y.getContext("2d",N);_.canvas.width=v.width,_.canvas.height=v.height,this.element.append(y),E&&this.possiblyInsertShadingElement(this.element,d,f,g),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=_,this.canvasElement=y},u.prototype.createScannerPausedUiElement=function(d){var f=document.createElement("div");f.innerText=Vs.scannerPaused(),f.style.display="none",f.style.position="absolute",f.style.top="0px",f.style.zIndex="1",f.style.background="rgba(9, 9, 9, 0.46)",f.style.color="#FFECEC",f.style.textAlign="center",f.style.width="100%",d.appendChild(f),this.scannerPausedUiElement=f},u.prototype.scanContext=function(d,f){var p=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(m){return d(m.text,a2.createFromQrcodeResult(m)),p.possiblyUpdateShaders(!0),!0}).catch(function(m){p.possiblyUpdateShaders(!1);var g=Vs.codeParseError(m);return f(g,sv.createFrom(g)),!1})},u.prototype.foreverScan=function(d,f,p){var m=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),E=g.videoWidth/g.clientWidth,C=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*E,y=this.qrRegion.height*C,N=this.qrRegion.x*E,_=this.qrRegion.y*C;this.context.drawImage(g,N,_,v,y,0,0,this.qrRegion.width,this.qrRegion.height);var R=function(){m.foreverScanTimeout=setTimeout(function(){m.foreverScan(d,f,p)},m.getTimeoutFps(d.fps))};this.scanContext(f,p).then(function(T){!T&&d.disableFlip!==!0?(m.context.translate(m.context.canvas.width,0),m.context.scale(-1,1),m.scanContext(f,p).finally(function(){R()})):R()}).catch(function(T){m.logger.logError("Error happend while scanning context",T),R()})}},u.prototype.createVideoConstraints=function(d){if(typeof d=="string")return{deviceId:{exact:d}};if(typeof d=="object"){var f="facingMode",p="deviceId",m={user:!0,environment:!0},g="exact",E=function(k){if(k in m)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(k,"'")},C=Object.keys(d);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var v=Object.keys(d)[0];if(v!==f&&v!==p)throw"Only '".concat(f,"' and '").concat(p,"' ")+" are supported for 'cameraIdOrConfig'";if(v===f){var y=d.facingMode;if(typeof y=="string"){if(E(y))return{facingMode:y}}else if(typeof y=="object")if(g in y){if(E(y["".concat(g)]))return{facingMode:{exact:y["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var N=typeof y;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var _=d.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(g in _)return{deviceId:{exact:_["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var R=typeof _;throw"Invalid type of 'deviceId' = ".concat(R)}}}var T=typeof d;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},u.prototype.computeCanvasDrawConfig=function(d,f,p,m){if(d<=p&&f<=m){var g=(p-d)/2,E=(m-f)/2;return{x:g,y:E,width:d,height:f}}else{var C=d,v=f;return d>p&&(f=p/d*f,d=p),f>m&&(d=m/f*d,f=m),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(v)+" to ".concat(d,"X").concat(f,".")),this.computeCanvasDrawConfig(d,f,p,m)}},u.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var d=document.getElementById(this.elementId);d&&(d.innerHTML="")},u.prototype.possiblyUpdateShaders=function(d){this.qrMatch!==d&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(f){f.style.backgroundColor=d?qr.BORDER_SHADER_MATCH_COLOR:qr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=d)},u.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},u.prototype.createCanvasElement=function(d,f,p){var m=d,g=f,E=document.createElement("canvas");return E.style.width="".concat(m,"px"),E.style.height="".concat(g,"px"),E.style.display="none",E.id=ea(p)?"qr-canvas":p,E},u.prototype.getShadedRegionBounds=function(d,f,p){if(p.width>d||p.height>f)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(d-p.width)/2,y:(f-p.height)/2,width:p.width,height:p.height}},u.prototype.possiblyInsertShadingElement=function(d,f,p,m){if(!(f-m.width<1||p-m.height<1)){var g=document.createElement("div");g.style.position="absolute";var E=(f-m.width)/2,C=(p-m.height)/2;if(g.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(qr.SHADED_REGION_ELEMENT_ID),f-m.width<11||p-m.height<11)this.hasBorderShaders=!1;else{var v=5,y=40;this.insertShaderBorders(g,y,v,-v,null,0,!0),this.insertShaderBorders(g,y,v,-v,null,0,!1),this.insertShaderBorders(g,y,v,null,-v,0,!0),this.insertShaderBorders(g,y,v,null,-v,0,!1),this.insertShaderBorders(g,v,y+v,-v,null,-v,!0),this.insertShaderBorders(g,v,y+v,null,-v,-v,!0),this.insertShaderBorders(g,v,y+v,-v,null,-v,!1),this.insertShaderBorders(g,v,y+v,null,-v,-v,!1),this.hasBorderShaders=!0}d.append(g)}},u.prototype.insertShaderBorders=function(d,f,p,m,g,E,C){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=qr.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(f,"px"),v.style.height="".concat(p,"px"),m!==null&&(v.style.top="".concat(m,"px")),g!==null&&(v.style.bottom="".concat(g,"px")),C?v.style.left="".concat(E,"px"):v.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),d.appendChild(v)},u.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},u.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},u.prototype.getTimeoutFps=function(d){return 1e3/d},u})(),h2;(function(u){u[u.STATUS_DEFAULT=0]="STATUS_DEFAULT",u[u.STATUS_SUCCESS=1]="STATUS_SUCCESS",u[u.STATUS_WARNING=2]="STATUS_WARNING",u[u.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(h2||(h2={}));function Iv({mode:u,data:d,onScanResult:f,onClose:p,onFallbackFile:m}){const[g,E]=oe.useState(""),[C,v]=oe.useState(""),[y,N]=oe.useState(!1),_=oe.useRef(null),R="qr-scanner-region";oe.useEffect(()=>{if(u==="generate"&&d){if(d.length>4e3){v("too_large");return}rv.toDataURL(d,{width:300,margin:2,errorCorrectionLevel:"L",color:{dark:"#345899",light:"#ffffff"}}).then(z=>{E(z)}).catch(()=>{v("too_large")})}},[u,d]);const T=async()=>{N(!0),v("");try{const I=new Rv(R);_.current=I,await I.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},z=>{I.stop().catch(()=>{}),_.current=null,N(!1),f(z)},()=>{})}catch{v(""),N(!1)}};oe.useEffect(()=>()=>{_.current&&_.current.stop().catch(()=>{})},[]);const k=()=>{if(!g)return;const I=document.createElement("a");I.href=g,I.download="QR.png",document.body.appendChild(I),I.click(),document.body.removeChild(I)};return A.jsx("div",{className:"add-form-overlay fade-in",children:A.jsxs("div",{className:"add-form-container",style:{maxWidth:"400px",textAlign:"center"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[A.jsx("h3",{style:{margin:0,fontWeight:700,display:"flex",alignItems:"center",gap:"8px"},children:u==="generate"?A.jsxs(A.Fragment,{children:[A.jsx(A2,{size:20}),"  QR Code"]}):A.jsxs(A.Fragment,{children:[A.jsx(Ac,{size:20}),"  QR Code"]})}),A.jsx("button",{onClick:p,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-light)"},children:A.jsx(Zs,{size:24})})]}),u==="generate"&&A.jsx(A.Fragment,{children:C==="too_large"?A.jsxs("div",{children:[A.jsxs("p",{style:{color:"#e65100",fontSize:"0.9rem",marginBottom:"16px",lineHeight:1.5},children:["  QR Code ",A.jsx("br",{}),".trip "]}),m&&A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",width:"100%"},onClick:()=>{m(),p()},children:[A.jsx(pd,{size:16,style:{display:"inline",marginRight:"6px"}})," "]})]}):g?A.jsxs("div",{children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"12px"},children:" App "}),A.jsx("img",{src:g,alt:"QR Code",style:{width:"280px",height:"280px",borderRadius:"12px",border:"2px solid #eee"}}),A.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px"},children:[A.jsx("button",{className:"btn-add-attraction",style:{flex:1,backgroundColor:"rgba(52, 88, 153, 0.1)",color:"var(--fuji-blue)",border:"none"},onClick:()=>{d&&(navigator.clipboard.writeText(d),alert(`
 LINE  `))},children:" "}),A.jsx("button",{className:"btn-save",style:{flex:1},onClick:k,children:"  QR "})]}),A.jsx("p",{style:{fontSize:"0.75rem",color:"#999",marginTop:"8px"},children:""})]}):A.jsx("p",{style:{color:"var(--text-light)"},children:" QR Code..."})}),u==="scan"&&A.jsxs("div",{children:[A.jsx("div",{id:R,style:{width:"100%",minHeight:"280px",borderRadius:"12px",overflow:"hidden",marginBottom:"12px"}}),!y&&!C&&A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",width:"100%"},onClick:T,children:[A.jsx(Ac,{size:16,style:{display:"inline",marginRight:"6px"}})," "]}),y&&A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--fuji-blue)"},children:" ...  QR Code "}),C&&A.jsx("p",{style:{fontSize:"0.85rem",color:"#e65100"},children:C})]})]})})}function Dv({tripId:u}){const{config:d,updateConfig:f,loading:p}=ka(u),[m,g]=oe.useState(null),[E,C]=oe.useState({}),[v,y]=oe.useState(!1),[N,_]=oe.useState(""),[R,T]=oe.useState(!1),[k,I]=oe.useState(!1),[z,j]=oe.useState(null),[P,H]=oe.useState(""),[K,Z]=oe.useState(!1),[V,L]=oe.useState(d.tripName),[Q,G]=oe.useState(d.location),[xe,ce]=oe.useState(d.startDate),[X,ie]=oe.useState(d.endDate),[M,ae]=oe.useState(d.travelers||1),[me,re]=oe.useState(d.baseCurrency||"TWD"),[Ye,ke]=oe.useState(d.tripCurrency||"JPY"),[Je,q]=oe.useState(d.defaultRegion||"");if(p)return A.jsx("div",{className:"tab-placeholder fade-in",children:"..."});const ne=()=>{if(!E.name||!E.address){alert("");return}const D=[...d.accommodations||[]];if(m){const Ne=D.findIndex(_e=>_e.id===m);Ne>=0&&(D[Ne]={...D[Ne],...E})}else D.push({id:crypto.randomUUID(),name:E.name,address:E.address,url:E.url||""});f({accommodations:D}),g(null),y(!1),C({})},Oe=D=>{C(D),g(D.id),y(!0)},Te=D=>{if(!window.confirm(""))return;const Ne=(d.accommodations||[]).filter(_e=>_e.id!==D);f({accommodations:Ne})},je=()=>{C({name:"",address:"",url:"",checkIn:d.startDate,checkOut:d.endDate}),g(null),y(!0)},ze=()=>{const D=typeof M=="number"&&M>=1?M:1;f({tripName:V,location:Q,startDate:xe,endDate:X,travelers:D,baseCurrency:me,tripCurrency:Ye,defaultRegion:Je}),ae(D),Z(!1)},ct=()=>{L(d.tripName),G(d.location),ce(d.startDate),ie(d.endDate),ae(d.travelers||1),q(d.defaultRegion||""),Z(!0)},nt=D=>{const Ne=d.accommodations||[];if(Ne.length===0){alert("");return}const _e=Ne[0].address,le=`${D} near ${_e}`;window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(le)}`,"_blank")},st=async()=>{try{await sp(u)}catch(D){alert(D.message||"")}},ut=async()=>{try{j("generate"),H("");const{exportToDpaste:D}=await Nd(async()=>{const{exportToDpaste:le}=await Promise.resolve().then(()=>zd);return{exportToDpaste:le}},void 0),Ne=await D(u),_e=new URL(window.location.href);_e.search=`?d=${Ne}`,H(_e.toString())}catch(D){alert(D.message||"QR "),j(null)}},Ct=async D=>{if(j(null),D.includes("?d=")){window.location.href=D;return}if(window.confirm("")){I(!0);try{await Sd(u,D)?(alert(""),window.location.reload()):alert("QR Code ")}finally{I(!1)}}},Qt=async D=>{const Ne=D.target.files?.[0];if(Ne){if(!window.confirm("")){D.target.value="";return}I(!0);try{await lp(u,Ne)?(alert(""),window.location.reload()):alert("")}catch{alert("")}finally{I(!1),D.target.value=""}}},xt=async()=>{if(!N.trim()||!window.confirm(""))return;await Sd(u,N.trim())?(alert(""),window.location.reload()):alert("")};return A.jsxs("div",{className:"nearby-view fade-in",children:[A.jsxs("h3",{className:"section-title",children:[A.jsx(S2,{className:"inline-icon",size:20})," "]}),A.jsx("div",{className:"address-card",children:K?A.jsxs("div",{className:"trip-config-edit",children:[A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:""}),A.jsx("input",{type:"text",value:V,onChange:D=>L(D.target.value)})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:" ()"}),A.jsx("input",{type:"text",value:Q,onChange:D=>G(D.target.value),placeholder:": Kyoto, Japan"})]}),A.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[A.jsx("label",{children:" ( Google Maps )"}),A.jsx("input",{type:"text",value:Je,onChange:D=>q(D.target.value),placeholder:": "}),A.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-light)",marginTop:"4px"},children:""})]}),A.jsxs("div",{className:"form-group",style:{display:"flex",gap:"10px"},children:[A.jsxs("div",{style:{flex:1},children:[A.jsx("label",{children:""}),A.jsx("input",{type:"date",value:xe,onChange:D=>ce(D.target.value)})]}),A.jsxs("div",{style:{flex:1},children:[A.jsx("label",{children:""}),A.jsx("input",{type:"date",value:X,min:xe,onChange:D=>ie(D.target.value)})]})]}),A.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[A.jsx("label",{children:" ()"}),A.jsx("input",{type:"number",min:"1",value:M,onChange:D=>ae(D.target.value===""?"":Number(D.target.value)),placeholder:": 2"})]}),A.jsxs("div",{className:"form-group",style:{display:"flex",gap:"10px",marginTop:"10px"},children:[A.jsxs("div",{style:{flex:1},children:[A.jsx("label",{children:""}),A.jsxs("select",{value:Ye,onChange:D=>ke(D.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd"},children:[A.jsx("option",{value:"JPY",children:" (JPY)"}),A.jsx("option",{value:"KRW",children:" (KRW)"}),A.jsx("option",{value:"USD",children:" (USD)"}),A.jsx("option",{value:"EUR",children:" (EUR)"}),A.jsx("option",{value:"THB",children:" (THB)"}),A.jsx("option",{value:"TWD",children:" (TWD)"})]})]}),A.jsxs("div",{style:{flex:1},children:[A.jsx("label",{children:""}),A.jsxs("select",{value:me,onChange:D=>re(D.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid #ddd"},children:[A.jsx("option",{value:"TWD",children:" (TWD)"}),A.jsx("option",{value:"HKD",children:" (HKD)"}),A.jsx("option",{value:"USD",children:" (USD)"}),A.jsx("option",{value:"SGD",children:" (SGD)"}),A.jsx("option",{value:"MYR",children:" (MYR)"}),A.jsx("option",{value:"JPY",children:" (JPY)"})]})]})]}),A.jsx("button",{className:"btn-save",style:{width:"100%",marginTop:"10px"},onClick:ze,children:""})]}):A.jsxs("div",{className:"trip-config-display",children:[A.jsxs("div",{style:{marginBottom:"16px"},children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsx("p",{style:{fontWeight:700},children:d.tripName})]}),A.jsxs("div",{style:{marginBottom:"16px"},children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsx("p",{style:{fontWeight:700},children:d.location})]}),A.jsxs("div",{style:{marginBottom:"16px"},children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:" (Google Maps)"}),A.jsx("p",{style:{fontWeight:700},children:d.defaultRegion||A.jsx("span",{style:{color:"#ccc",fontWeight:"normal"},children:""})})]}),A.jsxs("div",{style:{marginBottom:"16px"},children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsxs("p",{style:{fontWeight:700},children:[d.startDate," ~ ",d.endDate]})]}),A.jsxs("div",{style:{marginBottom:"16px"},children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsxs("p",{style:{fontWeight:700},children:[d.travelers||1," "]})]}),A.jsxs("div",{style:{marginBottom:"16px",display:"flex",gap:"20px"},children:[A.jsxs("div",{children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsx("p",{style:{fontWeight:700},children:d.tripCurrency||"JPY"})]}),A.jsxs("div",{children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"4px"},children:""}),A.jsx("p",{style:{fontWeight:700},children:d.baseCurrency||"TWD"})]})]}),A.jsx("button",{className:"btn-edit",style:{width:"100%"},onClick:ct,children:""})]})}),A.jsxs("h3",{className:"section-title",children:[A.jsx(Mc,{className:"inline-icon",size:20})," "]}),A.jsxs("div",{className:"desktop-grid",style:{display:"grid",gap:"16px"},children:[(d.accommodations||[]).length===0&&!v&&A.jsx("div",{className:"empty-state",style:{padding:"20px"},children:""}),(d.accommodations||[]).map(D=>A.jsxs("div",{className:"address-card",style:{padding:"16px",position:"relative"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[A.jsxs("h4",{style:{fontSize:"1.1rem",color:"var(--fuji-blue)",display:"flex",alignItems:"center",gap:"8px",fontWeight:700},children:[D.name,D.checkIn&&D.checkOut&&A.jsxs("span",{style:{fontSize:"0.75rem",fontWeight:400,backgroundColor:"var(--bg-color)",padding:"2px 8px",borderRadius:"12px",color:"var(--fuji-blue)"},children:[D.checkIn.slice(5)," ~ ",D.checkOut.slice(5)]})]}),A.jsxs("div",{style:{display:"flex",gap:"8px"},children:[A.jsx("button",{onClick:()=>Oe(D),style:{background:"none",border:"none",color:"var(--text-light)",cursor:"pointer",padding:"4px"},children:A.jsx(C2,{size:18})}),A.jsx("button",{onClick:()=>Te(D.id),style:{background:"none",border:"none",color:"#ff4d4f",cursor:"pointer",padding:"4px"},children:A.jsx(rs,{size:18})})]})]}),A.jsx("div",{className:"address-display",style:{marginBottom:D.url?"12px":0},children:A.jsxs("p",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[A.jsx(Sc,{size:16})," ",D.address]})}),D.url&&A.jsxs("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",fontSize:"0.9rem",color:"var(--fuji-blue)",textDecoration:"none",marginTop:"8px"},children:[A.jsx(md,{size:16})," /"]})]},D.id)),v?A.jsxs("div",{className:"address-card fade-in",style:{padding:"20px",border:"2px solid var(--fuji-blue-light)"},children:[A.jsx("h4",{style:{fontSize:"1.05rem",marginBottom:"16px",color:"var(--fuji-blue)"},children:m?"":""}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:" (: )"}),A.jsx("input",{type:"text",value:E.name||"",onChange:D=>C({...E,name:D.target.value}),placeholder:"",autoFocus:!0})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:" ()"}),A.jsx("input",{type:"text",value:E.address||"",onChange:D=>C({...E,address:D.target.value}),placeholder:": 1"})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:" /  ()"}),A.jsx("input",{type:"url",value:E.url||"",onChange:D=>C({...E,url:D.target.value}),placeholder:"https://..."})]}),A.jsxs("div",{className:"form-group",style:{display:"flex",gap:"10px"},children:[A.jsxs("div",{style:{flex:1},children:[A.jsx("label",{children:" (Check-in)"}),A.jsx("input",{type:"date",value:E.checkIn||"",onChange:D=>C({...E,checkIn:D.target.value})})]}),A.jsxs("div",{style:{flex:1},children:[A.jsx("label",{children:" (Check-out)"}),A.jsx("input",{type:"date",value:E.checkOut||"",min:E.checkIn||"",onChange:D=>C({...E,checkOut:D.target.value})})]})]}),A.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[A.jsx("button",{className:"btn-cancel",onClick:()=>y(!1),children:""}),A.jsx("button",{className:"btn-submit",onClick:ne,children:""})]})]}):A.jsxs("button",{className:"btn-add-attraction",style:{width:"100%",padding:"16px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1rem",fontWeight:700},onClick:je,children:[A.jsx(Ql,{size:20})," "]})]}),A.jsxs("div",{className:"quick-actions",children:[A.jsxs("button",{className:"action-btn",onClick:()=>nt(""),children:[A.jsx(ay,{size:24}),A.jsx("span",{children:""})]}),A.jsxs("button",{className:"action-btn",onClick:()=>nt(""),children:[A.jsx(og,{size:24}),A.jsx("span",{children:""})]}),A.jsxs("button",{className:"action-btn",onClick:()=>nt(""),children:[A.jsx(wm,{size:24}),A.jsx("span",{children:""})]}),A.jsxs("button",{className:"action-btn",onClick:()=>nt(" "),children:[A.jsx(og,{size:24}),A.jsx("span",{children:""})]})]}),A.jsxs("h3",{className:"section-title",style:{marginTop:"24px"},children:[A.jsx(ry,{className:"inline-icon",size:20})," "]}),A.jsxs("div",{className:"address-card",style:{padding:"16px"},children:[A.jsxs("div",{style:{backgroundColor:"rgba(52, 88, 153, 0.05)",padding:"16px",borderRadius:"12px",marginBottom:"16px",border:"1px solid rgba(52, 88, 153, 0.1)"},children:[A.jsx("h4",{style:{fontSize:"0.95rem",color:"var(--fuji-blue)",marginBottom:"12px",display:"flex",alignItems:"center",gap:"6px"},children:" "}),A.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-dark)",lineHeight:1.6},children:[A.jsx("p",{style:{margin:"0 0 6px",color:"var(--text-main)"},children:A.jsx("b",{children:""})}),A.jsxs("ol",{style:{paddingLeft:"20px",margin:"0 0 16px",color:"var(--text-light)"},children:[A.jsx("li",{children:" "}),A.jsx("li",{children:" LINE "})]}),A.jsx("p",{style:{margin:"0 0 6px",color:"var(--text-main)"},children:A.jsx("b",{children:""})}),A.jsxs("ol",{style:{paddingLeft:"20px",margin:"0 0 16px",color:"var(--text-light)"},children:[A.jsxs("li",{children:[" LINE ",A.jsx("b",{children:"  "})," App "]}),A.jsxs("li",{children:[" LINE ",A.jsx("b",{children:""}),"   App  "]})]}),A.jsx("p",{style:{margin:"0 0 6px",color:"var(--text-main)"},children:A.jsx("b",{children:"QR Code"})}),A.jsx("ol",{style:{paddingLeft:"20px",margin:0,color:"var(--text-light)"},children:A.jsx("li",{children:"QR  QR Code"})})]})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",flex:1},onClick:ut,children:[A.jsx(A2,{size:16,style:{display:"inline",marginRight:"4px"}})," QR "]}),A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",flex:1,backgroundColor:"rgba(52, 88, 153, 0.1)",borderColor:"transparent",color:"var(--fuji-blue)"},onClick:()=>j("scan"),children:[A.jsx(Ac,{size:16,style:{display:"inline",marginRight:"4px"}})," "]})]}),A.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[A.jsxs("button",{className:"btn-edit",style:{flex:1,fontSize:"0.85rem"},onClick:st,children:[A.jsx(pd,{size:14,style:{display:"inline",marginRight:"4px"}})," "]}),A.jsx("input",{type:"file",id:"trip-file-input",accept:".zip,.txt,.trip,.json",style:{display:"none"},onChange:Qt}),A.jsxs("button",{className:"btn-edit",style:{flex:1,fontSize:"0.85rem"},disabled:k,onClick:()=>document.getElementById("trip-file-input")?.click(),children:[A.jsx(pd,{size:14,style:{display:"inline",marginRight:"4px"}})," ",k?"...":""]})]}),R?A.jsxs("div",{style:{marginTop:"8px"},children:[A.jsx("textarea",{placeholder:"",value:N,onChange:D=>_(D.target.value),style:{width:"100%",height:"60px",padding:"8px",borderRadius:"8px",border:"1px solid #ddd",marginBottom:"8px",fontSize:"0.85rem"}}),A.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[A.jsx("button",{className:"btn-save",style:{flex:"1 1 120px"},onClick:xt,children:""}),A.jsx("button",{className:"btn-cancel",style:{flex:"1 1 120px"},onClick:()=>T(!1),children:""})]})]}):A.jsx("button",{style:{background:"none",border:"none",color:"var(--text-light)",fontSize:"0.8rem",cursor:"pointer",textDecoration:"underline",marginTop:"4px"},onClick:()=>T(!0),children:""})]}),z&&A.jsx(Iv,{mode:z,data:P,onScanResult:Ct,onClose:()=>j(null),onFallbackFile:st}),A.jsx("h3",{className:"section-title",style:{marginTop:"24px"},children:" "}),A.jsxs("div",{className:"address-card",style:{padding:"16px"},children:[A.jsxs("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"12px"},children:["",d.location,""]}),A.jsxs("div",{style:{display:"flex",gap:"8px",flexDirection:"column"},children:[A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",marginTop:0},onClick:()=>window.open(`https://www.google.com/search?q=${encodeURIComponent(`${d.location} weather forecast `)}`,"_blank"),children:["  ",d.location," "]}),A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",marginTop:0,backgroundColor:"rgba(52, 88, 153, 0.1)",borderColor:"transparent"},onClick:()=>window.open(`https://www.google.com/search?q=${encodeURIComponent(`${d.location}   `)}`,"_blank"),children:["  ",d.location," "]}),d.location&&(d.location.toLowerCase().includes("japan")||d.location.includes("")||d.location.includes("")||d.location.includes("")||d.location.includes("")||d.location.includes("")||d.location.includes(""))&&A.jsx("button",{className:"btn-add-attraction",style:{padding:"12px",marginTop:0,backgroundColor:"rgba(52, 88, 153, 0.05)",borderColor:"transparent"},onClick:()=>window.open(`https://tenki.jp/search/?keyword=${encodeURIComponent(d.location)}`,"_blank"),children:" tenki.jp "})]})]}),A.jsxs("h3",{className:"section-title",style:{marginTop:"24px"},children:[A.jsx(ug,{className:"inline-icon",size:20})," "]}),A.jsxs("div",{className:"address-card",style:{padding:"16px"},children:[A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"12px",lineHeight:1.5},children:" APP "}),A.jsxs("div",{style:{display:"flex",gap:"8px",flexDirection:"column"},children:[A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",marginTop:0,justifyContent:"flex-start"},onClick:()=>window.open("https://support.google.com/maps/answer/7326816?hl=zh-Hant&co=GENIE.Platform%3DiOS","_blank"),children:[A.jsx(Sc,{size:18})," Google Maps  ()"]}),A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",marginTop:0,backgroundColor:"rgba(52, 88, 153, 0.1)",borderColor:"transparent",justifyContent:"flex-start"},onClick:()=>window.location.href="findmy://",children:[A.jsx(Hm,{size:18})," iPhone App"]}),A.jsxs("button",{className:"btn-add-attraction",style:{padding:"12px",marginTop:0,backgroundColor:"rgba(52, 88, 153, 0.1)",borderColor:"transparent",justifyContent:"flex-start"},onClick:()=>window.open("https://apps.apple.com/tw/app/whoo-a-location-sharing-app/id1661152011","_blank"),children:[A.jsx(ug,{size:18})," Whoo  (Zenly )"]})]})]}),A.jsxs("div",{className:"address-card",style:{padding:"16px",marginTop:"24px",backgroundColor:"#fff",border:"1px solid #ffccc7"},children:[A.jsx("h4",{style:{fontSize:"0.95rem",color:"#cf1322",marginBottom:"8px"},children:" "}),A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"12px",lineHeight:"1.5"},children:""}),A.jsx("button",{onClick:()=>{window.location.href=window.location.pathname+"?v="+new Date().getTime()},style:{width:"100%",padding:"12px",backgroundColor:"#cf1322",color:"white",border:"none",borderRadius:"8px",fontWeight:"bold",cursor:"pointer"},children:" ()"})]})]})}function Ov(u){const[d,f]=oe.useState([]),[p,m]=oe.useState(!0);return oe.useEffect(()=>{(async()=>{if(u)try{const y=await jf.getItem(`${u}_albums`);f(y||[])}catch(y){console.error("Failed to load albums",y)}finally{m(!1)}})()},[u]),{albums:d,loading:p,saveAlbumLink:async(v,y)=>{if(!u)return;const N=[...d],_=N.findIndex(R=>R.dayId===v);_>=0?N[_]={dayId:v,url:y}:N.push({dayId:v,url:y}),f(N),await jf.setItem(`${u}_albums`,N)},removeAlbumLink:async v=>{if(!u)return;const y=d.filter(N=>N.dayId!==v);f(y),await jf.setItem(`${u}_albums`,y)},getUrlForDay:v=>d.find(y=>y.dayId===v)?.url||""}}function Mv({tripId:u}){const{days:d,loading:f}=O2(u),{loading:p,saveAlbumLink:m,removeAlbumLink:g,getUrlForDay:E}=Ov(u),[C,v]=oe.useState(null),[y,N]=oe.useState("");if(f||p)return A.jsx("div",{className:"tab-placeholder fade-in",children:"..."});const _=(T,k)=>{N(k),v(T)},R=async T=>{if(!y.trim())await g(T);else{let k=y.trim();!k.startsWith("http://")&&!k.startsWith("https://")&&(k="https://"+k),await m(T,k)}v(null)};return A.jsxs("div",{className:"fade-in",style:{paddingBottom:"80px"},children:[A.jsxs("div",{style:{backgroundColor:"var(--sage-green)",color:"white",padding:"24px 20px",borderRadius:"16px",marginBottom:"24px",boxShadow:"0 8px 16px rgba(135, 169, 107, 0.2)"},children:[A.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:800,marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[A.jsx(w2,{size:24})," "]}),A.jsx("p",{style:{opacity:.9,fontSize:"0.9rem",lineHeight:1.5},children:" Google Photos  LINE "})]}),A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[d.length===0&&A.jsx("div",{style:{textAlign:"center",color:"var(--text-light)",padding:"40px 20px"},children:""}),d.map((T,k)=>{const I=E(T.id),z=C===T.id;return A.jsxs("div",{className:"address-card",style:{padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[A.jsxs("h3",{style:{fontSize:"1.1rem",fontWeight:700,color:"var(--text-main)",display:"flex",alignItems:"center",gap:"8px"},children:[A.jsxs("span",{style:{backgroundColor:"var(--sage-green)",color:"white",padding:"2px 8px",borderRadius:"8px",fontSize:"0.8rem"},children:["Day ",k+1]}),T.date]}),!z&&I&&A.jsxs("div",{style:{display:"flex",gap:"8px"},children:[A.jsx("button",{onClick:()=>_(T.id,I),style:{background:"none",border:"none",color:"var(--text-light)",padding:"4px"},children:A.jsx(C2,{size:18})}),A.jsx("button",{onClick:()=>g(T.id),style:{background:"none",border:"none",color:"#ff4d4f",padding:"4px"},children:A.jsx(rs,{size:18})})]})]}),z?A.jsxs("div",{style:{display:"flex",gap:"8px",flexDirection:"column"},children:[A.jsxs("div",{style:{position:"relative"},children:[A.jsx(md,{size:16,style:{position:"absolute",left:"10px",top:"12px",color:"#999"}}),A.jsx("input",{type:"url",className:"album-input",value:y,onChange:j=>N(j.target.value),placeholder:" Google  ()",style:{width:"100%",padding:"10px 10px 10px 32px",borderRadius:"8px",border:"1px solid var(--sage-green)",fontSize:"0.95rem"},autoFocus:!0})]}),A.jsxs("div",{style:{display:"flex",gap:"8px"},children:[A.jsx("button",{onClick:()=>v(null),style:{flex:1,padding:"10px",borderRadius:"8px",border:"1px solid #ddd",background:"transparent",fontWeight:600,color:"var(--text-light)"},children:""}),A.jsxs("button",{onClick:()=>R(T.id),style:{flex:1,padding:"10px",borderRadius:"8px",border:"none",background:"var(--sage-green)",fontWeight:600,color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[A.jsx($m,{size:16})," "]})]})]}):I?A.jsxs("a",{href:I,target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"var(--snow-white)",border:"2px solid var(--sage-green)",color:"var(--sage-green)",padding:"12px",borderRadius:"12px",fontWeight:600,textDecoration:"none"},children:[A.jsx(b2,{size:18}),"  / "]}):A.jsxs("button",{onClick:()=>_(T.id,""),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",backgroundColor:"#f0f0f0",border:"1px dashed #ccc",color:"var(--text-light)",padding:"12px",borderRadius:"12px",fontWeight:500},children:[A.jsx(md,{size:18}),"  ( Line )"]})]},T.id)})]})]})}function Bv({tripId:u}){const{config:d}=ka(u),[f,p]=oe.useState(null),[m,g]=oe.useState(!0),[E,C]=oe.useState(""),[v,y]=oe.useState(null),[N,_]=oe.useState(!0),[R,T]=oe.useState("1000"),k=d.baseCurrency||"TWD",I=d.tripCurrency||"JPY",z=async(V=!1)=>{g(!0),C("");try{const L=`exchange_${I}_to_${k}`;if(!V){const xe=await fn.getItem(L);if(xe&&Date.now()/1e3-xe.time_last_update_unix<86400&&xe.rates[k]){p(xe.rates[k]),y(new Date(xe.time_last_update_unix*1e3)),g(!1);return}}const Q=await fetch(`https://open.er-api.com/v6/latest/${I}`);if(!Q.ok)throw new Error("Network response was not ok");const G=await Q.json();if(G.rates&&G.rates[k])p(G.rates[k]),y(new Date(G.time_last_update_unix*1e3)),await fn.setItem(L,G);else throw new Error("Currency not found in response")}catch(L){console.error(L),C("");const Q=`exchange_${I}_to_${k}`,G=await fn.getItem(Q);G&&G.rates[k]&&(p(G.rates[k]),y(new Date(G.time_last_update_unix*1e3)))}finally{g(!1)}};oe.useEffect(()=>{z()},[I,k]);const j=()=>{if(_(!N),f&&R){const V=parseFloat(R);isNaN(V)||T(N?(V*f).toFixed(2).replace(/\.00$/,""):(V/f).toFixed(2).replace(/\.00$/,""))}},P=()=>{if(!f||!R)return"0";const V=parseFloat(R);return isNaN(V)?"0":N?(V*f).toFixed(2).replace(/\.00$/,""):(V/f).toFixed(2).replace(/\.00$/,"")},H=N?I:k,K=N?k:I,Z=N?[100,500,1e3,5e3,1e4]:[100,500,1e3,2e3,5e3];return A.jsxs("div",{className:"exchange-view fade-in",style:{padding:"24px",maxWidth:"800px",margin:"0 auto",paddingBottom:"100px"},children:[A.jsxs("h2",{className:"section-title",children:[A.jsx(x2,{className:"inline-icon",size:24})," "]}),A.jsxs("div",{style:{backgroundColor:"white",padding:"24px",borderRadius:"20px",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",marginBottom:"24px"},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[A.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-light)"},children:[": 1 ",I," = ",f?f.toFixed(4):"..."," ",k,A.jsx("br",{}),A.jsx("span",{style:{fontSize:"0.75rem",opacity:.7},children:v?`: ${v.toLocaleString()}`:""})]}),A.jsxs("button",{onClick:()=>z(!0),disabled:m,style:{padding:"8px 12px",borderRadius:"12px",border:"1px solid #eee",backgroundColor:"var(--snow-white)",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.85rem"},children:[A.jsx(Qm,{size:14,className:m?"spinning":""}),""]})]}),E&&A.jsx("div",{style:{color:"#e74c3c",fontSize:"0.85rem",marginBottom:"16px",padding:"12px",backgroundColor:"rgba(231, 76, 60, 0.1)",borderRadius:"8px"},children:E}),A.jsxs("div",{style:{position:"relative"},children:[A.jsxs("div",{style:{padding:"16px",backgroundColor:"var(--snow-white)",borderRadius:"16px",marginBottom:"8px"},children:[A.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginBottom:"8px"},children:[" (",H,")"]}),A.jsx("input",{type:"number",value:R,onChange:V=>T(V.target.value),placeholder:"0",style:{width:"100%",fontSize:"2rem",fontWeight:700,border:"none",backgroundColor:"transparent",outline:"none",color:"var(--text-main)"}})]}),A.jsx("button",{onClick:j,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"white",border:"1px solid #eee",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:2},children:A.jsx(tm,{size:18,color:"var(--fuji-blue)"})}),A.jsxs("div",{style:{padding:"16px",backgroundColor:"var(--fuji-blue)",borderRadius:"16px",color:"white"},children:[A.jsxs("div",{style:{fontSize:"0.85rem",opacity:.8,marginBottom:"8px"},children:[" (",K,")"]}),A.jsx("div",{style:{fontSize:"2rem",fontWeight:700,wordBreak:"break-all"},children:P()})]})]})]}),A.jsxs("h3",{style:{fontSize:"1.1rem",marginBottom:"16px"},children:[" (",I,"  ",k,")"]}),A.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"12px"},children:Z.map(V=>A.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"16px",border:"1px solid #eee",display:"flex",flexDirection:"column",gap:"4px"},children:[A.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-main)"},children:[V," ",A.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-light)",fontWeight:400},children:I})]}),A.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"var(--sage-green)"},children:[f?(V*f).toFixed(0):"..."," ",A.jsx("span",{style:{fontSize:"0.8rem",opacity:.8,fontWeight:400},children:k})]})]},V))}),A.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--text-light)",textAlign:"center",marginTop:"32px"},children:[": Open Exchange Rates API",A.jsx("br",{}),""]})]})}const kv=u=>{const d=u.toLowerCase();return d.includes("")||d.includes("tokyo")||d.includes("japan")?{name:"",code:"ja"}:d.includes("")||d.includes("seoul")||d.includes("korea")?{name:"",code:"ko"}:d.includes("")||d.includes("bangkok")||d.includes("thailand")?{name:"",code:"th"}:d.includes("")||d.includes("vietnam")?{name:"",code:"vi"}:{name:"",code:"en"}};function Lv({tripId:u}){const{config:d}=ka(u),f=kv(d.location||""),p=`https://translate.google.com/?sl=zh-TW&tl=${f.code}&op=translate`,m=()=>{window.open(p,"_blank","noopener,noreferrer")};return A.jsxs("div",{className:"translation-view fade-in",style:{height:"calc(100vh - 180px)",display:"flex",flexDirection:"column"},children:[A.jsx("div",{style:{backgroundColor:"white",padding:"16px 20px",borderRadius:"16px",marginBottom:"24px",border:"1px solid #eee",display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0},children:A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[A.jsx("div",{style:{backgroundColor:"var(--fuji-blue-light)",padding:"10px",borderRadius:"12px"},children:A.jsx(xd,{size:24,color:"var(--fuji-blue)"})}),A.jsxs("div",{children:[A.jsx("h3",{style:{margin:0,color:"var(--text-main)",fontSize:"1.1rem"},children:""}),A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px",fontSize:"0.85rem",color:"var(--text-light)"},children:[A.jsx(Nm,{size:14}),"   ",f.name]})]})]})}),A.jsxs("div",{style:{flex:1,backgroundColor:"white",borderRadius:"16px",padding:"32px 24px",border:"1px solid #eee",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",gap:"24px"},children:[A.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:"#f0fdf4",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},children:A.jsx(xd,{size:40,color:"#16a34a"})}),A.jsxs("div",{children:[A.jsx("h2",{style:{fontSize:"1.3rem",color:"var(--text-main)",margin:"0 0 12px 0"},children:"Google "}),A.jsxs("p",{style:{fontSize:"0.95rem",color:"var(--text-light)",lineHeight:"1.6",margin:0},children:[" Google ",A.jsx("br",{}),""]})]}),A.jsxs("div",{style:{width:"100%",marginTop:"16px"},children:[A.jsxs("button",{className:"btn-primary pulse-animation",onClick:m,style:{width:"100%",padding:"16px",fontSize:"1.1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",backgroundColor:"#16a34a",borderRadius:"16px"},children:[" Google  ",A.jsx(b2,{size:20})]}),A.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-light)",marginTop:"20px",lineHeight:"1.5"},children:"  Google  App"})]})]})]})}function mp(){const[u,d]=oe.useState([]),[f,p]=oe.useState(null),[m,g]=oe.useState(!0),E=async R=>{const{importTripData:T}=await Nd(async()=>{const{importTripData:K}=await Promise.resolve().then(()=>zd);return{importTripData:K}},void 0),k=`trip_${Date.now()}`;if(!await T(k,R))return null;const z=await fn.getItem(`${k}_app_config`),j={id:k,name:z?.tripName||"",createdAt:Date.now()},H=[...await fn.getItem("trips_list")||[],j];return await fn.setItem("trips_list",H),await fn.setItem("active_trip_id",k),d(H),p(k),k};oe.useEffect(()=>{v()},[]);const C=async R=>{const T=await fn.getItem("app_config");if(T&&R.length===0){const k="trip_legacy",I={id:k,name:T.tripName||"",createdAt:Date.now()};R.push(I),await fn.setItem("trips_list",R),await fn.setItem(`${k}_app_config`,T),await fn.removeItem("app_config");const z=await Sn.getItem("dayOrder");if(z){await Sn.setItem(`${k}_dayOrder`,z);for(const P of z){const H=await Sn.getItem(P);H&&(await Sn.setItem(`${k}_${P}`,H),await Sn.removeItem(P))}await Sn.removeItem("dayOrder")}const j=await Nr.keys();for(const P of j){const H=await Nr.getItem(P);H&&(await Nr.setItem(`${k}_${P}`,H),await Nr.removeItem(P))}return k}return null},v=async()=>{try{let R=await fn.getItem("trips_list")||[];if(R.length===0){const k=await C(R);k&&await fn.setItem("active_trip_id",k)}const T=await fn.getItem("active_trip_id")||(R.length>0?R[0].id:null);d(R),p(T)}catch(R){console.error("Failed to load trips",R)}finally{g(!1)}};return{trips:u,activeTripId:f,loading:m,createTrip:async(R,T,k)=>{const I={id:`trip_${Date.now()}`,name:R,createdAt:Date.now()},z=[...u,I];return await fn.setItem("trips_list",z),await fn.setItem(`${I.id}_app_config`,{tripName:R,location:"",startDate:T,endDate:k,accommodationAddress:""}),await fn.setItem("active_trip_id",I.id),d(z),p(I.id),I.id},selectTrip:async R=>{R?await fn.setItem("active_trip_id",R):await fn.removeItem("active_trip_id"),p(R)},deleteTrip:async R=>{if(window.prompt(`
 "delete" `)!=="delete")return;const k=u.filter(I=>I.id!==R);if(await fn.setItem("trips_list",k),f===R){const I=k.length>0?k[0].id:null;await fn.setItem("active_trip_id",I),p(I)}else d([...k]);try{await fn.removeItem(`${R}_app_config`);const I=await Sn.getItem(`${R}_dayOrder`);if(I){for(const j of I)await Sn.removeItem(`${R}_${j}`);await Sn.removeItem(`${R}_dayOrder`)}const z=await Nr.keys();for(const j of z)j.startsWith(`${R}_`)&&await Nr.removeItem(j)}catch(I){console.error("Failed to clean up trip resources",I)}},importNewTrip:E}}function jv({onSelectTrip:u}){const{trips:d,loading:f,createTrip:p,deleteTrip:m}=mp(),[g,E]=oe.useState(""),[C,v]=oe.useState(""),[y,N]=oe.useState(""),[_,R]=oe.useState(!1);if(f)return A.jsx("div",{className:"tab-placeholder fade-in",children:"..."});const T=async()=>{if(!g.trim()||!C||!y){alert("");return}const k=await p(g.trim(),C,y);u(k),E(""),v(""),N(""),R(!1)};return A.jsxs("div",{className:"trip-dashboard fade-in",style:{padding:"24px",maxWidth:"1200px",margin:"0 auto",height:"100vh",overflowY:"auto"},children:[A.jsxs("div",{style:{textAlign:"center",marginBottom:"32px",marginTop:"40px"},children:[A.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:"var(--fuji-blue)",borderRadius:"24px",margin:"0 auto 16px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 8px 24px rgba(52, 88, 153, 0.3)"},children:A.jsx(Sc,{size:40})}),A.jsx("h1",{style:{fontSize:"2rem",color:"var(--text-main)",marginBottom:"8px"},children:""}),A.jsx("p",{style:{color:"var(--text-light)"},children:""})]}),A.jsxs("button",{className:"btn-add-attraction",style:{width:"100%",marginBottom:"24px",padding:"16px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",fontSize:"1.2rem",fontWeight:"bold"},onClick:()=>R(!_),children:[A.jsx(Ql,{size:24})," "]}),_&&A.jsxs("div",{className:"address-card fade-in",style:{marginBottom:"24px",padding:"20px"},children:[A.jsx("h3",{style:{marginBottom:"16px"},children:""}),A.jsx("input",{type:"text",placeholder:"2025 ",value:g,onChange:k=>E(k.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",marginBottom:"16px"},autoFocus:!0}),A.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[A.jsxs("div",{style:{flex:1,minWidth:"130px"},children:[A.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-light)",display:"block",marginBottom:"4px"},children:""}),A.jsx("input",{type:"date",value:C,onChange:k=>v(k.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd"}})]}),A.jsxs("div",{style:{flex:1},children:[A.jsx("label",{style:{fontSize:"0.85rem",color:"var(--text-light)",display:"block",marginBottom:"4px"},children:""}),A.jsx("input",{type:"date",value:y,min:C,onChange:k=>N(k.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ddd"}})]})]}),A.jsxs("div",{style:{display:"flex",gap:"12px"},children:[A.jsx("button",{className:"btn-cancel",style:{flex:1},onClick:()=>R(!1),children:""}),A.jsx("button",{className:"btn-save",style:{flex:1},onClick:T,children:""})]})]}),A.jsxs("h3",{style:{fontSize:"1.2rem",color:"var(--text-dark)",marginBottom:"16px"},children:[" (",d.length,")"]}),A.jsx("div",{className:"trip-grid desktop-grid",style:{marginBottom:"100px"},children:d.length===0&&!_?A.jsx("div",{className:"empty-state",style:{padding:"40px 20px",borderRadius:"16px",border:"2px dashed #ddd"},children:""}):d.map(k=>A.jsxs("div",{className:"address-card",style:{padding:"20px",display:"flex",flexDirection:"column",cursor:"pointer",transition:"transform 0.2s",position:"relative"},onClick:()=>u(k.id),children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[A.jsx("div",{style:{backgroundColor:"rgba(52, 88, 153, 0.1)",color:"var(--fuji-blue)",padding:"10px",borderRadius:"12px"},children:A.jsx(m2,{size:24})}),A.jsxs("div",{children:[A.jsx("h4",{style:{fontSize:"1.2rem",color:"var(--text-main)"},children:k.name}),A.jsxs("p",{style:{fontSize:"0.85rem",color:"#999"},children:[" ",new Date(k.createdAt).toLocaleDateString()]})]})]}),A.jsx("button",{className:"btn-delete-ticket",style:{position:"absolute",top:"20px",right:"20px",backgroundColor:"transparent",color:"#ccc"},onClick:I=>{I.stopPropagation(),m(k.id)},children:A.jsx(rs,{size:20})})]},k.id))})]})}function zv(){const[u,d]=oe.useState("itinerary"),[f,p]=oe.useState(!1),[m,g]=oe.useState(!1),{activeTripId:E,selectTrip:C,importNewTrip:v,loading:y}=mp();return oe.useEffect(()=>{qx().then(()=>p(!0))},[]),oe.useEffect(()=>{if(!f)return;const _=new URLSearchParams(window.location.search).get("d");_&&(window.history.replaceState({},document.title,window.location.pathname),(async()=>{g(!0);try{const{fetchFromDpaste:T}=await Nd(async()=>{const{fetchFromDpaste:z}=await Promise.resolve().then(()=>zd);return{fetchFromDpaste:z}},void 0),k=await T(_);await v(k)&&(alert(""),window.location.reload())}catch(T){alert(": "+T.message)}finally{g(!1)}})())},[f,v]),!f||y?A.jsx("div",{className:"app-container",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--fuji-blue)",color:"white"},children:"..."}):m?A.jsxs("div",{className:"app-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"var(--fuji-blue)",color:"white"},children:[A.jsx("div",{style:{fontSize:"2rem",marginBottom:"16px"},children:""}),A.jsx("div",{children:"..."})]}):E?A.jsxs("div",{className:"app-container",children:[A.jsx(by,{tripId:E,onBack:()=>C(null)}),A.jsxs("main",{className:"main-content",children:[A.jsx("div",{style:{display:u==="itinerary"?"block":"none",height:"100%"},children:A.jsx(mb,{tripId:E})}),A.jsx("div",{style:{display:u==="expense"?"block":"none",height:"100%"},children:A.jsx(wb,{tripId:E})}),A.jsx("div",{style:{display:u==="exchange"?"block":"none",height:"100%"},children:A.jsx(Bv,{tripId:E})}),A.jsx("div",{style:{display:u==="translation"?"block":"none",height:"100%"},children:A.jsx(Lv,{tripId:E})}),A.jsx("div",{style:{display:u==="ticket"?"block":"none",height:"100%"},children:A.jsx(Eb,{tripId:E})}),A.jsx("div",{style:{display:u==="checklist"?"block":"none",height:"100%"},children:A.jsx(_b,{tripId:E})}),A.jsx("div",{style:{display:u==="album"?"block":"none",height:"100%"},children:A.jsx(Mv,{tripId:E})}),A.jsx("div",{style:{display:u==="settings"?"block":"none",height:"100%"},children:A.jsx(Dv,{tripId:E})})]}),A.jsx(vy,{activeTab:u,onTabChange:d})]}):A.jsx("div",{className:"app-container",children:A.jsx(jv,{onSelectTrip:C})})}Gx.createRoot(document.getElementById("root")).render(A.jsx(oe.StrictMode,{children:A.jsx(zv,{})}));
